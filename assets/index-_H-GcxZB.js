function DS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Le(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var AR={exports:{}},Oy={},OR={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th=Symbol.for("react.element"),ZG=Symbol.for("react.portal"),e8=Symbol.for("react.fragment"),t8=Symbol.for("react.strict_mode"),n8=Symbol.for("react.profiler"),r8=Symbol.for("react.provider"),s8=Symbol.for("react.context"),i8=Symbol.for("react.forward_ref"),o8=Symbol.for("react.suspense"),a8=Symbol.for("react.memo"),l8=Symbol.for("react.lazy"),o_=Symbol.iterator;function u8(t){return t===null||typeof t!="object"?null:(t=o_&&t[o_]||t["@@iterator"],typeof t=="function"?t:null)}var RR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PR=Object.assign,DR={};function yc(t,e,n){this.props=t,this.context=e,this.refs=DR,this.updater=n||RR}yc.prototype.isReactComponent={};yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FR(){}FR.prototype=yc.prototype;function LS(t,e,n){this.props=t,this.context=e,this.refs=DR,this.updater=n||RR}var MS=LS.prototype=new FR;MS.constructor=LS;PR(MS,yc.prototype);MS.isPureReactComponent=!0;var a_=Array.isArray,LR=Object.prototype.hasOwnProperty,BS={current:null},MR={key:!0,ref:!0,__self:!0,__source:!0};function BR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)LR.call(e,r)&&!MR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Th,type:t,key:i,ref:o,props:s,_owner:BS.current}}function c8(t,e){return{$$typeof:Th,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Th}function f8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var l_=/\/+/g;function Sv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?f8(""+t.key):e.toString(36)}function am(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Th:case ZG:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Sv(o,0):r,a_(s)?(n="",t!=null&&(n=t.replace(l_,"$&/")+"/"),am(s,e,n,"",function(u){return u})):s!=null&&(jS(s)&&(s=c8(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(l_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",a_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Sv(i,a);o+=am(i,e,n,l,s)}else if(l=u8(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Sv(i,a++),o+=am(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yp(t,e,n){if(t==null)return t;var r=[],s=0;return am(t,r,"","",function(i){return e.call(n,i,s++)}),r}function d8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nn={current:null},lm={transition:null},h8={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:lm,ReactCurrentOwner:BS};function jR(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:yp,forEach:function(t,e,n){yp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yp(t,function(){e++}),e},toArray:function(t){return yp(t,function(e){return e})||[]},only:function(t){if(!jS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=yc;$e.Fragment=e8;$e.Profiler=n8;$e.PureComponent=LS;$e.StrictMode=t8;$e.Suspense=o8;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h8;$e.act=jR;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=BS.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)LR.call(e,l)&&!MR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Th,type:t.type,key:s,ref:i,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:s8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r8,_context:t},t.Consumer=t};$e.createElement=BR;$e.createFactory=function(t){var e=BR.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:i8,render:t}};$e.isValidElement=jS;$e.lazy=function(t){return{$$typeof:l8,_payload:{_status:-1,_result:t},_init:d8}};$e.memo=function(t,e){return{$$typeof:a8,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=lm.transition;lm.transition={};try{t()}finally{lm.transition=e}};$e.unstable_act=jR;$e.useCallback=function(t,e){return Nn.current.useCallback(t,e)};$e.useContext=function(t){return Nn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Nn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return Nn.current.useEffect(t,e)};$e.useId=function(){return Nn.current.useId()};$e.useImperativeHandle=function(t,e,n){return Nn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return Nn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return Nn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return Nn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return Nn.current.useReducer(t,e,n)};$e.useRef=function(t){return Nn.current.useRef(t)};$e.useState=function(t){return Nn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return Nn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return Nn.current.useTransition()};$e.version="18.3.1";OR.exports=$e;var D=OR.exports;const F=Le(D),p8=DS({__proto__:null,default:F},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m8=D,g8=Symbol.for("react.element"),y8=Symbol.for("react.fragment"),v8=Object.prototype.hasOwnProperty,b8=m8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x8={key:!0,ref:!0,__self:!0,__source:!0};function UR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)v8.call(e,r)&&!x8.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:g8,type:t,key:i,ref:o,props:s,_owner:b8.current}}Oy.Fragment=y8;Oy.jsx=UR;Oy.jsxs=UR;AR.exports=Oy;var k=AR.exports,Z1={},zR={exports:{}},hr={},VR={exports:{}},WR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,H){var te=L.length;L.push(H);e:for(;0<te;){var ce=te-1>>>1,le=L[ce];if(0<s(le,H))L[ce]=H,L[te]=le,te=ce;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var H=L[0],te=L.pop();if(te!==H){L[0]=te;e:for(var ce=0,le=L.length,Ae=le>>>1;ce<Ae;){var vt=2*(ce+1)-1,en=L[vt],un=vt+1,kt=L[un];if(0>s(en,te))un<le&&0>s(kt,en)?(L[ce]=kt,L[un]=te,ce=un):(L[ce]=en,L[vt]=te,ce=vt);else if(un<le&&0>s(kt,te))L[ce]=kt,L[un]=te,ce=un;else break e}}return H}function s(L,H){var te=L.sortIndex-H.sortIndex;return te!==0?te:L.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=L)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function x(L){if(m=!1,b(L),!p)if(n(l)!==null)p=!0,G(w);else{var H=n(u);H!==null&&K(x,H.startTime-L)}}function w(L,H){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var te=d;try{for(b(H),f=n(l);f!==null&&(!(f.expirationTime>H)||L&&!R());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,d=f.priorityLevel;var le=ce(f.expirationTime<=H);H=t.unstable_now(),typeof le=="function"?f.callback=le:f===n(l)&&r(l),b(H)}else r(l);f=n(l)}if(f!==null)var Ae=!0;else{var vt=n(u);vt!==null&&K(x,vt.startTime-H),Ae=!1}return Ae}finally{f=null,d=te,h=!1}}var $=!1,E=null,T=-1,N=5,I=-1;function R(){return!(t.unstable_now()-I<N)}function P(){if(E!==null){var L=t.unstable_now();I=L;var H=!0;try{H=E(!0,L)}finally{H?M():($=!1,E=null)}}else $=!1}var M;if(typeof v=="function")M=function(){v(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=P,M=function(){W.postMessage(null)}}else M=function(){g(P,0)};function G(L){E=L,$||($=!0,M())}function K(L,H){T=g(function(){L(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,G(w))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var te=d;d=H;try{return L()}finally{d=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var te=d;d=L;try{return H()}finally{d=te}},t.unstable_scheduleCallback=function(L,H,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,L){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=te+le,L={id:c++,callback:H,priorityLevel:L,startTime:te,expirationTime:le,sortIndex:-1},te>ce?(L.sortIndex=te,e(u,L),n(l)===null&&L===n(u)&&(m?(y(T),T=-1):m=!0,K(x,te-ce))):(L.sortIndex=le,e(l,L),p||h||(p=!0,G(w))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var H=d;return function(){var te=d;d=H;try{return L.apply(this,arguments)}finally{d=te}}}})(WR);VR.exports=WR;var w8=VR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S8=D,fr=w8;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GR=new Set,ed={};function ml(t,e){Cu(t,e),Cu(t+"Capture",e)}function Cu(t,e){for(ed[t]=e,t=0;t<e.length;t++)GR.add(e[t])}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eb=Object.prototype.hasOwnProperty,$8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u_={},c_={};function E8(t){return eb.call(c_,t)?!0:eb.call(u_,t)?!1:$8.test(t)?c_[t]=!0:(u_[t]=!0,!1)}function T8(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _8(t,e,n,r){if(e===null||typeof e>"u"||T8(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){an[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];an[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){an[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){an[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){an[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){an[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){an[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){an[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){an[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var US=/[\-:]([a-z])/g;function zS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(US,zS);an[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(US,zS);an[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(US,zS);an[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){an[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});an.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){an[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function VS(t,e,n,r){var s=an.hasOwnProperty(e)?an[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_8(e,n,s,r)&&(n=null),r||s===null?E8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Oi=S8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vp=Symbol.for("react.element"),Vl=Symbol.for("react.portal"),Wl=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),tb=Symbol.for("react.profiler"),HR=Symbol.for("react.provider"),qR=Symbol.for("react.context"),GS=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),rb=Symbol.for("react.suspense_list"),HS=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),KR=Symbol.for("react.offscreen"),f_=Symbol.iterator;function tf(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,$v;function Ef(t){if($v===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$v=e&&e[1]||""}return`
`+$v+t}var Ev=!1;function Tv(t,e){if(!t||Ev)return"";Ev=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ev=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ef(t):""}function C8(t){switch(t.tag){case 5:return Ef(t.type);case 16:return Ef("Lazy");case 13:return Ef("Suspense");case 19:return Ef("SuspenseList");case 0:case 2:case 15:return t=Tv(t.type,!1),t;case 11:return t=Tv(t.type.render,!1),t;case 1:return t=Tv(t.type,!0),t;default:return""}}function sb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wl:return"Fragment";case Vl:return"Portal";case tb:return"Profiler";case WS:return"StrictMode";case nb:return"Suspense";case rb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qR:return(t.displayName||"Context")+".Consumer";case HR:return(t._context.displayName||"Context")+".Provider";case GS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case HS:return e=t.displayName||null,e!==null?e:sb(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return sb(t(e))}catch{}}return null}function I8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sb(e);case 8:return e===WS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function No(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function XR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N8(t){var e=XR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bp(t){t._valueTracker||(t._valueTracker=N8(t))}function YR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=XR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Om(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ib(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function d_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=No(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JR(t,e){e=e.checked,e!=null&&VS(t,"checked",e,!1)}function ob(t,e){JR(t,e);var n=No(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ab(t,e.type,n):e.hasOwnProperty("defaultValue")&&ab(t,e.type,No(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function h_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ab(t,e,n){(e!=="number"||Om(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tf=Array.isArray;function au(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+No(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function p_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Tf(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:No(n)}}function QR(t,e){var n=No(e.value),r=No(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function m_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ub(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xp,eP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xp=xp||document.createElement("div"),xp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function td(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k8=["Webkit","ms","Moz","O"];Object.keys(Ff).forEach(function(t){k8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ff[e]=Ff[t]})});function tP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ff.hasOwnProperty(t)&&Ff[t]?(""+e).trim():e+"px"}function nP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var A8=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cb(t,e){if(e){if(A8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function fb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var db=null;function qS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hb=null,lu=null,uu=null;function g_(t){if(t=Ih(t)){if(typeof hb!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Ly(e),hb(t.stateNode,t.type,e))}}function rP(t){lu?uu?uu.push(t):uu=[t]:lu=t}function sP(){if(lu){var t=lu,e=uu;if(uu=lu=null,g_(t),e)for(t=0;t<e.length;t++)g_(e[t])}}function iP(t,e){return t(e)}function oP(){}var _v=!1;function aP(t,e,n){if(_v)return t(e,n);_v=!0;try{return iP(t,e,n)}finally{_v=!1,(lu!==null||uu!==null)&&(oP(),sP())}}function nd(t,e){var n=t.stateNode;if(n===null)return null;var r=Ly(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var pb=!1;if($i)try{var nf={};Object.defineProperty(nf,"passive",{get:function(){pb=!0}}),window.addEventListener("test",nf,nf),window.removeEventListener("test",nf,nf)}catch{pb=!1}function O8(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Lf=!1,Rm=null,Pm=!1,mb=null,R8={onError:function(t){Lf=!0,Rm=t}};function P8(t,e,n,r,s,i,o,a,l){Lf=!1,Rm=null,O8.apply(R8,arguments)}function D8(t,e,n,r,s,i,o,a,l){if(P8.apply(this,arguments),Lf){if(Lf){var u=Rm;Lf=!1,Rm=null}else throw Error(X(198));Pm||(Pm=!0,mb=u)}}function gl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y_(t){if(gl(t)!==t)throw Error(X(188))}function F8(t){var e=t.alternate;if(!e){if(e=gl(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return y_(s),t;if(i===r)return y_(s),e;i=i.sibling}throw Error(X(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function uP(t){return t=F8(t),t!==null?cP(t):null}function cP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cP(t);if(e!==null)return e;t=t.sibling}return null}var fP=fr.unstable_scheduleCallback,v_=fr.unstable_cancelCallback,L8=fr.unstable_shouldYield,M8=fr.unstable_requestPaint,St=fr.unstable_now,B8=fr.unstable_getCurrentPriorityLevel,KS=fr.unstable_ImmediatePriority,dP=fr.unstable_UserBlockingPriority,Dm=fr.unstable_NormalPriority,j8=fr.unstable_LowPriority,hP=fr.unstable_IdlePriority,Ry=null,Ps=null;function U8(t){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(Ry,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:W8,z8=Math.log,V8=Math.LN2;function W8(t){return t>>>=0,t===0?32:31-(z8(t)/V8|0)|0}var wp=64,Sp=4194304;function _f(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=_f(a):(i&=o,i!==0&&(r=_f(i)))}else o=n&~s,o!==0?r=_f(o):i!==0&&(r=_f(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-us(e),s=1<<n,r|=t[n],e&=~s;return r}function G8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H8(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-us(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=G8(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function gb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pP(){var t=wp;return wp<<=1,!(wp&4194240)&&(wp=64),t}function Cv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _h(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=n}function q8(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-us(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function XS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-us(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Be=0;function mP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gP,YS,yP,vP,bP,yb=!1,$p=[],ho=null,po=null,mo=null,rd=new Map,sd=new Map,Qi=[],K8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b_(t,e){switch(t){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":rd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(e.pointerId)}}function rf(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ih(e),e!==null&&YS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function X8(t,e,n,r,s){switch(e){case"focusin":return ho=rf(ho,t,e,n,r,s),!0;case"dragenter":return po=rf(po,t,e,n,r,s),!0;case"mouseover":return mo=rf(mo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return rd.set(i,rf(rd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,sd.set(i,rf(sd.get(i)||null,t,e,n,r,s)),!0}return!1}function xP(t){var e=Ea(t.target);if(e!==null){var n=gl(e);if(n!==null){if(e=n.tag,e===13){if(e=lP(n),e!==null){t.blockedOn=e,bP(t.priority,function(){yP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function um(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);db=r,n.target.dispatchEvent(r),db=null}else return e=Ih(n),e!==null&&YS(e),t.blockedOn=n,!1;e.shift()}return!0}function x_(t,e,n){um(t)&&n.delete(e)}function Y8(){yb=!1,ho!==null&&um(ho)&&(ho=null),po!==null&&um(po)&&(po=null),mo!==null&&um(mo)&&(mo=null),rd.forEach(x_),sd.forEach(x_)}function sf(t,e){t.blockedOn===e&&(t.blockedOn=null,yb||(yb=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,Y8)))}function id(t){function e(s){return sf(s,t)}if(0<$p.length){sf($p[0],t);for(var n=1;n<$p.length;n++){var r=$p[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ho!==null&&sf(ho,t),po!==null&&sf(po,t),mo!==null&&sf(mo,t),rd.forEach(e),sd.forEach(e),n=0;n<Qi.length;n++)r=Qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)xP(n),n.blockedOn===null&&Qi.shift()}var cu=Oi.ReactCurrentBatchConfig,Lm=!0;function J8(t,e,n,r){var s=Be,i=cu.transition;cu.transition=null;try{Be=1,JS(t,e,n,r)}finally{Be=s,cu.transition=i}}function Q8(t,e,n,r){var s=Be,i=cu.transition;cu.transition=null;try{Be=4,JS(t,e,n,r)}finally{Be=s,cu.transition=i}}function JS(t,e,n,r){if(Lm){var s=vb(t,e,n,r);if(s===null)Lv(t,e,r,Mm,n),b_(t,r);else if(X8(s,t,e,n,r))r.stopPropagation();else if(b_(t,r),e&4&&-1<K8.indexOf(t)){for(;s!==null;){var i=Ih(s);if(i!==null&&gP(i),i=vb(t,e,n,r),i===null&&Lv(t,e,r,Mm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lv(t,e,r,null,n)}}var Mm=null;function vb(t,e,n,r){if(Mm=null,t=qS(r),t=Ea(t),t!==null)if(e=gl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mm=t,null}function wP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B8()){case KS:return 1;case dP:return 4;case Dm:case j8:return 16;case hP:return 536870912;default:return 16}default:return 16}}var so=null,QS=null,cm=null;function SP(){if(cm)return cm;var t,e=QS,n=e.length,r,s="value"in so?so.value:so.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cm=s.slice(t,1<r?1-r:void 0)}function fm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ep(){return!0}function w_(){return!1}function pr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ep:w_,this.isPropagationStopped=w_,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ep)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ep)},persist:function(){},isPersistent:Ep}),e}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ZS=pr(vc),Ch=yt({},vc,{view:0,detail:0}),Z8=pr(Ch),Iv,Nv,of,Py=yt({},Ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==of&&(of&&t.type==="mousemove"?(Iv=t.screenX-of.screenX,Nv=t.screenY-of.screenY):Nv=Iv=0,of=t),Iv)},movementY:function(t){return"movementY"in t?t.movementY:Nv}}),S_=pr(Py),eH=yt({},Py,{dataTransfer:0}),tH=pr(eH),nH=yt({},Ch,{relatedTarget:0}),kv=pr(nH),rH=yt({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),sH=pr(rH),iH=yt({},vc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oH=pr(iH),aH=yt({},vc,{data:0}),$_=pr(aH),lH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cH[t])?!!e[t]:!1}function e2(){return fH}var dH=yt({},Ch,{key:function(t){if(t.key){var e=lH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e2,charCode:function(t){return t.type==="keypress"?fm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hH=pr(dH),pH=yt({},Py,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E_=pr(pH),mH=yt({},Ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e2}),gH=pr(mH),yH=yt({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),vH=pr(yH),bH=yt({},Py,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xH=pr(bH),wH=[9,13,27,32],t2=$i&&"CompositionEvent"in window,Mf=null;$i&&"documentMode"in document&&(Mf=document.documentMode);var SH=$i&&"TextEvent"in window&&!Mf,$P=$i&&(!t2||Mf&&8<Mf&&11>=Mf),T_=" ",__=!1;function EP(t,e){switch(t){case"keyup":return wH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gl=!1;function $H(t,e){switch(t){case"compositionend":return TP(e);case"keypress":return e.which!==32?null:(__=!0,T_);case"textInput":return t=e.data,t===T_&&__?null:t;default:return null}}function EH(t,e){if(Gl)return t==="compositionend"||!t2&&EP(t,e)?(t=SP(),cm=QS=so=null,Gl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $P&&e.locale!=="ko"?null:e.data;default:return null}}var TH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TH[t.type]:e==="textarea"}function _P(t,e,n,r){rP(r),e=Bm(e,"onChange"),0<e.length&&(n=new ZS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bf=null,od=null;function _H(t){LP(t,0)}function Dy(t){var e=Kl(t);if(YR(e))return t}function CH(t,e){if(t==="change")return e}var CP=!1;if($i){var Av;if($i){var Ov="oninput"in document;if(!Ov){var I_=document.createElement("div");I_.setAttribute("oninput","return;"),Ov=typeof I_.oninput=="function"}Av=Ov}else Av=!1;CP=Av&&(!document.documentMode||9<document.documentMode)}function N_(){Bf&&(Bf.detachEvent("onpropertychange",IP),od=Bf=null)}function IP(t){if(t.propertyName==="value"&&Dy(od)){var e=[];_P(e,od,t,qS(t)),aP(_H,e)}}function IH(t,e,n){t==="focusin"?(N_(),Bf=e,od=n,Bf.attachEvent("onpropertychange",IP)):t==="focusout"&&N_()}function NH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dy(od)}function kH(t,e){if(t==="click")return Dy(e)}function AH(t,e){if(t==="input"||t==="change")return Dy(e)}function OH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gs=typeof Object.is=="function"?Object.is:OH;function ad(t,e){if(gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!eb.call(e,s)||!gs(t[s],e[s]))return!1}return!0}function k_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var n=k_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=k_(n)}}function NP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kP(){for(var t=window,e=Om();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Om(t.document)}return e}function n2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RH(t){var e=kP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NP(n.ownerDocument.documentElement,n)){if(r!==null&&n2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=A_(n,i);var o=A_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PH=$i&&"documentMode"in document&&11>=document.documentMode,Hl=null,bb=null,jf=null,xb=!1;function O_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xb||Hl==null||Hl!==Om(r)||(r=Hl,"selectionStart"in r&&n2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jf&&ad(jf,r)||(jf=r,r=Bm(bb,"onSelect"),0<r.length&&(e=new ZS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hl)))}function Tp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ql={animationend:Tp("Animation","AnimationEnd"),animationiteration:Tp("Animation","AnimationIteration"),animationstart:Tp("Animation","AnimationStart"),transitionend:Tp("Transition","TransitionEnd")},Rv={},AP={};$i&&(AP=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function Fy(t){if(Rv[t])return Rv[t];if(!ql[t])return t;var e=ql[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AP)return Rv[t]=e[n];return t}var OP=Fy("animationend"),RP=Fy("animationiteration"),PP=Fy("animationstart"),DP=Fy("transitionend"),FP=new Map,R_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uo(t,e){FP.set(t,e),ml(e,[t])}for(var Pv=0;Pv<R_.length;Pv++){var Dv=R_[Pv],DH=Dv.toLowerCase(),FH=Dv[0].toUpperCase()+Dv.slice(1);Uo(DH,"on"+FH)}Uo(OP,"onAnimationEnd");Uo(RP,"onAnimationIteration");Uo(PP,"onAnimationStart");Uo("dblclick","onDoubleClick");Uo("focusin","onFocus");Uo("focusout","onBlur");Uo(DP,"onTransitionEnd");Cu("onMouseEnter",["mouseout","mouseover"]);Cu("onMouseLeave",["mouseout","mouseover"]);Cu("onPointerEnter",["pointerout","pointerover"]);Cu("onPointerLeave",["pointerout","pointerover"]);ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ml("onBeforeInput",["compositionend","keypress","textInput","paste"]);ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cf));function P_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,D8(r,e,void 0,t),t.currentTarget=null}function LP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;P_(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;P_(s,a,u),i=l}}}if(Pm)throw t=mb,Pm=!1,mb=null,t}function it(t,e){var n=e[Tb];n===void 0&&(n=e[Tb]=new Set);var r=t+"__bubble";n.has(r)||(MP(e,t,2,!1),n.add(r))}function Fv(t,e,n){var r=0;e&&(r|=4),MP(n,t,r,e)}var _p="_reactListening"+Math.random().toString(36).slice(2);function ld(t){if(!t[_p]){t[_p]=!0,GR.forEach(function(n){n!=="selectionchange"&&(LH.has(n)||Fv(n,!1,t),Fv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_p]||(e[_p]=!0,Fv("selectionchange",!1,e))}}function MP(t,e,n,r){switch(wP(e)){case 1:var s=J8;break;case 4:s=Q8;break;default:s=JS}n=s.bind(null,e,n,t),s=void 0,!pb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Lv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ea(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}aP(function(){var u=i,c=qS(n),f=[];e:{var d=FP.get(t);if(d!==void 0){var h=ZS,p=t;switch(t){case"keypress":if(fm(n)===0)break e;case"keydown":case"keyup":h=hH;break;case"focusin":p="focus",h=kv;break;case"focusout":p="blur",h=kv;break;case"beforeblur":case"afterblur":h=kv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=S_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=tH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=gH;break;case OP:case RP:case PP:h=sH;break;case DP:h=vH;break;case"scroll":h=Z8;break;case"wheel":h=xH;break;case"copy":case"cut":case"paste":h=oH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=E_}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=nd(v,y),x!=null&&m.push(ud(v,x,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==db&&(p=n.relatedTarget||n.fromElement)&&(Ea(p)||p[Ei]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Ea(p):null,p!==null&&(g=gl(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=S_,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=E_,x="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Kl(h),b=p==null?d:Kl(p),d=new m(x,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,x=null,Ea(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,x=m),g=x,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Ol(b))v++;for(b=0,x=y;x;x=Ol(x))b++;for(;0<v-b;)m=Ol(m),v--;for(;0<b-v;)y=Ol(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Ol(m),y=Ol(y)}m=null}else m=null;h!==null&&D_(f,d,h,m,!1),p!==null&&g!==null&&D_(f,g,p,m,!0)}}e:{if(d=u?Kl(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=CH;else if(C_(d))if(CP)w=AH;else{w=NH;var $=IH}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=kH);if(w&&(w=w(t,u))){_P(f,w,n,c);break e}$&&$(t,d,u),t==="focusout"&&($=d._wrapperState)&&$.controlled&&d.type==="number"&&ab(d,"number",d.value)}switch($=u?Kl(u):window,t){case"focusin":(C_($)||$.contentEditable==="true")&&(Hl=$,bb=u,jf=null);break;case"focusout":jf=bb=Hl=null;break;case"mousedown":xb=!0;break;case"contextmenu":case"mouseup":case"dragend":xb=!1,O_(f,n,c);break;case"selectionchange":if(PH)break;case"keydown":case"keyup":O_(f,n,c)}var E;if(t2)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Gl?EP(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&($P&&n.locale!=="ko"&&(Gl||T!=="onCompositionStart"?T==="onCompositionEnd"&&Gl&&(E=SP()):(so=c,QS="value"in so?so.value:so.textContent,Gl=!0)),$=Bm(u,T),0<$.length&&(T=new $_(T,t,null,n,c),f.push({event:T,listeners:$}),E?T.data=E:(E=TP(n),E!==null&&(T.data=E)))),(E=SH?$H(t,n):EH(t,n))&&(u=Bm(u,"onBeforeInput"),0<u.length&&(c=new $_("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=E))}LP(f,e)})}function ud(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=nd(t,n),i!=null&&r.unshift(ud(t,i,s)),i=nd(t,e),i!=null&&r.push(ud(t,i,s))),t=t.return}return r}function Ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function D_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=nd(n,i),l!=null&&o.unshift(ud(n,l,a))):s||(l=nd(n,i),l!=null&&o.push(ud(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MH=/\r\n?/g,BH=/\u0000|\uFFFD/g;function F_(t){return(typeof t=="string"?t:""+t).replace(MH,`
`).replace(BH,"")}function Cp(t,e,n){if(e=F_(e),F_(t)!==e&&n)throw Error(X(425))}function jm(){}var wb=null,Sb=null;function $b(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eb=typeof setTimeout=="function"?setTimeout:void 0,jH=typeof clearTimeout=="function"?clearTimeout:void 0,L_=typeof Promise=="function"?Promise:void 0,UH=typeof queueMicrotask=="function"?queueMicrotask:typeof L_<"u"?function(t){return L_.resolve(null).then(t).catch(zH)}:Eb;function zH(t){setTimeout(function(){throw t})}function Mv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),id(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);id(e)}function go(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function M_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bc=Math.random().toString(36).slice(2),As="__reactFiber$"+bc,cd="__reactProps$"+bc,Ei="__reactContainer$"+bc,Tb="__reactEvents$"+bc,VH="__reactListeners$"+bc,WH="__reactHandles$"+bc;function Ea(t){var e=t[As];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ei]||n[As]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=M_(t);t!==null;){if(n=t[As])return n;t=M_(t)}return e}t=n,n=t.parentNode}return null}function Ih(t){return t=t[As]||t[Ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Ly(t){return t[cd]||null}var _b=[],Xl=-1;function zo(t){return{current:t}}function lt(t){0>Xl||(t.current=_b[Xl],_b[Xl]=null,Xl--)}function Ze(t,e){Xl++,_b[Xl]=t.current,t.current=e}var ko={},bn=zo(ko),Wn=zo(!1),qa=ko;function Iu(t,e){var n=t.type.contextTypes;if(!n)return ko;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gn(t){return t=t.childContextTypes,t!=null}function Um(){lt(Wn),lt(bn)}function B_(t,e,n){if(bn.current!==ko)throw Error(X(168));Ze(bn,e),Ze(Wn,n)}function BP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(X(108,I8(t)||"Unknown",s));return yt({},n,r)}function zm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ko,qa=bn.current,Ze(bn,t),Ze(Wn,Wn.current),!0}function j_(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=BP(t,e,qa),r.__reactInternalMemoizedMergedChildContext=t,lt(Wn),lt(bn),Ze(bn,t)):lt(Wn),Ze(Wn,n)}var si=null,My=!1,Bv=!1;function jP(t){si===null?si=[t]:si.push(t)}function GH(t){My=!0,jP(t)}function Vo(){if(!Bv&&si!==null){Bv=!0;var t=0,e=Be;try{var n=si;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}si=null,My=!1}catch(s){throw si!==null&&(si=si.slice(t+1)),fP(KS,Vo),s}finally{Be=e,Bv=!1}}return null}var Yl=[],Jl=0,Vm=null,Wm=0,Sr=[],$r=0,Ka=null,fi=1,di="";function ua(t,e){Yl[Jl++]=Wm,Yl[Jl++]=Vm,Vm=t,Wm=e}function UP(t,e,n){Sr[$r++]=fi,Sr[$r++]=di,Sr[$r++]=Ka,Ka=t;var r=fi;t=di;var s=32-us(r)-1;r&=~(1<<s),n+=1;var i=32-us(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fi=1<<32-us(e)+s|n<<s|r,di=i+t}else fi=1<<i|n<<s|r,di=t}function r2(t){t.return!==null&&(ua(t,1),UP(t,1,0))}function s2(t){for(;t===Vm;)Vm=Yl[--Jl],Yl[Jl]=null,Wm=Yl[--Jl],Yl[Jl]=null;for(;t===Ka;)Ka=Sr[--$r],Sr[$r]=null,di=Sr[--$r],Sr[$r]=null,fi=Sr[--$r],Sr[$r]=null}var ur=null,or=null,ct=!1,ns=null;function zP(t,e){var n=Ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function U_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,or=go(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ka!==null?{id:fi,overflow:di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,or=null,!0):!1;default:return!1}}function Cb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ib(t){if(ct){var e=or;if(e){var n=e;if(!U_(t,e)){if(Cb(t))throw Error(X(418));e=go(n.nextSibling);var r=ur;e&&U_(t,e)?zP(r,n):(t.flags=t.flags&-4097|2,ct=!1,ur=t)}}else{if(Cb(t))throw Error(X(418));t.flags=t.flags&-4097|2,ct=!1,ur=t}}}function z_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function Ip(t){if(t!==ur)return!1;if(!ct)return z_(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$b(t.type,t.memoizedProps)),e&&(e=or)){if(Cb(t))throw VP(),Error(X(418));for(;e;)zP(t,e),e=go(e.nextSibling)}if(z_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){or=go(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}or=null}}else or=ur?go(t.stateNode.nextSibling):null;return!0}function VP(){for(var t=or;t;)t=go(t.nextSibling)}function Nu(){or=ur=null,ct=!1}function i2(t){ns===null?ns=[t]:ns.push(t)}var HH=Oi.ReactCurrentBatchConfig;function af(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Np(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V_(t){var e=t._init;return e(t._payload)}function WP(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=xo(y,v),y.index=0,y.sibling=null,y}function i(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=Hv(b,y.mode,x),v.return=y,v):(v=s(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===Wl?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ki&&V_(w)===v.type)?(x=s(v,b.props),x.ref=af(y,v,b),x.return=y,x):(x=vm(b.type,b.key,b.props,null,y.mode,x),x.ref=af(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=qv(b,y.mode,x),v.return=y,v):(v=s(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Da(b,y.mode,x,w),v.return=y,v):(v=s(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Hv(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vp:return b=vm(v.type,v.key,v.props,null,y.mode,b),b.ref=af(y,null,v),b.return=y,b;case Vl:return v=qv(v,y.mode,b),v.return=y,v;case Ki:var x=v._init;return f(y,x(v._payload),b)}if(Tf(v)||tf(v))return v=Da(v,y.mode,b,null),v.return=y,v;Np(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vp:return b.key===w?l(y,v,b,x):null;case Vl:return b.key===w?u(y,v,b,x):null;case Ki:return w=b._init,d(y,v,w(b._payload),x)}if(Tf(b)||tf(b))return w!==null?null:c(y,v,b,x,null);Np(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vp:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case Vl:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case Ki:var $=x._init;return h(y,v,b,$(x._payload),w)}if(Tf(x)||tf(x))return y=y.get(b)||null,c(v,y,x,w,null);Np(v,x)}return null}function p(y,v,b,x){for(var w=null,$=null,E=v,T=v=0,N=null;E!==null&&T<b.length;T++){E.index>T?(N=E,E=null):N=E.sibling;var I=d(y,E,b[T],x);if(I===null){E===null&&(E=N);break}t&&E&&I.alternate===null&&e(y,E),v=i(I,v,T),$===null?w=I:$.sibling=I,$=I,E=N}if(T===b.length)return n(y,E),ct&&ua(y,T),w;if(E===null){for(;T<b.length;T++)E=f(y,b[T],x),E!==null&&(v=i(E,v,T),$===null?w=E:$.sibling=E,$=E);return ct&&ua(y,T),w}for(E=r(y,E);T<b.length;T++)N=h(E,y,T,b[T],x),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?T:N.key),v=i(N,v,T),$===null?w=N:$.sibling=N,$=N);return t&&E.forEach(function(R){return e(y,R)}),ct&&ua(y,T),w}function m(y,v,b,x){var w=tf(b);if(typeof w!="function")throw Error(X(150));if(b=w.call(b),b==null)throw Error(X(151));for(var $=w=null,E=v,T=v=0,N=null,I=b.next();E!==null&&!I.done;T++,I=b.next()){E.index>T?(N=E,E=null):N=E.sibling;var R=d(y,E,I.value,x);if(R===null){E===null&&(E=N);break}t&&E&&R.alternate===null&&e(y,E),v=i(R,v,T),$===null?w=R:$.sibling=R,$=R,E=N}if(I.done)return n(y,E),ct&&ua(y,T),w;if(E===null){for(;!I.done;T++,I=b.next())I=f(y,I.value,x),I!==null&&(v=i(I,v,T),$===null?w=I:$.sibling=I,$=I);return ct&&ua(y,T),w}for(E=r(y,E);!I.done;T++,I=b.next())I=h(E,y,T,I.value,x),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?T:I.key),v=i(I,v,T),$===null?w=I:$.sibling=I,$=I);return t&&E.forEach(function(P){return e(y,P)}),ct&&ua(y,T),w}function g(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Wl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case vp:e:{for(var w=b.key,$=v;$!==null;){if($.key===w){if(w=b.type,w===Wl){if($.tag===7){n(y,$.sibling),v=s($,b.props.children),v.return=y,y=v;break e}}else if($.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ki&&V_(w)===$.type){n(y,$.sibling),v=s($,b.props),v.ref=af(y,$,b),v.return=y,y=v;break e}n(y,$);break}else e(y,$);$=$.sibling}b.type===Wl?(v=Da(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=vm(b.type,b.key,b.props,null,y.mode,x),x.ref=af(y,v,b),x.return=y,y=x)}return o(y);case Vl:e:{for($=b.key;v!==null;){if(v.key===$)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=s(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=qv(b,y.mode,x),v.return=y,y=v}return o(y);case Ki:return $=b._init,g(y,v,$(b._payload),x)}if(Tf(b))return p(y,v,b,x);if(tf(b))return m(y,v,b,x);Np(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,b),v.return=y,y=v):(n(y,v),v=Hv(b,y.mode,x),v.return=y,y=v),o(y)):n(y,v)}return g}var ku=WP(!0),GP=WP(!1),Gm=zo(null),Hm=null,Ql=null,o2=null;function a2(){o2=Ql=Hm=null}function l2(t){var e=Gm.current;lt(Gm),t._currentValue=e}function Nb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fu(t,e){Hm=t,o2=Ql=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function Ur(t){var e=t._currentValue;if(o2!==t)if(t={context:t,memoizedValue:e,next:null},Ql===null){if(Hm===null)throw Error(X(308));Ql=t,Hm.dependencies={lanes:0,firstContext:t}}else Ql=Ql.next=t;return e}var Ta=null;function u2(t){Ta===null?Ta=[t]:Ta.push(t)}function HP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,u2(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ti(t,r)}function Ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xi=!1;function c2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ti(t,n)}return s=r.interleaved,s===null?(e.next=e,u2(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ti(t,n)}function dm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,XS(t,n)}}function W_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qm(t,e,n,r){var s=t.updateQueue;Xi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=yt({},f,d);break e;case 2:Xi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ya|=o,t.lanes=o,t.memoizedState=f}}function G_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(X(191,s));s.call(r)}}}var Nh={},Ds=zo(Nh),fd=zo(Nh),dd=zo(Nh);function _a(t){if(t===Nh)throw Error(X(174));return t}function f2(t,e){switch(Ze(dd,e),Ze(fd,t),Ze(Ds,Nh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ub(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ub(e,t)}lt(Ds),Ze(Ds,e)}function Au(){lt(Ds),lt(fd),lt(dd)}function KP(t){_a(dd.current);var e=_a(Ds.current),n=ub(e,t.type);e!==n&&(Ze(fd,t),Ze(Ds,n))}function d2(t){fd.current===t&&(lt(Ds),lt(fd))}var pt=zo(0);function Km(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jv=[];function h2(){for(var t=0;t<jv.length;t++)jv[t]._workInProgressVersionPrimary=null;jv.length=0}var hm=Oi.ReactCurrentDispatcher,Uv=Oi.ReactCurrentBatchConfig,Xa=0,gt=null,Rt=null,Vt=null,Xm=!1,Uf=!1,hd=0,qH=0;function cn(){throw Error(X(321))}function p2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gs(t[n],e[n]))return!1;return!0}function m2(t,e,n,r,s,i){if(Xa=i,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hm.current=t===null||t.memoizedState===null?JH:QH,t=n(r,s),Uf){i=0;do{if(Uf=!1,hd=0,25<=i)throw Error(X(301));i+=1,Vt=Rt=null,e.updateQueue=null,hm.current=ZH,t=n(r,s)}while(Uf)}if(hm.current=Ym,e=Rt!==null&&Rt.next!==null,Xa=0,Vt=Rt=gt=null,Xm=!1,e)throw Error(X(300));return t}function g2(){var t=hd!==0;return hd=0,t}function Is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?gt.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function zr(){if(Rt===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Vt===null?gt.memoizedState:Vt.next;if(e!==null)Vt=e,Rt=t;else{if(t===null)throw Error(X(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Vt===null?gt.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function pd(t,e){return typeof e=="function"?e(t):e}function zv(t){var e=zr(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Xa&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,gt.lanes|=c,Ya|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,gs(r,e.memoizedState)||(Bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,gt.lanes|=i,Ya|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vv(t){var e=zr(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gs(i,e.memoizedState)||(Bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function XP(){}function YP(t,e){var n=gt,r=zr(),s=e(),i=!gs(r.memoizedState,s);if(i&&(r.memoizedState=s,Bn=!0),r=r.queue,y2(ZP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,md(9,QP.bind(null,n,r,s,e),void 0,null),Ht===null)throw Error(X(349));Xa&30||JP(n,e,s)}return s}function JP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QP(t,e,n,r){e.value=n,e.getSnapshot=r,eD(e)&&tD(t)}function ZP(t,e,n){return n(function(){eD(e)&&tD(t)})}function eD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gs(t,n)}catch{return!0}}function tD(t){var e=Ti(t,1);e!==null&&cs(e,t,1,-1)}function H_(t){var e=Is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pd,lastRenderedState:t},e.queue=t,t=t.dispatch=YH.bind(null,gt,t),[e.memoizedState,t]}function md(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nD(){return zr().memoizedState}function pm(t,e,n,r){var s=Is();gt.flags|=t,s.memoizedState=md(1|e,n,void 0,r===void 0?null:r)}function By(t,e,n,r){var s=zr();r=r===void 0?null:r;var i=void 0;if(Rt!==null){var o=Rt.memoizedState;if(i=o.destroy,r!==null&&p2(r,o.deps)){s.memoizedState=md(e,n,i,r);return}}gt.flags|=t,s.memoizedState=md(1|e,n,i,r)}function q_(t,e){return pm(8390656,8,t,e)}function y2(t,e){return By(2048,8,t,e)}function rD(t,e){return By(4,2,t,e)}function sD(t,e){return By(4,4,t,e)}function iD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oD(t,e,n){return n=n!=null?n.concat([t]):null,By(4,4,iD.bind(null,e,t),n)}function v2(){}function aD(t,e){var n=zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lD(t,e){var n=zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uD(t,e,n){return Xa&21?(gs(n,e)||(n=pP(),gt.lanes|=n,Ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=n)}function KH(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=Uv.transition;Uv.transition={};try{t(!1),e()}finally{Be=n,Uv.transition=r}}function cD(){return zr().memoizedState}function XH(t,e,n){var r=bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fD(t))dD(e,n);else if(n=HP(t,e,n,r),n!==null){var s=_n();cs(n,t,r,s),hD(n,e,r)}}function YH(t,e,n){var r=bo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fD(t))dD(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,gs(a,o)){var l=e.interleaved;l===null?(s.next=s,u2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=HP(t,e,s,r),n!==null&&(s=_n(),cs(n,t,r,s),hD(n,e,r))}}function fD(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function dD(t,e){Uf=Xm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,XS(t,n)}}var Ym={readContext:Ur,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},JH={readContext:Ur,useCallback:function(t,e){return Is().memoizedState=[t,e===void 0?null:e],t},useContext:Ur,useEffect:q_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pm(4194308,4,iD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pm(4194308,4,t,e)},useInsertionEffect:function(t,e){return pm(4,2,t,e)},useMemo:function(t,e){var n=Is();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Is();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XH.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=Is();return t={current:t},e.memoizedState=t},useState:H_,useDebugValue:v2,useDeferredValue:function(t){return Is().memoizedState=t},useTransition:function(){var t=H_(!1),e=t[0];return t=KH.bind(null,t[1]),Is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,s=Is();if(ct){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ht===null)throw Error(X(349));Xa&30||JP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,q_(ZP.bind(null,r,i,t),[t]),r.flags|=2048,md(9,QP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Is(),e=Ht.identifierPrefix;if(ct){var n=di,r=fi;n=(r&~(1<<32-us(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QH={readContext:Ur,useCallback:aD,useContext:Ur,useEffect:y2,useImperativeHandle:oD,useInsertionEffect:rD,useLayoutEffect:sD,useMemo:lD,useReducer:zv,useRef:nD,useState:function(){return zv(pd)},useDebugValue:v2,useDeferredValue:function(t){var e=zr();return uD(e,Rt.memoizedState,t)},useTransition:function(){var t=zv(pd)[0],e=zr().memoizedState;return[t,e]},useMutableSource:XP,useSyncExternalStore:YP,useId:cD,unstable_isNewReconciler:!1},ZH={readContext:Ur,useCallback:aD,useContext:Ur,useEffect:y2,useImperativeHandle:oD,useInsertionEffect:rD,useLayoutEffect:sD,useMemo:lD,useReducer:Vv,useRef:nD,useState:function(){return Vv(pd)},useDebugValue:v2,useDeferredValue:function(t){var e=zr();return Rt===null?e.memoizedState=t:uD(e,Rt.memoizedState,t)},useTransition:function(){var t=Vv(pd)[0],e=zr().memoizedState;return[t,e]},useMutableSource:XP,useSyncExternalStore:YP,useId:cD,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jy={isMounted:function(t){return(t=t._reactInternals)?gl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),s=bo(t),i=bi(r,s);i.payload=e,n!=null&&(i.callback=n),e=yo(t,i,s),e!==null&&(cs(e,t,s,r),dm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),s=bo(t),i=bi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yo(t,i,s),e!==null&&(cs(e,t,s,r),dm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=bo(t),s=bi(n,r);s.tag=2,e!=null&&(s.callback=e),e=yo(t,s,r),e!==null&&(cs(e,t,r,n),dm(e,t,r))}};function K_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ad(n,r)||!ad(s,i):!0}function pD(t,e,n){var r=!1,s=ko,i=e.contextType;return typeof i=="object"&&i!==null?i=Ur(i):(s=Gn(e)?qa:bn.current,r=e.contextTypes,i=(r=r!=null)?Iu(t,s):ko),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function X_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jy.enqueueReplaceState(e,e.state,null)}function Ab(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},c2(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ur(i):(i=Gn(e)?qa:bn.current,s.context=Iu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kb(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jy.enqueueReplaceState(s,s.state,null),qm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ou(t,e){try{var n="",r=e;do n+=C8(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ob(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eq=typeof WeakMap=="function"?WeakMap:Map;function mD(t,e,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qm||(Qm=!0,zb=r),Ob(t,e)},n}function gD(t,e,n){n=bi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ob(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ob(t,e),typeof r!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Y_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eq;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pq.bind(null,t,e,n),e.then(t,t))}function J_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Q_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bi(-1,1),e.tag=2,yo(n,e,1))),n.lanes|=1),t)}var tq=Oi.ReactCurrentOwner,Bn=!1;function En(t,e,n,r){e.child=t===null?GP(e,null,n,r):ku(e,t.child,n,r)}function Z_(t,e,n,r,s){n=n.render;var i=e.ref;return fu(e,s),r=m2(t,e,n,r,i,s),n=g2(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(ct&&n&&r2(e),e.flags|=1,En(t,e,r,s),e.child)}function eC(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_2(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yD(t,e,i,r,s)):(t=vm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ad,n(o,r)&&t.ref===e.ref)return _i(t,e,s)}return e.flags|=1,t=xo(i,r),t.ref=e.ref,t.return=e,e.child=t}function yD(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ad(i,r)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,_i(t,e,s)}return Rb(t,e,n,r,s)}function vD(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(eu,rr),rr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(eu,rr),rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ze(eu,rr),rr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ze(eu,rr),rr|=r;return En(t,e,s,n),e.child}function bD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rb(t,e,n,r,s){var i=Gn(n)?qa:bn.current;return i=Iu(e,i),fu(e,s),n=m2(t,e,n,r,i,s),r=g2(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(ct&&r&&r2(e),e.flags|=1,En(t,e,n,s),e.child)}function tC(t,e,n,r,s){if(Gn(n)){var i=!0;zm(e)}else i=!1;if(fu(e,s),e.stateNode===null)mm(t,e),pD(e,n,r),Ab(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ur(u):(u=Gn(n)?qa:bn.current,u=Iu(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&X_(e,o,r,u),Xi=!1;var d=e.memoizedState;o.state=d,qm(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Wn.current||Xi?(typeof c=="function"&&(kb(e,n,c,r),l=e.memoizedState),(a=Xi||K_(e,n,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Zr(e.type,a),o.props=u,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ur(l):(l=Gn(n)?qa:bn.current,l=Iu(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&X_(e,o,r,l),Xi=!1,d=e.memoizedState,o.state=d,qm(e,r,o,s);var p=e.memoizedState;a!==f||d!==p||Wn.current||Xi?(typeof h=="function"&&(kb(e,n,h,r),p=e.memoizedState),(u=Xi||K_(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Pb(t,e,n,r,i,s)}function Pb(t,e,n,r,s,i){bD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&j_(e,n,!1),_i(t,e,i);r=e.stateNode,tq.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ku(e,t.child,null,i),e.child=ku(e,null,a,i)):En(t,e,a,i),e.memoizedState=r.state,s&&j_(e,n,!0),e.child}function xD(t){var e=t.stateNode;e.pendingContext?B_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&B_(t,e.context,!1),f2(t,e.containerInfo)}function nC(t,e,n,r,s){return Nu(),i2(s),e.flags|=256,En(t,e,n,r),e.child}var Db={dehydrated:null,treeContext:null,retryLane:0};function Fb(t){return{baseLanes:t,cachePool:null,transitions:null}}function wD(t,e,n){var r=e.pendingProps,s=pt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ze(pt,s&1),t===null)return Ib(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vy(o,r,0,null),t=Da(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fb(n),e.memoizedState=Db,t):b2(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return nq(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xo(a,i):(i=Da(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Db,r}return i=t.child,t=i.sibling,r=xo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function b2(t,e){return e=Vy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kp(t,e,n,r){return r!==null&&i2(r),ku(e,t.child,null,n),t=b2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nq(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Wv(Error(X(422))),kp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vy({mode:"visible",children:r.children},s,0,null),i=Da(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ku(e,t.child,null,o),e.child.memoizedState=Fb(o),e.memoizedState=Db,i);if(!(e.mode&1))return kp(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(X(419)),r=Wv(i,r,void 0),kp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bn||a){if(r=Ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ti(t,s),cs(r,t,s,-1))}return T2(),r=Wv(Error(X(421))),kp(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mq.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,or=go(s.nextSibling),ur=e,ct=!0,ns=null,t!==null&&(Sr[$r++]=fi,Sr[$r++]=di,Sr[$r++]=Ka,fi=t.id,di=t.overflow,Ka=e),e=b2(e,r.children),e.flags|=4096,e)}function rC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nb(t.return,e,n)}function Gv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function SD(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(En(t,e,r.children,n),r=pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rC(t,n,e);else if(t.tag===19)rC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ze(pt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Km(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Km(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gv(e,!0,n,null,i);break;case"together":Gv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=xo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rq(t,e,n){switch(e.tag){case 3:xD(e),Nu();break;case 5:KP(e);break;case 1:Gn(e.type)&&zm(e);break;case 4:f2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ze(Gm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(pt,pt.current&1),e.flags|=128,null):n&e.child.childLanes?wD(t,e,n):(Ze(pt,pt.current&1),t=_i(t,e,n),t!==null?t.sibling:null);Ze(pt,pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return SD(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(pt,pt.current),r)break;return null;case 22:case 23:return e.lanes=0,vD(t,e,n)}return _i(t,e,n)}var $D,Lb,ED,TD;$D=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lb=function(){};ED=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_a(Ds.current);var i=null;switch(n){case"input":s=ib(t,s),r=ib(t,r),i=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),i=[];break;case"textarea":s=lb(t,s),r=lb(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jm)}cb(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ed.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ed.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&it("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};TD=function(t,e,n,r){n!==r&&(e.flags|=4)};function lf(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sq(t,e,n){var r=e.pendingProps;switch(s2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Gn(e.type)&&Um(),fn(e),null;case 3:return r=e.stateNode,Au(),lt(Wn),lt(bn),h2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ip(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(Gb(ns),ns=null))),Lb(t,e),fn(e),null;case 5:d2(e);var s=_a(dd.current);if(n=e.type,t!==null&&e.stateNode!=null)ED(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return fn(e),null}if(t=_a(Ds.current),Ip(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[As]=e,r[cd]=i,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(s=0;s<Cf.length;s++)it(Cf[s],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":d_(r,i),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},it("invalid",r);break;case"textarea":p_(r,i),it("invalid",r)}cb(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cp(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cp(r.textContent,a,t),s=["children",""+a]):ed.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":bp(r),h_(r,i,!0);break;case"textarea":bp(r),m_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[As]=e,t[cd]=r,$D(t,e,!1,!1),e.stateNode=t;e:{switch(o=fb(n,r),n){case"dialog":it("cancel",t),it("close",t),s=r;break;case"iframe":case"object":case"embed":it("load",t),s=r;break;case"video":case"audio":for(s=0;s<Cf.length;s++)it(Cf[s],t);s=r;break;case"source":it("error",t),s=r;break;case"img":case"image":case"link":it("error",t),it("load",t),s=r;break;case"details":it("toggle",t),s=r;break;case"input":d_(t,r),s=ib(t,r),it("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),it("invalid",t);break;case"textarea":p_(t,r),s=lb(t,r),it("invalid",t);break;default:s=r}cb(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?nP(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eP(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&td(t,l):typeof l=="number"&&td(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ed.hasOwnProperty(i)?l!=null&&i==="onScroll"&&it("scroll",t):l!=null&&VS(t,i,l,o))}switch(n){case"input":bp(t),h_(t,r,!1);break;case"textarea":bp(t),m_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+No(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?au(t,!!r.multiple,i,!1):r.defaultValue!=null&&au(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)TD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=_a(dd.current),_a(Ds.current),Ip(e)){if(r=e.stateNode,n=e.memoizedProps,r[As]=e,(i=r.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:Cp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cp(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[As]=e,e.stateNode=r}return fn(e),null;case 13:if(lt(pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&or!==null&&e.mode&1&&!(e.flags&128))VP(),Nu(),e.flags|=98560,i=!1;else if(i=Ip(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[As]=e}else Nu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),i=!1}else ns!==null&&(Gb(ns),ns=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pt.current&1?Lt===0&&(Lt=3):T2())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Au(),Lb(t,e),t===null&&ld(e.stateNode.containerInfo),fn(e),null;case 10:return l2(e.type._context),fn(e),null;case 17:return Gn(e.type)&&Um(),fn(e),null;case 19:if(lt(pt),i=e.memoizedState,i===null)return fn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)lf(i,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Km(t),o!==null){for(e.flags|=128,lf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(pt,pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&St()>Ru&&(e.flags|=128,r=!0,lf(i,!1),e.lanes=4194304)}else{if(!r)if(t=Km(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ct)return fn(e),null}else 2*St()-i.renderingStartTime>Ru&&n!==1073741824&&(e.flags|=128,r=!0,lf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=St(),e.sibling=null,n=pt.current,Ze(pt,r?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return E2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rr&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function iq(t,e){switch(s2(e),e.tag){case 1:return Gn(e.type)&&Um(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Au(),lt(Wn),lt(bn),h2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return d2(e),null;case 13:if(lt(pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Nu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(pt),null;case 4:return Au(),null;case 10:return l2(e.type._context),null;case 22:case 23:return E2(),null;case 24:return null;default:return null}}var Ap=!1,dn=!1,oq=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Zl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function Mb(t,e,n){try{n()}catch(r){bt(t,e,r)}}var sC=!1;function aq(t,e){if(wb=Lm,t=kP(),n2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sb={focusedElem:t,selectionRange:n},Lm=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Zr(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(x){bt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return p=sC,sC=!1,p}function zf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mb(e,n,i)}s=s.next}while(s!==r)}}function Uy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _D(t){var e=t.alternate;e!==null&&(t.alternate=null,_D(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[As],delete e[cd],delete e[Tb],delete e[VH],delete e[WH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CD(t){return t.tag===5||t.tag===3||t.tag===4}function iC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jm));else if(r!==4&&(t=t.child,t!==null))for(jb(t,e,n),t=t.sibling;t!==null;)jb(t,e,n),t=t.sibling}function Ub(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ub(t,e,n),t=t.sibling;t!==null;)Ub(t,e,n),t=t.sibling}var nn=null,es=!1;function Vi(t,e,n){for(n=n.child;n!==null;)ID(t,e,n),n=n.sibling}function ID(t,e,n){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(Ry,n)}catch{}switch(n.tag){case 5:dn||Zl(n,e);case 6:var r=nn,s=es;nn=null,Vi(t,e,n),nn=r,es=s,nn!==null&&(es?(t=nn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(es?(t=nn,n=n.stateNode,t.nodeType===8?Mv(t.parentNode,n):t.nodeType===1&&Mv(t,n),id(t)):Mv(nn,n.stateNode));break;case 4:r=nn,s=es,nn=n.stateNode.containerInfo,es=!0,Vi(t,e,n),nn=r,es=s;break;case 0:case 11:case 14:case 15:if(!dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mb(n,e,o),s=s.next}while(s!==r)}Vi(t,e,n);break;case 1:if(!dn&&(Zl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,e,a)}Vi(t,e,n);break;case 21:Vi(t,e,n);break;case 22:n.mode&1?(dn=(r=dn)||n.memoizedState!==null,Vi(t,e,n),dn=r):Vi(t,e,n);break;default:Vi(t,e,n)}}function oC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oq),e.forEach(function(r){var s=gq.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,es=!1;break e;case 3:nn=a.stateNode.containerInfo,es=!0;break e;case 4:nn=a.stateNode.containerInfo,es=!0;break e}a=a.return}if(nn===null)throw Error(X(160));ID(i,o,s),nn=null,es=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){bt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ND(e,t),e=e.sibling}function ND(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yr(e,t),Ts(t),r&4){try{zf(3,t,t.return),Uy(3,t)}catch(m){bt(t,t.return,m)}try{zf(5,t,t.return)}catch(m){bt(t,t.return,m)}}break;case 1:Yr(e,t),Ts(t),r&512&&n!==null&&Zl(n,n.return);break;case 5:if(Yr(e,t),Ts(t),r&512&&n!==null&&Zl(n,n.return),t.flags&32){var s=t.stateNode;try{td(s,"")}catch(m){bt(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&JR(s,i),fb(a,o);var u=fb(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?nP(s,f):c==="dangerouslySetInnerHTML"?eP(s,f):c==="children"?td(s,f):VS(s,c,f,u)}switch(a){case"input":ob(s,i);break;case"textarea":QR(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?au(s,!!i.multiple,h,!1):d!==!!i.multiple&&(i.defaultValue!=null?au(s,!!i.multiple,i.defaultValue,!0):au(s,!!i.multiple,i.multiple?[]:"",!1))}s[cd]=i}catch(m){bt(t,t.return,m)}}break;case 6:if(Yr(e,t),Ts(t),r&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){bt(t,t.return,m)}}break;case 3:if(Yr(e,t),Ts(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{id(e.containerInfo)}catch(m){bt(t,t.return,m)}break;case 4:Yr(e,t),Ts(t);break;case 13:Yr(e,t),Ts(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(S2=St())),r&4&&oC(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(u=dn)||c,Yr(e,t),dn=u):Yr(e,t),Ts(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(oe=t,c=t.child;c!==null;){for(f=oe=c;oe!==null;){switch(d=oe,h=d.child,d.tag){case 0:case 11:case 14:case 15:zf(4,d,d.return);break;case 1:Zl(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){bt(r,n,m)}}break;case 5:Zl(d,d.return);break;case 22:if(d.memoizedState!==null){lC(f);continue}}h!==null?(h.return=d,oe=h):lC(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tP("display",o))}catch(m){bt(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){bt(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yr(e,t),Ts(t),r&4&&oC(t);break;case 21:break;default:Yr(e,t),Ts(t)}}function Ts(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CD(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(td(s,""),r.flags&=-33);var i=iC(t);Ub(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=iC(t);jb(t,a,o);break;default:throw Error(X(161))}}catch(l){bt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lq(t,e,n){oe=t,kD(t)}function kD(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ap;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dn;a=Ap;var u=dn;if(Ap=o,(dn=l)&&!u)for(oe=s;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?uC(s):l!==null?(l.return=o,oe=l):uC(s);for(;i!==null;)oe=i,kD(i),i=i.sibling;oe=s,Ap=a,dn=u}aC(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):aC(t)}}function aC(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||Uy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&G_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}G_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&id(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}dn||e.flags&512&&Bb(e)}catch(d){bt(e,e.return,d)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function lC(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function uC(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uy(4,e)}catch(l){bt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){bt(e,s,l)}}var i=e.return;try{Bb(e)}catch(l){bt(e,i,l)}break;case 5:var o=e.return;try{Bb(e)}catch(l){bt(e,o,l)}}}catch(l){bt(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var uq=Math.ceil,Jm=Oi.ReactCurrentDispatcher,x2=Oi.ReactCurrentOwner,Mr=Oi.ReactCurrentBatchConfig,Ne=0,Ht=null,Ct=null,sn=0,rr=0,eu=zo(0),Lt=0,gd=null,Ya=0,zy=0,w2=0,Vf=null,Mn=null,S2=0,Ru=1/0,ti=null,Qm=!1,zb=null,vo=null,Op=!1,io=null,Zm=0,Wf=0,Vb=null,gm=-1,ym=0;function _n(){return Ne&6?St():gm!==-1?gm:gm=St()}function bo(t){return t.mode&1?Ne&2&&sn!==0?sn&-sn:HH.transition!==null?(ym===0&&(ym=pP()),ym):(t=Be,t!==0||(t=window.event,t=t===void 0?16:wP(t.type)),t):1}function cs(t,e,n,r){if(50<Wf)throw Wf=0,Vb=null,Error(X(185));_h(t,n,r),(!(Ne&2)||t!==Ht)&&(t===Ht&&(!(Ne&2)&&(zy|=n),Lt===4&&Zi(t,sn)),Hn(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Ru=St()+500,My&&Vo()))}function Hn(t,e){var n=t.callbackNode;H8(t,e);var r=Fm(t,t===Ht?sn:0);if(r===0)n!==null&&v_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&v_(n),e===1)t.tag===0?GH(cC.bind(null,t)):jP(cC.bind(null,t)),UH(function(){!(Ne&6)&&Vo()}),n=null;else{switch(mP(r)){case 1:n=KS;break;case 4:n=dP;break;case 16:n=Dm;break;case 536870912:n=hP;break;default:n=Dm}n=MD(n,AD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AD(t,e){if(gm=-1,ym=0,Ne&6)throw Error(X(327));var n=t.callbackNode;if(du()&&t.callbackNode!==n)return null;var r=Fm(t,t===Ht?sn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eg(t,r);else{e=r;var s=Ne;Ne|=2;var i=RD();(Ht!==t||sn!==e)&&(ti=null,Ru=St()+500,Pa(t,e));do try{dq();break}catch(a){OD(t,a)}while(!0);a2(),Jm.current=i,Ne=s,Ct!==null?e=0:(Ht=null,sn=0,e=Lt)}if(e!==0){if(e===2&&(s=gb(t),s!==0&&(r=s,e=Wb(t,s))),e===1)throw n=gd,Pa(t,0),Zi(t,r),Hn(t,St()),n;if(e===6)Zi(t,r);else{if(s=t.current.alternate,!(r&30)&&!cq(s)&&(e=eg(t,r),e===2&&(i=gb(t),i!==0&&(r=i,e=Wb(t,i))),e===1))throw n=gd,Pa(t,0),Zi(t,r),Hn(t,St()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:ca(t,Mn,ti);break;case 3:if(Zi(t,r),(r&130023424)===r&&(e=S2+500-St(),10<e)){if(Fm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Eb(ca.bind(null,t,Mn,ti),e);break}ca(t,Mn,ti);break;case 4:if(Zi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-us(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uq(r/1960))-r,10<r){t.timeoutHandle=Eb(ca.bind(null,t,Mn,ti),r);break}ca(t,Mn,ti);break;case 5:ca(t,Mn,ti);break;default:throw Error(X(329))}}}return Hn(t,St()),t.callbackNode===n?AD.bind(null,t):null}function Wb(t,e){var n=Vf;return t.current.memoizedState.isDehydrated&&(Pa(t,e).flags|=256),t=eg(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&Gb(e)),t}function Gb(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function cq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zi(t,e){for(e&=~w2,e&=~zy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-us(e),r=1<<n;t[n]=-1,e&=~r}}function cC(t){if(Ne&6)throw Error(X(327));du();var e=Fm(t,0);if(!(e&1))return Hn(t,St()),null;var n=eg(t,e);if(t.tag!==0&&n===2){var r=gb(t);r!==0&&(e=r,n=Wb(t,r))}if(n===1)throw n=gd,Pa(t,0),Zi(t,e),Hn(t,St()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ca(t,Mn,ti),Hn(t,St()),null}function $2(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Ru=St()+500,My&&Vo())}}function Ja(t){io!==null&&io.tag===0&&!(Ne&6)&&du();var e=Ne;Ne|=1;var n=Mr.transition,r=Be;try{if(Mr.transition=null,Be=1,t)return t()}finally{Be=r,Mr.transition=n,Ne=e,!(Ne&6)&&Vo()}}function E2(){rr=eu.current,lt(eu)}function Pa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jH(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(s2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Um();break;case 3:Au(),lt(Wn),lt(bn),h2();break;case 5:d2(r);break;case 4:Au();break;case 13:lt(pt);break;case 19:lt(pt);break;case 10:l2(r.type._context);break;case 22:case 23:E2()}n=n.return}if(Ht=t,Ct=t=xo(t.current,null),sn=rr=e,Lt=0,gd=null,w2=zy=Ya=0,Mn=Vf=null,Ta!==null){for(e=0;e<Ta.length;e++)if(n=Ta[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ta=null}return t}function OD(t,e){do{var n=Ct;try{if(a2(),hm.current=Ym,Xm){for(var r=gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xm=!1}if(Xa=0,Vt=Rt=gt=null,Uf=!1,hd=0,x2.current=null,n===null||n.return===null){Lt=1,gd=e,Ct=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=J_(o);if(h!==null){h.flags&=-257,Q_(h,o,a,i,e),h.mode&1&&Y_(i,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Y_(i,u,e),T2();break e}l=Error(X(426))}}else if(ct&&a.mode&1){var g=J_(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Q_(g,o,a,i,e),i2(Ou(l,a));break e}}i=l=Ou(l,a),Lt!==4&&(Lt=2),Vf===null?Vf=[i]:Vf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=mD(i,l,e);W_(i,y);break e;case 1:a=l;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vo===null||!vo.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=gD(i,a,e);W_(i,x);break e}}i=i.return}while(i!==null)}DD(n)}catch(w){e=w,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function RD(){var t=Jm.current;return Jm.current=Ym,t===null?Ym:t}function T2(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Ht===null||!(Ya&268435455)&&!(zy&268435455)||Zi(Ht,sn)}function eg(t,e){var n=Ne;Ne|=2;var r=RD();(Ht!==t||sn!==e)&&(ti=null,Pa(t,e));do try{fq();break}catch(s){OD(t,s)}while(!0);if(a2(),Ne=n,Jm.current=r,Ct!==null)throw Error(X(261));return Ht=null,sn=0,Lt}function fq(){for(;Ct!==null;)PD(Ct)}function dq(){for(;Ct!==null&&!L8();)PD(Ct)}function PD(t){var e=LD(t.alternate,t,rr);t.memoizedProps=t.pendingProps,e===null?DD(t):Ct=e,x2.current=null}function DD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iq(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Ct=null;return}}else if(n=sq(n,e,rr),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Lt===0&&(Lt=5)}function ca(t,e,n){var r=Be,s=Mr.transition;try{Mr.transition=null,Be=1,hq(t,e,n,r)}finally{Mr.transition=s,Be=r}return null}function hq(t,e,n,r){do du();while(io!==null);if(Ne&6)throw Error(X(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(q8(t,i),t===Ht&&(Ct=Ht=null,sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Op||(Op=!0,MD(Dm,function(){return du(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Mr.transition,Mr.transition=null;var o=Be;Be=1;var a=Ne;Ne|=4,x2.current=null,aq(t,n),ND(n,t),RH(Sb),Lm=!!wb,Sb=wb=null,t.current=n,lq(n),M8(),Ne=a,Be=o,Mr.transition=i}else t.current=n;if(Op&&(Op=!1,io=t,Zm=s),i=t.pendingLanes,i===0&&(vo=null),U8(n.stateNode),Hn(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qm)throw Qm=!1,t=zb,zb=null,t;return Zm&1&&t.tag!==0&&du(),i=t.pendingLanes,i&1?t===Vb?Wf++:(Wf=0,Vb=t):Wf=0,Vo(),null}function du(){if(io!==null){var t=mP(Zm),e=Mr.transition,n=Be;try{if(Mr.transition=null,Be=16>t?16:t,io===null)var r=!1;else{if(t=io,io=null,Zm=0,Ne&6)throw Error(X(331));var s=Ne;for(Ne|=4,oe=t.current;oe!==null;){var i=oe,o=i.child;if(oe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(oe=u;oe!==null;){var c=oe;switch(c.tag){case 0:case 11:case 15:zf(8,c,i)}var f=c.child;if(f!==null)f.return=c,oe=f;else for(;oe!==null;){c=oe;var d=c.sibling,h=c.return;if(_D(c),c===u){oe=null;break}if(d!==null){d.return=h,oe=d;break}oe=h}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,oe=o;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,oe=y;break e}oe=i.return}}var v=t.current;for(oe=v;oe!==null;){o=oe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,oe=b;else e:for(o=v;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uy(9,a)}}catch(w){bt(a,a.return,w)}if(a===o){oe=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,oe=x;break e}oe=a.return}}if(Ne=s,Vo(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(Ry,t)}catch{}r=!0}return r}finally{Be=n,Mr.transition=e}}return!1}function fC(t,e,n){e=Ou(n,e),e=mD(t,e,1),t=yo(t,e,1),e=_n(),t!==null&&(_h(t,1,e),Hn(t,e))}function bt(t,e,n){if(t.tag===3)fC(t,t,n);else for(;e!==null;){if(e.tag===3){fC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vo===null||!vo.has(r))){t=Ou(n,t),t=gD(e,t,1),e=yo(e,t,1),t=_n(),e!==null&&(_h(e,1,t),Hn(e,t));break}}e=e.return}}function pq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(sn&n)===n&&(Lt===4||Lt===3&&(sn&130023424)===sn&&500>St()-S2?Pa(t,0):w2|=n),Hn(t,e)}function FD(t,e){e===0&&(t.mode&1?(e=Sp,Sp<<=1,!(Sp&130023424)&&(Sp=4194304)):e=1);var n=_n();t=Ti(t,e),t!==null&&(_h(t,e,n),Hn(t,n))}function mq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FD(t,n)}function gq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),FD(t,n)}var LD;LD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bn=!1,rq(t,e,n);Bn=!!(t.flags&131072)}else Bn=!1,ct&&e.flags&1048576&&UP(e,Wm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mm(t,e),t=e.pendingProps;var s=Iu(e,bn.current);fu(e,n),s=m2(null,e,r,t,s,n);var i=g2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(r)?(i=!0,zm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,c2(e),s.updater=jy,e.stateNode=s,s._reactInternals=e,Ab(e,r,t,n),e=Pb(null,e,r,!0,i,n)):(e.tag=0,ct&&i&&r2(e),En(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vq(r),t=Zr(r,t),s){case 0:e=Rb(null,e,r,t,n);break e;case 1:e=tC(null,e,r,t,n);break e;case 11:e=Z_(null,e,r,t,n);break e;case 14:e=eC(null,e,r,Zr(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zr(r,s),Rb(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zr(r,s),tC(t,e,r,s,n);case 3:e:{if(xD(e),t===null)throw Error(X(387));r=e.pendingProps,i=e.memoizedState,s=i.element,qP(t,e),qm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ou(Error(X(423)),e),e=nC(t,e,r,n,s);break e}else if(r!==s){s=Ou(Error(X(424)),e),e=nC(t,e,r,n,s);break e}else for(or=go(e.stateNode.containerInfo.firstChild),ur=e,ct=!0,ns=null,n=GP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nu(),r===s){e=_i(t,e,n);break e}En(t,e,r,n)}e=e.child}return e;case 5:return KP(e),t===null&&Ib(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,$b(r,s)?o=null:i!==null&&$b(r,i)&&(e.flags|=32),bD(t,e),En(t,e,o,n),e.child;case 6:return t===null&&Ib(e),null;case 13:return wD(t,e,n);case 4:return f2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ku(e,null,r,n):En(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zr(r,s),Z_(t,e,r,s,n);case 7:return En(t,e,e.pendingProps,n),e.child;case 8:return En(t,e,e.pendingProps.children,n),e.child;case 12:return En(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ze(Gm,r._currentValue),r._currentValue=o,i!==null)if(gs(i.value,o)){if(i.children===s.children&&!Wn.current){e=_i(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bi(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Nb(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nb(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}En(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fu(e,n),s=Ur(s),r=r(s),e.flags|=1,En(t,e,r,n),e.child;case 14:return r=e.type,s=Zr(r,e.pendingProps),s=Zr(r.type,s),eC(t,e,r,s,n);case 15:return yD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zr(r,s),mm(t,e),e.tag=1,Gn(r)?(t=!0,zm(e)):t=!1,fu(e,n),pD(e,r,s),Ab(e,r,s,n),Pb(null,e,r,!0,t,n);case 19:return SD(t,e,n);case 22:return vD(t,e,n)}throw Error(X(156,e.tag))};function MD(t,e){return fP(t,e)}function yq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,n,r){return new yq(t,e,n,r)}function _2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vq(t){if(typeof t=="function")return _2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===GS)return 11;if(t===HS)return 14}return 2}function xo(t,e){var n=t.alternate;return n===null?(n=Ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vm(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")_2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wl:return Da(n.children,s,i,e);case WS:o=8,s|=8;break;case tb:return t=Ir(12,n,e,s|2),t.elementType=tb,t.lanes=i,t;case nb:return t=Ir(13,n,e,s),t.elementType=nb,t.lanes=i,t;case rb:return t=Ir(19,n,e,s),t.elementType=rb,t.lanes=i,t;case KR:return Vy(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HR:o=10;break e;case qR:o=9;break e;case GS:o=11;break e;case HS:o=14;break e;case Ki:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Ir(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Da(t,e,n,r){return t=Ir(7,t,r,e),t.lanes=n,t}function Vy(t,e,n,r){return t=Ir(22,t,r,e),t.elementType=KR,t.lanes=n,t.stateNode={isHidden:!1},t}function Hv(t,e,n){return t=Ir(6,t,null,e),t.lanes=n,t}function qv(t,e,n){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bq(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cv(0),this.expirationTimes=Cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function C2(t,e,n,r,s,i,o,a,l){return t=new bq(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ir(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},c2(i),t}function xq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function BD(t){if(!t)return ko;t=t._reactInternals;e:{if(gl(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Gn(n))return BP(t,n,e)}return e}function jD(t,e,n,r,s,i,o,a,l){return t=C2(n,r,!0,t,s,i,o,a,l),t.context=BD(null),n=t.current,r=_n(),s=bo(n),i=bi(r,s),i.callback=e??null,yo(n,i,s),t.current.lanes=s,_h(t,s,r),Hn(t,r),t}function Wy(t,e,n,r){var s=e.current,i=_n(),o=bo(s);return n=BD(n),e.context===null?e.context=n:e.pendingContext=n,e=bi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yo(s,e,o),t!==null&&(cs(t,s,o,i),dm(t,s,o)),o}function tg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function I2(t,e){dC(t,e),(t=t.alternate)&&dC(t,e)}function wq(){return null}var UD=typeof reportError=="function"?reportError:function(t){console.error(t)};function N2(t){this._internalRoot=t}Gy.prototype.render=N2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Wy(t,e,null,null)};Gy.prototype.unmount=N2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ja(function(){Wy(null,t,null,null)}),e[Ei]=null}};function Gy(t){this._internalRoot=t}Gy.prototype.unstable_scheduleHydration=function(t){if(t){var e=vP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qi.length&&e!==0&&e<Qi[n].priority;n++);Qi.splice(n,0,t),n===0&&xP(t)}};function k2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hC(){}function Sq(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=tg(o);i.call(u)}}var o=jD(e,r,t,0,null,!1,!1,"",hC);return t._reactRootContainer=o,t[Ei]=o.current,ld(t.nodeType===8?t.parentNode:t),Ja(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=tg(l);a.call(u)}}var l=C2(t,0,!1,null,null,!1,!1,"",hC);return t._reactRootContainer=l,t[Ei]=l.current,ld(t.nodeType===8?t.parentNode:t),Ja(function(){Wy(e,l,n,r)}),l}function qy(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=tg(o);a.call(l)}}Wy(e,o,t,s)}else o=Sq(n,e,t,s,r);return tg(o)}gP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_f(e.pendingLanes);n!==0&&(XS(e,n|1),Hn(e,St()),!(Ne&6)&&(Ru=St()+500,Vo()))}break;case 13:Ja(function(){var r=Ti(t,1);if(r!==null){var s=_n();cs(r,t,1,s)}}),I2(t,1)}};YS=function(t){if(t.tag===13){var e=Ti(t,134217728);if(e!==null){var n=_n();cs(e,t,134217728,n)}I2(t,134217728)}};yP=function(t){if(t.tag===13){var e=bo(t),n=Ti(t,e);if(n!==null){var r=_n();cs(n,t,e,r)}I2(t,e)}};vP=function(){return Be};bP=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};hb=function(t,e,n){switch(e){case"input":if(ob(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ly(r);if(!s)throw Error(X(90));YR(r),ob(r,s)}}}break;case"textarea":QR(t,n);break;case"select":e=n.value,e!=null&&au(t,!!n.multiple,e,!1)}};iP=$2;oP=Ja;var $q={usingClientEntryPoint:!1,Events:[Ih,Kl,Ly,rP,sP,$2]},uf={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Eq={bundleType:uf.bundleType,version:uf.version,rendererPackageName:uf.rendererPackageName,rendererConfig:uf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uP(t),t===null?null:t.stateNode},findFiberByHostInstance:uf.findFiberByHostInstance||wq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{Ry=Rp.inject(Eq),Ps=Rp}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$q;hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k2(e))throw Error(X(200));return xq(t,e,null,n)};hr.createRoot=function(t,e){if(!k2(t))throw Error(X(299));var n=!1,r="",s=UD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=C2(t,1,!1,null,null,n,!1,r,s),t[Ei]=e.current,ld(t.nodeType===8?t.parentNode:t),new N2(e)};hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=uP(e),t=t===null?null:t.stateNode,t};hr.flushSync=function(t){return Ja(t)};hr.hydrate=function(t,e,n){if(!Hy(e))throw Error(X(200));return qy(null,t,e,!0,n)};hr.hydrateRoot=function(t,e,n){if(!k2(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=UD;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jD(e,null,t,1,n??null,s,!1,i,o),t[Ei]=e.current,ld(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gy(e)};hr.render=function(t,e,n){if(!Hy(e))throw Error(X(200));return qy(null,t,e,!1,n)};hr.unmountComponentAtNode=function(t){if(!Hy(t))throw Error(X(40));return t._reactRootContainer?(Ja(function(){qy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ei]=null})}),!0):!1};hr.unstable_batchedUpdates=$2;hr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hy(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return qy(t,e,n,!1,r)};hr.version="18.3.1-next-f1338f8080-20240426";function zD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zD)}catch(t){console.error(t)}}zD(),zR.exports=hr;var Tq=zR.exports,pC=Tq;Z1.createRoot=pC.createRoot,Z1.hydrateRoot=pC.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yd.apply(this,arguments)}var oo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oo||(oo={}));const mC="popstate";function _q(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Hb("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ng(s)}return Iq(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VD(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cq(){return Math.random().toString(36).substr(2,8)}function gC(t,e){return{usr:t.state,key:t.key,idx:e}}function Hb(t,e,n,r){return n===void 0&&(n=null),yd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xc(e):e,{state:n,key:e&&e.key||r||Cq()})}function ng(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Iq(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=oo.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(yd({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=oo.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function d(g,y){a=oo.Push;let v=Hb(m.location,g,y);u=c()+1;let b=gC(v,u),x=m.createHref(v);try{o.pushState(b,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(x)}i&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=oo.Replace;let v=Hb(m.location,g,y);u=c();let b=gC(v,u),x=m.createHref(v);o.replaceState(b,"",x),i&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof g=="string"?g:ng(g);return v=v.replace(/ $/,"%20"),Et(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return t(s,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(mC,f),l=g,()=>{s.removeEventListener(mC,f),l=null}},createHref(g){return e(s,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var yC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yC||(yC={}));function Nq(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?xc(e):e,s=A2(r.pathname||"/",n);if(s==null)return null;let i=WD(t);kq(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let l=zq(s);o=Bq(i[a],l)}return o}function WD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=wo([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),WD(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Lq(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of GD(i.path))s(i,o,l)}),e}function GD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=GD(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function kq(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Mq(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Aq=/^:[\w-]+$/,Oq=3,Rq=2,Pq=1,Dq=10,Fq=-2,vC=t=>t==="*";function Lq(t,e){let n=t.split("/"),r=n.length;return n.some(vC)&&(r+=Fq),e&&(r+=Rq),n.filter(s=>!vC(s)).reduce((s,i)=>s+(Aq.test(i)?Oq:i===""?Pq:Dq),r)}function Mq(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Bq(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",c=jq({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let f=a.route;i.push({params:r,pathname:wo([s,c.pathname]),pathnameBase:Hq(wo([s,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(s=wo([s,c.pathnameBase]))}return i}function jq(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Uq(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Uq(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),VD(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zq(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VD(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function A2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Vq(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?xc(t):t;return{pathname:n?n.startsWith("/")?n:Wq(n,e):e,search:qq(r),hash:Kq(s)}}function Wq(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gq(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function O2(t,e){let n=Gq(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function R2(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=xc(t):(s=yd({},t),Et(!s.pathname||!s.pathname.includes("?"),Kv("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),Kv("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),Kv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;s.pathname=d.join("/")}a=f>=0?e[f]:"/"}let l=Vq(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const wo=t=>t.join("/").replace(/\/\/+/g,"/"),Hq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Kq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Xq(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const HD=["post","put","patch","delete"];new Set(HD);const Yq=["get",...HD];new Set(Yq);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(this,arguments)}const P2=D.createContext(null),Jq=D.createContext(null),Wo=D.createContext(null),Ky=D.createContext(null),Ri=D.createContext({outlet:null,matches:[],isDataRoute:!1}),qD=D.createContext(null);function Qq(t,e){let{relative:n}=e===void 0?{}:e;wc()||Et(!1);let{basename:r,navigator:s}=D.useContext(Wo),{hash:i,pathname:o,search:a}=XD(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:wo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function wc(){return D.useContext(Ky)!=null}function Sc(){return wc()||Et(!1),D.useContext(Ky).location}function KD(t){D.useContext(Wo).static||D.useLayoutEffect(t)}function $c(){let{isDataRoute:t}=D.useContext(Ri);return t?h7():Zq()}function Zq(){wc()||Et(!1);let t=D.useContext(P2),{basename:e,future:n,navigator:r}=D.useContext(Wo),{matches:s}=D.useContext(Ri),{pathname:i}=Sc(),o=JSON.stringify(O2(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return KD(()=>{a.current=!0}),D.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=R2(u,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:wo([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,i,t])}const e7=D.createContext(null);function t7(t){let e=D.useContext(Ri).outlet;return e&&D.createElement(e7.Provider,{value:t},e)}function XD(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Wo),{matches:s}=D.useContext(Ri),{pathname:i}=Sc(),o=JSON.stringify(O2(s,r.v7_relativeSplatPath));return D.useMemo(()=>R2(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function n7(t,e){return r7(t,e)}function r7(t,e,n,r){wc()||Et(!1);let{navigator:s}=D.useContext(Wo),{matches:i}=D.useContext(Ri),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Sc(),c;if(e){var f;let g=typeof e=="string"?xc(e):e;l==="/"||(f=g.pathname)!=null&&f.startsWith(l)||Et(!1),c=g}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Nq(t,{pathname:h}),m=l7(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:wo([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:wo([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&m?D.createElement(Ky.Provider,{value:{location:vd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:oo.Pop}},m):m}function s7(){let t=d7(),e=Xq(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const i7=D.createElement(s7,null);class o7 extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ri.Provider,{value:this.props.routeContext},D.createElement(qD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a7(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(P2);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ri.Provider,{value:e},r)}function l7(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||Et(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||i7,l&&(u<0&&d===0?(p=!0,g=null):u===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=D.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,D.createElement(a7,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?D.createElement(o7,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var YD=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YD||{}),rg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rg||{});function u7(t){let e=D.useContext(P2);return e||Et(!1),e}function c7(t){let e=D.useContext(Jq);return e||Et(!1),e}function f7(t){let e=D.useContext(Ri);return e||Et(!1),e}function JD(t){let e=f7(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function d7(){var t;let e=D.useContext(qD),n=c7(rg.UseRouteError),r=JD(rg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function h7(){let{router:t}=u7(YD.UseNavigateStable),e=JD(rg.UseNavigateStable),n=D.useRef(!1);return KD(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,vd({fromRouteId:e},i)))},[t,e])}function p7(t){let{to:e,replace:n,state:r,relative:s}=t;wc()||Et(!1);let{future:i,static:o}=D.useContext(Wo),{matches:a}=D.useContext(Ri),{pathname:l}=Sc(),u=$c(),c=R2(e,O2(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(c);return D.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function m7(t){return t7(t.context)}function _s(t){Et(!1)}function g7(t){let{basename:e="/",children:n=null,location:r,navigationType:s=oo.Pop,navigator:i,static:o=!1,future:a}=t;wc()&&Et(!1);let l=e.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:l,navigator:i,static:o,future:vd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=xc(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=D.useMemo(()=>{let g=A2(c,l);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:s}},[l,c,f,d,h,p,s]);return m==null?null:D.createElement(Wo.Provider,{value:u},D.createElement(Ky.Provider,{children:n,value:m}))}function y7(t){let{children:e,location:n}=t;return n7(qb(e),n)}new Promise(()=>{});function qb(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,qb(r.props.children,i));return}r.type!==_s&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qb(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kb(){return Kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kb.apply(this,arguments)}function v7(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function b7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x7(t,e){return t.button===0&&(!e||e==="_self")&&!b7(t)}const w7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],S7="6";try{window.__reactRouterVersion=S7}catch{}const $7="startTransition",bC=p8[$7];function E7(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=_q({window:s,v5Compat:!0}));let o=i.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=D.useCallback(f=>{u&&bC?bC(()=>l(f)):l(f)},[l,u]);return D.useLayoutEffect(()=>o.listen(c),[o,c]),D.createElement(g7,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const T7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ei=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:f}=e,d=v7(e,w7),{basename:h}=D.useContext(Wo),p,m=!1;if(typeof u=="string"&&_7.test(u)&&(p=u,T7))try{let b=new URL(window.location.href),x=u.startsWith("//")?new URL(b.protocol+u):new URL(u),w=A2(x.pathname,h);x.origin===b.origin&&w!=null?u=w+x.search+x.hash:m=!0}catch{}let g=Qq(u,{relative:s}),y=C7(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,unstable_viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||y(b)}return D.createElement("a",Kb({},d,{href:p||g,onClick:m||i?r:v,ref:n,target:l}))});var xC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xC||(xC={}));var wC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wC||(wC={}));function C7(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=$c(),u=Sc(),c=XD(t,{relative:o});return D.useCallback(f=>{if(x7(f,n)){f.preventDefault();let d=r!==void 0?r:ng(u)===ng(c);l(t,{replace:d,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[u,l,c,r,s,n,t,i,o,a])}var SC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},I7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ZD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,f=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new N7;const d=i<<2|a>>4;if(r.push(d),u!==64){const h=a<<4&240|u>>2;if(r.push(h),f!==64){const p=u<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k7=function(t){const e=QD(t);return ZD.encodeByteArray(e,!0)},e3=function(t){return k7(t).replace(/\./g,"")},t3=function(t){try{return ZD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=()=>A7().__FIREBASE_DEFAULTS__,R7=()=>{if(typeof process>"u"||typeof SC>"u")return;const t=SC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t3(t[1]);return e&&JSON.parse(e)},D2=()=>{try{return O7()||R7()||P7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D7=t=>{var e,n;return(n=(e=D2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},n3=()=>{var t;return(t=D2())===null||t===void 0?void 0:t.config},r3=t=>{var e;return(e=D2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function M7(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function B7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j7(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U7(){try{return typeof indexedDB=="object"}catch{return!1}}function z7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7="FirebaseError";class Go extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V7,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kh.prototype.create)}}class kh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?W7(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Go(s,a,r)}}function W7(t,e){return t.replace(G7,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const G7=/\{\$([^}]+)}/g;function H7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if($C(i)&&$C(o)){if(!sg(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $C(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function q7(t,e){const n=new K7(t,e);return n.subscribe.bind(n)}class K7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");X7(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xv),s.error===void 0&&(s.error=Xv),s.complete===void 0&&(s.complete=Xv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){return t&&t._delegate?t._delegate:t}class Pu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new F7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q7(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J7(t){return t===fa?void 0:t}function Q7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const eK={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},tK=Ge.INFO,nK={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},rK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nK[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let s3=class{constructor(e){this.name=e,this._logLevel=tK,this._logHandler=rK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}};const sK=(t,e)=>e.some(n=>t instanceof n);let EC,TC;function iK(){return EC||(EC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oK(){return TC||(TC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i3=new WeakMap,Xb=new WeakMap,o3=new WeakMap,Yv=new WeakMap,F2=new WeakMap;function aK(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(So(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&i3.set(n,t)}).catch(()=>{}),F2.set(e,t),e}function lK(t){if(Xb.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xb.set(t,e)}let Yb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||o3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return So(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uK(t){Yb=t(Yb)}function cK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jv(this),e,...n);return o3.set(r,e.sort?e.sort():[e]),So(r)}:oK().includes(t)?function(...e){return t.apply(Jv(this),e),So(i3.get(this))}:function(...e){return So(t.apply(Jv(this),e))}}function fK(t){return typeof t=="function"?cK(t):(t instanceof IDBTransaction&&lK(t),sK(t,iK())?new Proxy(t,Yb):t)}function So(t){if(t instanceof IDBRequest)return aK(t);if(Yv.has(t))return Yv.get(t);const e=fK(t);return e!==t&&(Yv.set(t,e),F2.set(e,t)),e}const Jv=t=>F2.get(t);function dK(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=So(o);return r&&o.addEventListener("upgradeneeded",l=>{r(So(o.result),l.oldVersion,l.newVersion,So(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const hK=["get","getKey","getAll","getAllKeys","count"],pK=["put","add","delete","clear"],Qv=new Map;function _C(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qv.get(e))return Qv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=pK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hK.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Qv.set(e,i),i}uK(t=>({...t,get:(e,n,r)=>_C(e,n)||t.get(e,n,r),has:(e,n)=>!!_C(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jb="@firebase/app",CC="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new s3("@firebase/app"),yK="@firebase/app-compat",vK="@firebase/analytics-compat",bK="@firebase/analytics",xK="@firebase/app-check-compat",wK="@firebase/app-check",SK="@firebase/auth",$K="@firebase/auth-compat",EK="@firebase/database",TK="@firebase/database-compat",_K="@firebase/functions",CK="@firebase/functions-compat",IK="@firebase/installations",NK="@firebase/installations-compat",kK="@firebase/messaging",AK="@firebase/messaging-compat",OK="@firebase/performance",RK="@firebase/performance-compat",PK="@firebase/remote-config",DK="@firebase/remote-config-compat",FK="@firebase/storage",LK="@firebase/storage-compat",MK="@firebase/firestore",BK="@firebase/vertexai-preview",jK="@firebase/firestore-compat",UK="firebase",zK="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="[DEFAULT]",VK={[Jb]:"fire-core",[yK]:"fire-core-compat",[bK]:"fire-analytics",[vK]:"fire-analytics-compat",[wK]:"fire-app-check",[xK]:"fire-app-check-compat",[SK]:"fire-auth",[$K]:"fire-auth-compat",[EK]:"fire-rtdb",[TK]:"fire-rtdb-compat",[_K]:"fire-fn",[CK]:"fire-fn-compat",[IK]:"fire-iid",[NK]:"fire-iid-compat",[kK]:"fire-fcm",[AK]:"fire-fcm-compat",[OK]:"fire-perf",[RK]:"fire-perf-compat",[PK]:"fire-rc",[DK]:"fire-rc-compat",[FK]:"fire-gcs",[LK]:"fire-gcs-compat",[MK]:"fire-fst",[jK]:"fire-fst-compat",[BK]:"fire-vertex","fire-js":"fire-js",[UK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Map,WK=new Map,Zb=new Map;function IC(t,e){try{t.container.addComponent(e)}catch(n){Qa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bd(t){const e=t.name;if(Zb.has(e))return Qa.debug(`There were multiple attempts to register component ${e}.`),!1;Zb.set(e,t);for(const n of ig.values())IC(n,t);for(const n of WK.values())IC(n,t);return!0}function a3(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$o=new kh("app","Firebase",GK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=zK;function l3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qb,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $o.create("bad-app-name",{appName:String(s)});if(n||(n=n3()),!n)throw $o.create("no-options");const i=ig.get(s);if(i){if(sg(n,i.options)&&sg(r,i.config))return i;throw $o.create("duplicate-app",{appName:s})}const o=new Z7(s);for(const l of Zb.values())o.addComponent(l);const a=new HK(n,r,o);return ig.set(s,a),a}function qK(t=Qb){const e=ig.get(t);if(!e&&t===Qb&&n3())return l3();if(!e)throw $o.create("no-app",{appName:t});return e}function hu(t,e,n){var r;let s=(r=VK[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qa.warn(a.join(" "));return}bd(new Pu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK="firebase-heartbeat-database",XK=1,xd="firebase-heartbeat-store";let Zv=null;function u3(){return Zv||(Zv=dK(KK,XK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xd)}catch(n){console.warn(n)}}}}).catch(t=>{throw $o.create("idb-open",{originalErrorMessage:t.message})})),Zv}async function YK(t){try{const n=(await u3()).transaction(xd),r=await n.objectStore(xd).get(c3(t));return await n.done,r}catch(e){if(e instanceof Go)Qa.warn(e.message);else{const n=$o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qa.warn(n.message)}}}async function NC(t,e){try{const r=(await u3()).transaction(xd,"readwrite");await r.objectStore(xd).put(e,c3(t)),await r.done}catch(n){if(n instanceof Go)Qa.warn(n.message);else{const r=$o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qa.warn(r.message)}}}function c3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=1024,QK=30*24*60*60*1e3;class ZK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kC();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=QK}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kC(),{heartbeatsToSend:r,unsentEntries:s}=e9(this._heartbeatsCache.heartbeats),i=e3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function kC(){return new Date().toISOString().substring(0,10)}function e9(t,e=JK){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),AC(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),AC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class t9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U7()?z7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return NC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return NC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function AC(t){return e3(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t){bd(new Pu("platform-logger",e=>new mK(e),"PRIVATE")),bd(new Pu("heartbeat",e=>new ZK(e),"PRIVATE")),hu(Jb,CC,t),hu(Jb,CC,"esm2017"),hu("fire-js","")}n9("");function L2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function f3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r9=f3,d3=new kh("auth","Firebase",f3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=new s3("@firebase/auth");function s9(t,...e){og.logLevel<=Ge.WARN&&og.warn(`Auth (${Oh}): ${t}`,...e)}function bm(t,...e){og.logLevel<=Ge.ERROR&&og.error(`Auth (${Oh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,...e){throw B2(t,...e)}function fs(t,...e){return B2(t,...e)}function M2(t,e,n){const r=Object.assign(Object.assign({},r9()),{[e]:n});return new kh("auth","Firebase",r).create(e,{appName:t.name})}function Fa(t){return M2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zs(t,"argument-error"),M2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function B2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d3.create(t,...e)}function me(t,e,...n){if(!t)throw B2(e,...n)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bm(e),new Error(e)}function Ci(t,e){t||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function o9(){return OC()==="http:"||OC()==="https:"}function OC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o9()||M7()||"connection"in navigator)?navigator.onLine:!0}function l9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=L7()||B7()}get(){return a9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=new Rh(3e4,6e4);function U2(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ec(t,e,n,r,s={}){return p3(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ah(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),h3.fetch()(m3(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function p3(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},u9),e);try{const s=new d9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Pp(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pp(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw M2(t,c,u);zs(t,c)}}catch(s){if(s instanceof Go)throw s;zs(t,"network-request-failed",{message:String(s)})}}async function f9(t,e,n,r,s={}){const i=await Ec(t,e,n,r,s);return"mfaPendingCredential"in i&&zs(t,"multi-factor-auth-required",{_serverResponse:i}),i}function m3(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?j2(t.config,s):`${t.config.apiScheme}://${s}`}class d9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fs(this.auth,"network-request-failed")),c9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fs(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h9(t,e){return Ec(t,"POST","/v1/accounts:delete",e)}async function g3(t,e){return Ec(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p9(t,e=!1){const n=Ho(t),r=await n.getIdToken(e),s=z2(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Gf(e1(s.auth_time)),issuedAtTime:Gf(e1(s.iat)),expirationTime:Gf(e1(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function e1(t){return Number(t)*1e3}function z2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bm("JWT malformed, contained fewer than 3 sections"),null;try{const s=t3(n);return s?JSON.parse(s):(bm("Failed to decode base64 JWT payload"),null)}catch(s){return bm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function RC(t){const e=z2(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Go&&m9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gf(this.lastLoginAt),this.creationTime=Gf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ag(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wd(t,g3(n,{idToken:r}));me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?y3(i.providerUserInfo):[],a=v9(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new tx(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function y9(t){const e=Ho(t);await ag(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function y3(t){return t.map(e=>{var{providerId:n}=e,r=L2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(t,e){const n=await p3(t,{},async()=>{const r=Ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=m3(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",h3.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function x9(t,e){return Ec(t,"POST","/v2/accounts:revokeToken",U2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=RC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await b9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new pu;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pu,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=L2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new g9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new tx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wd(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return p9(this,e)}reload(){return y9(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ag(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await wd(this,h9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,h=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:$,stsTokenManager:E}=n;me(b&&E,e,"internal-error");const T=pu.fromJSON(this.name,E);me(typeof b=="string",e,"internal-error"),Wi(f,e.name),Wi(d,e.name),me(typeof x=="boolean",e,"internal-error"),me(typeof w=="boolean",e,"internal-error"),Wi(h,e.name),Wi(p,e.name),Wi(m,e.name),Wi(g,e.name),Wi(y,e.name),Wi(v,e.name);const N=new mi({uid:b,auth:e,email:d,emailVerified:x,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return $&&Array.isArray($)&&(N.providerData=$.map(I=>Object.assign({},I))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new pu;s.updateFromServerResponse(n);const i=new mi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ag(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?y3(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new pu;a.updateFromIdToken(r);const l=new mi({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new tx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Map;function gi(t){Ci(t instanceof Function,"Expected a class definition");let e=PC.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}v3.type="NONE";const DC=v3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e,n){return`firebase:${t}:${e}:${n}`}class mu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xm(this.userKey,s.apiKey,i),this.fullPersistenceKey=xm("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mu(gi(DC),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||gi(DC);const o=xm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const f=mi._fromJSON(e,c);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new mu(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new mu(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($3(e))return"Blackberry";if(E3(e))return"Webos";if(V2(e))return"Safari";if((e.includes("chrome/")||x3(e))&&!e.includes("edge/"))return"Chrome";if(S3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b3(t=xn()){return/firefox\//i.test(t)}function V2(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x3(t=xn()){return/crios\//i.test(t)}function w3(t=xn()){return/iemobile/i.test(t)}function S3(t=xn()){return/android/i.test(t)}function $3(t=xn()){return/blackberry/i.test(t)}function E3(t=xn()){return/webos/i.test(t)}function Xy(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function w9(t=xn()){var e;return Xy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function S9(){return j7()&&document.documentMode===10}function T3(t=xn()){return Xy(t)||S3(t)||E3(t)||$3(t)||/windows phone/i.test(t)||w3(t)}function $9(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e=[]){let n;switch(t){case"Browser":n=FC(xn());break;case"Worker":n=`${FC(xn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T9(t,e={}){return Ec(t,"GET","/v2/passwordPolicy",U2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=6;class C9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LC(this),this.idTokenSubscription=new LC(this),this.beforeStateQueue=new E9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await mu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await g3(this,{idToken:e}),r=await mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ag(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(Fa(this));const n=e?Ho(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T9(this),n=new C9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await x9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await mu.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&s9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yy(t){return Ho(t)}class LC{constructor(e){this.auth=e,this.observer=null,this.addObserver=q7(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W2={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N9(t){W2=t}function k9(t){return W2.loadJS(t)}function A9(){return W2.gapiScript}function O9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t,e){const n=a3(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(sg(i,e??{}))return s;zs(s,"already-initialized")}return n.initialize({options:e})}function P9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function D9(t,e,n){const r=Yy(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=C3(e),{host:o,port:a}=F9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),L9()}function C3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function F9(t){const e=C3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:MC(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:MC(o)}}}function MC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function L9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t,e){return f9(t,"POST","/v1/accounts:signInWithIdp",U2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="http://localhost";class Za extends I3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=L2(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Za(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gu(e,n)}buildRequest(){const e={requestUri:M9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ah(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends G2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Ph{constructor(){super("facebook.com")}static credential(e){return Za._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Za._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return li.credential(n,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Ph{constructor(){super("github.com")}static credential(e){return Za._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Ph{constructor(){super("twitter.com")}static credential(e,n){return Za._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return no.credential(n,r)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mi._fromIdTokenResponse(e,r,s),o=BC(r);return new Du({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=BC(r);return new Du({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function BC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends Go{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lg.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lg(e,n,r,s)}}function N3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lg._fromErrorAndOperation(t,i,e,r):i})}async function B9(t,e,n=!1){const r=await wd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Du._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e,n=!1){const{auth:r}=t;if(hi(r.app))return Promise.reject(Fa(r));const s="reauthenticate";try{const i=await wd(t,N3(r,s,e,t),n);me(i.idToken,r,"internal-error");const o=z2(i.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),Du._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zs(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(t,e,n=!1){if(hi(t.app))return Promise.reject(Fa(t));const r="signIn",s=await N3(t,r,e),i=await Du._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function z9(t,e,n,r){return Ho(t).onIdTokenChanged(e,n,r)}function V9(t,e,n){return Ho(t).beforeAuthStateChanged(e,n)}function H2(t,e,n,r){return Ho(t).onAuthStateChanged(e,n,r)}function W9(t){return Ho(t).signOut()}const ug="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ug,"1"),this.storage.removeItem(ug),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(){const t=xn();return V2(t)||Xy(t)}const H9=1e3,q9=10;class A3 extends k3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=G9()&&$9(),this.fallbackToPolling=T3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);S9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,q9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},H9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A3.type="LOCAL";const K9=A3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3 extends k3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O3.type="SESSION";const R3=O3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Jy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await X9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=q2("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const d=f;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(){return window}function J9(t){Fs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(){return typeof Fs().WorkerGlobalScope<"u"&&typeof Fs().importScripts=="function"}async function Q9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eX(){return P3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firebaseLocalStorageDb",tX=1,cg="firebaseLocalStorage",F3="fbase_key";class Dh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qy(t,e){return t.transaction([cg],e?"readwrite":"readonly").objectStore(cg)}function nX(){const t=indexedDB.deleteDatabase(D3);return new Dh(t).toPromise()}function nx(){const t=indexedDB.open(D3,tX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cg,{keyPath:F3})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cg)?e(r):(r.close(),await nX(),e(await nx()))})})}async function jC(t,e,n){const r=Qy(t,!0).put({[F3]:e,value:n});return new Dh(r).toPromise()}async function rX(t,e){const n=Qy(t,!1).get(e),r=await new Dh(n).toPromise();return r===void 0?null:r.value}function UC(t,e){const n=Qy(t,!0).delete(e);return new Dh(n).toPromise()}const sX=800,iX=3;class L3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jy._getInstance(eX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Q9(),!this.activeServiceWorker)return;this.sender=new Y9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nx();return await jC(e,ug,"1"),await UC(e,ug),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>UC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qy(s,!1).getAll();return new Dh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L3.type="LOCAL";const oX=L3;new Rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t,e){return e?gi(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2 extends I3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aX(t){return U9(t.auth,new K2(t),t.bypassAuthState)}function lX(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),j9(n,new K2(t),t.bypassAuthState)}async function uX(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),B9(n,new K2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aX;case"linkViaPopup":case"linkViaRedirect":return uX;case"reauthViaPopup":case"reauthViaRedirect":return lX;default:zs(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cX=new Rh(2e3,1e4);async function fX(t,e,n){if(hi(t.app))return Promise.reject(fs(t,"operation-not-supported-in-this-environment"));const r=Yy(t);i9(t,e,G2);const s=M3(r,n);return new Ca(r,"signInViaPopup",e,s).executeNotNull()}class Ca extends B3{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=q2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cX.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX="pendingRedirect",wm=new Map;class hX extends B3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wm.get(this.auth._key());if(!e){try{const r=await pX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wm.set(this.auth._key(),e)}return this.bypassAuthState||wm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pX(t,e){const n=yX(e),r=gX(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mX(t,e){wm.set(t._key(),e)}function gX(t){return gi(t._redirectPersistence)}function yX(t){return xm(dX,t.config.apiKey,t.name)}async function vX(t,e,n=!1){if(hi(t.app))return Promise.reject(Fa(t));const r=Yy(t),s=M3(r,e),o=await new hX(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bX=10*60*1e3;class xX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wX(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!j3(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bX&&this.cachedEventUids.clear(),this.cachedEventUids.has(zC(e))}saveEventToCache(e){this.cachedEventUids.add(zC(e)),this.lastProcessedEventTime=Date.now()}}function zC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wX(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SX(t,e={}){return Ec(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EX=/^https?/;async function TX(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SX(t);for(const n of e)try{if(_X(n))return}catch{}zs(t,"unauthorized-domain")}function _X(t){const e=ex(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!EX.test(n))return!1;if($X.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CX=new Rh(3e4,6e4);function VC(){const t=Fs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IX(t){return new Promise((e,n)=>{var r,s,i;function o(){VC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VC(),n(fs(t,"network-request-failed"))},timeout:CX.get()})}if(!((s=(r=Fs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Fs().gapi)===null||i===void 0)&&i.load)o();else{const a=O9("iframefcb");return Fs()[a]=()=>{gapi.load?o():n(fs(t,"network-request-failed"))},k9(`${A9()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Sm=null,e})}let Sm=null;function NX(t){return Sm=Sm||IX(t),Sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX=new Rh(5e3,15e3),AX="__/auth/iframe",OX="emulator/auth/iframe",RX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DX(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?j2(e,OX):`https://${t.config.authDomain}/${AX}`,r={apiKey:e.apiKey,appName:t.name,v:Oh},s=PX.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ah(r).slice(1)}`}async function FX(t){const e=await NX(t),n=Fs().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:DX(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RX,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fs(t,"network-request-failed"),a=Fs().setTimeout(()=>{i(o)},kX.get());function l(){Fs().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MX=500,BX=600,jX="_blank",UX="http://localhost";class WC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zX(t,e,n,r=MX,s=BX){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},LX),{width:r.toString(),height:s.toString(),top:i,left:o}),u=xn().toLowerCase();n&&(a=x3(u)?jX:n),b3(u)&&(e=e||UX,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(w9(u)&&a!=="_self")return VX(e||"",a),new WC(null);const f=window.open(e||"",a,c);me(f,t,"popup-blocked");try{f.focus()}catch{}return new WC(f)}function VX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WX="__/auth/handler",GX="emulator/auth/handler",HX=encodeURIComponent("fac");async function GC(t,e,n,r,s,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oh,eventId:s};if(e instanceof G2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",H7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(e instanceof Ph){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${HX}=${encodeURIComponent(l)}`:"";return`${qX(t)}?${Ah(a).slice(1)}${u}`}function qX({config:t}){return t.emulator?j2(t,GX):`https://${t.authDomain}/${WX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="webStorageSupport";class KX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R3,this._completeRedirectFn=vX,this._overrideRedirectResult=mX}async _openPopup(e,n,r,s){var i;Ci((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await GC(e,n,r,ex(),s);return zX(e,o,q2())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await GC(e,n,r,ex(),s);return J9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ci(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FX(e),r=new xX(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(t1,{type:t1},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[t1];o!==void 0&&n(!!o),zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TX(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T3()||V2()||Xy()}}const XX=KX;var HC="@firebase/auth",qC="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QX(t){bd(new Pu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_3(t)},u=new I9(r,s,i,l);return P9(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bd(new Pu("auth-internal",e=>{const n=Yy(e.getProvider("auth").getImmediate());return(r=>new YX(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hu(HC,qC,JX(t)),hu(HC,qC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX=5*60,eY=r3("authIdTokenMaxAge")||ZX;let KC=null;const tY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eY)return;const s=n==null?void 0:n.token;KC!==s&&(KC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nY(t=qK()){const e=a3(t,"auth");if(e.isInitialized())return e.getImmediate();const n=R9(t,{popupRedirectResolver:XX,persistence:[oX,K9,R3]}),r=r3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=tY(i.toString());V9(n,o,()=>o(n.currentUser)),z9(n,a=>o(a))}}const s=D7("auth");return s&&D9(n,`http://${s}`),n}function rY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}N9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fs("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",rY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QX("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function sY(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,[])).next())})}function iY(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tu=function(){return tu=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tu.apply(this,arguments)},U3=function(t){return{loading:t==null,value:t}},oY=function(){return function(t,e){switch(e.type){case"error":return tu(tu({},t),{error:e.error,loading:!1,value:void 0});case"reset":return U3(e.defaultValue);case"value":return tu(tu({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},aY=function(t){var e=t?t():void 0,n=D.useReducer(oY(),U3(e)),r=n[0],s=n[1],i=D.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=D.useCallback(function(l){s({type:"error",error:l})},[]),a=D.useCallback(function(l){s({type:"value",value:l})},[]);return D.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},lY=function(t,e){var n=aY(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return D.useEffect(function(){var l=H2(t,function(u){return sY(void 0,void 0,void 0,function(){var c;return iY(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return f.sent(),[3,4];case 3:return c=f.sent(),i(c),[3,4];case 4:return o(u),[2]}})})},i);return function(){l()}},[t]),[a,s,r]};const uY="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='28'%20height='28'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23dadada'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-moon'%3e%3cpath%20d='M21%2012.79A9%209%200%201%201%2011.21%203%207%207%200%200%200%2021%2012.79z'%3e%3c/path%3e%3c/svg%3e",cY="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='28'%20height='28'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23212529'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-sun'%3e%3ccircle%20cx='12'%20cy='12'%20r='5'%3e%3c/circle%3e%3cline%20x1='12'%20y1='1'%20x2='12'%20y2='3'%3e%3c/line%3e%3cline%20x1='12'%20y1='21'%20x2='12'%20y2='23'%3e%3c/line%3e%3cline%20x1='4.22'%20y1='4.22'%20x2='5.64'%20y2='5.64'%3e%3c/line%3e%3cline%20x1='18.36'%20y1='18.36'%20x2='19.78'%20y2='19.78'%3e%3c/line%3e%3cline%20x1='1'%20y1='12'%20x2='3'%20y2='12'%3e%3c/line%3e%3cline%20x1='21'%20y1='12'%20x2='23'%20y2='12'%3e%3c/line%3e%3cline%20x1='4.22'%20y1='19.78'%20x2='5.64'%20y2='18.36'%3e%3c/line%3e%3cline%20x1='18.36'%20y1='5.64'%20x2='19.78'%20y2='4.22'%3e%3c/line%3e%3c/svg%3e";var fY="firebase",dY="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hu(fY,dY,"app");const hY={apiKey:"AIzaSyDZryiuDRggXK0WUVd_pMJaTOxheaHycOo",authDomain:"prueba-d02d3.firebaseapp.com",projectId:"prueba-d02d3",storageBucket:"prueba-d02d3.appspot.com",messagingSenderId:"229075976669",appId:"1:229075976669:web:904f5b4c0513581190b634"},pY=l3(hY),Fu=nY(pY),mY=new li,rx="light",z3="dark";var V3={exports:{}},gY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yY=gY,vY=yY;function W3(){}function G3(){}G3.resetWarningCache=W3;var bY=function(){function t(r,s,i,o,a,l){if(l!==vY){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:G3,resetWarningCache:W3};return n.PropTypes=n,n};V3.exports=bY();var H3=V3.exports;const ye=Le(H3),q3=D.createContext({}),K3=({children:t})=>{const[e,n]=D.useState(window.localStorage.getItem("themeMode"));window.localStorage.setItem("themeMode",e);const r=()=>{n(s=>s===rx?z3:rx),window.localStorage.setItem("themeMode",e)};return k.jsx(q3.Provider,{value:{theme:e,toggleTheme:r},children:t})};K3.propTypes={children:ye.node.isRequired};var X3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XC=F.createContext&&F.createContext(X3),xY=["attr","size","title"];function wY(t,e){if(t==null)return{};var n=SY(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fg(){return fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fg.apply(this,arguments)}function YC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YC(Object(n),!0).forEach(function(r){$Y(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Y(t,e,n){return e=EY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EY(t){var e=TY(t,"string");return typeof e=="symbol"?e:e+""}function TY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y3(t){return t&&t.map((e,n)=>F.createElement(e.tag,dg({key:n},e.attr),Y3(e.child)))}function Fh(t){return e=>F.createElement(_Y,fg({attr:dg({},t.attr)},e),Y3(t.child))}function _Y(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=wY(t,xY),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),F.createElement("svg",fg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:dg(dg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&F.createElement("title",null,i),t.children)};return XC!==void 0?F.createElement(XC.Consumer,null,n=>e(n)):e(X3)}function CY(t){return Fh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17 8-1.41 1.41L17.17 11H9v2h8.17l-1.58 1.58L17 16l4-4-4-4zM5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5V5z"},child:[]}]})(t)}function IY(t){return Fh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 0 0-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(t)}function n1(t){return Fh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"},child:[]}]})(t)}function NY(t){return Fh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},child:[]}]})(t)}function kY(t){return Fh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}const J3=D.createContext({}),Q3=({children:t})=>{const[e,n]=D.useState(!1),r=()=>{n(!0)},s=()=>{n(!1)};return k.jsx(J3.Provider,{value:{isSidebarOpen:e,openSidebar:r,closeSidebar:s},children:t})};Q3.propTypes={children:H3.PropTypes.node};const AY=()=>{const{isSidebarOpen:t,closeSidebar:e,openSidebar:n}=D.useContext(J3),r=D.useRef(null),s=$c(),[i,o]=D.useState(null);D.useEffect(()=>{Fu.onAuthStateChanged(u=>{o(u)})},[]);const a=async()=>{await W9(Fu),s("/login")},l=D.useCallback(u=>{r.current&&!r.current.contains(u.target)&&u.target.className!=="sidebar-open-btn"&&e()},[e]);return D.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[l]),k.jsxs(k.Fragment,{children:[k.jsx("button",{className:"sidebar-open-btn",onClick:n,children:k.jsx(kY,{size:24})}),k.jsxs("nav",{className:`sidebar ${t?"sidebar-show":""}`,ref:r,children:[k.jsxs("div",{className:"sidebar-top",children:[k.jsxs("div",{className:"sidebar-user",children:[i!=null&&i.photoURL?k.jsx("img",{src:i.photoURL,alt:"User Avatar",className:"sidebar-user-avatar"}):k.jsx("div",{className:"sidebar-user-avatar-placeholder",children:"U"}),k.jsx("span",{className:"sidebar-user-name",children:(i==null?void 0:i.displayName)||"Usuario"})]}),k.jsx("button",{className:"sidebar-close-btn",onClick:e,children:k.jsx(NY,{size:24})})]}),k.jsxs("div",{className:"sidebar-body",children:[k.jsx("div",{className:"sidebar-menu",children:k.jsxs("ul",{className:"menu-list",children:[k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/home.svg",alt:"Home Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Menu"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/courses",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/courses.svg",alt:"Courses Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Mis cursos"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/chatbot",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/chatbot.svg",alt:"Chatbot Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"ChatBot"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/tutoring",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/tutoring.svg",alt:"Tutoring Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Tutoria"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/library",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/library.svg",alt:"Library Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Biblioteca"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/specialization",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/specialization.svg",alt:"Specialization Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Malla y Especialización"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/scholarships",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/scholarships.svg",alt:"Scholarships Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Info de Becas"})]})}),k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/projects",className:"menu-link",children:[k.jsx("img",{src:"/src/assets/icons/projects.svg",alt:"Projects Icon",className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Proyectos"})]})})]})}),k.jsx("div",{className:"sidebar-menu sidebar-menu2",children:k.jsxs("ul",{className:"menu-list",children:[k.jsx("li",{className:"menu-item",children:k.jsxs(ei,{to:"/settings",className:"menu-link",children:[k.jsx(IY,{size:20,className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Settings"})]})}),k.jsx("li",{className:"menu-item",onClick:a,children:k.jsxs("span",{className:"menu-link",children:[k.jsx(CY,{size:20,className:"menu-link-icon"}),k.jsx("span",{className:"menu-link-text",children:"Logout"})]})})]})})]})]})]})},OY=()=>{const[t,e]=D.useState(!0),n=$c();return D.useEffect(()=>{const r=H2(Fu,s=>{s?e(!1):n("/login")});return()=>r()},[n]),t?k.jsx("div",{children:"Loading..."}):k.jsxs("div",{className:"page-wrapper",children:[k.jsx(AY,{}),k.jsx("div",{className:"content-wrapper",children:k.jsx(m7,{})})]})};var sx={exports:{}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RY=1e-7,PY=1e-4;let DY=class{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},Z3=class{refCount(e){return Rn("refCount")}incRef(e){return Rn("incRef")}timerAvailable(){return!0}time(e){return Rn("time")}read(e){return Rn("read")}readSync(e){return Rn("readSync")}readToGPU(e,n){return Rn("readToGPU")}numDataIds(){return Rn("numDataIds")}disposeData(e,n){return Rn("disposeData")}write(e,n,r){return Rn("write")}move(e,n,r,s,i){return Rn("move")}createTensorFromGPUData(e,n,r){return Rn("createTensorFromGPUData")}memory(){return Rn("memory")}floatPrecision(){return Rn("floatPrecision")}epsilon(){return this.floatPrecision()===32?RY:PY}dispose(){return Rn("dispose")}};function Rn(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eF(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,hg(t,e,n)}function FY(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,hg(t,n,r),hg(e,n,r)}function Sd(t,e,n){return Math.max(t,Math.min(e,n))}function LY(t){return t%2===0?t:t+1}function hg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function MY(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function BY(t,e){const n=Math.random();return e*n+(1-n)*t}function jY(t,e){let n=0;for(let r=0;r<t.length;r++){const s=Number(t[r])-Number(e[r]);n+=s*s}return n}function C(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Sn(t,e,n=""){C(ys(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function yl(t){C(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function je(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function UY(t){return t.length===0}function tF(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function ys(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Lu(t){return t%1===0}function zY(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function VY(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function WY(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return eF(e),e}function Hf(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function GY(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function HY(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Lh(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),C(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),C(t.every(r=>Lu(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function nF(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Lh(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function rF(t,e){return X2(t,e)}function X2(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function sF(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function iF(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function qY(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function pg(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function oF(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ao(t){return typeof t=="string"||t instanceof String}function aF(t){return typeof t=="boolean"}function lF(t){return typeof t=="number"}function Mh(t){return Array.isArray(t)?Mh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":lF(t)?"float32":ao(t)?"string":aF(t)?"bool":"float32"}function Ao(t){return!!(t&&t.constructor&&t.call&&t.apply)}function mg(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Tc(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function uF(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)s[l]=uF(t+l*a,o,n,r)}return s}function La(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return uF(0,t,e,n)}function KY(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function Y2(t,e){const n=Zy(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Zy(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function XY(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return La(t,new Float32Array(n));if(e==="int32")return La(t,new Int32Array(n));if(e==="bool")return La(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Jn(t){t.forEach(e=>{C(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function YY(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function JY(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Oo(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JC="tfjsflags";let cF=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=QY,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Oo(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);JC in e&&e[JC].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=eJ(s,i)})}};function QY(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(ZY(e,r[0],r[1]),r.join("="))),e}function ZY(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function eJ(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function he(){return J2}let J2=null;function tJ(t){J2=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r1;function fF(){if(r1==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");r1=t}return r1}function nJ(){const t=fF();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Q2(t,e){const n=nJ();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const dF="Abs",hF="Acos",pF="Acosh",Z2="Add",mF="AddN",gF="All",yF="Any",vF="ArgMax",bF="ArgMin",xF="Asin",wF="Asinh",SF="Atan",$F="Atanh",EF="Atan2",TF="AvgPool",rJ="AvgPoolGrad",_F="AvgPool3D",sJ="AvgPool3DGrad",CF="BatchMatMul",IF="BatchToSpaceND",NF="Bincount",kF="BitwiseAnd",iJ="BroadcastTo",AF="BroadcastArgs",e$="Cast",OF="Ceil",RF="ClipByValue",PF="Complex",DF="ComplexAbs",FF="Concat",LF="Conv2D",MF="Conv2DBackpropFilter",BF="Conv2DBackpropInput",jF="Conv3D",oJ="Conv3DBackpropFilterV2",UF="Conv3DBackpropInputV2",zF="Cos",VF="Cosh",WF="Cumprod",GF="Cumsum",HF="CropAndResize",qF="DenseBincount",KF="DepthToSpace",XF="DepthwiseConv2dNative",YF="DepthwiseConv2dNativeBackpropFilter",JF="DepthwiseConv2dNativeBackpropInput",QF="Diag",ZF="Dilation2D",aJ="Dilation2DBackpropInput",lJ="Dilation2DBackpropFilter",t$="Draw",eL="RealDiv",tL="Einsum",nL="Elu",uJ="EluGrad",rL="Erf",sL="Equal",iL="Exp",oL="ExpandDims",aL="Expm1",lL="FFT",uL="Fill",cL="FlipLeftRight",fL="Floor",dL="FloorDiv",hL="FusedBatchNorm",pL="GatherV2",mL="GatherNd",gL="Greater",yL="GreaterEqual",n$="Identity",vL="IFFT",bL="Imag",xL="IsFinite",wL="IsInf",SL="IsNan",$L="LeakyRelu",EL="Less",TL="LessEqual",_L="LinSpace",CL="Log",IL="Log1p",NL="LogicalAnd",kL="LogicalNot",AL="LogicalOr",cJ="LogicalXor",fJ="LogSoftmax",dJ="LowerBound",OL="LRN",hJ="LRNGrad",pJ="MatrixBandPart",RL="Max",PL="Maximum",DL="MaxPool",mJ="MaxPoolGrad",FL="MaxPool3D",gJ="MaxPool3DGrad",LL="MaxPoolWithArgmax",ML="Mean",BL="Min",jL="Minimum",UL="MirrorPad",zL="Mod",VL="Multinomial",WL="Multiply",GL="Neg",HL="NotEqual",qL="NonMaxSuppressionV3",KL="NonMaxSuppressionV4",XL="NonMaxSuppressionV5",YL="OnesLike",JL="OneHot",QL="Pack",ZL="PadV2",yJ="Pool",eM="Pow",tM="Prelu",nM="Prod",rM="RaggedGather",sM="RaggedRange",iM="RaggedTensorToTensor",oM="Range",aM="Real",lM="Reciprocal",uM="Relu",cM="Reshape",fM="ResizeNearestNeighbor",vJ="ResizeNearestNeighborGrad",dM="ResizeBilinear",bJ="ResizeBilinearGrad",hM="Relu6",pM="Reverse",mM="Round",gM="Rsqrt",yM="ScatterNd",vM="TensorScatterUpdate",bM="SearchSorted",xM="Select",wM="Selu",SM="Slice",$M="Sin",EM="Sinh",TM="Sign",_M="Sigmoid",CM="Softplus",IM="Sqrt",NM="Sum",kM="SpaceToBatchND",AM="SplitV",OM="Softmax",RM="SparseFillEmptyRows",PM="SparseReshape",DM="SparseSegmentMean",FM="SparseSegmentSum",LM="SparseToDense",MM="SquaredDifference",xJ="Square",BM="StaticRegexReplace",jM="StridedSlice",UM="StringNGrams",zM="StringSplit",VM="StringToHashBucketFast",WM="Sub",GM="Tan",HM="Tanh",r$="Tile",qM="TopK",KM="Transform",$m="Transpose",XM="Unique",YM="Unpack",JM="UnsortedSegmentSum",wJ="UpperBound",QM="ZerosLike",ZM="Step",ix="FromPixels",eB="RotateWithOffset",ox="_FusedMatMul",ax="FusedConv2D",lx="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ro(...t){he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(...t)}function SJ(...t){he().getBool("IS_TEST")||he().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mu=Q2("kernelRegistry",()=>new Map),$d=Q2("gradRegistry",()=>new Map);function Ed(t,e){const n=s$(t,e);return Mu.get(n)}function ux(t){return $d.get(t)}function gg(t){const e=Mu.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function tB(t){const{kernelName:e,backendName:n}=t,r=s$(e,n);Mu.has(r)&&ro(`The kernel '${e}' for backend '${n}' is already registered`),Mu.set(r,t)}function $J(t){const{kernelName:e}=t;$d.has(e)&&he().getBool("DEBUG")&&ro(`Overriding the gradient for '${e}'`),$d.set(e,t)}function EJ(t,e){const n=s$(t,e);if(!Mu.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Mu.delete(n)}function TJ(t){if(!$d.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);$d.delete(t)}function _J(t,e){gg(t).forEach(r=>{const s=Object.assign({},r,{backendName:e});tB(s)})}function s$(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nB(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var rB=tt,Nr=null;try{Nr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function tt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}tt.prototype.__isLong__;Object.defineProperty(tt.prototype,"__isLong__",{value:!0});function Qn(t){return(t&&t.__isLong__)===!0}tt.isLong=Qn;var QC={},ZC={};function vl(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=ZC[t],r)?r:(n=nt(t,(t|0)<0?-1:0,!0),s&&(ZC[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=QC[t],r)?r:(n=nt(t,t<0?-1:0,!1),s&&(QC[t]=n),n))}tt.fromInt=vl;function kr(t,e){if(isNaN(t))return e?Ia:Ar;if(e){if(t<0)return Ia;if(t>=sB)return aB}else{if(t<=-tI)return jn;if(t+1>=tI)return oB}return t<0?kr(-t,e).neg():nt(t%Bu|0,t/Bu|0,e)}tt.fromNumber=kr;function nt(t,e,n){return new tt(t,e,n)}tt.fromBits=nt;var yg=Math.pow;function i$(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ar;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return i$(t.substring(1),e,n).neg();for(var s=kr(yg(n,8)),i=Ar,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=kr(yg(n,a));i=i.mul(u).add(kr(l))}else i=i.mul(s),i=i.add(kr(l))}return i.unsigned=e,i}tt.fromString=i$;function bs(t,e){return typeof t=="number"?kr(t,e):typeof t=="string"?i$(t,e):nt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}tt.fromValue=bs;var eI=65536,CJ=1<<24,Bu=eI*eI,sB=Bu*Bu,tI=sB/2,nI=vl(CJ),Ar=vl(0);tt.ZERO=Ar;var Ia=vl(0,!0);tt.UZERO=Ia;var nu=vl(1);tt.ONE=nu;var iB=vl(1,!0);tt.UONE=iB;var cx=vl(-1);tt.NEG_ONE=cx;var oB=nt(-1,2147483647,!1);tt.MAX_VALUE=oB;var aB=nt(-1,-1,!0);tt.MAX_UNSIGNED_VALUE=aB;var jn=nt(0,-2147483648,!1);tt.MIN_VALUE=jn;var Q=tt.prototype;Q.toInt=function(){return this.unsigned?this.low>>>0:this.low};Q.toNumber=function(){return this.unsigned?(this.high>>>0)*Bu+(this.low>>>0):this.high*Bu+(this.low>>>0)};Q.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(jn)){var n=kr(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=kr(yg(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),u=o.sub(l.mul(i)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Q.getHighBits=function(){return this.high};Q.getHighBitsUnsigned=function(){return this.high>>>0};Q.getLowBits=function(){return this.low};Q.getLowBitsUnsigned=function(){return this.low>>>0};Q.getNumBitsAbs=function(){if(this.isNegative())return this.eq(jn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Q.isZero=function(){return this.high===0&&this.low===0};Q.eqz=Q.isZero;Q.isNegative=function(){return!this.unsigned&&this.high<0};Q.isPositive=function(){return this.unsigned||this.high>=0};Q.isOdd=function(){return(this.low&1)===1};Q.isEven=function(){return(this.low&1)===0};Q.equals=function(e){return Qn(e)||(e=bs(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Q.eq=Q.equals;Q.notEquals=function(e){return!this.eq(e)};Q.neq=Q.notEquals;Q.ne=Q.notEquals;Q.lessThan=function(e){return this.comp(e)<0};Q.lt=Q.lessThan;Q.lessThanOrEqual=function(e){return this.comp(e)<=0};Q.lte=Q.lessThanOrEqual;Q.le=Q.lessThanOrEqual;Q.greaterThan=function(e){return this.comp(e)>0};Q.gt=Q.greaterThan;Q.greaterThanOrEqual=function(e){return this.comp(e)>=0};Q.gte=Q.greaterThanOrEqual;Q.ge=Q.greaterThanOrEqual;Q.compare=function(e){if(Qn(e)||(e=bs(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Q.comp=Q.compare;Q.negate=function(){return!this.unsigned&&this.eq(jn)?jn:this.not().add(nu)};Q.neg=Q.negate;Q.add=function(e){Qn(e)||(e=bs(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,f=0,d=0,h=0;return h+=i+u,d+=h>>>16,h&=65535,d+=s+l,f+=d>>>16,d&=65535,f+=r+a,c+=f>>>16,f&=65535,c+=n+o,c&=65535,nt(d<<16|h,c<<16|f,this.unsigned)};Q.subtract=function(e){return Qn(e)||(e=bs(e)),this.add(e.neg())};Q.sub=Q.subtract;Q.multiply=function(e){if(this.isZero())return Ar;if(Qn(e)||(e=bs(e)),Nr){var n=Nr.mul(this.low,this.high,e.low,e.high);return nt(n,Nr.get_high(),this.unsigned)}if(e.isZero())return Ar;if(this.eq(jn))return e.isOdd()?jn:Ar;if(e.eq(jn))return this.isOdd()?jn:Ar;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(nI)&&e.lt(nI))return kr(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,f=0,d=0,h=0,p=0;return p+=o*c,h+=p>>>16,p&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=o*u,d+=h>>>16,h&=65535,d+=s*c,f+=d>>>16,d&=65535,d+=i*u,f+=d>>>16,d&=65535,d+=o*l,f+=d>>>16,d&=65535,f+=r*c+s*u+i*l+o*a,f&=65535,nt(h<<16|p,f<<16|d,this.unsigned)};Q.mul=Q.multiply;Q.divide=function(e){if(Qn(e)||(e=bs(e)),e.isZero())throw Error("division by zero");if(Nr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Nr.div_u:Nr.div_s)(this.low,this.high,e.low,e.high);return nt(n,Nr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ia:Ar;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ia;if(e.gt(this.shru(1)))return iB;i=Ia}else{if(this.eq(jn)){if(e.eq(nu)||e.eq(cx))return jn;if(e.eq(jn))return nu;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ar)?e.isNegative()?nu:cx:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(jn))return this.unsigned?Ia:Ar;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Ar}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:yg(2,a-48),u=kr(r),c=u.mul(e);c.isNegative()||c.gt(s);)r-=l,u=kr(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=nu),i=i.add(u),s=s.sub(c)}return i};Q.div=Q.divide;Q.modulo=function(e){if(Qn(e)||(e=bs(e)),Nr){var n=(this.unsigned?Nr.rem_u:Nr.rem_s)(this.low,this.high,e.low,e.high);return nt(n,Nr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Q.mod=Q.modulo;Q.rem=Q.modulo;Q.not=function(){return nt(~this.low,~this.high,this.unsigned)};Q.and=function(e){return Qn(e)||(e=bs(e)),nt(this.low&e.low,this.high&e.high,this.unsigned)};Q.or=function(e){return Qn(e)||(e=bs(e)),nt(this.low|e.low,this.high|e.high,this.unsigned)};Q.xor=function(e){return Qn(e)||(e=bs(e)),nt(this.low^e.low,this.high^e.high,this.unsigned)};Q.shiftLeft=function(e){return Qn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?nt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):nt(0,this.low<<e-32,this.unsigned)};Q.shl=Q.shiftLeft;Q.shiftRight=function(e){return Qn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?nt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):nt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Q.shr=Q.shiftRight;Q.shiftRightUnsigned=function(e){if(Qn(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return nt(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?nt(n,0,this.unsigned):nt(n>>>e-32,0,this.unsigned)};Q.shru=Q.shiftRightUnsigned;Q.shr_u=Q.shiftRightUnsigned;Q.toSigned=function(){return this.unsigned?nt(this.low,this.high,!1):this};Q.toUnsigned=function(){return this.unsigned?this:nt(this.low,this.high,!0)};Q.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Q.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Q.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};tt.fromBytes=function(e,n,r){return r?tt.fromBytesLE(e,n):tt.fromBytesBE(e,n)};tt.fromBytesLE=function(e,n){return new tt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};tt.fromBytesBE=function(e,n){return new tt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const lB=Le(rB),IJ=DS({__proto__:null,default:lB},[rB]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ya=lB||IJ;function Bh(t){return ya.fromString(t,!0,16)}const uB=Bh("c3a5c85c97cb3127"),da=Bh("b492b66fbe98f273"),hn=Bh("9ae16a3b2f90404f");function fx(t){return t.xor(t.shru(47))}function cB(t,e,n){const r=t.slice(e,e+n);return ya.fromBytes(Array.from(r),!0,!0)}function He(t,e){return cB(t,e,8)}function rI(t,e){return cB(t,e,4)}function Pt(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Eo(t,e,n=Bh("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function NJ(t,e,n,r,s,i){s=s.add(t),i=Pt(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(Pt(s,44)),[s.add(r),i.add(o)]}function Dp(t,e,n,r){return NJ(He(t,e),He(t,e+8),He(t,e+16),He(t,e+24),n,r)}function kJ(t,e=t.length){if(e>=8){const n=hn.add(e*2),r=He(t,0).add(hn),s=He(t,e-8),i=Pt(s,37).mul(n).add(r),o=Pt(r,25).add(s).mul(n);return Eo(i,o,n)}if(e>=4){const n=hn.add(e*2),r=rI(t,0);return Eo(r.shl(3).add(e),rI(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return fx(hn.mul(i).xor(uB.mul(o))).mul(hn)}return hn}function AJ(t,e=t.length){const n=hn.add(e*2),r=He(t,0).mul(da),s=He(t,8),i=He(t,e-8).mul(n),o=He(t,e-16).mul(hn);return Eo(Pt(r.add(s),43).add(Pt(i,30)).add(o),r.add(Pt(s.add(hn),18)).add(i),n)}function OJ(t,e=t.length){const n=hn.add(e*2),r=He(t,0).mul(hn),s=He(t,8),i=He(t,e-8).mul(n),o=He(t,e-16).mul(hn),a=Pt(r.add(s),43).add(Pt(i,30)).add(o),l=Eo(a,r.add(Pt(s.add(hn),18)).add(i),n),u=He(t,16).mul(n),c=He(t,24),f=a.add(He(t,e-32)).mul(n),d=l.add(He(t,e-24)).mul(n);return Eo(Pt(u.add(c),43).add(Pt(f,30)).add(d),u.add(Pt(c.add(r),18)).add(f),n)}function RJ(t,e=t.length){const n=ya.fromNumber(81,!0);if(e<=32)return e<=16?kJ(t,e):AJ(t,e);if(e<=64)return OJ(t,e);let r=n,s=n.mul(da).add(113),i=fx(s.mul(hn).add(113)).mul(hn),o=[ya.UZERO,ya.UZERO],a=[ya.UZERO,ya.UZERO];r=r.mul(hn).add(He(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Pt(r.add(s).add(o[0]).add(He(t,l+8)),37).mul(da),s=Pt(s.add(o[1]).add(He(t,l+48)),42).mul(da),r=r.xor(a[1]),s=s.add(o[0]).add(He(t,l+40)),i=Pt(i.add(a[0]),33).mul(da),o=Dp(t,l,o[1].mul(da),r.add(a[0])),a=Dp(t,l+32,i.add(a[1]),s.add(He(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const f=da.add(i.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Pt(r.add(s).add(o[0]).add(He(t,l+8)),37).mul(f),s=Pt(s.add(o[1]).add(He(t,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(He(t,l+40))),i=Pt(i.add(a[0]),33).mul(f),o=Dp(t,l,o[1].mul(f),r.add(a[0])),a=Dp(t,l+32,i.add(a[1]),s.add(He(t,l+16))),[i,r]=[r,i],Eo(Eo(o[0],a[0],f).add(fx(s).mul(uB)).add(i),Eo(o[1],a[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PJ(t,e){return e==="string"?jh(t):e0([t],e)}function DJ(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function e0(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ro(t)),he().getBool("DEBUG")&&sF(t,e),DJ(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Td(){return he().platform.now()}function FJ(t,e){return he().platform.fetch(t,e)}function jh(t,e="utf-8"){return e=e||"utf-8",he().platform.encode(t,e)}function vg(t,e="utf-8"){return e=e||"utf-8",he().platform.decode(t,e)}function Dt(t){return he().platform.isTypedArray!=null?he().platform.isTypedArray(t):nB(t)}function Ro(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Oo(t)||t==null||Dt(t)&&n)e.push(t);else if(Array.isArray(t)||Dt(t))for(let r=0;r<t.length;++r)Ro(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Ro(t[s],e,n)}return e}const LJ=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:ys,arraysEqualWithNull:tF,assert:C,assertNonNegativeIntegerDimensions:Jn,assertNonNull:yl,assertShapesMatch:Sn,bytesFromStringArray:oF,bytesPerElement:pg,checkConversionForErrors:sF,clamp:Sd,computeStrides:Tc,convertBackendValuesAndArrayBuffer:KY,createScalarValue:PJ,createShuffledIndices:WY,decodeString:vg,distSquared:jY,encodeString:jh,fetch:FJ,fingerPrint64:RJ,flatten:Ro,getArrayFromDType:X2,getTypedArrayFromDType:rF,hasEncodingLoss:qY,hexToLong:Bh,indexToLoc:JY,inferDtype:Mh,inferFromImplicitShape:HY,isBoolean:aF,isFunction:Ao,isInt:Lu,isNumber:lF,isPromise:Oo,isScalarShape:UY,isString:ao,isTypedArray:Dt,isValidDtype:iF,locToIndex:YY,makeOnesTypedArray:Y2,makeZerosNestedTypedArray:XY,makeZerosTypedArray:Zy,nearestDivisor:mg,nearestLargerEven:LY,now:Td,parseAxisParam:Lh,randUniform:BY,repeatedTry:GY,rightPad:Hf,shuffle:eF,shuffleCombo:FY,sizeFromShape:je,sizeToSquarishShape:VY,squeezeShape:nF,sum:MY,swap:hg,tanh:zY,toNestedArray:La,toTypedArray:e0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let MJ=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new jJ)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Td();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const u of s)u.dataSync();o=Promise.resolve({kernelMs:Td()-a})}if(he().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const c=s[u];c.data().then(f=>{BJ(f,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}};function BJ(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}let jJ=class{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Hf(`${s}ms`,9):s.error,l=Hf(e,25),u=n.rank,c=n.size,f=Hf(n.shape.toString(),14);let d="";for(const h in i){const p=i[h];if(p!=null){const m=p.shape||n.shape,g=m.length;d+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${f}	%c${c}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const f in c){const d=c[f];let h=!1;for(let p=0;p<e.length;p++)if(r[d.id]){u.outputs.forEach(m=>r[m.id]=!0),h=!0,s[u.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(i[u.outputs[f].id]){for(const d in c)i[c[d].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(s[u.id]&&o[u.id]){const c={};for(const d in u.inputs){const h=u.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,a.push(f)}}return a}function zJ(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!ys(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const f=t[c.id];t[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sI=20,cf=3,s1=7;function VJ(t,e,n,r){const s=Tc(e),i=WJ(t,e,n,s),o=e.length,a=Em(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function WJ(t,e,n,r){const s=je(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?Nf(t):t;if(a>1)for(let u=0;u<s/i;u++){const c=u*i;for(let f=0;f<i;f++)o[f]=Math.max(o[f],If(l[c+f],0,n).length)}return o}function If(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(s1))} + ${parseFloat(t[1].toFixed(s1))}j`:ao(t)?r=`'${t}'`:n==="bool"?r=fB(t):r=parseFloat(t.toFixed(s1)).toString(),Hf(r,e)}function fB(t){return t===0?"false":"true"}function Em(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Nf(t);return[If(m[0],0,n)]}return n==="bool"?[fB(t[0])]:[t[0].toString()]}if(l===1){if(a>sI){const g=cf*o;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-cf)*o,a*o));return n==="complex64"&&(y=Nf(y),v=Nf(v)),["["+y.map((b,x)=>If(b,s[x],n)).join(", ")+", ..., "+v.map((b,x)=>If(b,s[a-cf+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?Nf(t):Array.from(t)).map((g,y)=>If(g,s[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),f=r[0]*o,d=[];if(a>sI){for(let m=0;m<cf;m++){const g=m*f,y=g+f;d.push(...Em(t.slice(g,y),u,n,c,s,!1))}d.push("...");for(let m=a-cf;m<a;m++){const g=m*f,y=g+f;d.push(...Em(t.slice(g,y),u,n,c,s,m===a-1))}}else for(let m=0;m<a;m++){const g=m*f,y=g+f;d.push(...Em(t.slice(g,y),u,n,c,s,m===a-1))}const h=l===2?",":"";d[0]="["+(a>0?d[0]+h:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":p),d}function Nf(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let bg=class{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=je(e),r!=null){const s=r.length;C(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||X2(n,this.size),this.strides=Tc(e)}set(e,...n){n.length===0&&(n=[0]),C(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return rs().makeTensor(this.values,this.shape,this.dtype)}},rs=null,Fl=null;function GJ(t){rs=t}function HJ(t){Fl=t}let mt=class{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=je(e),this.strides=Tc(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Fl.buffer(this.shape,this.dtype,e)}bufferSync(){return Fl.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return La(this.shape,e,this.dtype==="complex64")}arraySync(){return La(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=rs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>vg(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),rs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=rs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>vg(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await rs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),rs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Fl.print(this,e)}clone(){return this.throwIfDisposed(),Fl.clone(this)}toString(e=!1){const n=this.dataSync();return VJ(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Fl.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),rs().makeVariable(this,e,n,r)}};Object.defineProperty(mt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function dB(){return Q2("Tensor",()=>mt)}dB();let _d=class extends mt{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ys(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);rs().disposeTensor(this),this.dataId=e.dataId,rs().incRef(this,null)}dispose(){rs().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(_d,Symbol.hasInstance,{value:t=>t instanceof mt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dx;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(dx||(dx={}));var hx;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(hx||(hx={}));var px;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(px||(px={}));var mx;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(mx||(mx={}));var gx;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(gx||(gx={}));const qJ={float32:mx,int32:hx,bool:px,complex64:gx};function t0(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return qJ[t][e]}function KJ(t){return t0(t,"int32")}function hB(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function pB(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dt(t,e){if(t.dtype===e.dtype)return[t,e];const n=t0(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function mB(t,e){C(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function XJ(t,e){return e.some(n=>n.id===t.id)}function o$(t){const e=[];return gB(t,e,new Set),e}function gB(t,e,n){if(t==null)return;if(t instanceof mt){e.push(t);return}if(!YJ(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),gB(i,e,n))}}function YJ(t){return Array.isArray(t)||typeof t=="object"}const JJ=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:mB,getTensorsInContainer:o$,isTensorInList:XJ,makeTypesMatch:dt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1(t){return t.kernelName!=null}let iI=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}},a$=class yx{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iI}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ro(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new MJ(this.backendInstance),!0}setupRegisteredKernels(){gg(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){gg(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Z3)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ro(`Initialization of backend ${e} failed`),ro(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ro(`Initialization of backend ${e} failed`),ro(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return yx.nextTensorId++}nextVariableId(){return yx.nextVariableId++}clone(e){const n=O.runKernel(n$,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return O.runKernel(e$,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Ed(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=i1(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(i1(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=Ed(p,this.backendName);C(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const x=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{s&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:f}=e,d=i1(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),s&&this.addTapeNode(u,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=ux(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(C(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&ao(e[0])&&(i=e.map(l=>jh(l)));const o=s.write(i,n,r),a=new mt(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),u=oF(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new mt(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new _d(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*pg(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof _d||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*pg(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=ux(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=u=>(u=u.map((c,f)=>{if(c==null){const d=r[f],h=Zy(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),s(u.length>1?u:u[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=o$(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(C(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));C(i instanceof mt,()=>"The result y returned by f() must be a tensor.");const o=UJ(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??QJ(i.shape),zJ(a,o,u=>this.tidy(u),ZJ);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return C(Ao(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{C(n.every(a=>a instanceof mt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),C(r.value instanceof mt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),C(Ao(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];C(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),C(c.every(d=>d instanceof mt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Td(),r=await this.backend.time(e);return r.wallMs=Td()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iI;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};a$.nextTensorId=0;a$.nextVariableId=0;function QJ(t){const e=Y2(je(t),"float32");return O.makeTensor(e,t,"float32")}function yB(){const t=fF();if(t._tfengine==null){const e=new cF(t);t._tfengine=new a$(e)}return tJ(t._tfengine.ENV),GJ(()=>t._tfengine),t._tfengine}const O=yB();function ZJ(t,e){const n={a:t,b:e};return O.runKernel(Z2,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(){return typeof navigator<"u"&&navigator!=null}let vx;function tQ(t){vx=t}function nQ(t){if(vx!==void 0)return vx;if(t||eQ()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function vB(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const rQ=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:vB,isMobile:nQ,mockIsMobile:tQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cn=he();Cn.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Cn.registerFlag("IS_BROWSER",()=>vB());Cn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Cn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Cn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Cn.registerFlag("PROD",()=>!1);Cn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Cn.getBool("DEBUG"));Cn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Cn.registerFlag("IS_TEST",()=>!1);Cn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Cn.getBool("DEBUG"));Cn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Cn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Cn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(t,e){let n=t;if(Dt(t))return e==="string"?[]:[t.length];if(hB(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(pB(t))return[t.buffer.size/(e==null?4:pg(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Dt(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&he().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&bB(t,r,[]),r}function bB(t,e,n){if(n=n||[],!Array.isArray(t)&&!Dt(t)){C(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}C(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),C(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)bB(t[s],r,n.concat(s))}function oI(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function _(t,e,n,r="numeric"){if(t instanceof dB())return oI(r,t.dtype,e,n),t;let s=Mh(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),oI(r,s,e,n),t==null||!Dt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Vs(t,s);!Dt(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?e0(t,s):Ro(t,[],!0);return O.makeTensor(a,i,s)}function Cd(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>_(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$="__op";function A(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+l$;const s=(...i)=>{O.startScope(n);try{const o=r(...i);return Oo(o)&&console.error("Cannot return a Promise inside of tidy."),O.endScope(o),o}catch(o){throw O.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQ(t,e){const n=_(t,"real","complex"),r=_(e,"imag","complex");Sn(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return O.runKernel(PF,s)}const Ii=A({complex_:sQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qo(t,e,n,r){if(r==null)r=Mh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(pB(t)||hB(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return O.backend.createTensorFromGPUData(t,e||n,r)}if(!Dt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Jn(e);const s=je(e),i=je(n);C(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==je(e.slice(o)):!0;C(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Dt(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?e0(t,r):Ro(t,[],!0),O.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ds(t,e,n){const r=Vs(t,n);return qo(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const el={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};let Pi=class xB{static join(e){return new xB(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Dt(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],f=e+a-u.start,d=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,f,p-f);if(o.set(m,d),a+=m.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=iQ(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function iQ(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(){he().set("PROD",!0)}function aQ(){he().set("DEBUG",!0)}function lQ(){he().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function uQ(t){he().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function cQ(){O.disposeVariables()}function fQ(){return O}function dQ(){return O.memory()}function hQ(t){return O.profile(t)}function De(t,e){return O.tidy(t,e)}function vn(t){o$(t).forEach(n=>n.dispose())}function ls(t){return O.keep(t)}function pQ(t){return O.time(t)}function mQ(t){return O.setBackend(t)}function gQ(){return O.ready()}function wB(){return O.backendName}function yQ(t){O.removeBackend(t)}function vQ(t){return O.findBackend(t)}function bQ(t){return O.findBackendFactory(t)}function xQ(t,e,n=1){return O.registerBackend(t,e,n)}function SB(){return O.backend}function wQ(t,e){he().setPlatform(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Po=4;async function SQ(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async f=>{const d=await l.bytes(),h=d.reduce((g,y)=>g+y.length,0)+Po*d.length,p=new Uint8Array(h);let m=0;for(let g=0;g<d.length;g++){const y=d[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=Po,p.set(y,m),m+=y.length}f(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:TQ(i),specs:n}}function $B(t,e){const n=new Pi(t),r={};let s=0;for(const i of e){const o=$Q(i,(a,l)=>n.slice(s+a,s+l));r[i.name]=EB(i,n.slice(s,s+o)),s+=o}return r}function $Q(t,e){const n=je(t.shape);let r;if("quantization"in t){const s=t.quantization;r=el[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Po+new Uint32Array(e(s,s+Po))[0];return s}else r=el[t.dtype];return n*r}async function EQ(t,e){const n=je(t.shape);let r;if("quantization"in t){const s=t.quantization;r=el[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Po+new Uint32Array(await e(s,s+Po))[0];return s}else r=el[t.dtype];return n*r}function EB(t,e){const n=t.name,r=t.dtype,s=t.shape,i=je(s);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=el[l.dtype],c=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];o[f]=d*l.scale+l.min}}else if(l.dtype==="float16")o=OQ()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];o[f]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*u}else if(r==="string"){const l=je(t.shape);o=[];for(let u=0;u<l;u++){const c=new Uint32Array(e.slice(a,a+Po))[0];a+=Po;const f=new Uint8Array(e.slice(a,a+c));o.push(f),a+=c}}else{const l=el[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const u=new Float32Array(o.length/2),c=new Float32Array(o.length/2);for(let p=0;p<u.length;p++)u[p]=o[p*2],c[p]=o[p*2+1];const f=ds(u,s,"float32"),d=ds(c,s,"float32"),h=Ii(f,d);return f.dispose(),d.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return ds(o,s,r)}async function aI(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function TB(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await EQ(i,async(u,c)=>(s=await aI(r,s,c),s.slice(u,c)));s=await aI(r,s,o);const a=s.slice(0,o);s=s.slice(o);const l=EB(i,a);if(n[i.name]=l,wB()==="webgpu"){const u=SB();"uploadToGPU"in u&&je(l.shape)>=he().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function TQ(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const u$=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function lI(t){return u$?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function _Q(t){if(u$)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function CQ(t){if(u$){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function IQ(t){return Pi.join(t)}function uI(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function _B(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function c$(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function f$(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),c$(t,n,r)}function Uh(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:lI(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:lI(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Pi(t.weightData).byteLength}}function xg(t){const e=[];for(const n of t)e.push(...n.weights);return e}function NQ(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function kQ(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function AQ(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function OQ(){const t=NQ(),e=kQ(),n=AQ();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let dr=class Qr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Qr.instance==null&&(Qr.instance=new Qr),Qr.instance}static registerSaveRouter(e){Qr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Qr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Qr.getHandlers(e,"save")}static getLoadHandlers(e,n){return Qr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Qr.getInstance().loadRouters:Qr.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}};const RQ=t=>dr.registerSaveRouter(t),PQ=t=>dr.registerLoadRouter(t),DQ=t=>dr.getSaveHandlers(t),FQ=(t,e)=>dr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bx="tensorflowjs",xx=1,Na="models_store",lo="model_info_store";function CB(){if(!he().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function wx(t){const e=t.result;e.createObjectStore(Na,{keyPath:"modelPath"}),e.createObjectStore(lo,{keyPath:"modelPath"})}let tl=class{constructor(e){if(this.indexedDB=CB(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(bx,xx);i.onupgradeneeded=()=>wx(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Na,"readonly"),u=a.objectStore(Na).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),s(u.error)),a.oncomplete=()=>o.close()}else{n.weightData=Pi.join(n.weightData);const a=Uh(n),l=o.transaction(lo,"readwrite");let u=l.objectStore(lo),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(d){return s(d)}let f;c.onsuccess=()=>{f=o.transaction(Na,"readwrite");const d=f.objectStore(Na);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(lo);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),s(h.error)),m.onerror=g=>(o.close(),s(h.error))}},c.onerror=d=>(o.close(),s(c.error)),l.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}};tl.URL_SCHEME="indexeddb://";const IB=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(tl.URL_SCHEME)?LQ(t.slice(tl.URL_SCHEME.length)):null;dr.registerSaveRouter(IB);dr.registerLoadRouter(IB);function LQ(t){return new tl(t)}function MQ(t){return t.startsWith(tl.URL_SCHEME)?t.slice(tl.URL_SCHEME.length):t}let BQ=class{constructor(){this.indexedDB=CB()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(bx,xx);r.onupgradeneeded=()=>wx(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(lo,"readonly"),a=i.objectStore(lo).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=MQ(e),new Promise((n,r)=>{const s=this.indexedDB.open(bx,xx);s.onupgradeneeded=()=>wx(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(lo,"readwrite"),a=o.objectStore(lo),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),f=()=>{u=i.transaction(Na,"readwrite");const h=u.objectStore(Na).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};c.onsuccess=f,c.onerror=d=>(f(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ui="/",Ll="tensorflowjs_models",NB="info",jQ="model_topology",UQ="weight_specs",zQ="weight_data",VQ="model_metadata";function kB(t){return{info:[Ll,t,NB].join(ui),topology:[Ll,t,jQ].join(ui),weightSpecs:[Ll,t,UQ].join(ui),weightData:[Ll,t,zQ].join(ui),modelMetadata:[Ll,t,VQ].join(ui)}}function AB(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function WQ(t){const e=t.split(ui);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ui)}function GQ(t){return t.startsWith(nl.URL_SCHEME)?t.slice(nl.URL_SCHEME.length):t}let nl=class{constructor(e){if(!he().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=kB(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Uh(e),i=Pi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,_Q(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw AB(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=CQ(o),n}};nl.URL_SCHEME="localstorage://";const OB=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(nl.URL_SCHEME)?HQ(t.slice(nl.URL_SCHEME.length)):null;dr.registerSaveRouter(OB);dr.registerLoadRouter(OB);function HQ(t){return new nl(t)}let qQ=class{constructor(){C(he().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),C(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Ll+ui,r=ui+NB;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=WQ(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=GQ(e);const n=kB(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return AB(n),r}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yu="://";let Do=class qi{constructor(){this.managers={}}static getInstance(){return qi.instance==null&&(qi.instance=new qi),qi.instance}static registerManager(e,n){C(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(yu)&&(e=e.slice(0,e.indexOf(yu))),C(e.length>0,()=>"scheme must not be an empty string.");const r=qi.getInstance();C(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=qi.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(qi.getInstance().managers)}};function Tm(t){if(t.indexOf(yu)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Do.getSchemes().join(",")}`);return{scheme:t.split(yu)[0],path:t.split(yu)[1]}}async function RB(t,e,n=!1){C(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=dr.getLoadHandlers(t);C(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),C(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=dr.getSaveHandlers(e);C(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),C(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=Tm(t).scheme,l=Tm(t).path,u=a===Tm(t).scheme,c=await s.load();n&&u&&await Do.getManager(a).removeModel(l);const f=await o.save(c);return n&&!u&&await Do.getManager(a).removeModel(l),f.modelArtifactsInfo}async function KQ(){const t=Do.getSchemes(),e={};for(const n of t){const r=await Do.getManager(n).listModels();for(const s in r){const i=n+yu+s;e[i]=r[s]}}return e}async function XQ(t){const e=Tm(t);return Do.getManager(e.scheme).removeModel(e.path)}async function YQ(t,e){return RB(t,e,!1)}async function JQ(t,e){return RB(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let QQ=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!he().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return nB(e)}};if(he().get("IS_BROWSER")){he().setPlatform("browser",new QQ);try{Do.registerManager(nl.URL_SCHEME,new qQ)}catch{}try{Do.registerManager(tl.URL_SCHEME,new BQ)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZQ={importFetch:()=>require("node-fetch")};let o1,eZ=class{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return he().global.fetch!=null?he().global.fetch(e,n):(o1==null&&(o1=ZQ.importFetch()),o1(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};he().get("IS_NODE")&&!he().get("IS_BROWSER")&&he().setPlatform("node",new eZ);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ws(t,e="float32",n){return e=e||"float32",Jn(t),new bg(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZ(t,e){const n=_(t,"x","cast");if(!iF(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return O.runKernel(e$,r,s)}const Je=A({cast_:tZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZ(t){const n={x:_(t,"x","clone","string_or_numeric")};return O.runKernel(n$,n)}const xi=A({clone_:nZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */yB();const rZ={buffer:Ws,cast:Je,clone:xi,print:d$};HJ(rZ);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZ(t,e){let n=_(t,"a","add"),r=_(e,"b","add");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(Z2,s)}const de=A({add_:sZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZ(t,e){let n=_(t,"a","floorDiv"),r=_(e,"b","floorDiv");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(dL,s)}const h$=A({floorDiv_:iZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZ(t,e){let n=_(t,"a","div"),r=_(e,"b","div");if([n,r]=dt(n,r),n.dtype==="int32"&&r.dtype==="int32")return h$(n,r);const s={a:n,b:r},i={};return O.runKernel(eL,s,i)}const Xe=A({div_:oZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZ(t,e){let n=_(t,"a","mul"),r=_(e,"b","mul");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(WL,s)}const ne=A({mul_:aZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZ(t){const e=_(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return O.runKernel(DF,n)}else{const n={x:e};return O.runKernel(dF,n)}}const Ln=A({abs_:lZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZ(t){const n={x:_(t,"x","acos")};return O.runKernel(hF,n)}const PB=A({acos_:uZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cZ(t){const n={x:_(t,"x","acosh")};return O.runKernel(pF,n)}const DB=A({acosh_:cZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZ(t){C(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),C(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>_(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!ys(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return O.runKernel(mF,r)}const FB=A({addN_:fZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZ(t,e=null,n=!1){const s={x:_(t,"x","all","bool")},i={axis:e,keepDims:n};return O.runKernel(gF,s,i)}const LB=A({all_:dZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZ(t,e=null,n=!1){const s={x:_(t,"x","any","bool")},i={axis:e,keepDims:n};return O.runKernel(yF,s,i)}const MB=A({any_:hZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZ(t,e=0){const r={x:_(t,"x","argMax")},s={axis:e};return O.runKernel(vF,r,s)}const BB=A({argMax_:pZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZ(t,e=0){const r={x:_(t,"x","argMin")},s={axis:e};return O.runKernel(bF,r,s)}const jB=A({argMin_:mZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZ(t){const n={x:_(t,"x","asin")};return O.runKernel(xF,n)}const UB=A({asin_:gZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZ(t){const n={x:_(t,"x","asinh")};return O.runKernel(wF,n)}const zB=A({asinh_:yZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vZ(t){const n={x:_(t,"x","atan")};return O.runKernel(SF,n)}const VB=A({atan_:vZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZ(t,e){let n=_(t,"a","atan2"),r=_(e,"b","atan2");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(EF,s)}const WB=A({atan2_:bZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(t){const n={x:_(t,"x","atanh")};return O.runKernel($F,n)}const GB=A({atanh_:xZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=KB(s);return zh(t,a,n,i,r,null,null,l)}function HB(t,e,n,r,s,i,o="channelsLast"){const[a,l]=Id(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return zh(t,u,n,r,s,i,!1,o)}function SZ(t,e,n,r,s,i,o="NDHWC"){const[a,l,u]=Sx(e);let c,f;if(o==="NDHWC")f="channelsLast",c=[a,l,u,t[4],t[4]];else if(o==="NCDHW")f="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return qB(t,c,n,r,s,!1,f,i)}function zh(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,f]=t;else if(a==="channelsFirst")[l,f,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[d,h,,p]=e,[m,g]=Id(n),[y,v]=Id(r),b=vu(d,y),x=vu(h,v),{padInfo:w,outHeight:$,outWidth:E}=TZ(s,u,c,m,g,b,x,i,a),T=o?p*f:p;let N;return a==="channelsFirst"?N=[l,T,$,E]:a==="channelsLast"&&(N=[l,$,E,T]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:f,outHeight:$,outWidth:E,outChannels:T,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:N,filterShape:e}}function qB(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,u,c,f,d]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f,d]=t;else if(o==="channelsFirst")[l,d,u,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,m,,g]=e,[y,v,b]=Sx(n),[x,w,$]=Sx(r),E=vu(h,x),T=vu(p,w),N=vu(m,$),{padInfo:I,outDepth:R,outHeight:P,outWidth:M}=_Z(s,u,c,f,y,v,b,E,T,N,a),j=i?g*d:g;let W;return o==="channelsFirst"?W=[l,j,R,P,M]:o==="channelsLast"&&(W=[l,R,P,M,j]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:f,inChannels:d,outDepth:R,outHeight:P,outWidth:M,outChannels:j,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:T,effectiveFilterWidth:N,dilationDepth:x,dilationHeight:w,dilationWidth:$,inShape:t,outShape:W,filterShape:e}}function $Z(t,e,n,r,s){r==null&&(r=p$(t,e,n));const i=t[0],o=t[1],a=Nd((i-e+2*r)/n+1,s),l=Nd((o-e+2*r)/n+1,s);return[a,l]}function EZ(t,e,n,r,s,i){s==null&&(s=p$(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=Nd((t[a]-e[a]+2*s)/r[a]+1,i));return o}function p$(t,e,n,r=1){const s=vu(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Id(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Sx(t){return typeof t=="number"?[t,t,t]:t}function vu(t,e){return e<=1?t:t+(t-1)*(e-1)}function TZ(t,e,n,r,s,i,o,a,l){let u,c,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=$Z([e,n],i,r,t,a);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/s);const d=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(f-1)*s+o-n),p=Math.floor(d/2),m=d-p,g=Math.floor(h/2),y=h-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),f=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:d,bottom:h,left:p,right:m,type:d===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Nd((e-i+d+h)/r+1,a),f=Nd((n-o+p+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:f}}function _Z(t,e,n,r,s,i,o,a,l,u,c){let f,d,h,p;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=EZ([e,n,r,1],[a,l,u],1,[s,i,o],t,c);d=g[0],h=g[1],p=g[2]}else if(t==="same"){d=Math.ceil(e/s),h=Math.ceil(n/i),p=Math.ceil(r/o);const m=(d-1)*s+a-e,g=(h-1)*i+l-n,y=(p-1)*o+u-r,v=Math.floor(m/2),b=m-v,x=Math.floor(g/2),w=g-x,$=Math.floor(y/2),E=y-$;f={top:x,bottom:w,left:$,right:E,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function Nd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function kd(t){const[e,n,r]=Id(t);return e===1&&n===1&&r===1}function Di(t,e){return kd(t)||kd(e)}function rl(t){return Id(t).every(e=>e>0)}function KB(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Gr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")C(Lu(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{C(Lu(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZ(t,e){const r={x:_(t,"x","reshape","string_or_numeric")},s={shape:e};return O.runKernel(cM,r,s)}const z=A({reshape_:CZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IZ(t,e,n,r,s){const i=_(t,"x","avgPool","float32"),o=1;C(Di(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=z(i,[1,i.shape[0],i.shape[1],i.shape[2]])),C(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Gr("avgPool",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let f=O.runKernel(TF,u,c);return f=Je(f,i.dtype),l?z(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const m$=A({avgPool_:IZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZ(t,e,n,r,s,i="NDHWC"){const o=_(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),C(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),C(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),C(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Gr("avgPool3d",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let f=O.runKernel(_F,u,c);return f=Je(f,a.dtype),l?z(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const XB=A({avgPool3d_:NZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZ(t,e=0){C(t.length>=1,()=>"Pass at least one tensor to concat");const n=Cd(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return xi(n[0]);const r=n,s={axis:e};return O.runKernel(FF,r,s)}const on=A({concat_:kZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(t,e,n=!1,r=!1){let s=_(t,"a","matMul"),i=_(e,"b","matMul");[s,i]=dt(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return O.runKernel(CF,o,a)}const Pe=A({matMul_:AZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZ(t){const n={x:_(t,"x","sigmoid","float32")};return O.runKernel(_M,n)}const Ma=A({sigmoid_:OZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(t,e,n){const r=_(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return O.runKernel(SM,s,i)}const We=A({slice_:RZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZ(t){const n={x:_(t,"x","tanh","float32")};return O.runKernel(HM,n)}const wg=A({tanh_:PZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DZ(t,e,n,r,s,i){const o=_(t,"forgetBias","basicLSTMCell"),a=_(e,"lstmKernel","basicLSTMCell"),l=_(n,"lstmBias","basicLSTMCell"),u=_(r,"data","basicLSTMCell"),c=_(s,"c","basicLSTMCell"),f=_(i,"h","basicLSTMCell"),d=on([u,f],1),h=Pe(d,a),p=de(h,l),m=p.shape[0],g=p.shape[1]/4,y=[m,g],v=We(p,[0,0],y),b=We(p,[0,g],y),x=We(p,[0,g*2],y),w=We(p,[0,g*3],y),$=de(ne(Ma(v),wg(b)),ne(c,Ma(de(o,x)))),E=ne(wg($),Ma(w));return[$,E]}const YB=A({basicLSTMCell_:DZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZ(t,e,n){const r=_(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);C(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),C(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),C(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return O.runKernel(IF,i,o)}const g$=A({batchToSpaceND_:FZ});function LZ(t){let e;return t.rank===0||t.rank===1?e=z(t,[1,1,1,t.size]):t.rank===2?e=z(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=z(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZ(t,e,n,r,s,i){i==null&&(i=.001);const o=_(t,"x","batchNorm"),a=_(e,"mean","batchNorm"),l=_(n,"variance","batchNorm");let u;s!=null&&(u=_(s,"scale","batchNorm"));let c;r!=null&&(c=_(r,"offset","batchNorm")),C(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),C(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),C(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:LZ(o),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:i},p=O.runKernel(hL,d,h);return z(p,o.shape)}const Vh=A({batchNorm_:MZ});function BZ(t,e,n,r,s,i){const o=_(t,"x","batchNorm"),a=_(e,"mean","batchNorm"),l=_(n,"variance","batchNorm");let u;s!=null&&(u=_(s,"scale","batchNorm"));let c;return r!=null&&(c=_(r,"offset","batchNorm")),C(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),C(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),C(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&C(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&C(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Vh(o,a,l,c,u,i)}const JB=A({batchNorm2d_:BZ});function jZ(t,e,n,r,s,i){const o=_(t,"x","batchNorm"),a=_(e,"mean","batchNorm"),l=_(n,"variance","batchNorm");let u;s!=null&&(u=_(s,"scale","batchNorm"));let c;return r!=null&&(c=_(r,"offset","batchNorm")),C(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),C(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),C(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&C(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&C(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Vh(o,a,l,c,u,i)}const QB=A({batchNorm3d_:jZ});function UZ(t,e,n,r,s,i){const o=_(t,"x","batchNorm"),a=_(e,"mean","batchNorm"),l=_(n,"variance","batchNorm");let u;s!=null&&(u=_(s,"scale","batchNorm"));let c;return r!=null&&(c=_(r,"offset","batchNorm")),C(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),C(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),C(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&C(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&C(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Vh(o,a,l,c,u,i)}const ZB=A({batchNorm4d_:UZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZ(t,e,n){const r=_(t,"x","bincount"),s=_(e,"weights","bincount");C(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),C(n>=0,()=>`size must be non-negative, but got ${n}.`),C(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return O.runKernel(NF,i,o)}const y$=A({bincount_:zZ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZ(t,e){const n=_(t,"x","bitwiseAnd"),r=_(e,"y","bitwiseAnd");if(!ys(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return O.runKernel(kF,s)}const e4=A({bitwiseAnd_:VZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZ(t,e){const n=_(t,"s0","broadcastArgs","int32"),r=_(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return O.runKernel(AF,s)}const t4=A({broadcastArgs_:WZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GZ(t,e){let n=_(t,"broadcastTo","x");const r=n.shape;if(Jn(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=z(n,u)}const s=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return xi(n);const a={x:n},l={reps:i};return O.runKernel(r$,a,l)}const qf=A({broadcastTo_:GZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(t){const n={x:_(t,"x","ceil","float32")};return O.runKernel(OF,n)}const n4=A({ceil_:HZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _c(t,e,n){Jn(t),n=n||Mh(e);const r={shape:t,value:e,dtype:n};return O.runKernel(uL,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qZ(t,e,n){const r=_(t,"x","clipByValue");if(C(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return _c(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return O.runKernel(RF,s,i)}const r4=A({clipByValue_:qZ});function KZ(t){return on(t,0)}const s4=A({concat1d_:KZ});function XZ(t,e){return on(t,e)}const i4=A({concat2d_:XZ});function YZ(t,e){return on(t,e)}const o4=A({concat3d_:YZ});function JZ(t,e){return on(t,e)}const a4=A({concat4d_:JZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(t,e,n,r,s="NHWC",i=[1,1],o){const a=_(t,"x","conv2d","float32"),l=_(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),C(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),C(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Gr("conv2d",r,o);const f=s==="NHWC"?u.shape[3]:u.shape[1];C(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),C(Di(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),C(rl(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),C(rl(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=O.runKernel(LF,d,h);return c?z(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Wh=A({conv2d_:QZ});function ZZ(t,e,n,r,s="NWC",i=1,o){const a=_(t,"x","conv1d"),l=_(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=z(a,[1,a.shape[0],a.shape[1]])),C(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),C(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Gr("conv1d",r,o),C(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),C(Di(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),C(rl(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),C(rl(n),()=>"Error in conv1D: Stride should be larger than 0."),C(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const f=z(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=z(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=Wh(d,f,[1,n],r,"NHWC",[1,i],o);return c?z(g,[g.shape[2],g.shape[3]]):z(g,[g.shape[0],g.shape[2],g.shape[3]])}const l4=A({conv1d_:ZZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(t,e,n,r,s,i="NHWC",o){C(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=z(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),C(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),C(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),C(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?a[3]:a[1],f=i==="NHWC"?l.shape[3]:l.shape[1];C(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),C(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Gr("conv2dDerInput",s,o);const d={dy:l,filter:n},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},p=O.runKernel(BF,d,h);return u?z(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const u4=A({conv2DBackpropInput_:eee});function tee(t,e,n,r,s,i){const o=_(t,"x","conv2dTranspose"),a=_(e,"filter","conv2dTranspose");return u4(n,o,a,r,s,"NHWC",i)}const c4=A({conv2dTranspose_:tee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=_(t,"x","conv3d"),a=_(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),C(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),C(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),C(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),C(Di(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),C(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),C(rl(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),C(rl(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},f={strides:n,pad:r,dataFormat:s,dilations:i},d=O.runKernel(jF,c,f);return u?z(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const f4=A({conv3d_:nee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree(t,e,n,r,s){C(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=z(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];C(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),C(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),C(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),C(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),C(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},f={pad:s,strides:r,inputShape:i},d=O.runKernel(UF,c,f);return a?z(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const see=A({conv3DBackpropInput_:ree});function iee(t,e,n,r,s){const i=_(t,"x","conv3dTranspose"),o=_(e,"filter","conv3dTranspose");return see(n,i,o,r,s)}const d4=A({conv3dTranspose_:iee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oee(t){const n={x:_(t,"x","cos","float32")};return O.runKernel(zF,n)}const h4=A({cos_:oee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(t){const n={x:_(t,"x","cosh","float32")};return O.runKernel(VF,n)}const p4=A({cosh_:aee});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t,e=0,n=!1,r=!1){const i={x:_(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return O.runKernel(WF,i,o)}const m4=A({cumprod_:lee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(t,e=0,n=!1,r=!1){const i={x:_(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return O.runKernel(GF,i,o)}const g4=A({cumsum_:uee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cee(t,e,n,r=!1){const s=_(t,"x","denseBincount"),i=_(e,"weights","denseBincount");C(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),C(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),C(n>=0,()=>`size must be non-negative, but got ${n}.`),C(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return O.runKernel(qF,o,a)}const y4=A({denseBincount_:cee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fee(t,e,n="NHWC"){const r=_(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];C(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),C(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),C(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),C(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return O.runKernel(KF,a,l)}const v4=A({depthToSpace_:fee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(t,e,n,r,s="NHWC",i=[1,1],o){const a=_(t,"x","depthwiseConv2d","float32"),l=_(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),C(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),C(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=s==="NHWC"?u.shape[3]:u.shape[1];C(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Gr("depthwiseConv2d",r,o);const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=O.runKernel(XF,d,h);return c?z(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const n0=A({depthwiseConv2d_:dee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hee(t){const n={x:_(t,"x","diag")};return O.runKernel(QF,n)}const b4=A({diag_:hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(t,e,n,r,s=[1,1],i="NHWC"){const o=_(t,"x","dilation2d"),a=_(e,"filter","dilation2d");C(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),C(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),C(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=z(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),C(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},f={strides:n,pad:r,dilations:s},d=O.runKernel(ZF,c,f);return u?z(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const x4=A({dilation2d_:pee});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w4(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function v$(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function Tt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}const mee=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Tt,getBroadcastDims:w4,getReductionAxes:v$},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gee(t,e){let n=_(t,"a","equal","string_or_numeric"),r=_(e,"b","equal","string_or_numeric");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(sL,s)}const b$=A({equal_:gee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t,e,n){const r=_(e,"a","where"),s=_(n,"b","where"),i=_(t,"condition","where","bool"),o=Tt(Tt(i.shape,r.shape),s.shape),a=qf(i,o),l=qf(r,o),u=qf(s,o),c={condition:a,t:l,e:u};return O.runKernel(xM,c)}const wi=A({where_:yee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(t){const n={x:_(t,"x","zerosLike")};return O.runKernel(QM,n)}const qn=A({zerosLike_:vee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e){let n=_(t,"a","div"),r=_(e,"b","div");[n,r]=dt(n,r);const s=Xe(n,r),i=qn(s),o=b$(r,i);return wi(o,i,s)}const S4=A({divNoNan_:bee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xee(t,e){const n=_(t,"t1","dot"),r=_(e,"t2","dot");C((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(C(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=z(n,[1,-1]),a=z(r,[-1,1]),l=Pe(o,a);return z(l,[])}else if(n.rank===1&&r.rank===2){const o=z(n,[1,-1]),a=z(r,[r.shape[0],r.shape[1]]),l=Pe(o,a);return z(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=z(r,[-1,1]),a=Pe(n,o);return z(a,[a.size])}else{const o=z(r,[r.shape[0],r.shape[1]]);return Pe(n,o)}}const $4=A({dot_:xee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wee(t,...e){const n=e.map((s,i)=>_(s,`tensors${i}`,"einsum")),r={equation:t};return O.runKernel(tL,n,r)}const va=A({einsum_:wee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(t){const n={x:_(t,"x","elu","float32")};return O.runKernel(nL,n)}const x$=A({elu_:See});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ee(t,e){const n=_(t,"x","ensureShape","string_or_numeric");if(!tF(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const E4=A({ensureShape_:$ee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eee(t){let e=_(t,"x","erf");C(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Je(e,"float32"));const n={x:e};return O.runKernel(rL,n)}const T4=A({erf_:Eee});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function _4(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Tee(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function Gh(t,e){const n=e.map(r=>1);return _4(t,n,e)}function _ee(t,e,n){C(w$(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Cee(t,e){if(w$(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Iee(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Nee(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kee(t,e=null,n=!1){const s={x:_(t,"x","max")},i={reductionIndices:e,keepDims:n};return O.runKernel(RL,s,i)}const Ba=A({max_:kee});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aee(t,e=null,n=!1){const s={x:_(t,"x","min")},i={axis:e,keepDims:n};return O.runKernel(BL,s,i)}const Sg=A({min_:Aee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t,e){let n=_(t,"base","pow"),r=_(e,"exp","pow");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(eM,s)}const ju=A({pow_:Oee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Te(t,e){if((Dt(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Dt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return qo(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ree(t){const n={x:_(t,"x","sqrt","float32")};return O.runKernel(IM,n)}const Gs=A({sqrt_:Ree});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t){const e=_(t,"x","square"),n={};return O.runKernel("Square",{x:e},n)}const Br=A({square_:Pee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dee(t,e=null,n=!1){let r=_(t,"x","sum");r.dtype==="bool"&&(r=Je(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return O.runKernel(NM,s,i)}const Ke=A({sum_:Dee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fee(t,e="euclidean",n=null,r=!1){t=_(t,"x","norm");const s=C4(t,e,n);let i=s.shape;if(r){const o=Lh(n,t.shape);i=Gh(s.shape,o)}return z(s,i)}function C4(t,e,n=null){if(t.rank===0)return Ln(t);if(t.rank!==1&&n===null)return C4(z(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ke(Ln(t),n);if(e===1/0)return Ba(Ln(t),n);if(e===-1/0)return Sg(Ln(t),n);if(e==="euclidean"||e===2)return Gs(Ke(ju(Ln(t),Te(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Ba(Ke(Ln(t),n[0]),n[1]-1);if(e===1/0)return Ba(Ke(Ln(t),n[1]),n[0]);if(e===-1/0)return Sg(Ke(Ln(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Gs(Ke(Br(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Hh=A({norm_:Fee});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lee(t,e=null,n=!1){return Hh(t,"euclidean",e,n)}const I4=A({euclideanNorm_:Lee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t){const n={x:_(t,"x","exp")};return O.runKernel(iL,n)}const Fo=A({exp_:Mee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(t,e=0){const n=_(t,"x","expandDims","string_or_numeric");C(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return O.runKernel(oL,r,s)}const ii=A({expandDims_:Bee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(t){const n={x:_(t,"x","expm1")};return O.runKernel(aL,n)}const N4=A({expm1_:jee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(t,e){const n=_(t,"x","tile","string_or_numeric");C(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return O.runKernel(r$,r,s)}const bu=A({tile_:Uee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(t,e,n,r="float32"){e==null&&(e=t);const s=Ws([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=z(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return bu(ii(o,0),[n[0],1,1]);if(n.length===2)return bu(ii(ii(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return bu(ii(ii(ii(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const S$=A({eye_:zee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vee(t){const n={x:_(t,"x","floor","float32")};return O.runKernel(fL,n)}const $$=A({floor_:Vee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(t,e,n=0,r=0){const s=_(t,"x","gather"),i=_(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return O.runKernel(pL,o,a)}const E$=A({gather_:Wee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(t,e){let n=_(t,"a","greater","string_or_numeric"),r=_(e,"b","greater","string_or_numeric");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(gL,s)}const qh=A({greater_:Gee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t,e){let n=_(t,"a","greaterEqual","string_or_numeric"),r=_(e,"b","greaterEqual","string_or_numeric");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(yL,s)}const T$=A({greaterEqual_:Hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qee(t){const n={input:_(t,"input","imag")};return O.runKernel(bL,n)}const Kh=A({imag_:qee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(t){const n={x:_(t,"x","isFinite")};return O.runKernel(xL,n)}const k4=A({isFinite_:Kee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xee(t){const n={x:_(t,"x","isInf")};return O.runKernel(wL,n)}const A4=A({isInf_:Xee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yee(t){const n={x:_(t,"x","isNaN")};return O.runKernel(SL,n)}const O4=A({isNaN_:Yee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jee(t,e=.2){const r={x:_(t,"x","leakyRelu")},s={alpha:e};return O.runKernel($L,r,s)}const _$=A({leakyRelu_:Jee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(t,e){let n=_(t,"a","less","string_or_numeric"),r=_(e,"b","less","string_or_numeric");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(EL,s)}const $g=A({less_:Qee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t,e){let n=_(t,"a","lessEqual","string_or_numeric"),r=_(e,"b","lessEqual","string_or_numeric");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(TL,s)}const r0=A({lessEqual_:Zee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return O.runKernel(_L,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ete(t,e=5,n=1,r=1,s=.5){const i=_(t,"x","localResponseNormalization");C(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),C(Lu(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=z(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:s},c=O.runKernel(OL,l,u);return a?z(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const P4=A({localResponseNormalization_:ete});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(t){const n={x:_(t,"x","log","float32")};return O.runKernel(CL,n)}const Uu=A({log_:tte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(t){const n={x:_(t,"x","log1p")};return O.runKernel(IL,n)}const C$=A({log1p_:nte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rte(t){return C(Ao(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=_(e,"x","tf.grad","string_or_numeric"),s=n!=null?_(n,"dy","tf.grad"):null;return O.tidy(()=>{const{value:i,grads:o}=O.gradients(()=>t(r),[r],s);return s!=null&&Sn(i.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),s0(o),o[0]})}}function ste(t){return C(Ao(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{C(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Cd(e,"args","tf.grads","string_or_numeric"),s=n!=null?_(n,"dy","tf.grads"):null;return O.tidy(()=>{const{value:i,grads:o}=O.gradients(()=>t(...r),r,s);return s!=null&&Sn(i.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),s0(o),o})}}function ite(t){return C(Ao(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{C(e instanceof mt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),C(n==null||n instanceof mt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=O.gradients(()=>t(e),[e],n);return s0(r),{grad:r[0],value:s}}}function ote(t){return C(Ao(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{C(Array.isArray(e)&&e.every(s=>s instanceof mt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),C(n==null||n instanceof mt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=O.gradients(()=>t(...e),e,n);return n!=null&&Sn(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),s0(r.grads),r}}function D4(t,e){C(Ao(t),()=>"The f passed in variableGrads(f) must be a function"),C(e==null||Array.isArray(e)&&e.every(u=>u instanceof _d),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in O.registeredVariables)e.push(O.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),C(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=O.gradients(t,e,null,i);C(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),C(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Hs(t){return O.customGrad(t)}function s0(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ate(t){const n={x:_(t,"x","neg")};return O.runKernel(GL,n)}const hs=A({neg_:ate});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lte(t){const n={x:_(t,"x","softplus")};return O.runKernel(CM,n)}const I$=A({softplus_:lte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ute(t){const e=_(t,"x","logSigmoid");return Hs(r=>({value:hs(I$(hs(r))),gradFunc:o=>ne(o,Ma(hs(r)))}))(e)}const F4=A({logSigmoid_:ute});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cte(t,e){let n=_(t,"a","sub"),r=_(e,"b","sub");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(WM,s)}const be=A({sub_:cte});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fte(t,e=-1){const n=_(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Hs((s,i)=>{const a=Ba(s,e,!0),l=be(s,a),u=be(Je(l,"float32"),Uu(Ke(Fo(l),e,!0)));return i([u]),{value:u,gradFunc:(f,d)=>{const[h]=d,p=!0,m=Fo(h);return be(f,ne(Ke(f,e,p),m))}}})(n)}const L4=A({logSoftmax_:fte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(t,e=null,n=!1){const r=_(t,"x","logSumExp"),s=Lh(e,r.shape),i=Ba(r,s,!0),o=be(r,i),a=Fo(o),l=Ke(a,s),u=Uu(l),c=de(z(i,u.shape),u);if(n){const f=Gh(c.shape,s);return z(c,f)}return c}const N$=A({logSumExp_:dte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hte(t,e){const n=_(t,"a","logicalAnd","bool"),r=_(e,"b","logicalAnd","bool");Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(NL,s)}const Ad=A({logicalAnd_:hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(t){const n={x:_(t,"x","logicalNot","bool")};return O.runKernel(kL,n)}const k$=A({logicalNot_:pte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mte(t,e){const n=_(t,"a","logicalOr","bool"),r=_(e,"b","logicalOr","bool");Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(AL,s)}const A$=A({logicalOr_:mte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(t,e){const n=_(t,"a","logicalXor","bool"),r=_(e,"b","logicalXor","bool");return Tt(n.shape,r.shape),Ad(A$(t,e),k$(Ad(t,e)))}const M4=A({logicalXor_:gte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fp=2147483648;function yte(t,e,n="left"){const r=_(t,"sortedSequence","searchSorted"),s=_(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=z(r,[-1,i]),l=z(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(je(l.shape)>=Fp)throw new Error(`values tensor size must less than ${Fp}`);if(a.shape[1]>=Fp)throw new Error(`trailing dim_size must less than ${Fp} for int32 output type, was ${a.shape[1]}`);const u={sortedSequence:a,values:l},c={side:n};return O.runKernel(bM,u,c)}const i0=A({searchSorted_:yte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4(t,e){return i0(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(t,e,n,r,s){const i=_(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=z(i,[1,i.shape[0],i.shape[1],i.shape[2]])),C(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),C(Di(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Gr("maxPool",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},f=O.runKernel(DL,u,c);return l?z(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const O$=A({maxPool_:vte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=_(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),C(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),C(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Gr("maxPool3d",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},f=O.runKernel(FL,u,c);return l?z(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const j4=A({maxPool3d_:bte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xte(t,e,n,r,s=!1){const o={x:_(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=O.runKernel(LL,o,a);return{result:l[0],indexes:l[1]}}const U4=A({maxPoolWithArgmax_:xte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t,e){let n=_(t,"a","maximum"),r=_(e,"b","maximum");[n,r]=dt(n,r),n.dtype==="bool"&&(n=Je(n,"int32"),r=Je(r,"int32")),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(PL,s)}const R$=A({maximum_:wte});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(t,e=null,n=!1){const s={x:_(t,"x","mean")},i={axis:e,keepDims:n};return O.runKernel(ML,s,i)}const Od=A({mean_:Ste});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sl(t,e="float32"){if(Jn(t),e==="complex64"){const r=sl(t,"float32"),s=sl(t,"float32");return Ii(r,s)}const n=Zy(je(t),e);return O.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t,e="float32"){if(Jn(t),e==="complex64"){const r=uo(t,"float32"),s=sl(t,"float32");return Ii(r,s)}const n=Y2(je(t),e);return O.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=_(t,"x","meshgrid",t instanceof mt?t.dtype:"float32");if(e===void 0)return[r];let s=_(e,"y","meshgrid",e instanceof mt?e.dtype:"float32");const i=je(r.shape),o=je(s.shape);return n==="xy"?(r=z(r,[1,-1]),s=z(s,[-1,1]),[Pe(uo([o,1],r.dtype),r),Pe(s,uo([1,i],s.dtype))]):(r=z(r,[-1,1]),s=z(s,[1,-1]),[Pe(r,uo([1,o],r.dtype)),Pe(uo([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $te(t,e){let n=_(t,"a","minimum"),r=_(e,"b","minimum");[n,r]=dt(n,r),n.dtype==="bool"&&(n=Je(n,"int32"),r=Je(r,"int32")),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(jL,s)}const Rd=A({minimum_:$te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t,e,n){C(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=_(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");C(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)C(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),C(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return O.runKernel(UL,o,i)}const V4=A({mirrorPad_:Ete});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t,e){let n=_(t,"a","mod"),r=_(e,"b","mod");[n,r]=dt(n,r);const s={a:n,b:r};return O.runKernel(zL,s)}const W4=A({mod_:Tte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(t,e=null,n=!1){t=_(t,"x","moments");const r=Lh(e,t.shape),s=Od(t,r,n);let i=s.shape;n||(i=Gh(s.shape,r));const o=Br(be(Je(t,"float32"),z(s,i))),a=Od(o,r,n);return{mean:s,variance:a}}const G4=A({moments_:_te});function Cte(t,e,n,r){const s=_(e,"data","multiRNNCell"),i=Cd(n,"c","multiRNNCell"),o=Cd(r,"h","multiRNNCell");let a=s;const l=[];for(let f=0;f<t.length;f++){const d=t[f](a,i[f],o[f]);l.push(d[0]),l.push(d[1]),a=d[1]}const u=[],c=[];for(let f=0;f<l.length;f+=2)u.push(l[f]),c.push(l[f+1]);return[u,c]}const H4=A({multiRNNCell_:Cte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t,e,n,r=!1){const s=_(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?z(s,[1,-1]):s},u={numSamples:e,seed:n,normalized:r},c=O.runKernel(VL,l,u);return o===1?z(c,[c.size]):c}const q4=A({multinomial_:Ite});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(t,e){let n=_(t,"a","notEqual","string_or_numeric"),r=_(e,"b","notEqual","string_or_numeric");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r};return O.runKernel(HL,s)}const P$=A({notEqual_:Nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kte(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:_(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return O.runKernel(JL,o,a)}const Eg=A({oneHot_:kte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ate(t){const n={x:_(t,"x","onesLike")};return O.runKernel(YL,n)}const K4=A({onesLike_:Ate});function Ote(t,e){const n=_(t,"v1","outerProduct"),r=_(e,"v2","outerProduct");C(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=z(n,[-1,1]),i=z(r,[1,-1]);return Pe(s,i)}const X4=A({outerProduct_:Ote});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(t,e,n=0){const r=_(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return O.runKernel(ZL,i,s)}const Cc=A({pad_:Rte});function Pte(t,e,n=0){return C(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Cc(t,[e],n)}const Y4=A({pad1d_:Pte});function Dte(t,e,n=0){return C(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Cc(t,e,n)}const J4=A({pad2d_:Dte});function Fte(t,e,n=0){return C(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Cc(t,e,n)}const Q4=A({pad3d_:Fte});function Lte(t,e,n=0){return C(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Cc(t,e,n)}const Z4=A({pad4d_:Lte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mte(t,e,n){const r=_(t,"x","spaceToBatchND");C(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),C(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),C(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return O.runKernel(kM,s,i)}const D$=A({spaceToBatchND_:Mte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bte(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=_(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),C(Di(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const c=HB(l.shape,e,i,s,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=Ute([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[p,m]=jte([c.inHeight,c.inWidth],f,d),g=h?r:"valid",y=h?l:D$(l,f,p),b=(n==="avg"?()=>m$(y,e,i,g,o):()=>O$(y,e,i,g,o))(),x=h?b:g$(b,f,m);return u?z(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function jte(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),i=t.concat(r,s),o=e.map((c,f)=>(c-i[f]%c)%c),a=s.map((c,f)=>c+o[f]),l=e.map((c,f)=>[r[f],a[f]]),u=e.map((c,f)=>[0,o[f]]);return[l,u]}function Ute(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const ej=A({pool_:Bte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(t,e){const n=_(t,"x","prelu"),r=_(e,"alpha","prelu"),s={x:n,alpha:r};return O.runKernel(tM,s)}const F$=A({prelu_:zte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t,e=null,n=!1){let r=_(t,"x","prod");r.dtype==="bool"&&(r=Je(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return O.runKernel(nM,s,i)}const tj=A({prod_:Vte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wte(t,e,n,r){const s=t.map((c,f)=>_(c,`tensors${f}`,"raggedGather","int32")),i=_(e,"paramsDenseValues","raggedGather"),o=_(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=O.runKernel(rM,a,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const nj=A({raggedGather_:Wte});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gte(t,e,n){const r=_(t,"starts","raggedRange"),s=_(e,"limits","raggedRange",r.dtype),i=_(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=O.runKernel(sM,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const rj=A({raggedRange_:Gte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hte(t,e,n,r,s){const i=_(t,"shape","raggedTensorToTensor","int32"),o=_(e,"values","raggedTensorToTensor"),a=_(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((f,d)=>_(f,`tensors${d}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:a,rowPartitionTensors:l},c={rowPartitionTypes:s};return O.runKernel(iM,u,c)}const sj=A({raggedTensorToTensor_:Hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e,n){Jn(t);const r=je(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return O.makeTensor(s,t,n)}const ij=A({rand_:qte});var L$={exports:{}};L$.exports;(function(t){(function(e,n,r){function s(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new s(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:this.alea=o})(Cr,t)})(L$);var Kte=L$.exports,M$={exports:{}};M$.exports;(function(t){(function(e,n,r){function s(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new s(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(Cr,t)})(M$);var Xte=M$.exports,B$={exports:{}};B$.exports;(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(Cr,t)})(B$);var Yte=B$.exports,j$={exports:{}};j$.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(Cr,t)})(j$);var Jte=j$.exports,U$={exports:{}};U$.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,p;return l.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,l.i=d,p+(c^c>>>16)|0};function u(c,f){var d,h,p,m,g,y=[],v=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,v=Math.max(v,f.length)),p=0,m=-32;m<v;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],d=y[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[p]=h^d;c.w=g,c.X=y,c.i=p}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(Cr,t)})(U$);var Qte=U$.exports,z$={exports:{}};z$.exports;(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,p=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(Cr,t)})(z$);var Zte=z$.exports,oj={exports:{}};const ene={},tne=Object.freeze(Object.defineProperty({__proto__:null,default:ene},Symbol.toStringTag,{value:"Module"})),nne=FS(tne);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),u=r.pow(2,o),c=u*2,f=s-1,d;function h(x,w,$){var E=[];w=w==!0?{entropy:!0}:w||{};var T=y(g(w.entropy?[x,b(n)]:x??v(),3),E),N=new p(E),I=function(){for(var R=N.g(i),P=l,M=0;R<u;)R=(R+M)*s,P*=s,M=N.g(1);for(;R>=c;)R/=2,P/=2,M>>>=1;return(R+M)/P};return I.int32=function(){return N.g(4)|0},I.quick=function(){return N.g(4)/4294967296},I.double=I,y(b(N.S),n),(w.pass||$||function(R,P,M,j){return j&&(j.S&&m(j,N),R.state=function(){return m(N,{})}),M?(r[a]=R,P):R})(I,T,"global"in w?w.global:this==r,w.state)}function p(x){var w,$=x.length,E=this,T=0,N=E.i=E.j=0,I=E.S=[];for($||(x=[$++]);T<s;)I[T]=T++;for(T=0;T<s;T++)I[T]=I[N=f&N+x[T%$]+(w=I[T])],I[N]=w;(E.g=function(R){for(var P,M=0,j=E.i,W=E.j,G=E.S;R--;)P=G[j=f&j+1],M=M*s+G[f&(G[j]=G[W=f&W+P])+(G[W]=P)];return E.i=j,E.j=W,M})(s)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var $=[],E=typeof x,T;if(w&&E=="object")for(T in x)try{$.push(g(x[T],w-1))}catch{}return $.length?$:E=="string"?x:x+"\0"}function y(x,w){for(var $=x+"",E,T=0;T<$.length;)w[f&T]=f&(E^=w[f&T]*19)+$.charCodeAt(T++);return b(w)}function v(){try{var x;return d&&(x=d.randomBytes)?x=x(s):(x=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(x)),b(x)}catch{var w=e.navigator,$=w&&w.plugins;return[+new Date,e,$,e.screen,b(n)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(r.random(),n),t.exports){t.exports=h;try{d=nne}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Cr,[],Math)})(oj);var rne=oj.exports,sne=Kte,ine=Xte,one=Yte,ane=Jte,lne=Qte,une=Zte,bl=rne;bl.alea=sne;bl.xor128=ine;bl.xorwow=one;bl.xorshift7=ane;bl.xor4096=lne;bl.tychei=une;var V$=bl;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cne=.001,aj=.1;function fne(t,e,n){return n==null&&(n=W$()),$x(t,e,(r,s)=>G$(r,s,n))}function W$(){return O.backend.floatPrecision()===32?cne:aj}function $x(t,e,n){let r=!0;if((Dt(t)||Dt(e))&&(r=!1),Dt(t)&&Dt(e)&&(r=!0),r){const o=t.constructor.name,a=e.constructor.name;if(o!==a)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=Vs(t),a=Vs(e);if(!ys(o,a))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${a}]`)}const s=Dt(t)?t:Ro(t),i=Dt(e)?e:Ro(e);if(s.length!==i.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${i.length}.
Actual:   ${s}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const a=s[o],l=i[o];if(!n(a,l))throw new Error(`Arrays differ: actual[${o}] = ${a}, expected[${o}] = ${l}.
Actual:   ${s}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function dne(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function hne(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return ao(t)||ao(t[0])||ao(e)||ao(e[0])?$x(t,n,(r,s)=>r==s):$x(t,e,(r,s)=>G$(r,s,0))}function pne(t,e,n){if(n==null&&(n=W$()),!G$(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function G$(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function mne(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function gne(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let s=0;s<r.length;s++)if(n[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${n[s]} instead`)}function lj(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?lj(n):t[e]=jh(n)}return t}function yne(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function vne(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const bne=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:aj,createVideoElement:yne,encodeStrings:lj,expectArrayBuffersEqual:gne,expectArraysClose:fne,expectArraysEqual:hne,expectNumbersClose:pne,expectPromiseToFail:dne,expectValuesInRange:mne,play:vne,testEpsilon:W$},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H${constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=V$.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class xne{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=V$.alea(i.toString()),this.randn=new H$(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class wne{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=V$.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sne(t,e,n=1,r="float32",s){if(Jn(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new xne(e,n,r,s),o=Ws(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const uj=A({randomGamma_:Sne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ne(t,e=0,n=1,r,s){if(Jn(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new H$(e,n,r,!1,s),o=Ws(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const q$=A({randomNormal_:$ne});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ene(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return q$(t,0,1,e,n)}const cj=A({randomStandardNormal_:Ene});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(t,e=0,n=1,r="float32",s){Jn(t);const i=Ws(t,r),o=new wne(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const o0=A({randomUniform_:Tne});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ne(t,e,n,r){return o0(t,e,n,"int32",r)}const fj=A({randomUniformInt_:_ne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zu(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return O.runKernel(oM,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(t){const n={input:_(t,"input","real")};return O.runKernel(aM,n)}const Vu=A({real_:Cne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ine(t){const n={x:_(t,"x","reciprocal")};return O.runKernel(lM,n)}const dj=A({reciprocal_:Ine});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(t){const n={x:_(t,"x","relu")};return O.runKernel(uM,n)}const Xh=A({relu_:Nne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kne(t){const n={x:_(t,"x","relu6")};return O.runKernel(hM,n)}const K$=A({relu6_:kne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ane(t,e){const r={x:_(t,"x","reverse")},s={dims:e};return O.runKernel(pM,r,s)}const Lo=A({reverse_:Ane});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function One(t){const e=_(t,"x","reverse");return C(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Lo(e,0)}const hj=A({reverse1d_:One});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(t,e){const n=_(t,"x","reverse");return C(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Lo(n,e)}const pj=A({reverse2d_:Rne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pne(t,e){const n=_(t,"x","reverse");return C(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Lo(n,e)}const mj=A({reverse3d_:Pne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t,e){const n=_(t,"x","reverse");return C(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Lo(n,e)}const gj=A({reverse4d_:Dne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fne(t){const n={x:_(t,"x","round")};return O.runKernel(mM,n)}const X$=A({round_:Fne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lne(t){const n={x:_(t,"x","rsqrt","float32")};return O.runKernel(gM,n)}const yj=A({rsqrt_:Lne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mne(t){const n={x:_(t,"x","selu")};return O.runKernel(wM,n)}const vj=A({selu_:Mne});function Bne(t,e,n,r,s,i=[1,1],o="NHWC"){const a=_(t,"x","separableConv2d"),l=_(e,"depthwiseFilter","separableConv2d"),u=_(n,"pointwiseFilter","separableConv2d");let c=a,f=!1;if(a.rank===3&&(f=!0,c=z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");C(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),C(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),C(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),C(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),C(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],h=l.shape[3];C(u.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`);const p=n0(c,l,r,s,o,i),g=Wh(p,u,1,"valid",o);return f?z(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const bj=A({separableConv2d_:Bne});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jne(t,e){const n=_(t,"x","setdiff1d"),r=_(e,"y","setdiff1d");C(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),C(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),C(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let c=0;c<s.length;c++)o.has(s[c])||a++;const l=new bg([a],n.dtype),u=new bg([a],"int32");for(let c=0,f=0;c<s.length;c++)o.has(s[c])||(l.values[f]=s[c],u.values[f]=c,f++);return[l.toTensor(),u.toTensor()]}const xj=jne;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Une(t){const n={x:_(t,"x","sign")};return O.runKernel(TM,n)}const wj=A({sign_:Une});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zne(t){const n={x:_(t,"x","sin","float32")};return O.runKernel($M,n)}const Sj=A({sin_:zne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vne(t){const n={x:_(t,"x","sinh")};return O.runKernel(EM,n)}const $j=A({sinh_:Vne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wne(t,e,n){const r=_(t,"x","slice1d");return C(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),We(r,[e],[n])}const Ej=A({slice1d_:Wne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(t,e,n){const r=_(t,"x","slice2d");return C(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),We(r,e,n)}const Tj=A({slice2d_:Gne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hne(t,e,n){const r=_(t,"x","slice3d");return C(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),We(r,e,n)}const _j=A({slice3d_:Hne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t,e,n){const r=_(t,"x","slice4d");return C(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),We(r,e,n)}const Cj=A({slice4d_:qne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kne(t,e=-1){const n=_(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return O.runKernel(OM,r,s)}const Ij=A({softmax_:Kne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(t){C(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return O.runKernel(lL,e)}const a0=A({fft_:Xne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yne(t){C(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return O.runKernel(vL,e)}const Pd=A({ifft_:Yne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jne(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=z(t,[n,e]);r=Pd(s)}else{const s=[n,2*(e-1)],i=z(Vu(t),[n,e]),o=z(Kh(t),[n,e]),a=Lo(We(i,[0,1],[n,e-2]),1),l=ne(Lo(We(o,[0,1],[n,e-2]),1),Te(-1)),u=on([i,a],1),c=on([o,l],1),f=z(Ii(u,c),[s[0],s[1]]);r=Pd(f)}if(r=Vu(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=z(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const Y$=A({irfft_:Jne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t,e,n=0){const s={x:_(t,"x","split")},i={numOrSizeSplits:e,axis:n};return O.runKernel(AM,s,i)}const Wu=A({split_:Qne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zne(t,e){C(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,s=We(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=on([t,sl(p)],t.shape.length-1),n=e}else s=t;const i=qn(s),o=z(Ii(s,i),[r,n]),a=a0(o),l=Math.floor(n/2)+1,u=Vu(a),c=Kh(a),f=Wu(u,[l,n-l],u.shape.length-1),d=Wu(c,[l,n-l],c.shape.length-1),h=s.shape.slice();return h[s.shape.length-1]=l,z(Ii(f[0],d[0]),h)}const l0=A({rfft_:Zne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ere(t,e){let n=_(t,"a","squaredDifference"),r=_(e,"b","squaredDifference");[n,r]=dt(n,r),Tt(n.shape,r.shape);const s={a:n,b:r},i={};return O.runKernel(MM,s,i)}const J$=A({squaredDifference_:ere});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tre(t,e){const n=_(t,"x","squeeze","string_or_numeric");return z(n,nF(n.shape,e).newShape)}const u0=A({squeeze_:tre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nre(t,e=0){const n=Cd(t,"tensors","stack","string_or_numeric");C(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&C(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return O.runKernel(QL,r,s)}const qs=A({stack_:nre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rre(t,e=0){const r={x:_(t,"x","step")},s={alpha:e};return O.runKernel(ZM,r,s)}const Q$=A({step_:rre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const c={x:_(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return O.runKernel(jM,c,f)}const Nj=A({stridedSlice_:sre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ire(t){const n={x:_(t,"x","tan","float32")};return O.runKernel(GM,n)}const kj=A({tan_:ire});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(t,e){yl(t);const n=Vs(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return qo(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xu(t,e,n){if(yl(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Vs(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return qo(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$(t,e,n){if(yl(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Vs(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return qo(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(t,e,n){if(yl(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Vs(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return qo(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oj(t,e,n){if(yl(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Vs(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return qo(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rj(t,e,n){if(yl(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Vs(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,qo(t,e,r,n)}function eE(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function c0(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}eE(n,e,t)}function Pj(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let f=s;f<i;++f)o*=n[f];const a=s<1?1:s,l=je(e.shape)/a,u=[...Tc(n.slice(0,s)),1],c=je(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const ore=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Pj,validateInput:c0,validateUpdateShape:eE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function are(t,e,n){const r=_(t,"tensor","tensorScatterupdate"),s=_(e,"indices","tensorScatterupdate","int32"),i=_(n,"updates","tensorScatterupdate");if(c0(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return O.runKernel(vM,o,a)}const Dj=A({tensorScatterUpdate_:are});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lre(t,e=1,n=!0){const r=_(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=O.runKernel(qM,i,o);return{values:a,indices:l}}const Fj=A({topk_:lre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ure(t,e=0,n=1,r,s){if(Jn(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new H$(e,n,r,!0,s),o=Ws(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Lj=A({truncatedNormal_:ure});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cre(t,e=0){const n=_(t,"x","unique","string_or_numeric");C(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=O.runKernel(XM,r,s);return{values:i,indices:o}}const Mj=A({unique_:cre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fre(t,e,n){const r=_(t,"x","unsortedSegmentSum"),s=_(e,"segmentIds","unsortedSegmentSum","int32");C(Lu(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return O.runKernel(JM,i,o)}const Bj=A({unsortedSegmentSum_:fre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dre(t,e=0){const n=_(t,"x","unstack","string_or_numeric");C(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return O.runKernel(YM,r,s)}const Ko=A({unstack_:dre});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jj(t,e){return i0(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uj(t,e=!0,n,r){return O.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Ws(t,"int32"),s=Ws([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hre(t){const e=_(t,"condition","whereAsync","bool"),n=await e.data(),r=zj(e.shape,n);return t!==e&&e.dispose(),r}const tE=hre;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pre(t,e,n){const r=_(t,"tensor","boolMask"),s=_(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;C(o>0,()=>"mask cannot be scalar"),Sn(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+o;m++)l*=a[m];const u=a.slice(0,i).concat([l],a.slice(i+o)),c=z(r,u),f=z(s,[-1]),d=await tE(f),h=u0(d,[1]),p=E$(c,h,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),p}const Vj=pre;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mre(t,e,n){const r=_(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),C(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{C(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?De(()=>{let o=Vu(r),a=Kh(r);return o=O.runKernel($m,{x:o},i),a=O.runKernel($m,{x:a},i),n&&(a=hs(a)),Ii(o,a)}):O.runKernel($m,s,i)}const Dd=A({transpose_:mre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gre(t,e,n,r,s=!0){const i=_(t,"v","movingAverage"),o=_(e,"x","movingAverage"),a=_(n,"decay","movingAverage");mB(i,o),C(ys(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=Te(1),u=be(l,a);let c=ne(be(o,i),u);if(s){C(r!=null,()=>"When using zeroDebias: true, step is required.");const f=_(r,"step","movingAverage");c=Xe(c,be(l,ju(a,f)))}return de(i,c)}const Wj=A({movingAverage_:gre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yre(t,e,n){Jn(n);const r=_(t,"indices","scatterND","int32"),s=_(e,"updates","scatterND");c0(s,r,n);const i={indices:r,updates:s},o={shape:n};return O.runKernel(yM,i,o)}const Gj=A({scatterND_:yre});function vre(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t,e,n,r=0){Jn(n);const s=_(t,"sparseIndices","sparseToDense","int32"),i=_(e,"sparseValues","sparseToDense","string_or_numeric"),o=_(r,"defaultValue","sparseToDense",i.dtype);vre(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return O.runKernel(LM,a,l)}const Hj=A({sparseToDense_:bre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t,e){const n=_(e,"indices","gatherND","int32"),s={params:_(t,"x","gatherND","string_or_numeric"),indices:n};return O.runKernel(mL,s)}const qj=A({gatherND_:xre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wre(t,e){if(e==null)return t.shape.slice();if(ys(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sre(t,e,n,r){const s=_(t,"x","dropout");if(C(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),C(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof mt?s.clone():s;const i=wre(s,n),o=1-e,a=Xe($$(de(o0(i,0,1,"float32",r),o)),o);return ne(s,a)}const Kj=A({dropout_:Sre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nE(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function f0(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return ar(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $re(t,e,n=1){const r=_(t,"predictions","inTopK"),s=_(e,"targets","inTopK");C(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),C(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Sn(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];C(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[l,u]=[o.length/i,i],c=rF("bool",l);for(let f=0;f<l;f++){const d=f*u,h=o.subarray(d,d+u),p=[];for(let m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((m,g)=>g.value-m.value),c[f]=0;for(let m=0;m<n;m++)if(p[m].index===a[f]){c[f]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),ds(c,s.shape,"bool")}const Xj=$re;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ere(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=z(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=z(e,[1,e.shape[0],e.shape[1],e.shape[2]])),C(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),C(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),C(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?a.shape[3]:a.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];C(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),C(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Gr("conv2dDerFilter",s,o);const f={x:a,dy:l},d={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return O.runKernel(MF,f,d)}const Tre=A({conv2DBackpropFilter_:Ere});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ne(t,Q$(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function h0(t,e){let n=e;const r=v$(t.shape,e.shape);return r.length>0&&(n=Ke(n,r)),z(n,t.shape)}function p0(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Xh(t);if(e==="elu")return x$(t);if(e==="relu6")return K$(t);if(e==="prelu")return F$(t,n);if(e==="leakyrelu")return _$(t,r);if(e==="sigmoid")return Ma(t);throw new Error(`Unknown fused activation ${e}.`)}const m0=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",m0(O.state.gradientDepth,l)===!1){C(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let $=Wh(t,e,n,r,s,i,o);return a!=null&&($=de($,a)),p0($,l,u,c)}const f=_(t,"x","conv2d","float32"),d=_(e,"filter","conv2d","float32");let h=f,p=!1;f.rank===3&&(p=!0,h=z(f,[1,f.shape[0],f.shape[1],f.shape[2]])),C(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),C(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Gr("fused conv2d",r,o);const m=s==="NHWC"?h.shape[3]:h.shape[1];C(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),C(Di(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const g=zh(h.shape,d.shape,n,i,r,o);let y;a!=null&&(y=_(a,"bias","fused conv2d"),[y]=dt(y,f),s==="NHWC"?Tt(g.outShape,y.shape):(C(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),C(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const $=u.shape;if(C($.length<=1||$.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${$.length}.`),$.length===1)C($[0]===1||$[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the number of output channels (${g.outChannels}).`);else if($.length===3)try{Tt($,g.outShape)}catch{const T=`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(T)}v=_(u,"prelu weights","fused conv2d")}const b=($,E)=>{C(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[T,N,I,R]=E,P=d0($,I,l);C(kd(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const M=u4(N.shape,P,T,n,r),j=Tre(N,P,T.shape,n,r),W=[M,j];if(R!=null){const G=h0(R,P);W.push(G)}return W},x={x:h,filter:d,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?Hs((E,T,N)=>{let I=O.runKernel(ax,x,w);return N([T,E,I]),p&&(I=z(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:b}})(h,d):Hs((E,T,N,I)=>{let R=O.runKernel(ax,x,w);return I([T,E,R,N]),p&&(R=z(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:b}})(h,d,y)}const Cre=A({fusedConv2d_:_re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ire(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=z(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=z(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return O.runKernel(YF,u,c)}const Nre=A({depthwiseConv2dNativeBackpropFilter_:Ire});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kre(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=z(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},f=O.runKernel(JF,u,c);return l?z(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Are=A({depthwiseConv2dNativeBackpropInput_:kre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ore({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(m0(O.state.gradientDepth,l)===!1){let w=n0(t,e,n,r,s,i,o);return a!=null&&(w=de(w,a)),p0(w,l,u,c)}const f=_(t,"x","depthwiseConv2d","float32"),d=_(e,"filter","depthwiseConv2d","float32");let h=f,p=!1;f.rank===3&&(p=!0,h=z(f,[1,f.shape[0],f.shape[1],f.shape[2]])),C(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),C(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),C(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),C(Di(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Gr("fused depthwiseConv2d",r,o);const m=zh(h.shape,d.shape,n,i,r,o,!0);let g;a!=null&&(g=_(a,"bias","fused conv2d"),[g]=dt(g,f),Tt(m.outShape,g.shape));let y;u!=null&&(y=_(u,"prelu weights","fused depthwiseConv2d"));const v=(w,$)=>{C(kd(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[E,T,N,I]=$,R=d0(w,N,l),P=Are(T.shape,R,E,n,r,i,o),M=Nre(T,R,E.shape,n,r,i,o);if(I!=null){const j=h0(g,R);return[P,M,j]}return[P,M]},b={x:h,filter:d,bias:g,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?Hs(($,E,T)=>{let N=O.runKernel(lx,b,x);return T([E,$,N]),p&&(N=z(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:v}})(h,d):Hs(($,E,T,N)=>{let I=O.runKernel(lx,b,x);return N([E,$,I,T]),p&&(I=z(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:v}})(h,d,g)}const Rre=A({fusedDepthwiseConv2d_:Ore});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(m0(O.state.gradientDepth,i)===!1){let R=Pe(t,e,n,r);return s!=null&&(R=de(R,s)),p0(R,i,o,a)}let l=_(t,"a","fused matMul"),u=_(e,"b","fused matMul");[l,u]=dt(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=je(p),y=je(m);C(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=Tt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,h]),x=n?z(l,[g,c,d]):z(l,[g,d,c]),w=r?z(u,[y,h,f]):z(u,[y,f,h]);let $;s!=null&&($=_(s,"bias","fused matMul"),[$]=dt($,l),Tt(b,$.shape));let E;o!=null&&(E=_(o,"prelu weights","fused matMul"));const T=(R,P)=>{const[M,j,W,G]=P,K=d0(z(R,W.shape),W,i);let L,H;if(!n&&!r?(L=Pe(K,j,!1,!0),H=Pe(M,K,!0,!1)):!n&&r?(L=Pe(K,j,!1,!1),H=Pe(K,M,!0,!1)):n&&!r?(L=Pe(j,K,!1,!0),H=Pe(M,K,!1,!1)):(L=Pe(j,K,!0,!0),H=Pe(K,M,!0,!0)),s!=null){const te=h0(G,K);return[L,H,te]}else return[L,H]},N={a:x,b:w,bias:$,preluActivationWeights:E},I={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?Hs((P,M,j)=>{const W=O.runKernel(ox,N,I);return j([P,M,W]),{value:z(W,b),gradFunc:T}})(x,w):Hs((P,M,j,W)=>{const G=O.runKernel(ox,N,I);return W([P,M,G,j]),{value:z(G,b),gradFunc:T}})(x,w,$)}const Dre=A({fusedMatMul_:Pre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yj=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Cre,depthwiseConv2d:Rre,matMul:Dre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t){return f0(t,.54,.46)}const Lre=A({hammingWindow_:Fre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(t){return f0(t,.5,.5)}const Jj=A({hannWindow_:Mre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bre(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(We(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=on([We(t,i,e-a),_c([a],s)]);o.push(l),i+=n}return o.length===0?xu([],[0,e]):z(on(o),[o.length,e])}const Qj=A({frame_:Bre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jre(t,e,n,r,s=Jj){r==null&&(r=nE(e));const i=Qj(t,e,n),o=ne(i,s(e));return l0(o,r)}const Ure=A({stft_:jre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t,e,n,r,s="bilinear",i=0){const o=_(t,"image","cropAndResize"),a=_(e,"boxes","cropAndResize","float32"),l=_(n,"boxInd","cropAndResize","int32"),u=a.shape[0];C(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),C(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),C(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),C(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),C(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),C(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:o,boxes:a,boxInd:l},f={method:s,extrapolationValue:i,cropSize:r};return O.runKernel(HF,c,f)}const Vre=A({cropAndResize_:zre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wre(t){const e=_(t,"image","flipLeftRight","float32");C(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return O.runKernel(cL,n,{})}const Gre=A({flipLeftRight_:Wre});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hre(t){const e=_(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];C(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),C(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,bu(e,s)}const qre=A({grayscaleToRGB_:Hre});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kre(t){const e=_(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];C(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),C(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Je(e,"float32"),o=ar([.2989,.587,.114]);let a;switch(e.rank){case 2:a=va("ij,j->i",i,o);break;case 3:a=va("ijk,k->ij",i,o);break;case 4:a=va("ijkl,l->ijk",i,o);break;case 5:a=va("ijklm,m->ijkl",i,o);break;case 6:a=va("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=ii(a,-1),Je(a,s)}const Xre=A({rgbToGrayscale_:Kre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yre(t,e,n=0,r=.5){const s=_(t,"image","rotateWithOffset","float32");C(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return O.runKernel(eB,i,o)}const Jre=A({rotateWithOffset_:Yre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ic(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),C(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),C(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),C(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),C(e.rank===1,()=>"scores must be a 1D tensor"),C(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),C(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qre(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=_(t,"boxes","nonMaxSuppression","float32"),o=_(e,"scores","nonMaxSuppression","float32"),a=Ic(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return O.runKernel(qL,{boxes:i,scores:o},l)}const Zre=A({nonMaxSuppression_:Qre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ese(t,e,n){const r=tse(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function tse(t,e,n){return rse(t,e,n||nse)}function nse(t,e){return t>e?1:t<e?-1:0}function rse(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zj(t,e,n,r,s){return rE(t,e,n,r,s,0)}function eU(t,e,n,r,s,i){return rE(t,e,n,r,s,0,!1,i,!0)}function tU(t,e,n,r,s,i){return rE(t,e,n,r,s,i,!0)}function rE(t,e,n,r,s,i,o=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>s&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(cI);const c=i>0?-.5/i:0,f=[],d=[];for(;f.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<s)break;let x=!1;for(let w=f.length-1;w>=b;--w){const $=sse(t,v,f[w]);if($>=r){x=!0;break}if(g.score=g.score*ise(r,c,$),g.score<=s)break}g.suppressBeginIndex=f.length,x||(g.score===y?(f.push(v),d.push(g.score)):g.score>s&&ese(u,g,cI))}const h=f.length,p=n-h;a&&p>0&&(f.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));const m={selectedIndices:f};return o&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function sse(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),f=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),h=(a-i)*(l-o),p=(f-u)*(d-c);if(h<=0||p<=0)return 0;const m=Math.max(i,u),g=Math.max(o,c),y=Math.min(a,f),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(h+p-b)}function ise(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function cI(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ose(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=_(t,"boxes","nonMaxSuppressionAsync"),o=_(e,"scores","nonMaxSuppressionAsync"),a=Ic(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:f}=Zj(u,c,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),ar(f,"int32")}const ase=ose;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lse(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=_(t,"boxes","nonMaxSuppression"),a=_(e,"scores","nonMaxSuppression"),l=Ic(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},f=O.runKernel(XL,u,c);return{selectedIndices:f[0],selectedScores:f[1]}}const use=A({nonMaxSuppressionWithScore_:lse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function cse(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=_(t,"boxes","nonMaxSuppressionAsync"),a=_(e,"scores","nonMaxSuppressionAsync"),l=Ic(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),c=u[0],f=u[1],{selectedIndices:d,selectedScores:h}=tU(c,f,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ar(d,"int32"),selectedScores:ar(h)}}const fse=cse;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=_(t,"boxes","nonMaxSuppression"),a=_(e,"scores","nonMaxSuppression"),l=Ic(o,a,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,d={boxes:o,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:i},p=O.runKernel(KL,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}const hse=A({nonMaxSuppressionPadded_:dse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pse(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=_(t,"boxes","nonMaxSuppressionAsync"),a=_(e,"scores","nonMaxSuppressionAsync"),l=Ic(o,a,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,[d,h]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=eU(d,h,u,c,f,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ar(p,"int32"),validOutputs:Te(m,"int32")}}const mse=pse;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(t,e,n=!1,r=!1){const s=_(t,"images","resizeBilinear");C(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),C(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),C(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=z(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=O.runKernel(dM,a,l);return o?z(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const yse=A({resizeBilinear_:gse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vse(t,e,n=!1,r=!1){const s=_(t,"images","resizeNearestNeighbor");C(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),C(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),C(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),C(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=z(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=O.runKernel(fM,a,l);return o?z(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const bse=A({resizeNearestNeighbor_:vse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(t,e="binary",n=!1,r=.5){const s=_(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let u=ne(ar([r]),255),c,f,d,h;if(C(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),C(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),C(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),C(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,f,d]=Wu(s,[1,1,1],-1);const g=ne(c,i),y=ne(f,o),v=ne(d,a);h=de(de(g,y),v)}else h=t;if(e==="otsu"){const g=y$(Je(X$(h),"int32"),ds([]),256);u=wse(g,l)}const p=n?r0(h,u):qh(h,u);return Je(ne(p,255),"int32")}function wse(t,e){let n=ar([-1]),r=ar([0]),s=ar([0]),i,o,a,l,u,c;for(let f=0;f<t.size-1;f++){i=We(t,0,f+1),o=We(t,f+1),u=Xe(Ke(i),e),c=Xe(Ke(o),e);const d=Ke(ne(i,zu(0,i.size)));a=Xe(d,Ke(i));const h=_c(o.shape,i.size),p=de(zu(0,o.size),h),m=ne(o,p);l=Xe(Ke(m),Ke(o));const g=be(a,l),y=be(a,l),v=ne(u,c);s=ne(ne(v,g),y);const b=qh(s,r);r=wi(b,s,r),n=wi(b,ar([f]),n)}return n}const Sse=A({threshold_:xse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $se(t,e,n="nearest",r="constant",s=0,i){const o=_(t,"image","transform","float32"),a=_(e,"transforms","transform","float32");C(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),C(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),C(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},u={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return O.runKernel(KM,l,u)}const Ese=A({transform_:$se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tse(t,e,n){const r=_(t,"a","bandPart");C(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(C(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),C(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=_(e<0?i:e,"numLower","bandPart")):(C(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=wi($g(e,0),i,Rd(e,i))),typeof n=="number"?(C(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),C(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=_(n<0?o:n,"numUpper","bandPart")):(C(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=wi($g(n,0),o,Rd(n,o)));const u=z(zu(0,i,1,"int32"),[-1,1]),c=zu(0,o,1,"int32"),f=be(u,c),d=Ad(r0(f,a),T$(f,hs(l))),h=sl([i,o],r.dtype);return z(qs(Ko(z(r,[-1,i,o])).map(p=>wi(d,p,h))),s)}const _se=A({bandPart_:Tse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(t){let e;if(Array.isArray(t)){e=!1,C(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)C(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Wu(t,t.shape[0],0).map(s=>u0(s,[0]));C(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(O.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=ne(Ke(ne(n[o],i)),n[o]);i=be(i,a)}return Xe(i,Hh(i,"euclidean"))}));return e?qs(n,0):n}const Ise=A({gramSchmidt_:Cse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t,e=!1){if(C(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return fI(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Ko(z(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[u,c]=fI(l,e);s.push(u),i.push(c)});const o=z(qs(s,0),t.shape),a=z(qs(i,0),t.shape);return[o,a]}}function fI(t,e=!1){return O.tidy(()=>{C(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=S$(n),i=xi(t);const o=xu([[1]],[1,1]);let a=xi(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,f=a,d=s;[a,i,s]=O.tidy(()=>{const h=We(i,[u,u],[n-u,1]),p=Hh(h),m=We(i,[u,u],[1,1]),g=wi(qh(m,0),xu([[-1]]),xu([[1]])),y=be(m,ne(g,p)),v=Xe(h,y);v.shape[0]===1?a=xi(o):a=on([o,We(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=hs(Xe(Pe(g,y),p)),x=We(i,[u,0],[n-u,r]),w=ne(b,a),$=Dd(a);if(u===0)i=be(x,Pe(w,Pe($,x)));else{const N=be(x,Pe(w,Pe($,x)));i=on([We(i,[0,0],[u,r]),N],0)}const E=Dd(w),T=We(s,[0,u],[n,s.shape[1]-u]);if(u===0)s=be(T,Pe(Pe(T,a),E));else{const N=be(T,Pe(Pe(T,a),E));s=on([We(s,[0,0],[n,u]),N],1)}return[a,i,s]}),vn([c,f,d])}return!e&&n>r&&(s=We(s,[0,0],[n,r]),i=We(i,[0,0],[r,r])),[s,i]})}const kse=A({qr_:Nse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var mn;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(mn||(mn={}));function Ase(t,e,n=mn.SUM_BY_NONZERO_WEIGHTS){const r=_(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=_(e,"weights","computeWeightedLoss"));const i=s==null?r:ne(r,s);if(n===mn.NONE)return i;if(n===mn.SUM)return Ke(i);if(n===mn.MEAN){if(s==null)return Od(i);{const o=r.size/s.size,a=Xe(Ke(i),Ke(s));return o>1?Xe(a,Te(o)):a}}if(n===mn.SUM_BY_NONZERO_WEIGHTS){if(s==null)return Xe(Ke(i),Te(r.size));{const o=ne(s,uo(r.shape)),a=Je(Ke(P$(o,Te(0))),"float32");return Xe(Ke(i),a)}}throw Error(`Unknown reduction: ${n}`)}const Fi=A({computeWeightedLoss_:Ase});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ose(t,e,n,r=mn.SUM_BY_NONZERO_WEIGHTS){const s=_(t,"labels","absoluteDifference"),i=_(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=_(n,"weights","absoluteDifference")),Sn(s.shape,i.shape,"Error in absoluteDifference: ");const a=Ln(be(s,i));return Fi(a,o,r)}const Rse=A({absoluteDifference_:Ose});function Pse(t,e,n,r,s=mn.SUM_BY_NONZERO_WEIGHTS){const i=_(t,"labels","cosineDistance"),o=_(e,"predictions","cosineDistance");let a=null;r!=null&&(a=_(r,"weights","cosineDistance")),Sn(i.shape,o.shape,"Error in cosineDistance: ");const l=Te(1),u=be(l,Ke(ne(i,o),n,!0));return Fi(u,a,s)}const Dse=A({cosineDistance_:Pse});function Fse(t,e,n,r=mn.SUM_BY_NONZERO_WEIGHTS){let s=_(t,"labels","hingeLoss");const i=_(e,"predictions","hingeLoss");let o=null;n!=null&&(o=_(n,"weights","hingeLoss")),Sn(s.shape,i.shape,"Error in hingeLoss: ");const a=Te(1);s=be(ne(Te(2),s),a);const l=Xh(be(a,ne(s,i)));return Fi(l,o,r)}const Lse=A({hingeLoss_:Fse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t,e,n,r=1,s=mn.SUM_BY_NONZERO_WEIGHTS){const i=_(t,"labels","huberLoss"),o=_(e,"predictions","huberLoss");let a=null;n!=null&&(a=_(n,"weights","huberLoss")),Sn(i.shape,o.shape,"Error in huberLoss: ");const l=Te(r),u=Ln(be(o,i)),c=Rd(u,l),f=be(u,c),d=de(ne(Te(.5),Br(c)),ne(l,f));return Fi(d,a,s)}const Bse=A({huberLoss_:Mse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jse(t,e,n,r=1e-7,s=mn.SUM_BY_NONZERO_WEIGHTS){const i=_(t,"labels","logLoss"),o=_(e,"predictions","logLoss");let a=null;n!=null&&(a=_(n,"weights","logLoss")),Sn(i.shape,o.shape,"Error in logLoss: ");const l=Te(1),u=Te(r),c=hs(ne(i,Uu(de(o,u)))),f=ne(be(l,i),Uu(de(be(l,o),u))),d=be(c,f);return Fi(d,a,s)}const Use=A({logLoss_:jse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t,e,n,r=mn.SUM_BY_NONZERO_WEIGHTS){const s=_(t,"labels","meanSquaredError"),i=_(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=_(n,"weights","meanSquaredError")),Sn(s.shape,i.shape,"Error in meanSquaredError: ");const a=J$(s,i);return Fi(a,o,r)}const Vse=A({meanSquaredError_:zse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(t,e){const n=_(t,"labels","sigmoidCrossEntropyWithLogits"),r=_(e,"logits","sigmoidCrossEntropyWithLogits");Sn(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Xh(r),i=ne(r,n),o=C$(Fo(hs(Ln(r))));return de(be(s,i),o)}function Gse(t,e,n,r=0,s=mn.SUM_BY_NONZERO_WEIGHTS){let i=_(t,"multiClassLabels","sigmoidCrossEntropy");const o=_(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=_(n,"weights","sigmoidCrossEntropy")),Sn(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Te(r),c=Te(1),f=Te(.5);i=de(ne(i,be(c,u)),ne(f,u))}const l=Wse(i,o);return Fi(l,a,s)}const Hse=A({sigmoidCrossEntropy_:Gse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qse(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Hs((s,i,o)=>{const l=N$(i,[n],!0),u=be(Je(i,"float32"),l);o([s,u]);const c=hs(ne(u,s));return{value:Ke(c,[n]),gradFunc:(h,p)=>{const[m,g]=p,y=Gh(h.shape,[n]);return[ne(z(h,y),be(Je(m,"float32"),Fo(g))),ne(z(h,y),be(Fo(g),Je(m,"float32")))]}}})(t,e)}function Kse(t,e,n,r=0,s=mn.SUM_BY_NONZERO_WEIGHTS){let i=_(t,"onehotLabels","softmaxCrossEntropy");const o=_(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=_(n,"weights","softmaxCrossEntropy")),Sn(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Te(r),c=Te(1),f=Te(i.shape[1]);i=de(ne(i,be(c,u)),Xe(u,f))}const l=qse(i,o);return Fi(l,a,s)}const Xse=A({softmaxCrossEntropy_:Kse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yse(t,e,n,r){const s=_(t,"indices","sparseFillEmptyRows","int32"),i=_(e,"values","sparseFillEmptyRows"),o=_(n,"denseShape","sparseFillEmptyRows","int32"),a=_(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},u=O.runKernel(RM,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Jse=A({sparseFillEmptyRows_:Yse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t,e,n){const r=_(t,"inputIndices","sparseReshape","int32"),s=_(e,"inputShape","sparseReshape","int32"),i=_(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=O.runKernel(PM,o);return{outputIndices:a[0],outputShape:a[1]}}const Zse=A({sparseReshape_:Qse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(t,e,n){const r=_(t,"data","sparseSegmentMean"),s=_(e,"indices","sparseSegmentMean","int32"),i=_(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return O.runKernel(DM,o)}const tie=A({sparseSegmentMean_:eie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nie(t,e,n){const r=_(t,"data","sparseSegmentSum"),s=_(e,"indices","sparseSegmentSum","int32"),i=_(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return O.runKernel(FM,o)}const rie=A({sparseSegmentSum_:nie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sie(t,e,n,r,s,i,o,a){const l=_(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=_(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},f={data:l,dataSplits:u},d=O.runKernel(UM,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const iie=A({stringNGrams_:sie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oie(t,e,n=!0){const r=_(t,"input","stringSplit","string"),s=_(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=O.runKernel(zM,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const aie=A({stringSplit_:oie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lie(t,e){const n=_(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return O.runKernel(VM,s,r)}const uie=A({stringToHashBucketFast_:lie});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cie(t,e,n,r=!0){const s=_(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return O.runKernel(BM,{x:s},i)}const fie=A({staticRegexReplace_:cie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nU={fft:a0,ifft:Pd,rfft:l0,irfft:Y$},rU={hammingWindow:Lre,hannWindow:Jj,frame:Qj,stft:Ure},sU={flipLeftRight:Gre,grayscaleToRGB:qre,resizeNearestNeighbor:bse,resizeBilinear:yse,rgbToGrayscale:Xre,rotateWithOffset:Jre,cropAndResize:Vre,nonMaxSuppression:Zre,nonMaxSuppressionAsync:ase,nonMaxSuppressionWithScore:use,nonMaxSuppressionWithScoreAsync:fse,nonMaxSuppressionPadded:hse,nonMaxSuppressionPaddedAsync:mse,threshold:Sse,transform:Ese},iU={bandPart:_se,gramSchmidt:Ise,qr:kse},oU={absoluteDifference:Rse,computeWeightedLoss:Fi,cosineDistance:Dse,hingeLoss:Lse,huberLoss:Bse,logLoss:Use,meanSquaredError:Vse,sigmoidCrossEntropy:Hse,softmaxCrossEntropy:Xse},aU={sparseFillEmptyRows:Jse,sparseReshape:Zse,sparseSegmentMean:tie,sparseSegmentSum:rie},lU={stringNGrams:iie,stringSplit:aie,stringToHashBucketFast:uie,staticRegexReplace:fie};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const die=new Map,Ex=new Map;let uU=class{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}},cU=class Ml{constructor(){this.classNameMap={}}static getMap(){return Ml.instance==null&&(Ml.instance=new Ml),Ml.instance}static register(e){Ml.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function fU(t,e,n){C(t.className!=null,()=>"Class being registered does not have the static className property defined."),C(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),C(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return cU.register(t),die.set(s,t),Ex.set(t,s),t}function hie(t){return Ex.has(t)?Ex.get(t):t.className}const pie=Object.freeze(Object.defineProperty({__proto__:null,Serializable:uU,SerializationMap:cU,getRegisteredName:hie,registerClass:fU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Xo=class extends uU{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return vn(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return D4(e,n)}dispose(){this.iterations_!=null&&vn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Te(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Xo,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sE=class extends Xo{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=O.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=O.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:De(()=>qn(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:De(()=>qn(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;De(()=>{const c=de(ne(l,this.rho),ne(Br(a),1-this.rho)),f=ne(Xe(Gs(de(u,this.epsilon)),Gs(de(l,this.epsilon))),a),d=de(ne(u,this.rho),ne(Br(f),1-this.rho));l.assign(c),u.assign(d);const h=de(ne(f,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(vn(this.accumulatedGrads.map(e=>e.variable)),vn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let iE=class extends Xo{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=O.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:De(()=>_c(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;De(()=>{const l=de(a,Br(o));a.assign(l);const u=de(ne(Xe(o,Gs(de(l,O.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&vn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let oE=class extends Xo{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],De(()=>{this.accBeta1=Te(n).variable(),this.accBeta2=Te(r).variable()}),s==null&&(this.epsilon=O.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);De(()=>{const r=be(1,this.accBeta1),s=be(1,this.accBeta2);n.forEach((i,o)=>{const a=O.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:De(()=>qn(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:De(()=>qn(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,d=de(ne(c,this.beta1),ne(u,1-this.beta1)),h=de(ne(f,this.beta2),ne(Br(u),1-this.beta2)),p=Xe(d,r),m=Xe(h,s);c.assign(d),f.assign(h);const g=de(ne(Xe(p,de(Gs(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(ne(this.accBeta1,this.beta1)),this.accBeta2.assign(ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&vn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&vn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),De(()=>{this.accBeta1.assign(ju(this.beta1,this.iterations_+1)),this.accBeta2.assign(ju(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let aE=class extends Xo{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],De(()=>{this.iteration=Te(0).variable(),this.accBeta1=Te(n).variable()}),s==null&&(this.epsilon=O.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);De(()=>{const r=be(1,this.accBeta1),s=Xe(-this.learningRate,de(ne(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=O.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:qn(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:qn(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,d=de(ne(c,this.beta1),ne(u,1-this.beta1)),h=ne(f,this.beta2),p=Ln(u),m=R$(h,p);c.assign(d),f.assign(m);const g=de(ne(Xe(s,r),Xe(d,de(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(de(this.iteration,1)),this.accBeta1.assign(ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&vn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&vn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g0=class extends Xo{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=O.registeredVariables[r];De(()=>{const a=de(ne(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ls(Te(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lE=class extends g0{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Te(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=O.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:De(()=>qn(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&De(()=>{let l;const u=de(ne(this.m,o),a);this.useNesterov?l=de(ne(this.c,de(a,ne(u,this.m))),i):l=de(ne(this.c,u),i),o.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&vn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uE=class extends Xo{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=O.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=O.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:De(()=>qn(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:De(()=>qn(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:De(()=>qn(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;De(()=>{const c=de(ne(l,this.decay),ne(Br(a),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[s].variable,d=de(ne(f,this.decay),ne(a,1-this.decay)),h=Xe(ne(a,this.learningRate),Gs(be(c,de(Br(d),this.epsilon)))),p=de(ne(u,this.momentum),h);l.assign(c),f.assign(d),u.assign(p);const m=be(i,p);i.assign(m)}else{const f=de(ne(l,this.decay),ne(Br(a),1-this.decay)),d=de(ne(u,this.momentum),Xe(ne(a,this.learningRate),Gs(de(f,this.epsilon))));l.assign(f),u.assign(d);const h=be(i,d);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&vn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&vn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&vn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mie=[sE,iE,oE,aE,lE,uE,g0];function gie(){for(const t of mie)fU(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yie="model",vie=".json",bie=".weights.bin";function dI(t){return new Promise(e=>setTimeout(e)).then(t)}let Tg=class Tx{constructor(e){if(!he().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Tx.URL_SCHEME)&&(e=e.slice(Tx.URL_SCHEME.length)),(e==null||e.length===0)&&(e=yie),this.modelJsonFileName=e+vie,this.weightDataFileName=e+bie}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Pi.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=_B(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await dI(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await dI(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Uh(e)}}}};Tg.URL_SCHEME="downloads://";class xie{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=f$(i,u=>this.loadWeights(u));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>uI(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=uI(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const wie=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Tg.URL_SCHEME)?Sie(t.slice(Tg.URL_SCHEME.length)):null;dr.registerSaveRouter(wie);function Sie(t="model"){return new Tg(t)}function $ie(t){return new xie(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hI(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(u=>{const c=n+ ++s/t.length*(r-n);return e(c),u}),l);function o(l){C(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){C(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),C(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),C(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dU(t,e){e==null&&(e={});const n=e.fetchFunc==null?he().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await hI(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(a):await hI(a,e.onProgress,.5,1)}function Eie(t,e){var n;const r=e.fetchFunc==null?he().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await i.read();if(l){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(u);return}o.close()}})}async function Tie(t,e="",n,r){return hU(o=>dU(o,{requestInit:r}))(t,e,n)}function hU(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((h,p)=>{let m=0;h.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,v=el[y]*je(g.shape),b=()=>{s[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:g,groupOffset:m,sizeBytes:v})};r!=null?r.forEach((x,w)=>{x===g.name&&(b(),o[w]=!0)}):b(),a.push(g.name),m+=v})}),!o.every(h=>h)){const h=r.filter((p,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((h,p,m)=>(p&&h.push(m),h),[]),u=[];l.forEach(h=>{e[h].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;u.push(m)})});const c=await t(u),f={};let d=0;return l.forEach(h=>{const p=e[h].paths.length,m=new Pi(c.slice(d,d+p));i[h].forEach(y=>{const v=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),b=$B(v,[y.manifestEntry]);for(const x in b)f[x]=b[x]}),d+=p}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ie="application/octet-stream",Cie="application/json";let cE=class{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(C(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=he().platform.fetch,C(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&C(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=_B(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:Cie}),"model.json"),e.weightData!=null){const o=Pi.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:_ie}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Uh(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return f$(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=xg(e.weightsManifest),s=()=>Eie(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=Iie(n),i=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(u)):o.push(i+u+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=xg(e),s=await dU(n,this.loadOptions);return[r,s]}};cE.URL_SCHEME_REGEX=/^https?:\/\//;function Iie(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function _x(t){return t.match(cE.URL_SCHEME_REGEX)!=null}const pU=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>_x(r)):n=_x(t),n)return fE(t,e)}return null};dr.registerSaveRouter(pU);dr.registerLoadRouter(pU);function fE(t,e){return new cE(t,e)}function Nie(t,e){return fE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a1{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class mU{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class kie{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Aie(t,e,n,r){const s=arguments;return new kie(_g(...s))}function _g(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new a1(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new a1({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new a1({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Oie(t){return new mU(t)}function Rie(t){return new mU(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dE=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Pi,browserFiles:$ie,browserHTTPRequest:Nie,concatenateArrayBuffers:IQ,copyModel:YQ,decodeWeights:$B,decodeWeightsStream:TB,encodeWeights:SQ,fromMemory:Aie,fromMemorySync:_g,getLoadHandlers:FQ,getModelArtifactsForJSON:f$,getModelArtifactsForJSONSync:c$,getModelArtifactsInfoForJSON:Uh,getSaveHandlers:DQ,getWeightSpecs:xg,http:fE,isHTTPScheme:_x,listModels:KQ,loadWeights:Tie,moveModel:JQ,registerLoadRouter:PQ,registerSaveRouter:RQ,removeModel:XQ,weightsLoaderFactory:hU,withSaveHandler:Oie,withSaveHandlerSync:Rie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pie(t,e,n){const r=_(t,"labels","confusionMatrix"),s=_(e,"predictions","confusionMatrix");C(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),C(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),C(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),C(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),C(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=Eg(Je(r,"int32"),n),o=Eg(Je(s,"int32"),n),a=Dd(i),l=Pe(a,o);return Je(l,"int32")}const Die=A({confusionMatrix_:Pie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fie=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:Die},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sa,pI=!1;function gU(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Ed(ix,O.backendName)!=null){const p={pixels:t},m={numChannels:e};return O.runKernel(ix,p,m)}const[u,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let f;if(o)f=t.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)f=t.data;else if(i||s||a){if(sa==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")sa=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else sa=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});sa.canvas.width=u,sa.canvas.height=c,sa.drawImage(t,0,0,u,c),f=sa.getImageData(0,0,u,c).data}let d;if(e===4)d=new Int32Array(f);else{const p=u*c;d=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)d[m*e+g]=f[m*4+g]}return Z$(d,[c,u,e],"int32")}function Lie(t){return t!=null&&t.data instanceof Uint8Array}function Mie(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function Bie(t){return t!=null&&t.width!==0&&t.height!==0}function jie(t){return Mie()&&!(t instanceof ImageBitmap)&&Bie(t)&&!Lie(t)}async function Uie(t,e=3){let n=null;if(he().getBool("WRAP_TO_IMAGEBITMAP")&&jie(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return gU(n,e)}function yU(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function zie(t){const e=(t==null?void 0:t.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function Vie(t,e){let n=_(t,"img","toPixels");if(!(t instanceof mt)){const u=n;n=Je(u,"int32"),u.dispose()}yU(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],o=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const c=[0,0,0,255];for(let d=0;d<i;d++){const h=o[u*i+d];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);i===1?(c[0]=h*a,c[1]=h*a,c[2]=h*a):c[d]=h*a}const f=u*4;l[f+0]=Math.round(c[0]),l[f+1]=Math.round(c[1]),l[f+2]=Math.round(c[2]),l[f+3]=Math.round(c[3])}if(e!=null){pI||Ed(t$,O.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),pI=!0),e.width=s,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,s,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}function Wie(t,e,n){let r=_(t,"img","draw");if(!(t instanceof mt)){const o=r;r=Je(o,"int32"),o.dispose()}yU(r),zie(n==null?void 0:n.imageOptions);const s={image:r},i={canvas:e,options:n};O.runKernel(t$,s,i)}const Gie=A({fromPixels_:gU}),Hie=Object.freeze(Object.defineProperty({__proto__:null,draw:Wie,fromPixels:Gie,fromPixelsAsync:Uie,toPixels:Vie},Symbol.toStringTag,{value:"Module"}));function vU(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(je(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let f=0;f<s.length-1;++f)o*=s[f];const a=t.shape,l=s.slice();l.pop();let u=1;for(let f=i;f<n;++f)u*=a[f],l.push(a[f]);const c=[...Tc(t.shape).map(f=>f/u),1].slice(0,i);return[l,o,u,c]}const qie=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:vU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cx=-2,Kie=-1;function Xie(t,e,n){const r=t.shape.length;C(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),C(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)C(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Yie(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Jie(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function bU(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function xU(t,e,n){return n<=t?n:n-(e-1)}function wU(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Qie(t,e,n,r,s,i,o,a,l){const u=t.length;let c=new Array(u),f=new Array(u),d=new Array(u);if(e.length&&n>0){const h=e[0],p=n+1;c=SU(o,h,p,r,t),f=$U(a,h,p,s,t),d=bU(i,h,p,t)}else for(let h=0;h<u;h++)c[h]=TU(o,r,i,t,h,l),f[h]=_U(a,s,i,t,h,l),d[h]=EU(i,h,l);return{begin:c,end:f,strides:d}}function SU(t,e,n,r,s){const i=[...s],o=wU(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=xU(e,n,a);let u=r[l];t&1<<l&&(u=0),i[a]=u}return i}function $U(t,e,n,r,s){const i=[...s],o=wU(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=xU(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[a]=u}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Sd(0,i[a],s[a])}return i}function EU(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function TU(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Sd(0,o,l-1),o}function _U(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Sd(0,o,l):o=Sd(-1,o,l-1),o}function Zie(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function eoe(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function toe(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{C(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(C(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function noe(t,e,n,r,s,i,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<f.dims;b++)c&&1<<b&a&&f.numAddAxisAfterEllipsis++,1<<b&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};roe(f,d);let h=!0,p=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(d.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const x=!!(d.shrinkAxisMask&1<<b),w=t[b];if(w===-1){g.push(x?1:-1);continue}const $=[d.beginMask&1<<b,d.endMask&1<<b],E=[d.strides[b]>0?0:-1,d.strides[b]>0?w:w-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[b]===1;const T=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){const P=d.begin[b]<0?w+d.begin[b]:d.begin[b];if(d.begin[b]=P,d.end[b]=d.begin[b]+1,P<0||P>=w)throw Error(`slice index ${d.begin[b]} of dimension ${b} out of bounds.`)}else d.begin[b]=mI(d.begin[b],0,d.strides[b],w,$,E),d.end[b]=mI(d.end[b],1,d.strides[b],w,$,E);const R=d.strides[b]===1&&d.begin[b]===0&&d.end[b]===w;h=h&&R,p=p&&(b===0&&d.strides[b]===1||R)}else h=h&&d.strides[b]===1&&T,p=p&&(b===0&&d.strides[b]===1||T);let N,I=!1;if(d.beginValid&&d.endValid?(N=d.end[b]-d.begin[b],I=!0):x?(N=1,I=!0):T&&w>=0&&(d.strides[b]<0?N=-w:N=w,I=!0),I){let R;N===0||N<0!=d.strides[b]<0?R=0:R=Math.trunc(N/d.strides[b])+(N%d.strides[b]!==0?1:0),g.push(R)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const x=d.finalShapeGatherIndices[b];x>=0?y.push(g[x]):x===Cx&&y.push(1)}return{finalShapeSparse:y.filter((b,x)=>d.finalShapeGatherIndices[x]!==Cx),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function roe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Cx),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Kie),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function mI(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const CU=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Xie,computeFlatOffset:eoe,computeOutShape:Jie,getNormalizedAxes:Qie,isSliceContinous:Zie,maskToAxes:Yie,parseSliceParams:toe,sliceInfo:noe,startForAxis:TU,startIndicesWithElidedDims:SU,stopForAxis:_U,stopIndicesWithElidedDims:$U,stridesForAxis:EU,stridesWithElidedDims:bU},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const soe="4.19.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IU{static sgd(e){return new g0(e)}static momentum(e,n,r=!1){return new lE(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new uE(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new oE(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new sE(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new aE(e,n,r,s,i)}static adagrad(e,n=.1){return new iE(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ioe=IU;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ooe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function aoe(){return new Promise(t=>ooe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function loe(t,e){const n=t[0].length;t.forEach((s,i)=>{C(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),C(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)C(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function uoe(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ks;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ks||(ks={}));function coe(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function foe(t){const e={FIRST_DIM_SIZE:ks.FIRST_DIM_SIZE,VALUE_ROWIDS:ks.VALUE_ROWIDS,ROW_LENGTHS:ks.ROW_LENGTHS,ROW_SPLITS:ks.ROW_SPLITS,ROW_LIMITS:ks.ROW_LIMITS,ROW_STARTS:ks.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function doe(t){return t.length===0?0:t[0]===ks.FIRST_DIM_SIZE?t.length-1:t.length}function hoe(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hE=30;function poe(t){return t<=hE?t:mg(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moe(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function goe(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function yoe(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function voe(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function boe(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function xoe(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const woe=1.7580993408473768,Soe=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $oe=.3275911,Eoe=.254829592,Toe=-.284496736,_oe=1.421413741,Coe=-1.453152027,Ioe=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Noe(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function koe(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Aoe(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Ooe(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Roe(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Poe(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Doe(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function Foe(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1="->",Loe=/->/g,gI=",",yI="...";function Moe(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Loe,"").length)/l1.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${l1}").`);const[r,s]=t.split(l1);C(r.indexOf(yI)===-1,()=>`The ellipsis notation ("${yI}") is not supported yet.`);const i=r.split(gI),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let d=0;d<s.length;++d){const h=s[d];if(!i.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let d=0;d<r.length;++d){const h=r[d];a.indexOf(h)===-1&&h!==gI&&a.push(h)}const l=new Array(i.length);for(let d=0;d<o;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let h=0;h<i[d].length;++h)l[d].push(a.indexOf(i[d][h]))}const u=a.length,c=s.length,f=[];for(let d=c;d<u;++d)f.push(d);return{allDims:a,summedDims:f,idDims:l}}function Boe(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function joe(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:C(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function Uoe(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=Voe(e,a);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function zoe(t){return t.every((e,n)=>e===n)}function Voe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function Woe(t,e,n=0){let r=[];if(typeof e=="number")C(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);C(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}C(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Goe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Hoe(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function qoe(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Koe(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Xoe(t,e){return`size ${t} must be non-negative, not ${e}`}function Yoe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Joe(t,e){const n=je(t),r=je(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Qoe(t,e){const n=je(t),r=je(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zoe(){return"segment ids must be >= 0"}function eae(){return"segment ids are not increasing"}function tae(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function nae(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rae(t,e){let n=!1,r;for(t<=hE?(r=t,n=!0):r=mg(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=mg(t,r+1);return r}function sae(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function iae(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)a.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)a.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<s;f++)a.push(e.shape[f]);for(let f=n+1;f<i;f++)a.push(t.shape[f]),c*=t.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}const oae=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:iae,computeOutShape:sae,segOpComputeOptimalWindowSize:rae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aae(t){try{return t.map(e=>vg(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function lae(t){return t.map(e=>jh(e))}const uae=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Eoe,ERF_A2:Toe,ERF_A3:_oe,ERF_A4:Coe,ERF_A5:Ioe,ERF_P:$oe,PARALLELIZE_THRESHOLD:hE,get RowPartitionType(){return ks},SELU_SCALE:Soe,SELU_SCALEALPHA:woe,applyActivation:p0,assertAndGetBroadcastShape:Tt,assertAxesAreInnerMostDims:_ee,assertParamsConsistent:loe,assignToTypedArray:Poe,axesAreInnerMostDims:w$,calculateShapes:Pj,checkEinsumDimSizes:joe,checkPadOnDimRoundingMode:Gr,combineLocations:_4,combineRaggedTensorToTensorShapes:coe,complexWithEvenIndex:Aoe,complexWithOddIndex:Ooe,computeConv2DInfo:zh,computeConv3DInfo:qB,computeDefaultPad:p$,computeDilation2DInfo:wZ,computeOptimalWindowSize:poe,computeOutAndReduceShapes:Tee,computeOutShape:uoe,computePool2DInfo:HB,computePool3DInfo:SZ,convertConv2DDataFormat:KB,decodeEinsumEquation:Moe,eitherStridesOrDilationsAreOne:Di,expandShapeToKeepDim:Gh,exponent:Foe,exponents:Doe,fromStringArrayToUint8:lae,fromUint8ToStringArray:aae,getAxesPermutation:Cee,getBroadcastDims:w4,getComplexWithIndex:Roe,getEinsumComputePath:Uoe,getEinsumPermutation:Boe,getFusedBiasGradient:h0,getFusedDyActivation:d0,getImageCenter:moe,getInnerMostAxes:Nee,getPermuted:yoe,getRaggedRank:doe,getReductionAxes:v$,getReshaped:goe,getReshapedPermuted:voe,getRowPartitionTypesHelper:foe,getSliceBeginCoords:boe,getSliceSize:xoe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Goe,getSparseFillEmptyRowsNegativeIndexErrorMessage:Hoe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:qoe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Yoe,getSparseReshapeInputOutputMismatchErrorMessage:Qoe,getSparseReshapeInputOutputMultipleErrorMessage:Joe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Koe,getSparseReshapeNegativeOutputDimErrorMessage:Xoe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:nae,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Zoe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:eae,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:tae,getUndoAxesPermutation:Iee,isIdentityPermutation:zoe,log:SJ,mergeRealAndImagArrays:Noe,prepareAndValidate:vU,prepareSplitSize:Woe,segment_util:oae,shouldFuse:m0,slice_util:CU,splitRealAndImagArrays:koe,stridesOrDilationsArePositive:rl,tupleValuesAreOne:kd,upcastType:t0,validateDefaultValueShape:hoe,validateInput:c0,validateUpdateShape:eE,warn:ro},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cae=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:Zj,nonMaxSuppressionV4Impl:eU,nonMaxSuppressionV5Impl:tU,whereImpl:zj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gie();const fae=Object.freeze(Object.defineProperty({__proto__:null,Abs:dF,Acos:hF,Acosh:pF,AdadeltaOptimizer:sE,AdagradOptimizer:iE,AdamOptimizer:oE,AdamaxOptimizer:aE,Add:Z2,AddN:mF,All:gF,Any:yF,ArgMax:vF,ArgMin:bF,Asin:xF,Asinh:wF,Atan:SF,Atan2:EF,Atanh:$F,AvgPool:TF,AvgPool3D:_F,AvgPool3DGrad:sJ,AvgPoolGrad:rJ,BatchMatMul:CF,BatchToSpaceND:IF,Bincount:NF,BitwiseAnd:kF,BroadcastArgs:AF,BroadcastTo:iJ,Cast:e$,Ceil:OF,ClipByValue:RF,Complex:PF,ComplexAbs:DF,Concat:FF,Conv2D:LF,Conv2DBackpropFilter:MF,Conv2DBackpropInput:BF,Conv3D:jF,Conv3DBackpropFilterV2:oJ,Conv3DBackpropInputV2:UF,Cos:zF,Cosh:VF,CropAndResize:HF,Cumprod:WF,Cumsum:GF,DataStorage:DY,DenseBincount:qF,DepthToSpace:KF,DepthwiseConv2dNative:XF,DepthwiseConv2dNativeBackpropFilter:YF,DepthwiseConv2dNativeBackpropInput:JF,Diag:QF,Dilation2D:ZF,Dilation2DBackpropFilter:lJ,Dilation2DBackpropInput:aJ,Draw:t$,get ENV(){return J2},Einsum:tL,Elu:nL,EluGrad:uJ,Environment:cF,Equal:sL,Erf:rL,Exp:iL,ExpandDims:oL,Expm1:aL,FFT:lL,Fill:uL,FlipLeftRight:cL,Floor:fL,FloorDiv:dL,FromPixels:ix,FusedBatchNorm:hL,FusedConv2D:ax,FusedDepthwiseConv2D:lx,GatherNd:mL,GatherV2:pL,Greater:gL,GreaterEqual:yL,IFFT:vL,Identity:n$,Imag:bL,IsFinite:xL,IsInf:wL,IsNan:SL,KernelBackend:Z3,LRN:OL,LRNGrad:hJ,LeakyRelu:$L,Less:EL,LessEqual:TL,LinSpace:_L,Log:CL,Log1p:IL,LogSoftmax:fJ,LogicalAnd:NL,LogicalNot:kL,LogicalOr:AL,LogicalXor:cJ,LowerBound:dJ,MatrixBandPart:pJ,Max:RL,MaxPool:DL,MaxPool3D:FL,MaxPool3DGrad:gJ,MaxPoolGrad:mJ,MaxPoolWithArgmax:LL,Maximum:PL,Mean:ML,Min:BL,Minimum:jL,MirrorPad:UL,Mod:zL,MomentumOptimizer:lE,Multinomial:VL,Multiply:WL,Neg:GL,NonMaxSuppressionV3:qL,NonMaxSuppressionV4:KL,NonMaxSuppressionV5:XL,NotEqual:HL,OP_SCOPE_SUFFIX:l$,OneHot:JL,OnesLike:YL,Optimizer:Xo,OptimizerConstructors:IU,Pack:QL,PadV2:ZL,Pool:yJ,Pow:eM,Prelu:tM,Prod:nM,RMSPropOptimizer:uE,RaggedGather:rM,RaggedRange:sM,RaggedTensorToTensor:iM,Range:oM,get Rank(){return dx},Real:aM,RealDiv:eL,Reciprocal:lM,get Reduction(){return mn},Relu:uM,Relu6:hM,Reshape:cM,ResizeBilinear:dM,ResizeBilinearGrad:bJ,ResizeNearestNeighbor:fM,ResizeNearestNeighborGrad:vJ,Reverse:pM,RotateWithOffset:eB,Round:mM,Rsqrt:gM,SGDOptimizer:g0,ScatterNd:yM,SearchSorted:bM,Select:xM,Selu:wM,Sigmoid:_M,Sign:TM,Sin:$M,Sinh:EM,Slice:SM,Softmax:OM,Softplus:CM,SpaceToBatchND:kM,SparseFillEmptyRows:RM,SparseReshape:PM,SparseSegmentMean:DM,SparseSegmentSum:FM,SparseToDense:LM,SplitV:AM,Sqrt:IM,Square:xJ,SquaredDifference:MM,StaticRegexReplace:BM,Step:ZM,StridedSlice:jM,StringNGrams:UM,StringSplit:zM,StringToHashBucketFast:VM,Sub:WM,Sum:NM,Tan:GM,Tanh:HM,Tensor:mt,TensorBuffer:bg,TensorScatterUpdate:vM,Tile:r$,TopK:qM,Transform:KM,Transpose:$m,Unique:XM,Unpack:YM,UnsortedSegmentSum:JM,UpperBound:wJ,Variable:_d,ZerosLike:QM,_FusedMatMul:ox,abs:Ln,acos:PB,acosh:DB,add:de,addN:FB,all:LB,any:MB,argMax:BB,argMin:jB,asin:UB,asinh:zB,atan:VB,atan2:WB,atanh:GB,avgPool:m$,avgPool3d:XB,backend:SB,backend_util:uae,basicLSTMCell:YB,batchNorm:Vh,batchNorm2d:JB,batchNorm3d:QB,batchNorm4d:ZB,batchToSpaceND:g$,bincount:y$,bitwiseAnd:e4,booleanMaskAsync:Vj,broadcastArgs:t4,broadcastTo:qf,broadcast_util:mee,browser:Hie,buffer:Ws,cast:Je,ceil:n4,clipByValue:r4,clone:xi,complex:Ii,concat:on,concat1d:s4,concat2d:i4,concat3d:o4,concat4d:a4,conv1d:l4,conv2d:Wh,conv2dTranspose:c4,conv3d:f4,conv3dTranspose:d4,copyRegisteredKernels:_J,cos:h4,cosh:p4,cosineWindow:f0,cumprod:m4,cumsum:g4,customGrad:Hs,denseBincount:y4,deprecationWarn:uQ,depthToSpace:v4,depthwiseConv2d:n0,device_util:rQ,diag:b4,dilation2d:x4,disableDeprecationWarnings:lQ,dispose:vn,disposeVariables:cQ,div:Xe,divNoNan:S4,dot:$4,dropout:Kj,einsum:va,elu:x$,enableDebugMode:aQ,enableProdMode:oQ,enclosingPowerOfTwo:nE,engine:fQ,ensureShape:E4,env:he,equal:b$,erf:T4,euclideanNorm:I4,exp:Fo,expandDims:ii,expm1:N4,eye:S$,fft:a0,fill:_c,findBackend:vQ,findBackendFactory:bQ,floor:$$,floorDiv:h$,fused:Yj,gather:E$,gatherND:qj,gather_util:qie,getBackend:wB,getGradient:ux,getKernel:Ed,getKernelsForBackend:gg,grad:rte,grads:ste,greater:qh,greaterEqual:T$,ifft:Pd,imag:Kh,image:sU,inTopKAsync:Xj,io:dE,irfft:Y$,isFinite:k4,isInf:A4,isNaN:O4,keep:ls,kernel_impls:cae,leakyRelu:_$,less:$g,lessEqual:r0,linalg:iU,linspace:R4,localResponseNormalization:P4,log:Uu,log1p:C$,logSigmoid:F4,logSoftmax:L4,logSumExp:N$,logicalAnd:Ad,logicalNot:k$,logicalOr:A$,logicalXor:M4,losses:oU,lowerBound:B4,matMul:Pe,math:Fie,max:Ba,maxPool:O$,maxPool3d:j4,maxPoolWithArgmax:U4,maximum:R$,mean:Od,memory:dQ,meshgrid:z4,min:Sg,minimum:Rd,mirrorPad:V4,mod:W4,moments:G4,movingAverage:Wj,mul:ne,multiRNNCell:H4,multinomial:q4,neg:hs,nextFrame:aoe,norm:Hh,notEqual:P$,oneHot:Eg,ones:uo,onesLike:K4,op:A,outerProduct:X4,pad:Cc,pad1d:Y4,pad2d:J4,pad3d:Q4,pad4d:Z4,pool:ej,pow:ju,prelu:F$,print:d$,prod:tj,profile:hQ,raggedGather:nj,raggedRange:rj,raggedTensorToTensor:sj,rand:ij,randomGamma:uj,randomNormal:q$,randomStandardNormal:cj,randomUniform:o0,randomUniformInt:fj,range:zu,ready:gQ,real:Vu,reciprocal:dj,registerBackend:xQ,registerGradient:$J,registerKernel:tB,relu:Xh,relu6:K$,removeBackend:yQ,reshape:z,reverse:Lo,reverse1d:hj,reverse2d:pj,reverse3d:mj,reverse4d:gj,rfft:l0,round:X$,rsqrt:yj,scalar:Te,scatterND:Gj,scatter_util:ore,searchSorted:i0,selu:vj,separableConv2d:bj,serialization:pie,setBackend:mQ,setPlatform:wQ,setdiff1dAsync:xj,sigmoid:Ma,sign:wj,signal:rU,sin:Sj,sinh:$j,slice:We,slice1d:Ej,slice2d:Tj,slice3d:_j,slice4d:Cj,slice_util:CU,softmax:Ij,softplus:I$,spaceToBatchND:D$,sparse:aU,sparseToDense:Hj,spectral:nU,split:Wu,sqrt:Gs,square:Br,squaredDifference:J$,squeeze:u0,stack:qs,step:Q$,stridedSlice:Nj,string:lU,sub:be,sum:Ke,sumOutType:KJ,tan:kj,tanh:wg,tensor:ds,tensor1d:ar,tensor2d:xu,tensor3d:Z$,tensor4d:Aj,tensor5d:Oj,tensor6d:Rj,tensorScatterUpdate:Dj,tensor_util:JJ,test_util:bne,tidy:De,tile:bu,time:pQ,topk:Fj,train:ioe,transpose:Dd,truncatedNormal:Lj,unique:Mj,unregisterGradient:TJ,unregisterKernel:EJ,unsortedSegmentSum:Bj,unstack:Ko,upcastType:t0,upperBound:jj,util:LJ,valueAndGrad:ite,valueAndGrads:ote,variable:Uj,variableGrads:D4,version_core:soe,where:wi,whereAsync:tE,zeros:sl,zerosLike:qn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dae=he();dae.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Dn;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Dn||(Dn={}));var vI;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(vI||(vI={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pE={};function hae(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};pE[t]=n}function NU(t){return pE[t]}function pae(t){delete pE[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,u=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return Wt(e.inputNames[u],n,r,s);if(i.type==="tensors"){const d=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((p,m)=>{var g;return((g=d[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(p=>Wt(p,n,r,s))}const c=Wt(e.inputNames[u],n,r,s),f=c.dataSync();return i.type==="number"?f[0]:La(c.shape,f)}const o=e.attrParams[t];return o&&o.value}function Wt(t,e,n,r){const[s,i]=Fn(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[Cg(s,a)]);return o!==void 0?e[Cg(s,o)][i]:void 0}function bI(t,e,n){return e[Cg(t,n.currentContextId)]}function oi(t,e){const[n,r,s]=Fn(t,e);return[Cg(n,e&&e.currentContextId),r,s]}function Cg(t,e){return e?`${t}-${e}`:t}function Fn(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function _m(t,e,n){let r=S("pad",t,e,n);if(r==="explicit"){r=S("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function ai(t){return t.kept?t:xi(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mae=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gae=Object.freeze(Object.defineProperty({__proto__:null,json:mae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yae=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vae=Object.freeze(Object.defineProperty({__proto__:null,json:yae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bae=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],xae=Object.freeze(Object.defineProperty({__proto__:null,json:bae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wae=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Sae=Object.freeze(Object.defineProperty({__proto__:null,json:wae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ae=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Eae=Object.freeze(Object.defineProperty({__proto__:null,json:$ae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tae=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_ae=Object.freeze(Object.defineProperty({__proto__:null,json:Tae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cae=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Iae=Object.freeze(Object.defineProperty({__proto__:null,json:Cae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nae=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],kae=Object.freeze(Object.defineProperty({__proto__:null,json:Nae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aae=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Oae=Object.freeze(Object.defineProperty({__proto__:null,json:Aae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rae=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Pae=Object.freeze(Object.defineProperty({__proto__:null,json:Rae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dae=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Fae=Object.freeze(Object.defineProperty({__proto__:null,json:Dae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lae=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Mae=Object.freeze(Object.defineProperty({__proto__:null,json:Lae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bae=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],jae=Object.freeze(Object.defineProperty({__proto__:null,json:Bae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uae=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],zae=Object.freeze(Object.defineProperty({__proto__:null,json:Uae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vae=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Wae=Object.freeze(Object.defineProperty({__proto__:null,json:Vae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gae=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Hae=Object.freeze(Object.defineProperty({__proto__:null,json:Gae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qae=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Kae=Object.freeze(Object.defineProperty({__proto__:null,json:qae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xae=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Yae=Object.freeze(Object.defineProperty({__proto__:null,json:Xae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jae=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Qae=Object.freeze(Object.defineProperty({__proto__:null,json:Jae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xI{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[gae,vae,xae,Sae,Eae,_ae,Iae,kae,Oae,Pae,Fae,Mae,jae,zae,Wae,Hae,Kae,Yae,Qae],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?s.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let l=[];const u=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(a);d.forEach(m=>{const g=a[m];g.inputNames.forEach((y,v)=>{const[b,,x]=oi(y),w=a[b];if(w.outputs!=null){const $=w.outputs.indexOf(x);if($!==-1){const E=`${b}:${$}`;g.inputNames[v]=E}}g.inputs.push(w),w.children.push(g)})}),Object.keys(f).length===0?d.forEach(m=>{const g=a[m];g.children.length===0&&u.push(g)}):Object.keys(f).forEach(m=>{const[g]=oi(m),y=a[g];y!=null&&(y.signatureKey=f[m],u.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=oi(m),y=a[g];y&&(y.signatureKey=c[m],l.push(y))}):l=s;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:a,inputs:l,outputs:u,weights:i,placeholders:s,signature:n,functions:h};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=NU(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=Ix(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ix(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Dx(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Dx(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=kx(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=kx(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Px(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Px(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Nx(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Nx(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=Lx(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Lx(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Rx(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Rx(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Fx(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Fx(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Ax(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ax(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Ox(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ox(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=wI(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=wI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&s.push(f[d.name]),f),{}));const o=[],a=[];e.signature.inputArg.forEach(f=>{const[d]=oi(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:mE(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,o.push(h),i[d]=h}),Object.keys(i).forEach(f=>{const d=i[f];d.inputNames.forEach((h,p)=>{const[m,,g]=oi(h),y=i[m];if(y.outputs!=null){const v=y.outputs.indexOf(g);if(v!==-1){const b=`${m}:${v}`;d.inputNames[p]=b}}d.inputs.push(y),y.children.push(d)})});const u=e.ret;e.signature.outputArg.forEach(f=>{const[d,h]=oi(u[f.name]),p=i[d];p!=null&&(p.defaultOutput=h,a.push(p))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function Zae(t){const e=he().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function kU(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):Zae(t);return e?n:n.toLowerCase()}function Ix(t,e,n,r=!1){const s=t[e];return s!=null?kU(s.s,r):n}function Nx(t,e,n){const r=t[e];return r?r.b:n}function kx(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function mE(t){switch(typeof t=="string"&&(t=Dn[t]),t){case Dn.DT_FLOAT:case Dn.DT_HALF:return"float32";case Dn.DT_INT32:case Dn.DT_INT64:case Dn.DT_INT8:case Dn.DT_UINT8:return"int32";case Dn.DT_BOOL:return"bool";case Dn.DT_DOUBLE:return"float32";case Dn.DT_STRING:return"string";case Dn.DT_COMPLEX64:case Dn.DT_COMPLEX128:return"complex64";default:return null}}function wI(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function Ax(t,e,n){const r=t[e];return r&&r.type?mE(r.type):n}function Ox(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>mE(s)):n}function AU(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Rx(t,e,n){const r=t[e];return r&&r.shape?AU(r.shape):n}function Px(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function Dx(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>kU(i,r)):n}function Fx(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>AU(s)):n}function Lx(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ele{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return Wt(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Wt(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return kx(this.node.rawAttrs,e,n);if(r.s!=null)return Ix(this.node.rawAttrs,e,n);if(r.b!=null)return Nx(this.node.rawAttrs,e,n);if(r.shape!=null)return Rx(this.node.rawAttrs,e,n);if(r.type!=null)return Ax(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Px(this.node.rawAttrs,e,n);if(r.list.s!=null)return Dx(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Fx(this.node.rawAttrs,e,n);if(r.list.b!=null)return Lx(this.node.rawAttrs,e,n);if(r.list.type!=null)return Ox(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yt=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:l$,abs:Ln,acos:PB,acosh:DB,add:de,addN:FB,all:LB,any:MB,argMax:BB,argMin:jB,asin:UB,asinh:zB,atan:VB,atan2:WB,atanh:GB,avgPool:m$,avgPool3d:XB,basicLSTMCell:YB,batchNorm:Vh,batchNorm2d:JB,batchNorm3d:QB,batchNorm4d:ZB,batchToSpaceND:g$,bincount:y$,bitwiseAnd:e4,booleanMaskAsync:Vj,broadcastArgs:t4,broadcastTo:qf,buffer:Ws,cast:Je,ceil:n4,clipByValue:r4,clone:xi,complex:Ii,concat:on,concat1d:s4,concat2d:i4,concat3d:o4,concat4d:a4,conv1d:l4,conv2d:Wh,conv2dTranspose:c4,conv3d:f4,conv3dTranspose:d4,cos:h4,cosh:p4,cosineWindow:f0,cumprod:m4,cumsum:g4,denseBincount:y4,depthToSpace:v4,depthwiseConv2d:n0,diag:b4,dilation2d:x4,div:Xe,divNoNan:S4,dot:$4,dropout:Kj,einsum:va,elu:x$,enclosingPowerOfTwo:nE,ensureShape:E4,equal:b$,erf:T4,euclideanNorm:I4,exp:Fo,expandDims:ii,expm1:N4,eye:S$,fft:a0,fill:_c,floor:$$,floorDiv:h$,fused:Yj,gather:E$,gatherND:qj,greater:qh,greaterEqual:T$,ifft:Pd,imag:Kh,image:sU,inTopKAsync:Xj,irfft:Y$,isFinite:k4,isInf:A4,isNaN:O4,leakyRelu:_$,less:$g,lessEqual:r0,linalg:iU,linspace:R4,localResponseNormalization:P4,log:Uu,log1p:C$,logSigmoid:F4,logSoftmax:L4,logSumExp:N$,logicalAnd:Ad,logicalNot:k$,logicalOr:A$,logicalXor:M4,losses:oU,lowerBound:B4,matMul:Pe,max:Ba,maxPool:O$,maxPool3d:j4,maxPoolWithArgmax:U4,maximum:R$,mean:Od,meshgrid:z4,min:Sg,minimum:Rd,mirrorPad:V4,mod:W4,moments:G4,movingAverage:Wj,mul:ne,multiRNNCell:H4,multinomial:q4,neg:hs,norm:Hh,notEqual:P$,oneHot:Eg,ones:uo,onesLike:K4,op:A,outerProduct:X4,pad:Cc,pad1d:Y4,pad2d:J4,pad3d:Q4,pad4d:Z4,pool:ej,pow:ju,prelu:F$,print:d$,prod:tj,raggedGather:nj,raggedRange:rj,raggedTensorToTensor:sj,rand:ij,randomGamma:uj,randomNormal:q$,randomStandardNormal:cj,randomUniform:o0,randomUniformInt:fj,range:zu,real:Vu,reciprocal:dj,relu:Xh,relu6:K$,reshape:z,reverse:Lo,reverse1d:hj,reverse2d:pj,reverse3d:mj,reverse4d:gj,rfft:l0,round:X$,rsqrt:yj,scalar:Te,scatterND:Gj,searchSorted:i0,selu:vj,separableConv2d:bj,setdiff1dAsync:xj,sigmoid:Ma,sign:wj,signal:rU,sin:Sj,sinh:$j,slice:We,slice1d:Ej,slice2d:Tj,slice3d:_j,slice4d:Cj,softmax:Ij,softplus:I$,spaceToBatchND:D$,sparse:aU,sparseToDense:Hj,spectral:nU,split:Wu,sqrt:Gs,square:Br,squaredDifference:J$,squeeze:u0,stack:qs,step:Q$,stridedSlice:Nj,string:lU,sub:be,sum:Ke,tan:kj,tanh:wg,tensor:ds,tensor1d:ar,tensor2d:xu,tensor3d:Z$,tensor4d:Aj,tensor5d:Oj,tensor6d:Rj,tensorScatterUpdate:Dj,tile:bu,topk:Fj,transpose:Dd,truncatedNormal:Lj,unique:Mj,unsortedSegmentSum:Bj,unstack:Ko,upperBound:jj,variable:Uj,where:wi,whereAsync:tE,zeros:sl,zerosLike:qn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tle=(t,e,n,r=Yt)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(S("a",t,e,n),S("b",t,e,n))];case"AddN":return[r.addN(S("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(S("a",t,e,n),S("b",t,e,n))];case"Mul":return[r.mul(S("a",t,e,n),S("b",t,e,n))];case"RealDiv":case"Div":return[r.div(S("a",t,e,n),S("b",t,e,n))];case"DivNoNan":return[r.divNoNan(S("a",t,e,n),S("b",t,e,n))];case"FloorDiv":return[r.floorDiv(S("a",t,e,n),S("b",t,e,n))];case"Sub":return[r.sub(S("a",t,e,n),S("b",t,e,n))];case"Minimum":return[r.minimum(S("a",t,e,n),S("b",t,e,n))];case"Maximum":return[r.maximum(S("a",t,e,n),S("b",t,e,n))];case"Pow":return[r.pow(S("a",t,e,n),S("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(S("a",t,e,n),S("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nle=(t,e,n,r=Yt)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(S("x",t,e,n))];case"Acos":return[r.acos(S("x",t,e,n))];case"Acosh":return[r.acosh(S("x",t,e,n))];case"Asin":return[r.asin(S("x",t,e,n))];case"Asinh":return[r.asinh(S("x",t,e,n))];case"Atan":return[r.atan(S("x",t,e,n))];case"Atan2":return[r.atan2(S("x",t,e,n),S("y",t,e,n))];case"Atanh":return[r.atanh(S("x",t,e,n))];case"Ceil":return[r.ceil(S("x",t,e,n))];case"Complex":return[r.complex(S("real",t,e,n),S("imag",t,e,n))];case"Cos":return[r.cos(S("x",t,e,n))];case"Cosh":return[r.cosh(S("x",t,e,n))];case"Elu":return[r.elu(S("x",t,e,n))];case"Erf":return[r.erf(S("x",t,e,n))];case"Exp":return[r.exp(S("x",t,e,n))];case"Expm1":return[r.expm1(S("x",t,e,n))];case"Floor":return[r.floor(S("x",t,e,n))];case"Log":return[r.log(S("x",t,e,n))];case"Log1p":return[r.log1p(S("x",t,e,n))];case"Imag":return[r.imag(S("x",t,e,n))];case"Neg":return[r.neg(S("x",t,e,n))];case"Reciprocal":return[r.reciprocal(S("x",t,e,n))];case"Real":return[r.real(S("x",t,e,n))];case"Relu":return[r.relu(S("x",t,e,n))];case"Round":return[r.round(S("x",t,e,n))];case"Selu":return[r.selu(S("x",t,e,n))];case"Sigmoid":return[r.sigmoid(S("x",t,e,n))];case"Sin":return[r.sin(S("x",t,e,n))];case"Sign":return[r.sign(S("x",t,e,n))];case"Sinh":return[r.sinh(S("x",t,e,n))];case"Softplus":return[r.softplus(S("x",t,e,n))];case"Sqrt":return[r.sqrt(S("x",t,e,n))];case"Square":return[r.square(S("x",t,e,n))];case"Tanh":return[r.tanh(S("x",t,e,n))];case"Tan":return[r.tan(S("x",t,e,n))];case"ClipByValue":return[r.clipByValue(S("x",t,e,n),S("clipValueMin",t,e,n),S("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(S("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Wt(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(S("x",t,e,n),S("alpha",t,e,n))];case"Prelu":return[r.prelu(S("x",t,e,n),S("alpha",t,e,n))];case"IsNan":return[r.isNaN(Wt(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Wt(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Wt(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xr(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){C(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];C(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function SI(t){return!(typeof t=="number"||t.some(e=>e<0))}function ff(t,e,n){let r=Mx(t,n);const s=!SI(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=Mx(i.shape,r)}),!SI(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Mx(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rle{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Te(0),ls(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),xr(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,ls(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return ds([],[0].concat(this.elementShape));const r=this.readMany(e);return xr(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),qs(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ds([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return xr(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),on(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ko(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];De(()=>{n=z(n,[1,r,i]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:s[l-1],0],f=[1,e[l],i];o[l]=z(We(n,c,f),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class il{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);xr(n,i.shape,"TensorList shape mismatch: "),ls(i)}),this.idTensor=Te(0),this.maxNumElements=s,ls(this.idTensor)}copy(){return new il([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);xr(e,this.elementShape,"TensorList shape mismatch: ");const s=ff(this.elementShape,this.tensors,e);return De(()=>{const i=this.tensors.map(o=>z(o,s));return qs(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=ff(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,xr(s.shape,e,"TensorList shape mismatch: "),z(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(xr(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ls(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new il([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);xr(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=ff(this.elementShape,this.tensors,n);return z(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);xr(this.elementShape,n.shape,"TensorList shape mismatch: "),ls(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);xr(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=ff(this.elementShape,this.tensors,r);return e.length===0?ds([],[0].concat(s)):De(()=>{const i=e.map(o=>z(this.tensors[o],s));return qs(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);xr(this.elementShape,n,"TensorList shape mismatch: ");const r=ff(this.elementShape,this.tensors,n);return this.size()===0?ds([],[0].concat(r)):De(()=>{const s=this.tensors.map(i=>z(i,r));return on(s,0)})}}function sle(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);xr(s,e,"TensorList shape mismatch: ");const i=Ko(t);return new il(i,e,r)}function ile(t,e,n,r){return new il([],t,e,r)}function ole(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new il([],n,t.dtype,r),o=Ko(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function ale(t,e,n){let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=Mx(i,n),a=r===0?0:t.size/r,l=De(()=>{const c=[];t=z(t,[1,r,a]);for(let f=0;f<e.length;++f){const h=[0,f===0?0:s[f-1],0],p=[1,e[f],a];c[f]=z(We(t,h,p),o)}return t.dispose(),c}),u=new il([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lle=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=S("thenBranch",t,e,n),s=S("elseBranch",t,e,n),i=S("cond",t,e,n),o=S("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=S("body",t,e,n),s=S("cond",t,e,n),i=S("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const f=u.map(h=>h.id);c.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await d[0].data(),d.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return u}case"LoopCond":{const r=S("pred",t,e,n);return[ai(r)]}case"Switch":{const r=S("pred",t,e,n);let s=S("data",t,e,n);return s.kept||(s=ai(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>Wt(s,e,n)!==void 0);if(r){const s=Wt(r,e,n);return[ai(s)]}return}case"Enter":{const r=S("frameName",t,e,n),s=S("tensor",t,e,n);return n.enterFrame(r),[ai(s)]}case"Exit":{const r=S("tensor",t,e,n);return n.exitFrame(),[ai(r)]}case"NextIteration":{const r=S("tensor",t,e,n);return n.nextIteration(),[ai(r)]}case"TensorArrayV3":{const r=S("size",t,e,n),s=S("dtype",t,e,n),i=S("elementShape",t,e,n),o=S("dynamicSize",t,e,n),a=S("clearAfterRead",t,e,n),l=S("identicalElementShapes",t,e,n),u=S("name",t,e,n),c=new rle(u,s,r,i,l,o,a);return n.addTensorArray(c),[c.idTensor,Te(1)]}case"TensorArrayWriteV3":{const r=S("tensorArrayId",t,e,n),s=S("index",t,e,n),i=S("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=S("tensorArrayId",t,e,n),s=S("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=S("tensorArrayId",t,e,n),s=S("indices",t,e,n),i=S("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=S("tensorArrayId",t,e,n),s=S("indices",t,e,n),i=S("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=S("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=S("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=S("tensorArrayId",t,e,n),s=S("tensor",t,e,n),i=S("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=S("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[Te(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=S("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=S("tensorListId",t,e,n),s=S("index",t,e,n),i=S("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=S("tensorListId",t,e,n),s=S("index",t,e,n),i=S("elementShape",t,e,n),o=S("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=S("indices",t,e,n),s=S("tensor",t,e,n),i=S("elementShape",t,e,n),o=S("numElements",t,e,n),a=ole(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=S("elementShape",t,e,n),s=S("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=S(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,l=ile(r,s,o,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=S("tensorListId",t,e,n),s=S("indices",t,e,n),i=S("elementShape",t,e,n),o=S("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=S("tensorListId",t,e,n),s=S("elementShape",t,e,n),i=S("elementDType",t,e,n),o=S("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=S("tensor",t,e,n),s=S("elementShape",t,e,n),i=S("elementDType",t,e,n),o=sle(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=S("tensorListId",t,e,n),s=n.getTensorList(r.id),i=S("dtype",t,e,n),o=S("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=S("tensorListId",t,e,n),s=S("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=S("tensorListId",t,e,n),s=S("elementShape",t,e,n),i=S("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=S("tensor",t,e,n),s=S("elementShape",t,e,n),i=S("lengths",t,e,n),o=ale(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=S("tensorListId",t,e,n),s=n.getTensorList(r.id);return[Te(s.size(),"int32")]}case"TensorListResize":{const r=S("tensorListId",t,e,n),s=S("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $I(t,e,n){const[r,s]=S("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",u=S("numArgs",t,e,n);if(i){if(a&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=S("strides",t,e,n),f=_m(t,e,n),d=S("dataFormat",t,e,n).toUpperCase(),h=S("dilations",t,e,n);let[p,m]=S("args",t,e,n);o&&(m=p,p=void 0);const g=S("leakyreluAlpha",t,e,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:p,preluArg:m,activationFunc:s,leakyreluAlpha:g}}const ule=(t,e,n,r=Yt)=>{switch(t.op){case"Conv1D":{const s=S("stride",t,e,n),i=S("pad",t,e,n),o=S("dataFormat",t,e,n).toUpperCase(),a=S("dilation",t,e,n);return[r.conv1d(S("x",t,e,n),S("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=S("strides",t,e,n),i=_m(t,e,n),o=S("dataFormat",t,e,n).toUpperCase(),a=S("dilations",t,e,n);return[r.conv2d(S("x",t,e,n),S("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:f}=$I(t,e,n);return[r.fused.conv2d({x:S("x",t,e,n),filter:S("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:f}=$I(t,e,n);return[r.fused.depthwiseConv2d({x:S("x",t,e,n),filter:S("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=S("outputShape",t,e,n),i=S("strides",t,e,n),o=_m(t,e,n);return[r.conv2dTranspose(S("x",t,e,n),S("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=S("strides",t,e,n),i=_m(t,e,n),o=S("dilations",t,e,n),a=S("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(S("input",t,e,n),S("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("dataFormat",t,e,n).toUpperCase(),a=S("dilations",t,e,n);return[r.conv3d(S("x",t,e,n),S("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("kernelSize",t,e,n);return[r.avgPool(S("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("kernelSize",t,e,n);return[r.maxPool(S("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("kernelSize",t,e,n),a=S("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(S("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[l,u]}case"AvgPool3D":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("kernelSize",t,e,n);return[r.avgPool3d(S("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("kernelSize",t,e,n);return[r.maxPool3d(S("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=S("strides",t,e,n),i=S("pad",t,e,n),o=S("dilations",t,e,n),a=s[1],l=s[2],u=o[1],c=o[2];return[r.dilation2d(S("x",t,e,n),S("filter",t,e,n),[a,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cle=(t,e,n,r=Yt)=>{switch(t.op){case"Fill":{const s=S("shape",t,e,n),i=S("dtype",t,e,n),o=S("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=S("start",t,e,n),i=S("stop",t,e,n),o=S("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=S("logits",t,e,n),i=S("numSamples",t,e,n),o=S("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=S("indices",t,e,n),i=S("depth",t,e,n),o=S("onValue",t,e,n),a=S("offValue",t,e,n),l=S("dtype",t,e,n);return[r.oneHot(s,i,o,a,l)]}case"Ones":return[r.ones(S("shape",t,e,n),S("dtype",t,e,n))];case"OnesLike":return[r.onesLike(S("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(S("shape",t,e,n),S("dtype",t,e,n),S("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(S("shape",t,e,n),S("minval",t,e,n),S("maxval",t,e,n),S("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(S("shape",t,e,n),S("minval",t,e,n),S("maxval",t,e,n),S("seed",t,e,n))];case"Range":{const s=S("start",t,e,n),i=S("stop",t,e,n),o=S("step",t,e,n);return[r.range(s,i,o,S("dtype",t,e,n))]}case"TruncatedNormal":{const s=S("shape",t,e,n),i=S("mean",t,e,n),o=S("stdDev",t,e,n),a=S("seed",t,e,n);return[r.truncatedNormal(s,i,o,S("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(S("shape",t,e,n),S("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(S("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1(t,e,n){const r=S("boxes",t,e,n),s=S("scores",t,e,n),i=S("maxOutputSize",t,e,n),o=S("iouThreshold",t,e,n),a=S("scoreThreshold",t,e,n),l=S("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const fle=async(t,e,n,r,s=Yt)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=u1(t,e,n),f=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,l,u,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=u1(t,e,n),c=S("padToMaxOutputSize",t,e,n),f=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,l,u,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=u1(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,l,u)]}case"Where":{const i=s.cast(S("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(S("x",t,e,n),S("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dle=(t,e,n,r=Yt)=>{switch(t.op){case"LowerBound":{const s=S("sortedSequence",t,e,n),i=S("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=S("x",t,e,n),i=S("k",t,e,n),o=S("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=S("sortedSequence",t,e,n),i=S("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=S("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=S("x",t,e,n),i=S("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hle=(t,e,n,r=Yt)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=S("default",t,e,n);return[Wt(t.name,e,n)||s];case"Placeholder":return[Wt(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=S("x",t,e,n);return[ai(c)]}case"IdentityN":return S("x",t,e,n).map(c=>ai(c));case"Snapshot":const i=S("x",t,e,n);return[ai(i)];case"Shape":return[r.tensor1d(S("x",t,e,n).shape,"int32")];case"ShapeN":return S("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(S("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(S("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=S("x",t,e,n),a=S("data",t,e,n),l=S("message",t,e,n),u=S("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ple{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Te(0),this.tensorMap=new Map,ls(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Te(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),De(()=>{const s=Ko(n),i=r.length,o=s.length;C(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],u=s[a];ls(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return De(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return qs(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mle=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=S("keyDType",t,e,n),o=S("valueDType",t,e,n),a=new ple(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=S("tableHandle",t,e,n,r),i=S("keys",t,e,n),o=S("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=S("tableHandle",t,e,n,r),i=S("keys",t,e,n),o=S("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=S("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gle=(t,e,n,r=Yt)=>{switch(t.op){case"ResizeBilinear":{const s=S("images",t,e,n),i=S("size",t,e,n),o=S("alignCorners",t,e,n),a=S("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=S("images",t,e,n),i=S("size",t,e,n),o=S("alignCorners",t,e,n),a=S("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=S("image",t,e,n),i=S("boxes",t,e,n),o=S("boxInd",t,e,n),a=S("cropSize",t,e,n),l=S("method",t,e,n),u=S("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,l,u)]}case"ImageProjectiveTransformV3":{const s=S("images",t,e,n),i=S("transforms",t,e,n),o=S("outputShape",t,e,n),a=S("fillValue",t,e,n),l=S("interpolation",t,e,n),u=S("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),u.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yle=(t,e,n,r=Yt)=>{switch(t.op){case"Equal":return[r.equal(S("a",t,e,n),S("b",t,e,n))];case"NotEqual":return[r.notEqual(S("a",t,e,n),S("b",t,e,n))];case"Greater":return[r.greater(S("a",t,e,n),S("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(S("a",t,e,n),S("b",t,e,n))];case"Less":return[r.less(S("a",t,e,n),S("b",t,e,n))];case"LessEqual":return[r.lessEqual(S("a",t,e,n),S("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(S("a",t,e,n),S("b",t,e,n))];case"LogicalNot":return[r.logicalNot(S("a",t,e,n))];case"LogicalOr":return[r.logicalOr(S("a",t,e,n),S("b",t,e,n))];case"Select":case"SelectV2":return[r.where(S("condition",t,e,n),S("a",t,e,n),S("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(S("a",t,e,n),S("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vle=(t,e,n,r=Yt)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(S("a",t,e,n),S("b",t,e,n),S("transposeA",t,e,n),S("transposeB",t,e,n))];case"Einsum":return[r.einsum(S("equation",t,e,n),...S("tensors",t,e,n))];case"Transpose":return[r.transpose(S("x",t,e,n),S("perm",t,e,n))];case"_FusedMatMul":const[s,i]=S("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",l=S("numArgs",t,e,n),u=S("leakyreluAlpha",t,e,n);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=S("args",t,e,n);return[r.fused.matMul({a:S("a",t,e,n),b:S("b",t,e,n),transposeA:S("transposeA",t,e,n),transposeB:S("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:f,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(S("a",t,e,n),S("numLower",t,e,n),S("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ble=(t,e,n,r=Yt)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(S("x",t,e,n),S("axis",t,e,n),S("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(S("x",t,e,n),S("mean",t,e,n),S("variance",t,e,n),S("offset",t,e,n),S("scale",t,e,n),S("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(S("x",t,e,n),S("mean",t,e,n),S("variance",t,e,n),S("offset",t,e,n),S("scale",t,e,n),S("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(S("x",t,e,n),S("radius",t,e,n),S("bias",t,e,n),S("alpha",t,e,n),S("beta",t,e,n))];case"Softmax":return[r.softmax(S("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(S("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xle=(t,e,n,r=Yt)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(S("paramsNestedSplits",t,e,n),S("paramsDenseValues",t,e,n),S("indices",t,e,n),S("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(S("starts",t,e,n),S("limits",t,e,n),S("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(S("shape",t,e,n),S("values",t,e,n),S("defaultValue",t,e,n),S("rowPartitionTensors",t,e,n),S("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wle=(t,e,n,r=Yt)=>{switch(t.op){case"Max":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.max(S("x",t,e,n),a,l)]}case"Mean":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.mean(S("x",t,e,n),a,l)]}case"Min":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.min(S("x",t,e,n),a,l)]}case"Sum":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.sum(S("x",t,e,n),a,l)]}case"All":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.all(S("x",t,e,n),a,l)]}case"Any":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.any(S("x",t,e,n),a,l)]}case"ArgMax":{const a=S("axis",t,e,n);return[r.argMax(S("x",t,e,n),a)]}case"ArgMin":{const a=S("axis",t,e,n);return[r.argMin(S("x",t,e,n),a)]}case"Prod":{const a=S("axis",t,e,n),l=S("keepDims",t,e,n);return[r.prod(S("x",t,e,n),a,l)]}case"Cumprod":{const a=S("axis",t,e,n),l=S("exclusive",t,e,n),u=S("reverse",t,e,n);return[r.cumprod(S("x",t,e,n),a,l,u)]}case"Cumsum":{const a=S("axis",t,e,n),l=S("exclusive",t,e,n),u=S("reverse",t,e,n);return[r.cumsum(S("x",t,e,n),a,l,u)]}case"Bincount":const s=S("x",t,e,n),i=S("weights",t,e,n),o=S("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=S("x",t,e,n),l=S("weights",t,e,n),u=S("size",t,e,n),c=S("binaryOutput",t,e,n);return[r.denseBincount(a,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sle=(t,e,n,r=Yt)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=S("n",t,e,n),i=S("axis",t,e,n);let o=S("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=S("x",t,e,n),i=S("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=S("axis",t,e,n),i=S("batchDims",t,e,n),o=S("x",t,e,n),a=S("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=S("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=S("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=S("axis",t,e,n),i=S("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=S("begin",t,e,n),i=S("size",t,e,n);return[r.slice(S("x",t,e,n),s,i)]}case"StridedSlice":{const s=S("begin",t,e,n),i=S("end",t,e,n),o=S("strides",t,e,n),a=S("beginMask",t,e,n),l=S("endMask",t,e,n),u=S("ellipsisMask",t,e,n),c=S("newAxisMask",t,e,n),f=S("shrinkAxisMask",t,e,n),d=S("x",t,e,n);return[r.stridedSlice(d,s,i,o,a,l,u,c,f)]}case"Pack":return De(()=>{const s=S("axis",t,e,n),i=S("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(u=>{const c=ys(u.shape,o);if(!c&&!ys(r.squeeze(u).shape,a))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,s)]});case"Unpack":{const s=S("axis",t,e,n),i=S("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=S("reps",t,e,n);return[r.tile(S("x",t,e,n),s)]}case"Split":case"SplitV":{const s=S("axis",t,e,n),i=S("numOrSizeSplits",t,e,n),o=S("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=S("indices",t,e,n),i=S("values",t,e,n),o=S("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=S("x",t,e,n),i=S("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=S("sparseIndices",t,e,n),i=S("outputShape",t,e,n),o=S("sparseValues",t,e,n),a=S("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=S("indices",t,e,n),i=S("values",t,e,n),o=S("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $le=(t,e,n,r=Yt)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(S("indices",t,e,n),S("values",t,e,n),S("denseShape",t,e,n),S("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(S("inputIndices",t,e,n),S("inputShape",t,e,n),S("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(S("data",t,e,n),S("indices",t,e,n),S("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(S("data",t,e,n),S("indices",t,e,n),S("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ele=(t,e,n,r=Yt)=>{switch(t.op){case"FFT":return[r.fft(S("x",t,e,n))];case"IFFT":return[r.ifft(S("x",t,e,n))];case"RFFT":return[r.rfft(S("x",t,e,n))];case"IRFFT":return[r.irfft(S("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tle=(t,e,n,r=Yt)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(S("input",t,e,n),S("pattern",t,e,n),S("rewrite",t,e,n),S("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(S("data",t,e,n),S("dataSplits",t,e,n),S("separator",t,e,n),S("nGramWidths",t,e,n),S("leftPad",t,e,n),S("rightPad",t,e,n),S("padWidth",t,e,n),S("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(S("input",t,e,n),S("delimiter",t,e,n),S("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(S("input",t,e,n),S("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _le=(t,e,n,r=Yt)=>{switch(t.op){case"Cast":return[r.cast(S("x",t,e,n),S("dtype",t,e,n))];case"ExpandDims":{const s=S("axis",t,e,n);return[r.expandDims(S("x",t,e,n),s)]}case"Squeeze":{const s=S("axis",t,e,n);return[r.squeeze(S("x",t,e,n),s)]}case"Reshape":return[r.reshape(S("x",t,e,n),S("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(S("x",t,e,n),S("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(S("x",t,e,n),S("padding",t,e,n),S("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(S("x",t,e,n),S("padding",t,e,n),S("constantValue",t,e,n))];case"SpaceToBatchND":{const s=S("blockShape",t,e,n),i=S("paddings",t,e,n);return[r.spaceToBatchND(S("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=S("blockShape",t,e,n),i=S("crops",t,e,n);return[r.batchToSpaceND(S("x",t,e,n),s,i)]}case"DepthToSpace":{const s=S("blockSize",t,e,n),i=S("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(S("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(S("x",t,e,n),S("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(S("s0",t,e,n),S("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EI(t,e,n,r,s=De){const i=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>tle(o,a,l));case"basic_math":return s(()=>nle(o,a,l));case"control":return lle(o,a,l);case"convolution":return s(()=>ule(o,a,l));case"creation":return s(()=>cle(o,a,l));case"dynamic":return fle(o,a,l);case"evaluation":return s(()=>dle(o,a,l));case"image":return s(()=>gle(o,a,l));case"graph":return s(()=>hle(o,a,l));case"logical":return s(()=>yle(o,a,l));case"matrices":return s(()=>vle(o,a,l));case"normalization":return s(()=>ble(o,a,l));case"ragged":return s(()=>xle(o,a,l));case"reduction":return s(()=>wle(o,a,l));case"slice_join":return s(()=>Sle(o,a,l));case"sparse":return s(()=>$le(o,a,l));case"spectral":return s(()=>Ele(o,a,l));case"string":return s(()=>Tle(o,a,l));case"transformation":return s(()=>_le(o,a,l));case"hash_table":return mle(o,a,l,r);case"custom":const u=NU(o.op);if(u&&u.customExecutor)return u.customExecutor(new ele(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Oo(i)?i.then(o=>[].concat(o)):[].concat(i)}class TI{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _I(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,u=new Set(Object.keys(t).map(d=>Fn(d)[0]));r=r||[];const c=new Set(r.map(d=>Fn(d.name)[0])),f=[...e];for(;f.length>0;){const d=f.pop();if((ba(d)||Ple(d)||Dle(d))&&o==null&&(o=d,a=o.children.map(h=>h.name).filter(h=>s.has(h))),s.add(d.name),n[d.name]==null&&!u.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),f.push(h))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function Cle(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(g=>Fn(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],o=g=>n.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const l=a([...s,...t.weights,...i]).filter(o),u=a([...l,...Object.values(t.nodes)]).filter(o),c=new Map(u.map(g=>[g.name,g])),f={};for(const g of u){f[g.name]=f[g.name]||0;for(const y of g.children)o(y)||(f[y.name]=Number.POSITIVE_INFINITY),f[y.name]=(f[y.name]||0)+1}const d=Object.entries(f).filter(([,g])=>g===0).map(([g])=>g),h=[...d];for(;d.length>0;){const g=d.pop(),y=c.get(g);for(const v of y.children.filter(o))--f[v.name]===0&&(h.push(v.name),d.push(v.name))}const p=h.map(g=>c.get(g)),m=Ile(p,l);return Nle(m,l),m}function Ile(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(o=>s.has(o.name))}class Lp extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Nle(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!n.has(l.name))throw new Lp(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Lp(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new Lp(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Lp(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function kle(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>ba(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(s).reduce((u,c)=>Math.max(u,c),r[l])),o=new Map;for(let a=0;a<t.length;++a){const l=i[a];if(l===n)continue;const u=t[a],c=t[l];o.has(c.name)||o.set(c.name,[]),o.get(c.name).push(u)}return o}const Ale=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Ole=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Rle=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function ba(t){return Ale.has(t.op)}function Ple(t){return Ole.has(t.op)}function Dle(t){return Rle.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ig{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Ig(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=_I(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const u=n.map(f=>f.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${s}]`)}const a=Cle(this.graph,r),l=kle(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return ls(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(d=>this.graph.nodes[Fn(d)[0]]),i=n.map(d=>Fn(d)[0]),o=new Set(i);let a=i.map(d=>this.graph.nodes[d]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,a),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=he().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return De(()=>{const d=new TI(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[v,b]=Fn(y,d),x=[];x[b]=e[y],h[v]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(x))});const p=this.getFrozenTensorIds(h),{orderedNodes:m,nodeLiveUntilMap:g}=u;for(const y of m){if(h[y.name])continue;const v=EI(y,h,d,this._resourceManager);if(Oo(v))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);h[y.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,h,d,p,o,g.get(y.name))}return this.parent==null&&d.dispose(p),n.map(y=>Wt(y,h,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(ba(n)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(ba(l))continue;const u=bI(l.name,r,s);if(u!=null)for(const c of u){if(!c||c.kept||i.has(c.id))continue;const f=a[c.id];f===1?(c.dispose(),delete a[c.id]):f!=null&&a[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(l){return ba(l)||i.has(l.name)}if(!(ba(e)||o==null))for(const l of o){if(a(l))continue;const u=bI(l.name,n,r);for(const c of u)!c||c.kept||s.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=he().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const o=new TI(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),l=n.map(d=>Wt(d,a,o)),u=l.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),f=new Set([...u,...c,...this.weightIds]);return Object.values(a).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&o.dispose(f),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(x=>this.graph.nodes[Fn(x)[0]]),a=r.map(x=>Fn(x)[0]),l=new Set(a);let u=a.map(x=>this.graph.nodes[x]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=_I(e,u,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(x=>{const[w,$]=Fn(x),E=[];E[$]=e[x],m[w]=E});const g={},y=this.getFrozenTensorIds(m),v={};for(;p.length>0;){const x=this.processStack(o,p,n,m,v,y,l,g,c);await Promise.all(x)}d==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=u.filter(x=>!ba(x)&&!Wt(x.name,m,n)).map(x=>x.name);if(b.length>0){let x="";throw d!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${x}`)}return m}processStack(e,n,r,s,i,o,a,l,u){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&S("isConstant",f.node,s,r)&&([d]=oi(f.node.name,r)),s[f.node.name]==null){const h=EI(f.node,s,r,this._resourceManager);d||([d]=oi(f.node.name,r));const p=r.currentContext;Oo(h)?c.push(h.then(m=>(s[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(d,f.node,s,r,o,a,l),this.processChildNodes(f.node,n,r,s,i,u),m))):(s[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,s,r,o,a,l),this.processChildNodes(f.node,n,r,s,i,u))}else this.processChildNodes(f.node,n,r,s,i,u)}return c}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=oi(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(u=>!!Wt(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(u=>!!Wt(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=Fn(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);C(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&C(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=Fn(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=Fn(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Fle{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lle="?tfjs-format=file",Mle="model.json";class gE{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=dE){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Fle}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Oo(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await TB(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Ig(xI.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=xI.Instance.transformGraph(e.modelInitializer);this.initializer=new Ig(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof mt?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof mt)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,l,u;const c=(u=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||u===void 0?void 0:u.resourceId;return c!=null?i[o]=this.resourceIdToCapturedInput[c]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&vn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Ble(t,e={},n=dE){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Ule(t));const r=new gE(t,e,n);return await r.load(),r}function jle(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[r,s]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const i=xg(r.weightsManifest),o=c$(r,i,s);e=_g(o)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=_g(t);else throw new Error("Unknown model format");const n=new gE(e);return n.load(),n}function Ule(t){return t.endsWith("/")||(t=t+"/"),`${t}${Mle}${Lle}`}/** @license See the LICENSE file. */const zle="4.19.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vle=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:gE,deregisterOp:pae,loadGraphModel:Ble,loadGraphModelSync:jle,registerOp:hae,version_converter:zle},Symbol.toStringTag,{value:"Module"})),Wle=FS(Vle),Gle=FS(fae);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(function(t,e){(function(n,r){r(e,Wle,Gle)})(Cr,function(n,r,s){const i={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(l,u){this.modelPath=u||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=s.zeros([1,300,300,3],"int32"),u=await this.model.executeAsync(l);await Promise.all(u.map(c=>c.data())),u.map(c=>c.dispose()),l.dispose()}async infer(l,u,c){const f=s.tidy(()=>(l instanceof s.Tensor||(l=s.browser.fromPixels(l)),s.expandDims(l))),d=f.shape[1],h=f.shape[2],p=await this.model.executeAsync(f),m=p[0].dataSync(),g=p[1].dataSync();f.dispose(),s.dispose(p);const[y,v]=this.calculateMaxScores(m,p[0].shape[1],p[0].shape[2]),b=s.getBackend();s.getBackend()==="webgl"&&s.setBackend("cpu");const x=s.tidy(()=>{const $=s.tensor2d(g,[p[1].shape[1],p[1].shape[3]]);return s.image.nonMaxSuppression($,y,u,c,c)}),w=x.dataSync();return x.dispose(),b!==s.getBackend()&&s.setBackend(b),this.buildDetectedObjects(h,d,g,y,w,v)}buildDetectedObjects(l,u,c,f,d,h){const p=d.length,m=[];for(let g=0;g<p;g++){const y=[];for(let $=0;$<4;$++)y[$]=c[4*d[g]+$];const v=y[0]*u,b=y[1]*l,x=y[2]*u,w=y[3]*l;y[0]=b,y[1]=v,y[2]=w-b,y[3]=x-v,m.push({bbox:y,class:i[h[d[g]]+1].displayName,score:f[d[g]]})}return m}calculateMaxScores(l,u,c){const f=[],d=[];for(let h=0;h<u;h++){let p=Number.MIN_VALUE,m=-1;for(let g=0;g<c;g++)l[h*c+g]>p&&(p=l[h*c+g],m=g);f[h]=p,d[h]=m}return[f,d]}async detect(l,u=20,c=.5){return this.infer(l,u,c)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=o,n.load=async function(a={}){if(s==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=a.base||"lite_mobilenet_v2",u=a.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const c=new o(l,u);return await c.load(),c},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})})})(sx,sx.exports);var OU=sx.exports;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hle=1e-7,qle=1e-4;class Kle{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class RU{refCount(e){return Pn("refCount")}incRef(e){return Pn("incRef")}timerAvailable(){return!0}time(e){return Pn("time")}read(e){return Pn("read")}readSync(e){return Pn("readSync")}readToGPU(e,n){return Pn("readToGPU")}numDataIds(){return Pn("numDataIds")}disposeData(e,n){return Pn("disposeData")}write(e,n,r){return Pn("write")}move(e,n,r,s,i){return Pn("move")}createTensorFromGPUData(e,n,r){return Pn("createTensorFromGPUData")}memory(){return Pn("memory")}floatPrecision(){return Pn("floatPrecision")}epsilon(){return this.floatPrecision()===32?Hle:qle}dispose(){return Pn("dispose")}}function Pn(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ng(t,e,n){return Math.max(t,Math.min(e,n))}function yE(t){return t%2===0?t:t+1}function df(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Xle(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function J(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function PU(t,e,n=""){J(Kt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function ee(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Kt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function kg(t){return t%1===0}function Bx(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function wu(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function CI(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function Yle(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function An(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),J(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),J(t.every(r=>kg(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function xl(t,e){const n=[],r=[];for(let s=0;s<t.length;++s)t[s]!==1&&(n.push(t[s]),r.push(s));return{newShape:n,keptDims:r}}function ol(t,e){return Mt(t,e)}function Mt(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Jle(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Qle(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Zle(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ag(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function eue(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function y0(t){return typeof t=="string"||t instanceof String}function tue(t){return typeof t=="boolean"}function nue(t){return typeof t=="number"}function Yh(t){return Array.isArray(t)?Yh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":nue(t)?"float32":y0(t)?"string":tue(t)?"bool":"float32"}function jx(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ux(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function qt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function DU(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)s[l]=DU(t+l*a,o,n,r)}return s}function II(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return DU(0,t,e,n)}function rue(t,e){const n=Mo(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Mo(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function Jh(t){t.forEach(e=>{J(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function zx(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function vE(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function bE(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NI="tfjsflags";class sue{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=iue,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(B().getBool("IS_TEST")||B().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];B().getBool("IS_TEST")||B().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(bE(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);NI in e&&e[NI].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=aue(s,i)})}}function iue(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(oue(e,r[0],r[1]),r.join("="))),e}function oue(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function aue(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function B(){return FU}let FU=null;function lue(t){FU=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let c1;function LU(){if(c1==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");c1=t}return c1}function uue(){const t=LU();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function xE(t,e){const n=uue();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const MU="Abs",cue="Acos",fue="Acosh",wE="Add",due="AddN",hue="All",pue="Any",mue="ArgMax",gue="ArgMin",yue="Asin",vue="Asinh",bue="Atan",xue="Atanh",wue="Atan2",Sue="AvgPool",$ue="AvgPoolGrad",Eue="AvgPool3D",Tue="AvgPool3DGrad",_ue="BatchMatMul",Cue="BatchToSpaceND",Iue="Bincount",Nue="BitwiseAnd",kue="BroadcastArgs",SE="Cast",Aue="Ceil",Oue="ClipByValue",BU="Complex",jU="ComplexAbs",Rue="Concat",Pue="Conv2D",Due="Conv2DBackpropFilter",Fue="Conv2DBackpropInput",Lue="Conv3D",Mue="Conv3DBackpropFilterV2",Bue="Conv3DBackpropInputV2",jue="Cos",Uue="Cosh",zue="Cumprod",Vue="Cumsum",Wue="CropAndResize",Gue="DenseBincount",Hue="DepthToSpace",que="DepthwiseConv2dNative",Kue="DepthwiseConv2dNativeBackpropFilter",Xue="DepthwiseConv2dNativeBackpropInput",Yue="Diag",Jue="Dilation2D",UU="RealDiv",Que="Einsum",zU="Elu",Zue="EluGrad",ece="Erf",tce="Equal",nce="Exp",rce="ExpandDims",sce="Expm1",ice="FFT",VU="Fill",oce="FlipLeftRight",ace="Floor",WU="FloorDiv",lce="FusedBatchNorm",uce="GatherV2",cce="GatherNd",fce="Greater",dce="GreaterEqual",$E="Identity",hce="IFFT",pce="Imag",mce="IsFinite",gce="IsInf",yce="IsNan",GU="LeakyRelu",vce="Less",bce="LessEqual",xce="LinSpace",wce="Log",Sce="Log1p",$ce="LogicalAnd",Ece="LogicalNot",Tce="LogicalOr",_ce="LRN",Cce="LRNGrad",Ice="Max",HU="Maximum",Nce="MaxPool",kce="MaxPoolGrad",Ace="MaxPool3D",Oce="MaxPool3DGrad",Rce="MaxPoolWithArgmax",Pce="Mean",Dce="Min",Fce="Minimum",Lce="MirrorPad",Mce="Mod",Bce="Multinomial",qU="Multiply",jce="Neg",Uce="NotEqual",zce="NonMaxSuppressionV3",Vce="NonMaxSuppressionV4",Wce="NonMaxSuppressionV5",Gce="OnesLike",Hce="OneHot",qce="Pack",Kce="PadV2",KU="Pow",XU="Prelu",Xce="Prod",Yce="RaggedGather",Jce="RaggedRange",Qce="RaggedTensorToTensor",Zce="Range",efe="Real",tfe="Reciprocal",YU="Relu",JU="Reshape",nfe="ResizeNearestNeighbor",rfe="ResizeNearestNeighborGrad",sfe="ResizeBilinear",ife="ResizeBilinearGrad",QU="Relu6",ofe="Reverse",afe="Round",lfe="Rsqrt",ufe="ScatterNd",cfe="TensorScatterUpdate",ffe="SearchSorted",dfe="Select",hfe="Selu",pfe="Slice",mfe="Sin",gfe="Sinh",yfe="Sign",ZU="Sigmoid",vfe="Softplus",ez="Sqrt",tz="Sum",bfe="SpaceToBatchND",xfe="SplitV",wfe="Softmax",Sfe="SparseFillEmptyRows",$fe="SparseReshape",Efe="SparseSegmentMean",Tfe="SparseSegmentSum",_fe="SparseToDense",Cfe="SquaredDifference",Ife="Square",Nfe="StaticRegexReplace",kfe="StridedSlice",Afe="StringNGrams",Ofe="StringSplit",Rfe="StringToHashBucketFast",nz="Sub",Pfe="Tan",Dfe="Tanh",rz="Tile",Ffe="TopK",Lfe="Transform",Mfe="Transpose",Bfe="Unique",jfe="Unpack",Ufe="UnsortedSegmentSum",sz="ZerosLike",iz="Step",zfe="FromPixels",Vfe="RotateWithOffset",Wfe="_FusedMatMul",Gfe="FusedConv2D",Hfe="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function os(...t){B().getBool("IS_TEST")||B().getBool("PROD")||console.warn(...t)}function qfe(...t){B().getBool("IS_TEST")||B().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Og=xE("kernelRegistry",()=>new Map),Kfe=xE("gradRegistry",()=>new Map);function kI(t,e){const n=oz(t,e);return Og.get(n)}function AI(t){return Kfe.get(t)}function OI(t){const e=Og.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function Xfe(t){const{kernelName:e,backendName:n}=t,r=oz(e,n);Og.has(r)&&os(`The kernel '${e}' for backend '${n}' is already registered`),Og.set(r,t)}function oz(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var lz=rt,Or=null;try{Or=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function rt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}rt.prototype.__isLong__;Object.defineProperty(rt.prototype,"__isLong__",{value:!0});function Zn(t){return(t&&t.__isLong__)===!0}rt.isLong=Zn;var RI={},PI={};function wl(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=PI[t],r)?r:(n=st(t,(t|0)<0?-1:0,!0),s&&(PI[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=RI[t],r)?r:(n=st(t,t<0?-1:0,!1),s&&(RI[t]=n),n))}rt.fromInt=wl;function Rr(t,e){if(isNaN(t))return e?ka:Pr;if(e){if(t<0)return ka;if(t>=uz)return dz}else{if(t<=-FI)return Un;if(t+1>=FI)return fz}return t<0?Rr(-t,e).neg():st(t%Gu|0,t/Gu|0,e)}rt.fromNumber=Rr;function st(t,e,n){return new rt(t,e,n)}rt.fromBits=st;var Rg=Math.pow;function EE(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Pr;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return EE(t.substring(1),e,n).neg();for(var s=Rr(Rg(n,8)),i=Pr,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=Rr(Rg(n,a));i=i.mul(u).add(Rr(l))}else i=i.mul(s),i=i.add(Rr(l))}return i.unsigned=e,i}rt.fromString=EE;function xs(t,e){return typeof t=="number"?Rr(t,e):typeof t=="string"?EE(t,e):st(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}rt.fromValue=xs;var DI=65536,Yfe=1<<24,Gu=DI*DI,uz=Gu*Gu,FI=uz/2,LI=wl(Yfe),Pr=wl(0);rt.ZERO=Pr;var ka=wl(0,!0);rt.UZERO=ka;var ru=wl(1);rt.ONE=ru;var cz=wl(1,!0);rt.UONE=cz;var Vx=wl(-1);rt.NEG_ONE=Vx;var fz=st(-1,2147483647,!1);rt.MAX_VALUE=fz;var dz=st(-1,-1,!0);rt.MAX_UNSIGNED_VALUE=dz;var Un=st(0,-2147483648,!1);rt.MIN_VALUE=Un;var Z=rt.prototype;Z.toInt=function(){return this.unsigned?this.low>>>0:this.low};Z.toNumber=function(){return this.unsigned?(this.high>>>0)*Gu+(this.low>>>0):this.high*Gu+(this.low>>>0)};Z.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Un)){var n=Rr(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=Rr(Rg(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),u=o.sub(l.mul(i)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Z.getHighBits=function(){return this.high};Z.getHighBitsUnsigned=function(){return this.high>>>0};Z.getLowBits=function(){return this.low};Z.getLowBitsUnsigned=function(){return this.low>>>0};Z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Un)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Z.isZero=function(){return this.high===0&&this.low===0};Z.eqz=Z.isZero;Z.isNegative=function(){return!this.unsigned&&this.high<0};Z.isPositive=function(){return this.unsigned||this.high>=0};Z.isOdd=function(){return(this.low&1)===1};Z.isEven=function(){return(this.low&1)===0};Z.equals=function(e){return Zn(e)||(e=xs(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Z.eq=Z.equals;Z.notEquals=function(e){return!this.eq(e)};Z.neq=Z.notEquals;Z.ne=Z.notEquals;Z.lessThan=function(e){return this.comp(e)<0};Z.lt=Z.lessThan;Z.lessThanOrEqual=function(e){return this.comp(e)<=0};Z.lte=Z.lessThanOrEqual;Z.le=Z.lessThanOrEqual;Z.greaterThan=function(e){return this.comp(e)>0};Z.gt=Z.greaterThan;Z.greaterThanOrEqual=function(e){return this.comp(e)>=0};Z.gte=Z.greaterThanOrEqual;Z.ge=Z.greaterThanOrEqual;Z.compare=function(e){if(Zn(e)||(e=xs(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Z.comp=Z.compare;Z.negate=function(){return!this.unsigned&&this.eq(Un)?Un:this.not().add(ru)};Z.neg=Z.negate;Z.add=function(e){Zn(e)||(e=xs(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,f=0,d=0,h=0;return h+=i+u,d+=h>>>16,h&=65535,d+=s+l,f+=d>>>16,d&=65535,f+=r+a,c+=f>>>16,f&=65535,c+=n+o,c&=65535,st(d<<16|h,c<<16|f,this.unsigned)};Z.subtract=function(e){return Zn(e)||(e=xs(e)),this.add(e.neg())};Z.sub=Z.subtract;Z.multiply=function(e){if(this.isZero())return Pr;if(Zn(e)||(e=xs(e)),Or){var n=Or.mul(this.low,this.high,e.low,e.high);return st(n,Or.get_high(),this.unsigned)}if(e.isZero())return Pr;if(this.eq(Un))return e.isOdd()?Un:Pr;if(e.eq(Un))return this.isOdd()?Un:Pr;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(LI)&&e.lt(LI))return Rr(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,f=0,d=0,h=0,p=0;return p+=o*c,h+=p>>>16,p&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=o*u,d+=h>>>16,h&=65535,d+=s*c,f+=d>>>16,d&=65535,d+=i*u,f+=d>>>16,d&=65535,d+=o*l,f+=d>>>16,d&=65535,f+=r*c+s*u+i*l+o*a,f&=65535,st(h<<16|p,f<<16|d,this.unsigned)};Z.mul=Z.multiply;Z.divide=function(e){if(Zn(e)||(e=xs(e)),e.isZero())throw Error("division by zero");if(Or){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Or.div_u:Or.div_s)(this.low,this.high,e.low,e.high);return st(n,Or.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ka:Pr;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return ka;if(e.gt(this.shru(1)))return cz;i=ka}else{if(this.eq(Un)){if(e.eq(ru)||e.eq(Vx))return Un;if(e.eq(Un))return ru;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Pr)?e.isNegative()?ru:Vx:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Un))return this.unsigned?ka:Pr;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Pr}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Rg(2,a-48),u=Rr(r),c=u.mul(e);c.isNegative()||c.gt(s);)r-=l,u=Rr(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=ru),i=i.add(u),s=s.sub(c)}return i};Z.div=Z.divide;Z.modulo=function(e){if(Zn(e)||(e=xs(e)),Or){var n=(this.unsigned?Or.rem_u:Or.rem_s)(this.low,this.high,e.low,e.high);return st(n,Or.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Z.mod=Z.modulo;Z.rem=Z.modulo;Z.not=function(){return st(~this.low,~this.high,this.unsigned)};Z.and=function(e){return Zn(e)||(e=xs(e)),st(this.low&e.low,this.high&e.high,this.unsigned)};Z.or=function(e){return Zn(e)||(e=xs(e)),st(this.low|e.low,this.high|e.high,this.unsigned)};Z.xor=function(e){return Zn(e)||(e=xs(e)),st(this.low^e.low,this.high^e.high,this.unsigned)};Z.shiftLeft=function(e){return Zn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?st(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):st(0,this.low<<e-32,this.unsigned)};Z.shl=Z.shiftLeft;Z.shiftRight=function(e){return Zn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?st(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):st(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Z.shr=Z.shiftRight;Z.shiftRightUnsigned=function(e){if(Zn(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return st(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?st(n,0,this.unsigned):st(n>>>e-32,0,this.unsigned)};Z.shru=Z.shiftRightUnsigned;Z.shr_u=Z.shiftRightUnsigned;Z.toSigned=function(){return this.unsigned?st(this.low,this.high,!1):this};Z.toUnsigned=function(){return this.unsigned?this:st(this.low,this.high,!0)};Z.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Z.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Z.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};rt.fromBytes=function(e,n,r){return r?rt.fromBytesLE(e,n):rt.fromBytesBE(e,n)};rt.fromBytesLE=function(e,n){return new rt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};rt.fromBytesBE=function(e,n){return new rt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const hz=Le(lz),Jfe=DS({__proto__:null,default:hz},[lz]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xa=hz||Jfe;function v0(t){return xa.fromString(t,!0,16)}const pz=v0("c3a5c85c97cb3127"),ha=v0("b492b66fbe98f273"),pn=v0("9ae16a3b2f90404f");function Wx(t){return t.xor(t.shru(47))}function mz(t,e,n){const r=t.slice(e,e+n);return xa.fromBytes(Array.from(r),!0,!0)}function qe(t,e){return mz(t,e,8)}function MI(t,e){return mz(t,e,4)}function Ft(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function To(t,e,n=v0("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function Qfe(t,e,n,r,s,i){s=s.add(t),i=Ft(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(Ft(s,44)),[s.add(r),i.add(o)]}function Mp(t,e,n,r){return Qfe(qe(t,e),qe(t,e+8),qe(t,e+16),qe(t,e+24),n,r)}function Zfe(t,e=t.length){if(e>=8){const n=pn.add(e*2),r=qe(t,0).add(pn),s=qe(t,e-8),i=Ft(s,37).mul(n).add(r),o=Ft(r,25).add(s).mul(n);return To(i,o,n)}if(e>=4){const n=pn.add(e*2),r=MI(t,0);return To(r.shl(3).add(e),MI(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return Wx(pn.mul(i).xor(pz.mul(o))).mul(pn)}return pn}function ede(t,e=t.length){const n=pn.add(e*2),r=qe(t,0).mul(ha),s=qe(t,8),i=qe(t,e-8).mul(n),o=qe(t,e-16).mul(pn);return To(Ft(r.add(s),43).add(Ft(i,30)).add(o),r.add(Ft(s.add(pn),18)).add(i),n)}function tde(t,e=t.length){const n=pn.add(e*2),r=qe(t,0).mul(pn),s=qe(t,8),i=qe(t,e-8).mul(n),o=qe(t,e-16).mul(pn),a=Ft(r.add(s),43).add(Ft(i,30)).add(o),l=To(a,r.add(Ft(s.add(pn),18)).add(i),n),u=qe(t,16).mul(n),c=qe(t,24),f=a.add(qe(t,e-32)).mul(n),d=l.add(qe(t,e-24)).mul(n);return To(Ft(u.add(c),43).add(Ft(f,30)).add(d),u.add(Ft(c.add(r),18)).add(f),n)}function nde(t,e=t.length){const n=xa.fromNumber(81,!0);if(e<=32)return e<=16?Zfe(t,e):ede(t,e);if(e<=64)return tde(t,e);let r=n,s=n.mul(ha).add(113),i=Wx(s.mul(pn).add(113)).mul(pn),o=[xa.UZERO,xa.UZERO],a=[xa.UZERO,xa.UZERO];r=r.mul(pn).add(qe(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Ft(r.add(s).add(o[0]).add(qe(t,l+8)),37).mul(ha),s=Ft(s.add(o[1]).add(qe(t,l+48)),42).mul(ha),r=r.xor(a[1]),s=s.add(o[0]).add(qe(t,l+40)),i=Ft(i.add(a[0]),33).mul(ha),o=Mp(t,l,o[1].mul(ha),r.add(a[0])),a=Mp(t,l+32,i.add(a[1]),s.add(qe(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const f=ha.add(i.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Ft(r.add(s).add(o[0]).add(qe(t,l+8)),37).mul(f),s=Ft(s.add(o[1]).add(qe(t,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(qe(t,l+40))),i=Ft(i.add(a[0]),33).mul(f),o=Mp(t,l,o[1].mul(f),r.add(a[0])),a=Mp(t,l+32,i.add(a[1]),s.add(qe(t,l+16))),[i,r]=[r,i],To(To(o[0],a[0],f).add(Wx(s).mul(pz)).add(i),To(o[1],a[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nc(t,e){return e==="string"?ja(t):b0([t],e)}function rde(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function b0(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=al(t)),B().getBool("DEBUG")&&Jle(t,e),rde(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ts(){return B().platform.now()}function ja(t,e="utf-8"){return e=e||"utf-8",B().platform.encode(t,e)}function Hu(t,e="utf-8"){return e=e||"utf-8",B().platform.decode(t,e)}function Vr(t){return B().platform.isTypedArray!=null?B().platform.isTypedArray(t):az(t)}function al(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||bE(t)||t==null||Vr(t)&&n)e.push(t);else if(Array.isArray(t)||Vr(t))for(let r=0;r<t.length;++r)al(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)al(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sde{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new ode)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=ts();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const u of s)u.dataSync();o=Promise.resolve({kernelMs:ts()-a})}if(B().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const c=s[u];c.data().then(f=>{ide(f,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function ide(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class ode{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?wu(`${s}ms`,9):s.error,l=wu(e,25),u=n.rank,c=n.size,f=wu(n.shape.toString(),14);let d="";for(const h in i){const p=i[h];if(p!=null){const m=p.shape||n.shape,g=m.length;d+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${f}	%c${c}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ade(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const f in c){const d=c[f];let h=!1;for(let p=0;p<e.length;p++)if(r[d.id]){u.outputs.forEach(m=>r[m.id]=!0),h=!0,s[u.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(i[u.outputs[f].id]){for(const d in c)i[c[d].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(s[u.id]&&o[u.id]){const c={};for(const d in u.inputs){const h=u.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,a.push(f)}}return a}function lde(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!Kt(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const f=t[c.id];t[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BI=20,hf=3,f1=7;function ude(t,e,n,r){const s=qt(e),i=cde(t,e,n,s),o=e.length,a=Cm(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function cde(t,e,n,r){const s=ee(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?Af(t):t;if(a>1)for(let u=0;u<s/i;u++){const c=u*i;for(let f=0;f<i;f++)o[f]=Math.max(o[f],kf(l[c+f],0,n).length)}return o}function kf(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(f1))} + ${parseFloat(t[1].toFixed(f1))}j`:y0(t)?r=`'${t}'`:n==="bool"?r=gz(t):r=parseFloat(t.toFixed(f1)).toString(),wu(r,e)}function gz(t){return t===0?"false":"true"}function Cm(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Af(t);return[kf(m[0],0,n)]}return n==="bool"?[gz(t[0])]:[t[0].toString()]}if(l===1){if(a>BI){const g=hf*o;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-hf)*o,a*o));return n==="complex64"&&(y=Af(y),v=Af(v)),["["+y.map((b,x)=>kf(b,s[x],n)).join(", ")+", ..., "+v.map((b,x)=>kf(b,s[a-hf+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?Af(t):Array.from(t)).map((g,y)=>kf(g,s[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),f=r[0]*o,d=[];if(a>BI){for(let m=0;m<hf;m++){const g=m*f,y=g+f;d.push(...Cm(t.slice(g,y),u,n,c,s,!1))}d.push("...");for(let m=a-hf;m<a;m++){const g=m*f,y=g+f;d.push(...Cm(t.slice(g,y),u,n,c,s,m===a-1))}}else for(let m=0;m<a;m++){const g=m*f,y=g+f;d.push(...Cm(t.slice(g,y),u,n,c,s,m===a-1))}const h=l===2?",":"";d[0]="["+(a>0?d[0]+h:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":p),d}function Af(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pg{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ee(e),r!=null){const s=r.length;J(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Mt(n,this.size),this.strides=qt(e)}set(e,...n){n.length===0&&(n=[0]),J(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ss().makeTensor(this.values,this.shape,this.dtype)}}let ss=null,Bl=null;function fde(t){ss=t}function dde(t){Bl=t}class Er{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ee(e),this.strides=qt(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Bl.buffer(this.shape,this.dtype,e)}bufferSync(){return Bl.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return II(this.shape,e,this.dtype==="complex64")}arraySync(){return II(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ss().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Hu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ss().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ss().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Hu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ss().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ss().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Bl.print(this,e)}clone(){return this.throwIfDisposed(),Bl.clone(this)}toString(e=!1){const n=this.dataSync();return ude(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Bl.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ss().makeVariable(this,e,n,r)}}Object.defineProperty(Er,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function hde(){return xE("Tensor",()=>Er)}hde();class Dg extends Er{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Kt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ss().disposeTensor(this),this.dataId=e.dataId,ss().incRef(this,null)}dispose(){ss().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Dg,Symbol.hasInstance,{value:t=>t instanceof Er&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jI;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(jI||(jI={}));var Gx;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Gx||(Gx={}));var Hx;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Hx||(Hx={}));var qx;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(qx||(qx={}));var Kx;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Kx||(Kx={}));const pde={float32:qx,int32:Gx,bool:Hx,complex64:Kx};function Ks(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return pde[t][e]}function TE(t){return Ks(t,"int32")}function yz(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function vz(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sl(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ks(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function bz(t){const e=[];return xz(t,e,new Set),e}function xz(t,e,n){if(t==null)return;if(t instanceof Er){e.push(t);return}if(!mde(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),xz(i,e,n))}}function mde(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1(t){return t.kernelName!=null}class UI{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class qu{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new UI}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(os(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new sde(this.backendInstance),!0}setupRegisteredKernels(){OI(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){OI(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof RU)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,os(`Initialization of backend ${e} failed`),os(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return os(`Initialization of backend ${e} failed`),os(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return qu.nextTensorId++}nextVariableId(){return qu.nextVariableId++}clone(e){const n=fe.runKernel($E,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return fe.runKernel(SE,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(kI(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=d1(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(d1(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=kI(p,this.backendName);J(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const x=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{s&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:f}=e,d=d1(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),s&&this.addTapeNode(u,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=AI(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(J(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&y0(e[0])&&(i=e.map(l=>ja(l)));const o=s.write(i,n,r),a=new Er(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),u=eue(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new Er(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new Dg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Ag(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Dg||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Ag(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=AI(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=u=>(u=u.map((c,f)=>{if(c==null){const d=r[f],h=Mo(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),s(u.length>1?u:u[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=bz(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(J(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));J(i instanceof Er,()=>"The result y returned by f() must be a tensor.");const o=ade(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??gde(i.shape),lde(a,o,u=>this.tidy(u),yde);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return J(jx(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{J(n.every(a=>a instanceof Er),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),J(r.value instanceof Er,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),J(jx(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];J(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),J(c.every(d=>d instanceof Er),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=ts(),r=await this.backend.time(e);return r.wallMs=ts()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new UI;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}qu.nextTensorId=0;qu.nextVariableId=0;function gde(t){const e=rue(ee(t),"float32");return fe.makeTensor(e,t,"float32")}function wz(){const t=LU();if(t._tfengine==null){const e=new sue(t);t._tfengine=new qu(e)}return lue(t._tfengine.ENV),fde(()=>t._tfengine),t._tfengine}const fe=wz();function yde(t,e){const n={a:t,b:e};return fe.runKernel(wE,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vde(){return typeof navigator<"u"&&navigator!=null}function Sz(t){if(t||vde()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function $z(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const In=B();In.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});In.registerFlag("IS_BROWSER",()=>$z());In.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");In.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));In.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));In.registerFlag("PROD",()=>!1);In.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>In.getBool("DEBUG"));In.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);In.registerFlag("IS_TEST",()=>!1);In.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>In.getBool("DEBUG"));In.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);In.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);In.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(t,e){let n=t;if(Vr(t))return e==="string"?[]:[t.length];if(yz(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(vz(t))return[t.buffer.size/(e==null?4:Ag(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Vr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&B().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Ez(t,r,[]),r}function Ez(t,e,n){if(n=n||[],!Array.isArray(t)&&!Vr(t)){J(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}J(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),J(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)Ez(t[s],r,n.concat(s))}function zI(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function ke(t,e,n,r="numeric"){if(t instanceof Er)return zI(r,t.dtype,e,n),t;let s=Yh(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),zI(r,s,e,n),t==null||!Vr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=bde(t,s);!Vr(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?b0(t,s):al(t,[],!0);return fe.makeTensor(a,i,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xde="__op";function ht(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+xde;const s=(...i)=>{fe.startScope(n);try{const o=r(...i);return bE(o)&&console.error("Cannot return a Promise inside of tidy."),fe.endScope(o),o}catch(o){throw fe.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wde(t,e){const n=ke(t,"real","complex"),r=ke(e,"imag","complex");PU(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return fe.runKernel(BU,s)}const Sde=ht({complex_:wde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $de(t,e,n,r){if(r==null)r=Yh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(vz(t)||yz(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return fe.backend.createTensorFromGPUData(t,e||n,r)}if(!Vr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Jh(e);const s=ee(e),i=ee(n);J(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==ee(e.slice(o)):!0;J(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Vr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?b0(t,r):al(t,[],!0),fe.makeTensor(t,e,r)}class $l{static join(e){return new $l(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Vr(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],f=e+a-u.start,d=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,f,p-f);if(o.set(m,d),a+=m.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Ede(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Ede(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _E=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function VI(t){return _E?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Tde(t){if(_E)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function _de(t){if(_E){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Tz(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function Cde(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function Ide(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),Cde(t,n,r)}function x0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:VI(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:VI(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new $l(t.weightData).byteLength}}function Nde(t){const e=[];for(const n of t)e.push(...n.weights);return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ut{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ut.instance==null&&(Ut.instance=new Ut),Ut.instance}static registerSaveRouter(e){Ut.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ut.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ut.getHandlers(e,"save")}static getLoadHandlers(e,n){return Ut.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Ut.getInstance().loadRouters:Ut.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xx="tensorflowjs",Yx=1,Aa="models_store",co="model_info_store";function _z(){if(!B().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Jx(t){const e=t.result;e.createObjectStore(Aa,{keyPath:"modelPath"}),e.createObjectStore(co,{keyPath:"modelPath"})}class ll{constructor(e){if(this.indexedDB=_z(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(Xx,Yx);i.onupgradeneeded=()=>Jx(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Aa,"readonly"),u=a.objectStore(Aa).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),s(u.error)),a.oncomplete=()=>o.close()}else{n.weightData=$l.join(n.weightData);const a=x0(n),l=o.transaction(co,"readwrite");let u=l.objectStore(co),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(d){return s(d)}let f;c.onsuccess=()=>{f=o.transaction(Aa,"readwrite");const d=f.objectStore(Aa);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(co);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),s(h.error)),m.onerror=g=>(o.close(),s(h.error))}},c.onerror=d=>(o.close(),s(c.error)),l.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}ll.URL_SCHEME="indexeddb://";const Cz=t=>B().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ll.URL_SCHEME)?kde(t.slice(ll.URL_SCHEME.length)):null;Ut.registerSaveRouter(Cz);Ut.registerLoadRouter(Cz);function kde(t){return new ll(t)}function Ade(t){return t.startsWith(ll.URL_SCHEME)?t.slice(ll.URL_SCHEME.length):t}class Ode{constructor(){this.indexedDB=_z()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Xx,Yx);r.onupgradeneeded=()=>Jx(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(co,"readonly"),a=i.objectStore(co).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Ade(e),new Promise((n,r)=>{const s=this.indexedDB.open(Xx,Yx);s.onupgradeneeded=()=>Jx(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(co,"readwrite"),a=o.objectStore(co),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),f=()=>{u=i.transaction(Aa,"readwrite");const h=u.objectStore(Aa).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};c.onsuccess=f,c.onerror=d=>(f(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ci="/",jl="tensorflowjs_models",Iz="info",Rde="model_topology",Pde="weight_specs",Dde="weight_data",Fde="model_metadata";function Nz(t){return{info:[jl,t,Iz].join(ci),topology:[jl,t,Rde].join(ci),weightSpecs:[jl,t,Pde].join(ci),weightData:[jl,t,Dde].join(ci),modelMetadata:[jl,t,Fde].join(ci)}}function kz(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Lde(t){const e=t.split(ci);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ci)}function Mde(t){return t.startsWith(ul.URL_SCHEME)?t.slice(ul.URL_SCHEME.length):t}class ul{constructor(e){if(!B().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Nz(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=x0(e),i=$l.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Tde(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw kz(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=_de(o),n}}ul.URL_SCHEME="localstorage://";const Az=t=>B().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ul.URL_SCHEME)?Bde(t.slice(ul.URL_SCHEME.length)):null;Ut.registerSaveRouter(Az);Ut.registerLoadRouter(Az);function Bde(t){return new ul(t)}class jde{constructor(){J(B().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),J(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=jl+ci,r=ci+Iz;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=Lde(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=Mde(e);const n=Nz(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return kz(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WI="://";class Ns{constructor(){this.managers={}}static getInstance(){return Ns.instance==null&&(Ns.instance=new Ns),Ns.instance}static registerManager(e,n){J(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(WI)&&(e=e.slice(0,e.indexOf(WI))),J(e.length>0,()=>"scheme must not be an empty string.");const r=Ns.getInstance();J(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ns.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ns.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ude{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!B().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return az(e)}}if(B().get("IS_BROWSER")){B().setPlatform("browser",new Ude);try{Ns.registerManager(ul.URL_SCHEME,new jde)}catch{}try{Ns.registerManager(ll.URL_SCHEME,new Ode)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zde={importFetch:()=>require("node-fetch")};let h1;class Vde{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return B().global.fetch!=null?B().global.fetch(e,n):(h1==null&&(h1=zde.importFetch()),h1(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}B().get("IS_NODE")&&!B().get("IS_BROWSER")&&B().setPlatform("node",new Vde);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xt(t,e="float32",n){return e=e||"float32",Jh(t),new Pg(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wde(t,e){const n=ke(t,"x","cast");if(!Qle(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return fe.runKernel(SE,r,s)}const Fg=ht({cast_:Wde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gde(t){const n={x:ke(t,"x","clone","string_or_numeric")};return fe.runKernel($E,n)}const Oz=ht({clone_:Gde});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hde(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */wz();const qde={buffer:Xt,cast:Fg,clone:Oz,print:Hde};dde(qde);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gi(){return fe}function $t(t,e){return fe.tidy(t,e)}function cr(t){bz(t).forEach(n=>n.dispose())}function Kde(t){return fe.keep(t)}function Xde(t,e,n=1){return fe.registerBackend(t,e,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yde(t,e){let n=ke(t,"a","add"),r=ke(e,"b","add");[n,r]=Sl(n,r);const s={a:n,b:r};return fe.runKernel(wE,s)}const Me=ht({add_:Yde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jde(t,e){let n=ke(t,"a","floorDiv"),r=ke(e,"b","floorDiv");[n,r]=Sl(n,r);const s={a:n,b:r};return fe.runKernel(WU,s)}const Qde=ht({floorDiv_:Jde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zde(t,e){let n=ke(t,"a","div"),r=ke(e,"b","div");if([n,r]=Sl(n,r),n.dtype==="int32"&&r.dtype==="int32")return Qde(n,r);const s={a:n,b:r},i={};return fe.runKernel(UU,s,i)}const Ls=ht({div_:Zde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ehe(t,e){let n=ke(t,"a","mul"),r=ke(e,"b","mul");[n,r]=Sl(n,r);const s={a:n,b:r};return fe.runKernel(qU,s)}const Ee=ht({mul_:ehe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function the(t){const e=ke(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return fe.runKernel(jU,n)}else{const n={x:e};return fe.runKernel(MU,n)}}const nhe=ht({abs_:the});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rz(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=Oc(s);return ws(t,a,n,i,r,null,null,l)}function kc(t,e,n,r,s,i,o="channelsLast"){const[a,l]=Fd(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return ws(t,u,n,r,s,i,!1,o)}function Qh(t,e,n,r,s,i,o="NDHWC"){const[a,l,u]=Qx(e);let c,f;if(o==="NDHWC")f="channelsLast",c=[a,l,u,t[4],t[4]];else if(o==="NCDHW")f="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Zh(t,c,n,r,s,!1,f,i)}function ws(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,f]=t;else if(a==="channelsFirst")[l,f,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[d,h,,p]=e,[m,g]=Fd(n),[y,v]=Fd(r),b=Su(d,y),x=Su(h,v),{padInfo:w,outHeight:$,outWidth:E}=ihe(s,u,c,m,g,b,x,i,a),T=o?p*f:p;let N;return a==="channelsFirst"?N=[l,T,$,E]:a==="channelsLast"&&(N=[l,$,E,T]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:f,outHeight:$,outWidth:E,outChannels:T,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:N,filterShape:e}}function Zh(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,u,c,f,d]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f,d]=t;else if(o==="channelsFirst")[l,d,u,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,m,,g]=e,[y,v,b]=Qx(n),[x,w,$]=Qx(r),E=Su(h,x),T=Su(p,w),N=Su(m,$),{padInfo:I,outDepth:R,outHeight:P,outWidth:M}=ohe(s,u,c,f,y,v,b,E,T,N,a),j=i?g*d:g;let W;return o==="channelsFirst"?W=[l,j,R,P,M]:o==="channelsLast"&&(W=[l,R,P,M,j]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:f,inChannels:d,outDepth:R,outHeight:P,outWidth:M,outChannels:j,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:T,effectiveFilterWidth:N,dilationDepth:x,dilationHeight:w,dilationWidth:$,inShape:t,outShape:W,filterShape:e}}function rhe(t,e,n,r,s){r==null&&(r=CE(t,e,n));const i=t[0],o=t[1],a=Ld((i-e+2*r)/n+1,s),l=Ld((o-e+2*r)/n+1,s);return[a,l]}function she(t,e,n,r,s,i){s==null&&(s=CE(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=Ld((t[a]-e[a]+2*s)/r[a]+1,i));return o}function CE(t,e,n,r=1){const s=Su(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Fd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Qx(t){return typeof t=="number"?[t,t,t]:t}function Su(t,e){return e<=1?t:t+(t-1)*(e-1)}function ihe(t,e,n,r,s,i,o,a,l){let u,c,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=rhe([e,n],i,r,t,a);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/s);const d=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(f-1)*s+o-n),p=Math.floor(d/2),m=d-p,g=Math.floor(h/2),y=h-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),f=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:d,bottom:h,left:p,right:m,type:d===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Ld((e-i+d+h)/r+1,a),f=Ld((n-o+p+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:f}}function ohe(t,e,n,r,s,i,o,a,l,u,c){let f,d,h,p;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=she([e,n,r,1],[a,l,u],1,[s,i,o],t,c);d=g[0],h=g[1],p=g[2]}else if(t==="same"){d=Math.ceil(e/s),h=Math.ceil(n/i),p=Math.ceil(r/o);const m=(d-1)*s+a-e,g=(h-1)*i+l-n,y=(p-1)*o+u-r,v=Math.floor(m/2),b=m-v,x=Math.floor(g/2),w=g-x,$=Math.floor(y/2),E=y-$;f={top:x,bottom:w,left:$,right:E,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function Ld(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Zx(t){const[e,n,r]=Fd(t);return e===1&&n===1&&r===1}function Ac(t,e){return Zx(t)||Zx(e)}function ahe(t){return Fd(t).every(e=>e>0)}function Oc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function lhe(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")J(kg(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{J(kg(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uhe(t,e){const r={x:ke(t,"x","reshape","string_or_numeric")},s={shape:e};return fe.runKernel(JU,r,s)}const IE=ht({reshape_:uhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t){const n={x:ke(t,"x","sigmoid","float32")};return fe.runKernel(ZU,n)}const fhe=ht({sigmoid_:che});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dhe(t,e){let n=ke(t,"broadcastTo","x");const r=n.shape;if(Jh(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=IE(n,u)}const s=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Oz(n);const a={x:n},l={reps:i};return fe.runKernel(rz,a,l)}const hhe=ht({broadcastTo_:dhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function phe(t,e,n){Jh(t),n=n||Yh(e);const r={shape:t,value:e,dtype:n};return fe.runKernel(VU,{},r)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lg(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function Pz(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function yn(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(t){const n={x:ke(t,"x","zerosLike")};return fe.runKernel(sz,n)}const Ms=ht({zerosLike_:mhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ghe(t){const n={x:ke(t,"x","elu","float32")};return fe.runKernel(zU,n)}const yhe=ht({elu_:ghe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NE(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Dz(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Ys(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function Li(t,e){const n=e.map(r=>1);return Dz(t,n,e)}function Ss(t,e,n){J(NE(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Hr(t,e){if(NE(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function kE(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function qr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vhe(t,e){let n=ke(t,"base","pow"),r=ke(e,"exp","pow");[n,r]=Sl(n,r);const s={a:n,b:r};return fe.runKernel(KU,s)}const GI=ht({pow_:vhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bo(t,e){if((Vr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Vr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return $de(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t){const n={x:ke(t,"x","sqrt","float32")};return fe.runKernel(ez,n)}const Ku=ht({sqrt_:bhe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xhe(t){const e=ke(t,"x","square"),n={};return fe.runKernel("Square",{x:e},n)}const Ua=ht({square_:xhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whe(t,e=null,n=!1){let r=ke(t,"x","sum");r.dtype==="bool"&&(r=Fg(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return fe.runKernel(tz,s,i)}const She=ht({sum_:whe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $he(t,e=.2){const r={x:ke(t,"x","leakyRelu")},s={alpha:e};return fe.runKernel(GU,r,s)}const Ehe=ht({leakyRelu_:$he});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function The(t,e){J(jx(t),()=>"The f passed in variableGrads(f) must be a function"),J(e==null||Array.isArray(e)&&e.every(u=>u instanceof Dg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in fe.registeredVariables)e.push(fe.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),J(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=fe.gradients(t,e,null,i);J(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),J(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _he(t,e){let n=ke(t,"a","sub"),r=ke(e,"b","sub");[n,r]=Sl(n,r);const s={a:n,b:r};return fe.runKernel(nz,s)}const $u=ht({sub_:_he});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Che(t,e){let n=ke(t,"a","maximum"),r=ke(e,"b","maximum");[n,r]=Sl(n,r),n.dtype==="bool"&&(n=Fg(n,"int32"),r=Fg(r,"int32")),yn(n.shape,r.shape);const s={a:n,b:r};return fe.runKernel(HU,s)}const Ihe=ht({maximum_:Che});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ew(t,e="float32"){if(Jh(t),e==="complex64"){const r=ew(t,"float32"),s=ew(t,"float32");return Sde(r,s)}const n=Mo(ee(t),e);return fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(t,e){const n=ke(t,"x","prelu"),r=ke(e,"alpha","prelu"),s={x:n,alpha:r};return fe.runKernel(XU,s)}const khe=ht({prelu_:Nhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ahe(t){const n={x:ke(t,"x","relu")};return fe.runKernel(YU,n)}const Ohe=ht({relu_:Ahe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rhe(t){const n={x:ke(t,"x","relu6")};return fe.runKernel(QU,n)}const Phe=ht({relu6_:Rhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dhe(t,e=0){const r={x:ke(t,"x","step")},s={alpha:e};return fe.runKernel(iz,r,s)}const Fhe=ht({step_:Dhe});function Fz(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function Lhe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Fz(n,e,t)}function w0(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let f=s;f<i;++f)o*=n[f];const a=s<1?1:s,l=ee(e.shape)/a,u=[...qt(n.slice(0,s)),1],c=ee(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mhe(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Xt(t,"int32"),s=Xt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bhe(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Ee(t,Fhe(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function jhe(t,e){let n=e;const r=Pz(t.shape,e.shape);return r.length>0&&(n=She(n,r)),IE(n,t.shape)}function Uhe(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ohe(t);if(e==="elu")return yhe(t);if(e==="relu6")return Phe(t);if(e==="prelu")return khe(t,n);if(e==="leakyrelu")return Ehe(t,r);if(e==="sigmoid")return fhe(t);throw new Error(`Unknown fused activation ${e}.`)}const zhe=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vhe(t,e,n){const r=Whe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function Whe(t,e,n){return Hhe(t,e,n||Ghe)}function Ghe(t,e){return t>e?1:t<e?-1:0}function Hhe(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qhe(t,e,n,r,s){return AE(t,e,n,r,s,0)}function Khe(t,e,n,r,s,i){return AE(t,e,n,r,s,0,!1,i,!0)}function Xhe(t,e,n,r,s,i){return AE(t,e,n,r,s,i,!0)}function AE(t,e,n,r,s,i,o=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>s&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(HI);const c=i>0?-.5/i:0,f=[],d=[];for(;f.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<s)break;let x=!1;for(let w=f.length-1;w>=b;--w){const $=Yhe(t,v,f[w]);if($>=r){x=!0;break}if(g.score=g.score*Jhe(r,c,$),g.score<=s)break}g.suppressBeginIndex=f.length,x||(g.score===y?(f.push(v),d.push(g.score)):g.score>s&&Vhe(u,g,HI))}const h=f.length,p=n-h;a&&p>0&&(f.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));const m={selectedIndices:f};return o&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function Yhe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),f=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),h=(a-i)*(l-o),p=(f-u)*(d-c);if(h<=0||p<=0)return 0;const m=Math.max(i,u),g=Math.max(o,c),y=Math.min(a,f),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(h+p-b)}function Jhe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function HI(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qhe=new Map,Zhe=new Map;class epe{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class wa{constructor(){this.classNameMap={}}static getMap(){return wa.instance==null&&(wa.instance=new wa),wa.instance}static register(e){wa.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function tpe(t,e,n){J(t.className!=null,()=>"Class being registered does not have the static className property defined."),J(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),J(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return wa.register(t),Qhe.set(s,t),Zhe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class El extends epe{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return cr(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return The(e,n)}dispose(){this.iterations_!=null&&cr(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Bo(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(El,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class npe extends El{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=fe.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=fe.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:$t(()=>Ms(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:$t(()=>Ms(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;$t(()=>{const c=Me(Ee(l,this.rho),Ee(Ua(a),1-this.rho)),f=Ee(Ls(Ku(Me(u,this.epsilon)),Ku(Me(l,this.epsilon))),a),d=Me(Ee(u,this.rho),Ee(Ua(f),1-this.rho));l.assign(c),u.assign(d);const h=Me(Ee(f,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(cr(this.accumulatedGrads.map(e=>e.variable)),cr(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rpe extends El{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=fe.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:$t(()=>phe(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;$t(()=>{const l=Me(a,Ua(o));a.assign(l);const u=Me(Ee(Ls(o,Ku(Me(l,fe.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&cr(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class spe extends El{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],$t(()=>{this.accBeta1=Bo(n).variable(),this.accBeta2=Bo(r).variable()}),s==null&&(this.epsilon=fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);$t(()=>{const r=$u(1,this.accBeta1),s=$u(1,this.accBeta2);n.forEach((i,o)=>{const a=fe.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:$t(()=>Ms(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:$t(()=>Ms(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,d=Me(Ee(c,this.beta1),Ee(u,1-this.beta1)),h=Me(Ee(f,this.beta2),Ee(Ua(u),1-this.beta2)),p=Ls(d,r),m=Ls(h,s);c.assign(d),f.assign(h);const g=Me(Ee(Ls(p,Me(Ku(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(Ee(this.accBeta1,this.beta1)),this.accBeta2.assign(Ee(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&cr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&cr(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),$t(()=>{this.accBeta1.assign(GI(this.beta1,this.iterations_+1)),this.accBeta2.assign(GI(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ipe extends El{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],$t(()=>{this.iteration=Bo(0).variable(),this.accBeta1=Bo(n).variable()}),s==null&&(this.epsilon=fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);$t(()=>{const r=$u(1,this.accBeta1),s=Ls(-this.learningRate,Me(Ee(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=fe.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Ms(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Ms(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,d=Me(Ee(c,this.beta1),Ee(u,1-this.beta1)),h=Ee(f,this.beta2),p=nhe(u),m=Ihe(h,p);c.assign(d),f.assign(m);const g=Me(Ee(Ls(s,r),Ls(d,Me(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(Me(this.iteration,1)),this.accBeta1.assign(Ee(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&cr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&cr(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lz extends El{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=fe.registeredVariables[r];$t(()=>{const a=Me(Ee(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Kde(Bo(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ope extends Lz{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Bo(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=fe.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:$t(()=>Ms(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&$t(()=>{let l;const u=Me(Ee(this.m,o),a);this.useNesterov?l=Me(Ee(this.c,Me(a,Ee(u,this.m))),i):l=Me(Ee(this.c,u),i),o.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&cr(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ape extends El{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=fe.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=fe.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:$t(()=>Ms(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:$t(()=>Ms(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:$t(()=>Ms(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;$t(()=>{const c=Me(Ee(l,this.decay),Ee(Ua(a),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[s].variable,d=Me(Ee(f,this.decay),Ee(a,1-this.decay)),h=Ls(Ee(a,this.learningRate),Ku($u(c,Me(Ua(d),this.epsilon)))),p=Me(Ee(u,this.momentum),h);l.assign(c),f.assign(d),u.assign(p);const m=$u(i,p);i.assign(m)}else{const f=Me(Ee(l,this.decay),Ee(Ua(a),1-this.decay)),d=Me(Ee(u,this.momentum),Ls(Ee(a,this.learningRate),Ku(Me(f,this.epsilon))));l.assign(f),u.assign(d);const h=$u(i,d);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&cr(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&cr(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&cr(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lpe=[npe,rpe,spe,ipe,ope,ape,Lz];function upe(){for(const t of lpe)tpe(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cpe="model",fpe=".json",dpe=".weights.bin";function qI(t){return new Promise(e=>setTimeout(e)).then(t)}class cl{constructor(e){if(!B().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(cl.URL_SCHEME)&&(e=e.slice(cl.URL_SCHEME.length)),(e==null||e.length===0)&&(e=cpe),this.modelJsonFileName=e+fpe,this.weightDataFileName=e+dpe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=$l.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=Tz(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await qI(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await qI(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:x0(e)}}}}cl.URL_SCHEME="downloads://";const hpe=t=>B().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(cl.URL_SCHEME)?ppe(t.slice(cl.URL_SCHEME.length)):null;Ut.registerSaveRouter(hpe);function ppe(t="model"){return new cl(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KI(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(u=>{const c=n+ ++s/t.length*(r-n);return e(c),u}),l);function o(l){J(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){J(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),J(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),J(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mpe(t,e){e==null&&(e={});const n=e.fetchFunc==null?B().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await KI(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(a):await KI(a,e.onProgress,.5,1)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gpe="application/octet-stream",ype="application/json";class OE{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(J(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=B().platform.fetch,J(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&J(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=Tz(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:ype}),"model.json"),e.weightData!=null){const o=$l.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:gpe}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:x0(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Ide(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=vpe(n),i=this.weightPathPrefix||r,o=Nde(e),a=[],l=[];for(const c of e)for(const f of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(f)):a.push(i+f+s);this.weightUrlConverter&&a.push(...await Promise.all(l));const u=await mpe(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,u]}}OE.URL_SCHEME_REGEX=/^https?:\/\//;function vpe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function XI(t){return t.match(OE.URL_SCHEME_REGEX)!=null}const Mz=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>XI(r)):n=XI(t),n)return bpe(t,e)}return null};Ut.registerSaveRouter(Mz);Ut.registerLoadRouter(Mz);function bpe(t,e){return new OE(t,e)}function Bz(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ee(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let f=0;f<s.length-1;++f)o*=s[f];const a=t.shape,l=s.slice();l.pop();let u=1;for(let f=i;f<n;++f)u*=a[f],l.push(a[f]);const c=[...qt(t.shape).map(f=>f/u),1].slice(0,i);return[l,o,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tw=-2,xpe=-1;function jz(t,e,n){const r=t.shape.length;J(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),J(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)J(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function wpe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Uz(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function zz(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Vz(t,e,n){return n<=t?n:n-(e-1)}function Wz(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Spe(t,e,n,r,s,i,o,a,l){const u=t.length;let c=new Array(u),f=new Array(u),d=new Array(u);if(e.length&&n>0){const h=e[0],p=n+1;c=Gz(o,h,p,r,t),f=Hz(a,h,p,s,t),d=zz(i,h,p,t)}else for(let h=0;h<u;h++)c[h]=Kz(o,r,i,t,h,l),f[h]=Xz(a,s,i,t,h,l),d[h]=qz(i,h,l);return{begin:c,end:f,strides:d}}function Gz(t,e,n,r,s){const i=[...s],o=Wz(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=Vz(e,n,a);let u=r[l];t&1<<l&&(u=0),i[a]=u}return i}function Hz(t,e,n,r,s){const i=[...s],o=Wz(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=Vz(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[a]=u}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Ng(0,i[a],s[a])}return i}function qz(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Kz(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Ng(0,o,l-1),o}function Xz(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Ng(0,o,l):o=Ng(-1,o,l-1),o}function RE(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function PE(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Yz(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{J(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(J(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function Jz(t,e,n,r,s,i,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<f.dims;b++)c&&1<<b&a&&f.numAddAxisAfterEllipsis++,1<<b&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};$pe(f,d);let h=!0,p=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(d.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const x=!!(d.shrinkAxisMask&1<<b),w=t[b];if(w===-1){g.push(x?1:-1);continue}const $=[d.beginMask&1<<b,d.endMask&1<<b],E=[d.strides[b]>0?0:-1,d.strides[b]>0?w:w-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[b]===1;const T=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){const P=d.begin[b]<0?w+d.begin[b]:d.begin[b];if(d.begin[b]=P,d.end[b]=d.begin[b]+1,P<0||P>=w)throw Error(`slice index ${d.begin[b]} of dimension ${b} out of bounds.`)}else d.begin[b]=YI(d.begin[b],0,d.strides[b],w,$,E),d.end[b]=YI(d.end[b],1,d.strides[b],w,$,E);const R=d.strides[b]===1&&d.begin[b]===0&&d.end[b]===w;h=h&&R,p=p&&(b===0&&d.strides[b]===1||R)}else h=h&&d.strides[b]===1&&T,p=p&&(b===0&&d.strides[b]===1||T);let N,I=!1;if(d.beginValid&&d.endValid?(N=d.end[b]-d.begin[b],I=!0):x?(N=1,I=!0):T&&w>=0&&(d.strides[b]<0?N=-w:N=w,I=!0),I){let R;N===0||N<0!=d.strides[b]<0?R=0:R=Math.trunc(N/d.strides[b])+(N%d.strides[b]!==0?1:0),g.push(R)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const x=d.finalShapeGatherIndices[b];x>=0?y.push(g[x]):x===tw&&y.push(1)}return{finalShapeSparse:y.filter((b,x)=>d.finalShapeGatherIndices[x]!==tw),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function $pe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(tw),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(xpe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function YI(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const Epe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:jz,computeFlatOffset:PE,computeOutShape:Uz,getNormalizedAxes:Spe,isSliceContinous:RE,maskToAxes:wpe,parseSliceParams:Yz,sliceInfo:Jz,startForAxis:Kz,startIndicesWithElidedDims:Gz,stopForAxis:Xz,stopIndicesWithElidedDims:Hz,stridesForAxis:qz,stridesWithElidedDims:zz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tpe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function _pe(){return new Promise(t=>Tpe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qz(t,e){const n=t[0].length;t.forEach((s,i)=>{J(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),J(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)J(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function fl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var is;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(is||(is={}));function Zz(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function eV(t){const e={FIRST_DIM_SIZE:is.FIRST_DIM_SIZE,VALUE_ROWIDS:is.VALUE_ROWIDS,ROW_LENGTHS:is.ROW_LENGTHS,ROW_SPLITS:is.ROW_SPLITS,ROW_LIMITS:is.ROW_LIMITS,ROW_STARTS:is.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function tV(t){return t.length===0?0:t[0]===is.FIRST_DIM_SIZE?t.length-1:t.length}function nV(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DE=30;function S0(t){return t<=DE?t:Ux(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rV(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FE(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function LE(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function ME(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function sV(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function iV(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oV=1.7580993408473768,aV=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lV=.3275911,uV=.254829592,cV=-.284496736,fV=1.421413741,dV=-1.453152027,hV=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nw(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Cpe(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Ipe(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Npe(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function kpe(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Ape(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Ope(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function Rpe(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1="->",Ppe=/->/g,JI=",",QI="...";function pV(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Ppe,"").length)/p1.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${p1}").`);const[r,s]=t.split(p1);J(r.indexOf(QI)===-1,()=>`The ellipsis notation ("${QI}") is not supported yet.`);const i=r.split(JI),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let d=0;d<s.length;++d){const h=s[d];if(!i.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let d=0;d<r.length;++d){const h=r[d];a.indexOf(h)===-1&&h!==JI&&a.push(h)}const l=new Array(i.length);for(let d=0;d<o;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let h=0;h<i[d].length;++h)l[d].push(a.indexOf(i[d][h]))}const u=a.length,c=s.length,f=[];for(let d=c;d<u;++d)f.push(d);return{allDims:a,summedDims:f,idDims:l}}function mV(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function gV(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:J(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function yV(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=Dpe(e,a);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function vV(t){return t.every((e,n)=>e===n)}function Dpe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function bV(t,e,n=0){let r=[];if(typeof e=="number")J(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);J(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}J(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function wV(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function SV(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $V(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function EV(t,e){return`size ${t} must be non-negative, not ${e}`}function TV(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function _V(t,e){const n=ee(t),r=ee(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function CV(t,e){const n=ee(t),r=ee(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rw(){return"segment ids must be >= 0"}function IV(){return"segment ids are not increasing"}function NV(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function kV(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(t,e){let n=!1,r;for(t<=DE?(r=t,n=!0):r=Ux(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Ux(t,r+1);return r}function OV(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function RV(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)a.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)a.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<s;f++)a.push(e.shape[f]);for(let f=n+1;f<i;f++)a.push(t.shape[f]),c*=t.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}const Fpe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:RV,computeOutShape:OV,segOpComputeOptimalWindowSize:AV},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xu(t){try{return t.map(e=>Hu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function PV(t){return t.map(e=>ja(e))}const Lpe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:uV,ERF_A2:cV,ERF_A3:fV,ERF_A4:dV,ERF_A5:hV,ERF_P:lV,PARALLELIZE_THRESHOLD:DE,get RowPartitionType(){return is},SELU_SCALE:aV,SELU_SCALEALPHA:oV,applyActivation:Uhe,assertAndGetBroadcastShape:yn,assertAxesAreInnerMostDims:Ss,assertParamsConsistent:Qz,assignToTypedArray:Ape,axesAreInnerMostDims:NE,calculateShapes:w0,checkEinsumDimSizes:gV,checkPadOnDimRoundingMode:lhe,combineLocations:Dz,combineRaggedTensorToTensorShapes:Zz,complexWithEvenIndex:Ipe,complexWithOddIndex:Npe,computeConv2DInfo:ws,computeConv3DInfo:Zh,computeDefaultPad:CE,computeDilation2DInfo:Rz,computeOptimalWindowSize:S0,computeOutAndReduceShapes:Ys,computeOutShape:fl,computePool2DInfo:kc,computePool3DInfo:Qh,convertConv2DDataFormat:Oc,decodeEinsumEquation:pV,eitherStridesOrDilationsAreOne:Ac,expandShapeToKeepDim:Li,exponent:Rpe,exponents:Ope,fromStringArrayToUint8:PV,fromUint8ToStringArray:Xu,getAxesPermutation:Hr,getBroadcastDims:Lg,getComplexWithIndex:kpe,getEinsumComputePath:yV,getEinsumPermutation:mV,getFusedBiasGradient:jhe,getFusedDyActivation:Bhe,getImageCenter:rV,getInnerMostAxes:qr,getPermuted:LE,getRaggedRank:tV,getReductionAxes:Pz,getReshaped:FE,getReshapedPermuted:ME,getRowPartitionTypesHelper:eV,getSliceBeginCoords:sV,getSliceSize:iV,getSparseFillEmptyRowsIndicesDenseShapeMismatch:xV,getSparseFillEmptyRowsNegativeIndexErrorMessage:wV,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:SV,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:TV,getSparseReshapeInputOutputMismatchErrorMessage:CV,getSparseReshapeInputOutputMultipleErrorMessage:_V,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:$V,getSparseReshapeNegativeOutputDimErrorMessage:EV,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:kV,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:rw,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:IV,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:NV,getUndoAxesPermutation:kE,isIdentityPermutation:vV,log:qfe,mergeRealAndImagArrays:nw,prepareAndValidate:Bz,prepareSplitSize:bV,segment_util:Fpe,shouldFuse:zhe,slice_util:Epe,splitRealAndImagArrays:Cpe,stridesOrDilationsArePositive:ahe,tupleValuesAreOne:Zx,upcastType:Ks,validateDefaultValueShape:nV,validateInput:Lhe,validateUpdateShape:Fz,warn:os},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */upe();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sa={},Bp={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Mpe(t,e){Sa[t]=e}function vs(t,e){if(!(t in Sa)||e!=null){const r=jpe(t,e);if(r!==null)Sa[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Sa[t];return n==null||n.isContextLost()?(delete Sa[t],vs(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Sa[t])}function Bpe(t){if(!B().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function jpe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Bpe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Sa[t]},!1),B().getBool("SOFTWARE_WEBGL_ENABLED")&&(Bp.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Bp)||n.getContext("experimental-webgl",Bp):n.getContext("webgl2",Bp)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Md;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Md||(Md={}));var lr;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(lr||(lr={}));var Gt;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Gt||(Gt={}));function ep(t,e){return[e,t]}function Upe(t,e){return t*e}function jp(t){const e=ee(t),n=Math.ceil(e/4);return Bx(n)}function Rc(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function zpe(t,e){const[n,r]=Rc(t,e);return n*r*4}function BE(t,e){const n=t;let r,s,i,o,a,l,u,c,f,d;return B().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function re(t,e){const n=e();return B().getBool("DEBUG")&&Vpe(t),n}function Vpe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+qpe(t,e))}const Wpe=596e-10,Gpe=65504;function Hpe(t){return!!(B().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Wpe<Math.abs(t)&&Math.abs(t)<Gpe)}function qpe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Up(t,e){return Mi(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Kpe(t,e){const n=Mi(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(re(t,()=>t.shaderSource(n,e)),re(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Xpe(t,e){const n=Mi(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(re(t,()=>t.shaderSource(n,e)),re(t,()=>t.compileShader(n)),B().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw DV(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Ype=/ERROR: [0-9]+:([0-9]+):/g;function DV(t,e){const n=Ype.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((f,d)=>wu((d+1).toString(),i)+f);let a=0;for(let f=0;f<o.length;f++)a=Math.max(o[f].length,a);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${wu(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Jpe(t){return Mi(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Qpe(t,e){if(re(t,()=>t.linkProgram(e)),!B().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function m1(t,e){if(re(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Zpe(t,e){const n=Mi(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return re(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),re(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function eme(t,e){const n=Mi(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return re(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),re(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tme(t){return Mi(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function nme(t,e){const n=B().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function rme(t){return Mi(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function ZI(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(re(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),re(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),re(t,()=>t.enableVertexAttribArray(a)),!0)}function sme(t,e,n){ume(t,n),re(t,()=>t.activeTexture(t.TEXTURE0+n)),re(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function ime(t,e,n){return Mi(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ome(t,e,n){return t.getUniformLocation(e,n)}function ame(t,e,n,r){re(t,()=>sme(t,e,r)),re(t,()=>t.uniform1i(n,r))}function g1(t,e,n){re(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),re(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function eN(t,e){re(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),re(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function zp(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+lme(t,e))}function lme(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Mi(t,e,n){const r=re(t,()=>e());if(r==null)throw new Error(n);return r}function ume(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Yu(t,e=2){return ee(t.slice(0,t.length-e))}function Ju(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Vp(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Yu(t),...Ju(t)]),e}function cme(t,e=!1){let n=B().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=B().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&B().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?yE(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=xl(t).newShape);let s=ee(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=Yu(t);let l=2,u=2;t.length&&([l,u]=Ju(t)),s=a*(l/2)*(u/2),i=Bx(s).map(c=>c*2)}else i=Bx(s);return i}function Wp(t){return t%2===0}function Mg(t,e){if(t=t.slice(-2),e=e.slice(-2),Kt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Wp(n)&&Wp(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Wp(t[0])&&Wp(e[0])}let y1,v1;function fme(t){if(y1==null){const e=vs(t);y1=e.getParameter(e.MAX_TEXTURE_SIZE)}return y1}function dme(t){if(v1==null){const e=vs(t);v1=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,v1)}function hme(t){if(t===0)return 0;let e;const n=vs(t);return Dr(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Dr(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Dr(t,e){return t.getExtension(e)!=null}function tN(t){try{if(vs(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function pme(t){if(t===0)return!1;const e=vs(t);if(t===1){if(!Dr(e,"OES_texture_float"))return!1}else if(!Dr(e,"EXT_color_buffer_float"))return!1;return sw(e)}function mme(t){if(t===0)return!1;const e=vs(t);if(t===1){if(!Dr(e,"OES_texture_float")||!Dr(e,"WEBGL_color_buffer_float"))return!1}else{if(Dr(e,"EXT_color_buffer_float"))return sw(e);const r="EXT_color_buffer_half_float";if(Dr(e,r)){const s=e.getExtension(r);return gme(e,s)}return!1}return sw(e)}function sw(t){const e=BE(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function gme(t,e){const n=BE(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function yme(t){return t!==2?!1:vs(t).fenceSync!=null}function tp(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&J(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ue=B();ue.registerFlag("HAS_WEBGL",()=>ue.getNumber("WEBGL_VERSION")>0);ue.registerFlag("WEBGL_VERSION",()=>tN(2)?2:tN(1)?1:0);ue.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ue.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ue.get("WEBGL_VERSION")===2);ue.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ue.registerFlag("WEBGL_PACK",()=>ue.getBool("HAS_WEBGL"));ue.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_CLIP",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_REDUCE",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_LAZILY_UNPACK",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_CONV_IM2COL",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ue.getBool("WEBGL_PACK"));ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>fme(ue.getNumber("WEBGL_VERSION")));ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dme(ue.getNumber("WEBGL_VERSION")));ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=ue.getNumber("WEBGL_VERSION");return t===0?0:hme(t)});ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Sz());ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>pme(ue.getNumber("WEBGL_VERSION")));ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ue.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>mme(ue.getNumber("WEBGL_VERSION")));ue.registerFlag("WEBGL_FENCE_API_ENABLED",()=>yme(ue.getNumber("WEBGL_VERSION")));ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ue.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});ue.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Sz()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});ue.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ue.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ue.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ue.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ue.registerFlag("WEBGL_EXP_CONV",()=>!1);ue.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ue.getBool("IS_TEST"));ue.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ue.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ue.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ue.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $n(){let t,e,n,r,s,i,o,a,l,u;return B().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=B().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(t,e,n="index"){const r=qt(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function $0(t,e,n="index"){const r=qt(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function vme(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function bme(t,e,n="index"){const r=t.map((i,o)=>o),s=vme(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function jE(t){const e=qt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function UE(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const FV=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:LV}=Lpe;function xme(t,e,n){const r=[];if(t.forEach(h=>{const p=ee(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=zE(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(h=>wme(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=$n(),l=Eme(a);let u,c,f=Cme(a);return e.isPacked?(u=Sme(e.logicalShape,o,n.enableShapeUniforms),c=_me(a)):(u=$me(e.logicalShape,o,n.enableShapeUniforms),c=Tme(a)),n.packedInputs&&(f+=Ame),[f,l,c,s,u,i,n.userCode].join(`
`)}function Pc(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Vme(t,e);case 1:return Gme(t,e);case 2:return qme(t,e);case 3:return Xme(t,e);case 4:return Jme(t,e);case 5:return Qme(t);case 6:return Zme(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function MV(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return zme(t);case 1:return Wme(t,e);case 2:return Hme(t,e);case 3:return Kme(t,e);default:return Yme(t,e)}}function wme(t,e,n=!1,r){let s="";n?s+=MV(t,r):s+=Pc(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=ege(t,e):s+=tge(t,e)),s}function Sme(t,e,n){switch(t.length){case 0:return BV();case 1:return Ome(t,e,n);case 2:return jme(t,e,n);case 3:return Pme(t,e,n);default:return Fme(t,e,n)}}function $me(t,e,n){switch(t.length){case 0:return BV();case 1:return Rme(t,e,n);case 2:return Ume(t,e,n);case 3:return Dme(t,e,n);case 4:return Lme(t,e,n);case 5:return Mme(t,e);case 6:return Bme(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Eme(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Tme(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function _me(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Cme(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Ime}
    ${Nme}
    ${kme}
  `}const Ime=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Nme=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kme=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ame=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function BV(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Ome(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Rme(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Pme(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function Dme(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${$0(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Tl(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Fme(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Lme(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${$0(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Tl(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Mme(t,e){const n=Tl(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Bme(t,e){const n=Tl(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function jme(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Kt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function Ume(t,e,n){return Kt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function _l(t){return`offset${t}`}function zme(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=$n();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Vme(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=_l(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Wme(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=$n();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Gme(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Dc(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=_l(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Hme(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=$n();if(i!=null&&Kt(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function qme(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Kt(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],h=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=xl(n),l=o;if(l.length<n.length){const d=Fc(t,l),h=["row","col"];return`
      ${Pc(d,e)}
      float ${s}(int row, int col) {
        return ${s}(${Lc(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Dc(t)}
      }
    `;const u=i[0],c=i[1],f=_l(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Kme(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],p=Fc(t,d),m=["b","row","col"];return`
        ${MV(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Lc(m,h)});
        }
      `}const a=$n();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Xme(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=xl(n),u=a;if(u.length<n.length){const m=Fc(t,u),g=["row","col","depth"];return`
        ${Pc(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Lc(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Dc(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],d=c[1],h=t.shapeInfo.flatOffset;if(d===i&&h==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===o&&h==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=_l(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Yme(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=$n();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],f=Math.ceil(i[o-1]/2);let d=f*Math.ceil(i[o-2]/2),h="int b, int row, int col",p=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let m=2;m<o-1;m++)h=`int b${m}, `+h,d*=i[o-m-1],p=`b${m} * ${d} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${s.texture2D}(${n}, uv);
    }
  `}function Jme(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:u}=xl(n);if(l.length<n.length){const v=Fc(t,l),b=["row","col","depth","depth2"];return`
      ${Pc(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Lc(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${Dc(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=_l(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function Qme(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:u}=xl(e);if(l.length<e.length){const m=Fc(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${Pc(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Lc(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${Dc(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1];if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=_l(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Zme(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=xl(e);if(s.length<e.length){const g=Fc(t,s),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Pc(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Lc(y,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Dc(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=_l(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Dc(t){const e=t.name,n=ee(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function ege(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=LV(t.shapeInfo.logicalShape,e.logicalShape),l=Ue(o),u=o-i;let c;const f=["x","y","z","w","u","v"];i===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${f[v+u]} = 0;`).join(`
`);let d="";o<2&&i>0?d="coords":d=t.shapeInfo.logicalShape.map((v,b)=>`coords.${f[b+u]}`).join(", ");let h="return outputValue;";const m=ee(t.shapeInfo.logicalShape)===1,y=ee(e.logicalShape)===1;if(i===1&&!m&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=i-2,b=i-1;a.indexOf(v)>-1&&a.indexOf(b)>-1?h="return vec4(outputValue.x);":a.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function tge(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Kt(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Ue(l),c=LV(t.shapeInfo.logicalShape,e.logicalShape),f=l-a;let d;const h=["x","y","z","w","u","v"];a===0?d="":l<2&&c.length>=1?d="coords = 0;":d=c.map(m=>`coords.${h[m+f]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+f]}`).join(", "),`
    float ${s}() {
      ${u} coords = getOutputCoords();
      ${d}
      return get${r}(${p});
    }
  `}function Ue(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function zE(t,e,n){const{newShape:r,keptDims:s}=xl(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!Kt(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function Fc(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Lc(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nge(t,e,n,r){const s=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:d}}),i=s.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=xme(s,o,e),l=Xpe(t.gl,a),u=t.createProgram(l);return B().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},jV(t,e,u)))}function jV(t,e,n){const r=[],s=[];let i,o,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),B().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const d={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${f}Shape`,c),d.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)s.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:u,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function nN(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!Kt(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Kt(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function rge(t,e,n,r,s){e.program.enableShapeUniforms||(nN(e.inShapeInfos,n),nN([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),B().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:f,shape:d,texShape:h}=e.variablesLocations[l];if(d){const{uniformShape:p}=zE(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(d,new Int32Array(p));break;case 2:t.gl.uniform2iv(d,new Int32Array(p));break;case 3:t.gl.uniform3iv(d,new Int32Array(p));break;case 4:t.gl.uniform4iv(d,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(ee(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=qt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],f=s[l];if(u.type==="float")t.gl.uniform1fv(c,f);else if(u.type==="vec2")t.gl.uniform2fv(c,f);else if(u.type==="vec3")t.gl.uniform3fv(c,f);else if(u.type==="vec4")t.gl.uniform4fv(c,f);else if(u.type==="int")t.gl.uniform1iv(c,f);else if(u.type==="ivec2")t.gl.uniform2iv(c,f);else if(u.type==="ivec3")t.gl.uniform3iv(c,f);else if(u.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function sge(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:f}=zE(t.packedInputs,o.shape,l);let d="",h="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=qt(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=o.shape.length,g=c.length===2&&Kt(o.shape,l),y=ee(o.shape)===1,v=Lg(o.shape,n.shape),b=!t.packedInputs&&m===n.shape.length&&Kt(l,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${b}_${u?f:""}_${c.length}_${y}_${v}_${g}_${d}_${h}_${p}_${x}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${B().getNumber("WEBGL_VERSION")}`,i}function ln(t){return B().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ige{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Md.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=$n();this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?$0(["r","c","d"],e):Tl(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oge{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Md.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=$n();this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?$0(["r","c","d"],e):Tl(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class age{constructor(e){this.variableNames=["A"],this.outTexUsage=lr.DOWNLOAD;const n=$n();this.outputShape=e,this.userCode=`
      ${FV}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lge{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=lr.DOWNLOAD;const n=$n();this.outputShape=e,this.userCode=`
      ${FV}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uge={R:0,G:1,B:2,A:3};class rN{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=$n();this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${uge[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?UE():jE(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cge{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=$n();this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?UE():jE(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fge(t){const e=$n(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Kpe(t,n)}function dge(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Zpe(t,e)}function hge(t){const e=new Uint16Array([0,1,2,2,1,3]);return eme(t,e)}function np(t,e,n,r,s,i){nme(e,n);const o=tme(t),a=t.TEXTURE_2D;return re(t,()=>t.bindTexture(a,o)),re(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),re(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),re(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),re(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),B().getNumber("WEBGL_VERSION")===1?re(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):re(t,()=>t.texStorage2D(a,1,r,e,n)),re(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function UV(t){return t.internalFormatFloat}function pge(t,e,n,r){const[s,i]=ep(e,n);return np(t,s,i,UV(r),r.textureFormatFloat,t.FLOAT)}function zV(t){return t.internalFormatHalfFloat}function mge(t,e,n,r){const[s,i]=ep(e,n);return np(t,s,i,zV(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function VV(t){return t.downloadTextureFormat}function gge(t,e,n,r){const[s,i]=ep(e,n);return np(t,s,i,VV(r),t.RGBA,t.UNSIGNED_BYTE)}function WV(t){return t.internalFormatPackedFloat}function yge(t,e,n,r){const[s,i]=Rc(e,n);return np(t,s,i,WV(r),t.RGBA,t.FLOAT)}function GV(t){return t.internalFormatPackedHalfFloat}function vge(t,e,n,r){const[s,i]=Rc(e,n);return np(t,s,i,GV(r),t.RGBA,r.textureTypeHalfFloat)}function bge(t,e,n){return re(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ZI(t,e,"clipSpacePos",n,3,20,0)&&ZI(t,e,"uv",n,2,20,12)}function xge(t,e,n,r,s,i){re(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),B().getNumber("WEBGL_VERSION")===2?re(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):re(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),re(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function wge(t,e,n){re(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?B().getNumber("WEBGL_VERSION")===2?re(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):re(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):B().getNumber("WEBGL_VERSION")===2?re(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):re(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),re(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Sge(t,e,n,r){const s=t.createBuffer();re(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return re(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),re(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),re(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function $ge(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function Ege(t,e,n,r){const[s,i]=ep(e,n),o=4,a=new Uint8Array(Upe(e*n,o));return re(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Tge(t,e,n,r,s,i,o,a){const l=t,u=new Float32Array(zpe(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function _ge(t,e,n){const r=new Float32Array(e*n*4);return re(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b1{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=B().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Mpe(n,e)):this.gl=vs(n),e=this.gl,B().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>re(i,()=>i.createVertexArray()),this.bindVertexArray=o=>re(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>re(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>re(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>re(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>re(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>re(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>re(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),B().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Up(this.gl,i),Dr(this.gl,o))this.textureHalfFloatExtension=Up(this.gl,o);else if(B().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Dr(this.gl,s))this.colorBufferHalfFloatExtension=Up(this.gl,s);else if(B().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Dr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Dr(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=dge(this.gl),this.indexBuffer=hge(this.gl),this.framebuffer=rme(this.gl),this.textureConfig=BE(this.gl,this.textureHalfFloatExtension)}get debug(){return B().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;re(e,()=>e.finish()),re(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),re(e,()=>e.deleteFramebuffer(this.framebuffer)),re(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),re(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),re(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),pge(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),mge(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),gge(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),wge(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),xge(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),vge(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),yge(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(eN(this.gl,this.framebuffer),this.outputTexture=null),re(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Ege(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return Tge(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return $ge(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=Sge(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(B().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>_ge(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=fge(n));const r=Jpe(n);re(n,()=>n.attachShader(r,this.vertexShader)),re(n,()=>n.attachShader(r,e)),Qpe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&m1(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;re(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),bge(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(re(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&m1(this.gl,this.program),re(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?ime(this.gl,e,n):ome(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),re(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),ame(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Rc(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&m1(this.gl,this.program),zp(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}re(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),re(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Up(this.gl,B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await CI(()=>this.disposed||this.isQueryAvailable(e,B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Cge(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in B().platform&&(r=B().platform.setTimeoutCustom.bind(B().platform)),CI(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),g1(this.gl,e,this.framebuffer),this.debug&&zp(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(g1(this.gl,this.outputTexture,this.framebuffer),this.debug&&zp(this.gl)):eN(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;g1(s,e,this.framebuffer),this.debug&&zp(s),this.outputTexture=e,re(s,()=>s.viewport(0,0,n,r)),re(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),re(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Cge(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ige(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(t){return(e,n,r,s,i)=>{const o=yn(e,n),a=o.length,l=qt(o),u=ee(o),c=ol(i,u),f=e.length,d=n.length,h=qt(e),p=qt(n),m=Lg(e,o),g=Lg(n,o);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],s[y%s.length]);else for(let y=0;y<c.length;++y){const v=vE(y,a,l),b=v.slice(-f);m.forEach(E=>b[E]=0);const x=zx(b,f,h),w=v.slice(-d);g.forEach(E=>w[E]=0);const $=zx(w,d,p);c[y]=t(r[x],s[$])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nge(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=b0([0],n),[i,o]=On((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kge=On((t,e)=>t+e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Age(t,e,n,r,s){const i=ee(r),o=Mo(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function Oge(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=Xt([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,a,u):e.size>0?o.set(o.get(a,u)+e.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rge=On((t,e)=>t&e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bi(t){return(e,n,r)=>{const s=Mt(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pge=Bi(t=>Math.ceil(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dge(t,e,n,r){const s=Mt(n,ee(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=ee(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?Xu(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let f=0;f<o.shape[1];++f)s[c+f]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fge=On((t,e)=>t===e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lge=Bi(t=>Math.exp(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mge=Bi(t=>Math.expm1(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bge=Bi(t=>Math.floor(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jge=On((t,e)=>Math.floor(t/e));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uge(t,e,n,r,s,i,o,a,l){const u=Xt([r,i],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<s;h++){const p=t[c*s+h];d+=p*o[h],f.push(p)}if(d<0||d>=l/i)throw new Error(`Invalid indices: ${f} does not index into ${a}`);for(let h=0;h<i;h++)u.values[c*i+h]=e.get(...e.indexToLoc(d*i+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zge(t,e,n){const r=Xt(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],u=e.locToIndex([a,l]);o[2]=e.values[u];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vge=On((t,e)=>t>e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wge=On((t,e)=>t>=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gge=On((t,e)=>t<e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hge=On((t,e)=>t<=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t,e,n){const r=(e-t)/(n-1),s=Mo(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kge=Bi(t=>Math.log(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(t,e,n,r){const s=ol(r,ee(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>a)&&(a=u)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yge=On((t,e)=>Math.max(t,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jge=On((t,e)=>Math.min(t,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HV=On((t,e)=>t*e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qge(t,e,n){const r=Nc(-1,n);return HV([],e,r,t,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zge=On((t,e)=>t!==e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t,e,n,r,s){const i=e.length,o=ee(e),a=qt(e),l=qt(s),u=ol(n,ee(s));for(let c=0;c<o;++c){const f=vE(c,i,a),d=new Array(f.length);for(let p=0;p<d.length;p++)d[p]=f[r[p]];const h=zx(d,i,l);u[h]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tye(t,e,n,r){const[s,i]=Ys(t,r),o=Ks(e,"int32"),a=Mo(ee(s),o),l=ee(i);for(let u=0;u<a.length;++u){const c=u*l;let f=1;for(let d=0;d<l;++d)f*=n[c+d];a[u]=f}return{outVals:a,outShape:s,outDtype:o}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=vE(s,e.length,qt(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function rye(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function sye(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);rye(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let f=1;f<l+1;++f)a[u].push(f*c)}for(let u=0;u<t.length;++u){let c=t[u],f=t[u]+1;for(let d=0;d<n.length;++d){const h=n[d],p=d+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-h[c];for(let y=c;y<f;++y)a[p].push(h[y+1]+g)}c=h[c],f=h[f]}f!==c&&(s.push([c,f]),i+=f-c)}return{outSplits:a,valueSlices:s,numValues:i}}function iye(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Mt("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function sN(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function oye(t,e,n,r,s,i){const o=sN(e,2)[1],a=sN(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let f=0;f<r;++f)s[l*a+f]=t[c*o+f];++l}}function aye(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Mt(n,ee(i)),a=t.length,l=a===0?0:a/e[0];return oye(t,e,r,l,o,i),[o,i]}function lye(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(nye(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:f,numValues:d}=sye(i,o,t,u),h=iye(c),p=aye(n,r,s,f,d);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iN=2147483647;function uye(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,u=o.length===0,c=[];a||c.push(e[0]),l||c.push(s[0]),u||c.push(o[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=Mt("int32",f+1);d[0]=0;for(let g=0;g<f;++g){const y=a?t[0]:t[g],v=l?r[0]:r[g],b=u?i[0]:i[g];if(b===0)throw new Error("Requires delta != 0");let x;if(b>0&&v<y||b<0&&v>y)x=0;else if(x=Math.ceil(Math.abs((v-y)/b)),x>iN)throw new Error(`Requires ((limit - start) / delta) <= ${iN}`);d[g+1]=d[g]+x}const h=d[f],p=Mt(n,h);let m=0;for(let g=0;g<f;++g){const y=d[g+1]-d[g];let v=a?t[0]:t[g];const b=u?i[0]:i[g];for(let x=0;x<y;++x)p[m++]=v,v+=b}return[d,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gr=is;class Bg{constructor(e,n,r,s,i,o,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=eV(c),this.raggedRank=tV(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===gr.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===gr.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case gr.VALUE_ROWIDS:return Bg.getMaxWidthValueRowID(n);case gr.ROW_SPLITS:return Bg.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${gr[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return aN(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;nV(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=Zz(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return J(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let u=Math.min(s,l),c=n[a];c===-1&&(u=0);for(let f=0;f<u;++f)o.push(c),c+=r;for(let f=0;f<l-u;++f)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const f=e[c];if(f===l)u>=0&&(++a,a<s?u+=r:u=-1);else{if(a=0,l=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);u=n[f]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case gr.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case gr.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${gr[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case gr.FIRST_DIM_SIZE:return e[0];case gr.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case gr.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${gr[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=aN(r,!1),o=Mt(this.valuesDType,ee(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,s[u],r[u]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=ee(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;$t(()=>{const m=IE(c,p);c=hhe(m,a).dataSync()})}let f=0,d=0,h=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===h){++h;continue}if(d<h){const g=i.subarray(f*l),y=o.subarray(d*l),v=(h-d)*l;oN(y,g,v)}if(p>=u){const g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)o.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=o.slice(h*l);oN(g,c,l),++h}m<0?(f=p+1,d=h):(f=p,d=h,h=d+1)}}}function oN(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function aN(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function cye(t,e,n,r,s,i,o,a,l,u){return new Bg(t,e,n,r,s,i,o,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return Mo(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Mo(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dye=Bi(t=>1/Math.sqrt(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hye(t,e,n,r,s,i,o,a,l,u){const c=[r/s,s],f=t.values,d=e.values;if(r===0)return Xt(n,e.dtype);const h=l instanceof Pg?l:Xt(c,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<i;p++){const m=[];let g=0;for(let y=0;y<o;y++){const v=f[p*o+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<s;y++)u?h.values[g*s+y]+=d[p*s+y]:h.values[g*s+y]=e.rank===0?d[0]:d[p*s+y]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pye=Bi(t=>1/(1+Math.exp(-t)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(t,e,n,r,s){const i=RE(r,e,n),o=ee(n),a=qt(r);if(i){const f=PE(e,a);return s==="string"?t.slice(f,f+o):t.subarray(f,f+o)}const l=s==="string"?Xu(t):t,u=Xt(r,s,l),c=Xt(n,s);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((p,m)=>p+e[m]);c.set(u.get(...h),...d)}return s==="string"?PV(c.values):c.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(t,e,n,r,s,i,o){const a=e[0],l=i[0],u=new Array(l),c=new Array(a),f=e[1];if(l===0){if(a!==0)throw new Error(xV(a));const g=Mt(n,0),y=Mt(s,0);return[g,[0,f],y,u,c]}let d=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*f];if(y<0)throw new Error(wV(g,y));if(y>=l)throw new Error(SV(g,y,l));++p[y],d=d&&y>=h,h=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&d){const g=t,y=r;for(let v=0;v<a;++v)c[v]=v;return[g,[a,f],y,u,c]}else{const g=p[l-1],y=Mt(n,g*f),v=Mt(s,g),b=new Array(l).fill(0);for(let x=0;x<a;++x){const w=t[x*f],$=b[w],E=(w===0?0:p[w-1])+$;b[w]++;for(let T=0;T<f;++T)y[E*f+T]=t[x*f+T];v[E]=r[x],c[x]=E}for(let x=0;x<l;++x)if(b[x]===0){const $=x===0?0:p[x-1];y[$*f+0]=x;for(let E=1;E<f;++E)y[$*f+E]=0;v[$]=o}return[y,[g,f],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t,e,n,r,s){const i=ee(r),o=e[0],a=s.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=s[g];if(y===-1){if(c!==-1)throw new Error($V(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(EV(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(TV());const g=Math.trunc(i/u);if(u*g!==i)throw new Error(_V(r,l));l[c]=g}if(ee(l)!==i)throw new Error(CV(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let g=d-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=Mt(n,o*a);for(let g=0;g<o;++g){let y=0;for(let v=0;v<d;++v)y+=t[g*d+v]*h[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],f=a>0?s[a-1]+1:0;if(f<0)throw new Error(rw());const d=e.slice();d[0]=f;const h=d.reduce((b,x)=>b*x,1),p=Mt(n,h);if(a===0)return f>0&&p.fill(o),[p,d];if(f<=0)throw new Error(rw());let m=0,g=1,y=0,v=s[m];for(;;){let b=0;if(g<a){if(b=s[g],v===b){++g;continue}if(v>=b)throw new Error(IV())}if(v<0||v>=f)throw new Error(NV(v,f));v>y&&p.fill(o,y*u,v*u);for(let x=m;x<g;++x){const w=r[x];if(w<0||w>=l[0])throw new Error(kV(x,r[x],l[0]));for(let $=0;$<u;$++)p[v*u+$]+=t[w*u+$]}if(i)for(let x=0;x<u;x++)p[v*u+x]/=g-m;if(m=g,++g,y=v+1,v=b,g>a)break}return y<f&&p.fill(o,y*u,f*u),[p,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bye=Bi(t=>Math.sqrt(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xye=On((t,e)=>{const n=t-e;return n*n});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wye=Bi((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t,e,n,r){const s=Xt(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ye{constructor(e,n,r,s,i,o){this.separator=ja(e),this.nGramWidths=n,this.leftPad=ja(r),this.rightPad=ja(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),c=Math.max(0,l-(i-(a+1))),f=o-(u+c),d=n+(u>0?0:a-l);let h=0;h+=u*this.leftPad.length;for(let v=0;v<f;++v)h+=e[d+v].length;h+=c*this.rightPad.length;const p=u+c+f-1;h+=p*this.separator.length,r[s+a]=new Uint8Array(h);const m=r[s+a];let g=0;const y=v=>v.forEach(b=>m[g++]=b);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<f-1;++v)y(e[d+v]),y(this.separator);if(f>0){y(e[d+f-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<s;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=Mt("int32",s);if(r===0||s===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const a=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(f=>{const d=n[l+1]-n[l],h=this.getNumNGrams(d,f);this.createNGrams(e,u,a,c,h,f),c+=h}),this.preserveShort&&c===o[l]){const f=n[l+1]-n[l];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(e,u,a,c,1,d)}}return[a,o]}}function Eye(t,e,n,r,s,i,o,a){return new $ye(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function _ye(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let d=0;d<r;++d){const h=s.length;Tye(t[d],e,n,s);const p=s.length-h;a[d]=p,i+=p,o=Math.max(o,p)}const l=Mt("int32",i*2),u=new Array(i),c=[r,o];let f=0;for(let d=0;d<r;++d)for(let h=0;h<a[d];++h)l[f*2]=d,l[f*2+1]=h,u[f]=s[f],++f;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t,e){const n=Mt("int32",t.length);for(let r=0;r<t.length;++r)n[r]=nde(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iye=On((t,e)=>t-e);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=Xt(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Of=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function qV(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),d=Math.max(n,Math.floor(e-l*c/a+f)),h=Math.min(r,Math.floor(e+(a-l)*c/a+f));qV(t,e,d,h)}const s=t[e];let i=n,o=r;for(df(t,n,e),Of(t[r],s)>0&&df(t,n,r);i<o;){for(df(t,i,o),i++,o--;Of(t[i],s)<0;)i=i+1;for(;Of(t[o],s)>0;)o=o-1}Of(t[n],s)===0?df(t,n,o):(o=o+1,df(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function kye(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=ol(n,o*r),u=ol("int32",o*r);for(let f=0;f<o;f++){const d=f*a,h=t.subarray(d,d+a);let p=new Array(h.length);h.forEach((v,b)=>p[b]={value:v,index:b}),r<p.length&&(qV(p,r),p=p.slice(0,r)),s&&p.sort(Of);const m=f*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[Xt(c,n,l),Xt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t,e,n,r){const s=An(e,n)[0],i=[1,n[0],1];for(let p=0;p<s;p++)i[0]*=n[p];i[1]=n[s];for(let p=s+1;p<n.length;p++)i[2]*=n[p];const o=new Map,a=new Int32Array(n[s]),l=new Pg(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let p=0;p<n[s];p++){let m;if(c)m=t[p].toString();else{const y=[];for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)y.push(l.get(v,p,b));m=y.join(",")}const g=o.get(m);if(g!=null)a[p]=g;else{const y=o.size;o.set(m,y),a[p]=y,u.push(p)}}const f=i.slice();f[1]=o.size;const d=new Pg(f,r);u.forEach((p,m)=>{for(let g=0;g<i[0];g++)for(let y=0;y<i[2];y++)d.set(l.get(g,p,y),g,m,y)});const h=n.slice();return h[s]=f[1],{outputValues:d.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oye=Object.freeze(Object.defineProperty({__proto__:null,addImpl:kge,bincountImpl:Age,bincountReduceImpl:Oge,bitwiseAndImpl:Rge,castImpl:Nge,ceilImpl:Pge,concatImpl:Dge,equalImpl:Fge,expImpl:Lge,expm1Impl:Mge,floorDivImpl:jge,floorImpl:Bge,gatherNdImpl:Uge,gatherV2Impl:zge,greaterEqualImpl:Wge,greaterImpl:Vge,lessEqualImpl:Hge,lessImpl:Gge,linSpaceImpl:qge,logImpl:Kge,maxImpl:Xge,maximumImpl:Yge,minimumImpl:Jge,multiplyImpl:HV,negImpl:Qge,notEqualImpl:Zge,prodImpl:tye,raggedGatherImpl:lye,raggedRangeImpl:uye,raggedTensorToTensorImpl:cye,rangeImpl:fye,rsqrtImpl:dye,scatterImpl:hye,sigmoidImpl:pye,simpleAbsImpl:Ige,sliceImpl:mye,sparseFillEmptyRowsImpl:gye,sparseReshapeImpl:yye,sparseSegmentReductionImpl:vye,sqrtImpl:bye,squaredDifferenceImpl:xye,staticRegexReplaceImpl:wye,stridedSliceImpl:Sye,stringNGramsImpl:Eye,stringSplitImpl:_ye,stringToHashBucketFastImpl:Cye,subImpl:Iye,tileImpl:Nye,topKImpl:kye,transposeImpl:eye,uniqueImpl:Aye},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Rye,bincountImpl:KV,bincountReduceImpl:Pye,bitwiseAndImpl:Dye,castImpl:Fye,ceilImpl:Lye,concatImpl:Mye,equalImpl:Bye,expImpl:jye,expm1Impl:Uye,floorImpl:zye,gatherNdImpl:Vye,gatherV2Impl:Wye,greaterImpl:Gye,greaterEqualImpl:Hye,lessImpl:qye,lessEqualImpl:Kye,linSpaceImpl:Xye,logImpl:Yye,maxImpl:Jye,maximumImpl:Qye,minimumImpl:Zye,multiplyImpl:e0e,negImpl:t0e,notEqualImpl:n0e,prodImpl:r0e,raggedGatherImpl:s0e,raggedRangeImpl:i0e,raggedTensorToTensorImpl:o0e,rangeImpl:a0e,rsqrtImpl:l0e,scatterImpl:u0e,sigmoidImpl:c0e,simpleAbsImpl:XV,sliceImpl:f0e,sparseFillEmptyRowsImpl:d0e,sparseReshapeImpl:h0e,sparseSegmentReductionImpl:YV,sqrtImpl:p0e,staticRegexReplaceImpl:m0e,stridedSliceImpl:g0e,stringNGramsImpl:y0e,stringSplitImpl:v0e,stringToHashBucketFastImpl:b0e,subImpl:x0e,tileImpl:w0e,topKImpl:S0e,transposeImpl:VE,uniqueImpl:$0e}=Oye;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JV(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function gn(t,e){return e===1?[t]:JV(t,e)}function E0e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T0e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ln(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=gn("rc",this.rank),r=Ue(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QV{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${_0e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?UE():jE(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function _0e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?bme(["r","c","d"],"inputShape"):Tl(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C0e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=uN(n,r),i=cN(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=lN(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===Gt.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Gt.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Gt.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Gt.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Gt.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=uN(r,s),o=cN(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=lN(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=B().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function I0e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function lN(t,e,n,r,s){const i=N0e(e,r);let o;if(s){const[l,u]=Rc(t[0],t[1]);o=l*u}else{const[l,u]=ep(t[0],t[1]);o=l*u}const a=I0e(n,i);return o*a}function N0e(t,e){switch(t){case Gt.PACKED_2X2_FLOAT32:return WV(e);case Gt.PACKED_2X2_FLOAT16:return GV(e);case Gt.UNPACKED_FLOAT32:return UV(e);case Gt.UNPACKED_FLOAT16:return zV(e);case Gt.PACKED_4X1_UNSIGNED_BYTE:return VV(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function k0e(t){return B().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Gt.PACKED_2X2_FLOAT32:Gt.UNPACKED_FLOAT32:t?Gt.PACKED_2X2_FLOAT16:Gt.UNPACKED_FLOAT16}function uN(t,e){if(t===lr.UPLOAD)return Gt.PACKED_2X2_FLOAT32;if(t===lr.RENDER||t==null)return k0e(e);if(t===lr.DOWNLOAD||t===lr.PIXELS)return Gt.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function cN(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Os{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Kr="if (isnan(x)) return x;",A0e="return x;",fN="return abs(x);",O0e="return (x >= 0.0) ? x : (exp(x) - 1.0);",R0e=Kr+`
  return (x < 0.0) ? 0.0 : x;
`,P0e=Kr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Yi="return x;",D0e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0e="return x;",L0e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,M0e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,B0e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,j0e="return 1.0 / (1.0 + exp(-1.0 * x));";class fo{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U0e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length);const n=e.length,r=gn("rc",n),s=Ue(n),i=E0e(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z0e=Mhe,V0e=1e-7,W0e=1e-4,Gp={};function G0e(t){return t in Gp||(Gp[t]={}),Gp[t]}const H0e=B().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),q0e=600;function K0e(){return B().global.screen==null?1024:B().global.screen.height*B().global.screen.width*window.devicePixelRatio*q0e/1024/1024}class E0 extends RU{nextDataId(){return E0.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!B().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof b1)n=e;else{const r=vs(B().getNumber("WEBGL_VERSION"),e);n=new b1(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=vs(B().getNumber("WEBGL_VERSION"));n=new b1(r),this.binaryCache=G0e(B().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new C0e(this.gpgpu),this.numMBBeforeWarning=K0e(),this.texData=new Kle(this,Gi())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const u=Vp(n),c=new rN(u,!1,o),f=this.runWebGLProgram(c,[a],r,[[s,i]]);return f.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),f.dataId}write(e,n,r){if((B().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||B().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:lr.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(B().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:lr.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let d;l?d=new fo(a,Yi):d=new Os(a,Yi);const h=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=ts());let f;if(s==="complex64"){const d=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);f=nw(d,h)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=ts()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let p;l?p=new fo(s,Yi):p=new Os(s,Yi);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:o}],o),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(B().getBool("DEBUG")&&!B().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&B().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&B().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...jp(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];f=nw(m,g)}else if(u==null)f=this.getValuesFromTexture(e);else{const p=ee(s);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;re(p,()=>p.deleteBuffer(u))}const d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Gi().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let h;l?h=new fo(i,Yi):h=new Os(i,Yi);const p=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=Gi().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Hu(s));return Xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Xt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Hpe(r))throw B().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=ee(n);if(B().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),h=this.texData.get(d.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...jp(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),p}const o=B().getBool("WEBGL_PACK")&&s===!0,a=o?Vp(n):n,l=o?new lge(a):new age(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=al(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=al(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=Xle(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ts(),endMs:null}}endTimer(e){return B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ts(),e)}async getQueryTime(e){if(B().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=H0e){return B().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ee(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){os("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return z0e(e.shape,n)}packedUnaryOp(e,n,r){const s=new fo(e.shape,n),i=this.compileAndRun(s,[e],r);return Gi().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=XV(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(B().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fN,e.dtype);const n=new Os(e.shape,fN),r=this.compileAndRun(n,[e]);return Gi().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&y0(r[0])){const i=r.map(o=>ja(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Gi().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new U0e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new T0e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Yu(e.shape),...Ju(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Yu(n),...Ju(n)],o=new QV(i,r),a=!0,l=[r],u=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const d=ee(i),h=n[0]*n[1]*4;J(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Vp(i);let l;s?l=new oge(a):l=new ige(a);const u=!0,c=[n??jp(a)],f=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:f.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Md.DENSE){const y=o??jp(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ee(a.shape)===0)return l.values=ol(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&ee(y.shape)<=B().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!Mg(v.shape,y.shape)){const b=y,x=y.shape;y.shape=v.shape,y=this.packedReshape(y,x),u.push(y),v=this.texData.get(y.dataId),b.shape=x}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const f={shape:a.shape,texData:l,isUniform:!1},d=sge(e,c,f),h=this.getAndSaveBinary(d,()=>nge(this.gpgpu,e,c,f)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),B().get("ENGINE_COMPILE_ONLY")||rge(this.gpgpu,h,c,f,s),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=B().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=ts();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!B().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(B().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=$t(()=>{if(!B().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=B().getBool("DEBUG");B().set("DEBUG",!1);const n=this.abs(Bo(1e-8)).dataSync()[0];if(B().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?V0e:W0e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=ts());let f=n.texShape;if(f==null&&(f=cme(r,l),n.texShape=f),i!=null){const d=Vp(r);let h,p=f[1],m=f[0];const g=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!g)&&([p,m]=Rc(f[0],f[1])),l?h=new cge(d,g):h=new rN(d,g);const y=g?[m,p]:f,v=this.makeTensorInfo(y,s),b=this.texData.get(v.dataId);g?b.usage=lr.PIXELS:b.usage=lr.UPLOAD,b.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,i);const x=[[m,p]],$=this.runWebGLProgram(h,[v],s,x,!0),E=this.texData.get($.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,B().get("ENGINE_COMPILE_ONLY")?this.disposeData($.dataId):(n.texture=E.texture,n.values=null,this.texData.delete($.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=ts()-c)}else{const d=this.acquireTexture(f,a,s,l);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=X0e(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*Ag(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await _pe(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(DV(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=jV(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=Gi().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(s,n,r,i,o,a);return Gi().makeTensorFromDataId(u,n,r,l)}}E0.nextDataId=0;function X0e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$z()&&Xde("webgl",()=>new E0,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WE=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class dl{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=yn(n,r),this.enableShapeUniforms=ln(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cl=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Mc{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=yn(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ln(i);let o="";if(s)if(i===0||ee(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Ue(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=gn("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yn(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Y0e={kernelName:$E,backendName:"webgl",kernelFunc:Yn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yo(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=Yn({inputs:{x:r},backend:n}),l=Yn({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const J0e={kernelName:BU,backendName:"webgl",kernelFunc:Yo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZV="return (a < 0.) ? b * a : a;",eW=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Q0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",Nc(i,"float32")),a=B().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mc(eW,s.shape,o.shape):new dl(ZV,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const Z0e={kernelName:GU,backendName:"webgl",kernelFunc:Q0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW="return (a < 0.) ? b * a : a;",nW=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function eve(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=B().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mc(nW,r.shape,s.shape):new dl(tW,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const tve={kernelName:XU,backendName:"webgl",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bc="if (isnan(x)) return x;";function Ce({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const f=a.texData.get(o.dataId),d=n(f.values,l);return a.makeTensorInfo(o.shape,l,d)}const u=B().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new fo(o.shape,e):c=new Os(o.shape,t),a.runWebGLProgram(c,[o],l)}}function Jt({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,c=a;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[x,w]=b,$={dataId:x.dataId,dtype:x.dtype,shape:l.shape},E={dataId:w.dataId,dtype:w.dtype,shape:u.shape},T=new dl(t,l.shape,u.shape);return c.runWebGLProgram(T,[$,E],Ks(x.dtype,w.dtype))}),v=Yo({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const f=i||Ks(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&s!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Xu(p):p,y=l.dtype==="string"?Xu(m):m,[v,b]=s(l.shape,u.shape,g,y,f),x=c.makeTensorInfo(b,f),w=c.texData.get(x.dataId);return w.values=v,x}const d=B().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return d?h=new Mc(e,l.shape,u.shape,n):h=new dl(t,l.shape,u.shape),c.runWebGLProgram(h,[l,u],f)}}function Bd(t,e=!1){if(t==="linear")return e?F0e:A0e;if(t==="relu")return e?M0e:R0e;if(t==="elu")return e?L0e:O0e;if(t==="relu6")return e?B0e:P0e;if(t==="prelu")return e?nW:tW;if(t==="leakyrelu")return e?eW:ZV;if(t==="sigmoid")return e?j0e:D0e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rW{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ln(this.outputShape.length);const c=s?e[1]:e[2],f=Math.ceil(c/2),d=s?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${x};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dN={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class hN{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=yn(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pN="return a * b;";function GE(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Ks(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),u=new hN(dN.REAL,r.shape,s.shape),c=new hN(dN.IMAG,r.shape,s.shape),f=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Yo({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[u,c]=e0e(r.shape,s.shape,a.values,l.values,i),f=n.makeTensorInfo(c,i),d=n.texData.get(f.dataId);return d.values=u,f}let o;return B().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Mc(pN,r.shape,s.shape):o=new dl(pN,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const nve={kernelName:qU,backendName:"webgl",kernelFunc:GE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t,e,n){const r=[Yu(t.shape),...Ju(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Yu(e),...Ju(e)],o=new QV(i,r),a=!0,l=[r],u=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=ee(s.shape),l=Yle(i,a),u=ee(l);J(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(s.dataId);return c.isPacked&&!Mg(s.shape,l)&&!(c.texture!==null&&Mg(c.shape,l))?rve(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const sve={kernelName:JU,backendName:"webgl",kernelFunc:Y};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mN{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${kg(f)?f.toPrecision(2):f}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ive{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=S0(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Il(t,e,n,r){const s=ove(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:u}=s[o];let c,f;n==="mean"?c=o===0?new mN({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new mN({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new ive({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),f=i,i=r.runWebGLProgram(c,[i],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ave{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=Ue(this.rank),i=lve(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function lve(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uve{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Ue(this.rank),i=JV("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0(t,e,n){const r=B().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uve(t.shape,e):new ave(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cve(t,e,n,r){const s=e,i=t.shape.length,o=An(s,t.shape);let a=o;const l=Hr(a,i),u=l!=null;let c=t;u&&(c=T0(t,l,r),a=qr(a.length,i)),Ss("sum",a,i);const[f,d]=Ys(c.shape,a);let h=f;n&&(h=Li(f,o));const p=ee(d),g=ee(t.shape)/p,y=Y({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),v=TE(t.dtype),b=Il(y,v,"sum",r),x=Y({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _0(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return cve(s,i,o,n)}const fve={kernelName:tz,backendName:"webgl",kernelFunc:_0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=s.shape[i[c]];let u;if(o.shouldExecuteOnCPU([s])){const f=o.texData.get(s.dataId).values,d=VE(f,s.shape,s.dtype,i,l);u=o.makeTensorInfo(l,s.dtype);const h=o.texData.get(u.dataId);h.values=d}else u=T0(s,i,o);return u}const dve={kernelName:Mfe,backendName:"webgl",kernelFunc:wn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sW=1e3;function jg({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,f=n?t.shape[u-2]:t.shape[u-1],d=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=ee(m),v=ee(g),x=yn(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);J(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,f,h]:[y,h,f],$=r?[v,p,d]:[v,d,p],E=Y({inputs:{x:t},backend:s,attrs:{shape:w}}),T=Y({inputs:{x:e},backend:s,attrs:{shape:$}}),N=[E,T],I=Math.max(y,v),R=n?E.shape[1]:E.shape[2],P=i!=null,M=o!=null,j=l==="leakyrelu",W=l!=null?Bd(l,!0):null,G=P||M||j||W!=null;let K;if((h===1||p===1)&&R>sW&&G===!1){let H=E,te=T;n&&(H=wn({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),N.push(H)),r&&(te=wn({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),N.push(te));const ce=p!==1,le=p===1;let Ae=H;ce&&(Ae=Y({inputs:{x:H},backend:s,attrs:{shape:[I,R,1]}}),N.push(Ae));const vt=p===1?2:1;let en=te;le&&(en=Y({inputs:{x:te},backend:s,attrs:{shape:[I,1,R]}}),N.push(en));const un=GE({inputs:{a:Ae,b:en},backend:s});K=_0({inputs:{x:un},backend:s,attrs:{axis:vt,keepDims:!0}}),N.push(un)}else{const H=Ks(t.dtype,e.dtype),te=new rW(w,$,[I,h,p],n,r,P,W,M,j),ce=[E,T];if(i!=null&&ce.push(i),M&&ce.push(o),j){const le=s.makeTensorInfo([],"float32",Nc(a,"float32"));ce.push(le),N.push(le)}K=s.runWebGLProgram(te,ce,H)}const L=Y({inputs:{x:K},backend:s,attrs:{shape:x}});N.push(K);for(const H of N)s.disposeIntermediateTensorInfo(H);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;return jg({a:s,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:f,activation:c})}const pve={kernelName:Wfe,backendName:"webgl",kernelFunc:hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gN="return abs(x);";function mve(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=XV(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return B().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new fo(r.shape,gN):s=new Os(r.shape,gN),n.runWebGLProgram(s,[r],r.dtype)}const gve={kernelName:MU,backendName:"webgl",kernelFunc:mve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yve=Kr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,vve=Ce({opSnippet:yve}),bve={kernelName:cue,backendName:"webgl",kernelFunc:vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xve=Kr+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,wve=Ce({opSnippet:xve}),Sve={kernelName:fue,backendName:"webgl",kernelFunc:wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yN="return a + b;",$ve=Jt({opSnippet:yN,packedOpSnippet:yN,supportsComplex:!0,cpuKernelImpl:Rye}),Eve={kernelName:wE,backendName:"webgl",kernelFunc:$ve};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tve{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ve{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Im(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Yn({inputs:{x:r[0]},backend:n});if(r.length>B().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Im({inputs:r.slice(0,l),backend:n}),c=Im({inputs:r.slice(l),backend:n});return Im({inputs:[u,c],backend:n})}const s=r.map(l=>l.dtype).reduce((l,u)=>Ks(l,u)),i=r.map(l=>l.shape),a=B().getBool("WEBGL_PACK")?new _ve(r[0].shape,i):new Tve(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const Cve={kernelName:due,backendName:"webgl",kernelFunc:Im};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=An(i,s.shape);let u=l;const c=Hr(u,a);let f=s;c!=null&&(f=wn({inputs:{x:s},backend:n,attrs:{perm:c}}),u=qr(u.length,a)),Ss("all",u,a);const[d,h]=Ys(f.shape,u),p=ee(h),m=Y({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Il(m,m.dtype,"all",n);let y;if(o){const v=Li(d,l);y=Y({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Y({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const Nve={kernelName:hue,backendName:"webgl",kernelFunc:Ive};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=An(i,s.shape);let u=l;const c=Hr(u,a);let f=s;c!=null&&(f=wn({inputs:{x:s},backend:n,attrs:{perm:c}}),u=qr(u.length,a)),Ss("any",u,a);const[d,h]=Ys(f.shape,u),p=ee(h),m=Y({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Il(m,m.dtype,"any",n);let y;if(o){const v=Li(d,l);y=Y({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Y({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const Ave={kernelName:pue,backendName:"webgl",kernelFunc:kve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ove{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rve{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,J(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Ue(l),c=gn("coords",l);let f,d;if(o===1){d=l+1;const T=Ue(d);f=`
        ${T} sourceLocR = ${T}(${c.join()}, 0);
        ++${c[l-1]};
        ${T} sourceLocG = ${T}(${c.join()}, 0);
        ++${c[l-2]};
        ${T} sourceLocA = ${T}(${c.join()}, 0);
        --${c[l-1]};
        ${T} sourceLocB = ${T}(${c.join()}, 0);
        --${c[l-2]};`}else d=l,f=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],m=h.map(T=>"int "+T),g=gn("sourceLocR",d-1).concat("inIdx.r"),y=gn("sourceLocG",d-1).concat("inIdx.g"),v=gn("sourceLocB",d-1).concat("inIdx.b"),b=gn("sourceLocA",d-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,$=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,E=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${$};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${$};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iW(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=S0(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new Ove(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const f=iW(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function oW(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=S0(i),a=new Rve(s,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=oW(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function aW(t,e,n,r){const s=[n];if(Ss("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!B().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Ys(l.shape,s),f=ee(c),d=Y({inputs:{x:l},backend:t,attrs:{shape:[-1,f]}});i.push(d);const h=iW(t,d,r);i.push(h);const p=Y({inputs:{x:h},backend:t,attrs:{shape:u}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return oW(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=An(i,s.shape);const a=Hr(o,s.shape.length);let l=s;const u=[];a!=null&&(l=wn({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=qr(o.length,l.shape.length)),Ss("argMax",[o[0]],l.shape.length);const c=aW(n,l,o[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const Dve={kernelName:mue,backendName:"webgl",kernelFunc:Pve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=An(i,s.shape);const a=Hr(o,s.shape.length);let l=s;const u=[];a!=null&&(l=wn({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=qr(o.length,l.shape.length)),Ss("argMin",[o[0]],l.shape.length);const c=aW(n,l,o[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const Lve={kernelName:gue,backendName:"webgl",kernelFunc:Fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mve=Kr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Bve=Ce({opSnippet:Mve}),jve={kernelName:yue,backendName:"webgl",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uve=Kr+"return log(x + sqrt(x * x + 1.0));",zve=Ce({opSnippet:Uve}),Vve={kernelName:vue,backendName:"webgl",kernelFunc:zve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wve=Kr+`
  return atan(x);
`,Gve=Ce({opSnippet:Wve}),Hve={kernelName:bue,backendName:"webgl",kernelFunc:Gve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qve=WE+`
  return atan(a, b);
`,Kve=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Cl+`
  return result;
`,Xve=Jt({opSnippet:qve,packedOpSnippet:Kve}),Yve={kernelName:wue,backendName:"webgl",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jve=Kr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Qve=Ce({opSnippet:Jve}),Zve={kernelName:xue,backendName:"webgl",kernelFunc:Qve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jd{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${T} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?g:y:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,$=o%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${w};
          if (${$===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${$===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${$===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${x});
      }
    `}}class HE{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let x="0.0";if(b||(x="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let $=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&($="avgValue / max(count, 1.0)");const E=Math.floor(o/4)*4,T=o%4,N=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${E};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${$});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;tp(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;J(Ac(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=kc(s.shape,i,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Kt(c.inShape,c.outShape))return Yn({inputs:{x:s},backend:n});const f=new jd(c,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const t1e={kernelName:Sue,backendName:"webgl",kernelFunc:e1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],f=Qh(s.shape,i,o,c,a,l,u),d=new HE(f,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const r1e={kernelName:Eue,backendName:"webgl",kernelFunc:n1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s1e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,f=u-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class i1e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=f-1-e.padInfo.front,m=d-1-e.padInfo.top,g=h-1-e.padInfo.left,y=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=Qh(o.shape,a,l,f,u,c),h=new i1e(d);return n.runWebGLProgram(h,[s],o.dtype)}const a1e={kernelName:Tue,backendName:"webgl",kernelFunc:o1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;tp([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=kc(o.shape,a,l,1,u),f=new s1e(c);return n.runWebGLProgram(f,[s],o.dtype)}const u1e={kernelName:$ue,backendName:"webgl",kernelFunc:l1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return jg({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const f1e={kernelName:_ue,backendName:"webgl",kernelFunc:c1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d1e{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],yn(e,n),yn(e,r);let a="0.0";s!=null&&(yn(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(yn(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h1e{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],yn(e,n),yn(e,r);let a="vec4(0.0)";s!=null&&(yn(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(yn(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;J(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,s,i];let c=null;o!=null&&(c=o.shape,u.push(o));let f=null;a!=null&&(f=a.shape,u.push(a));const d=B().getBool("WEBGL_PACK_NORMALIZATION")?new h1e(r.shape,s.shape,i.shape,c,f,l):new d1e(r.shape,s.shape,i.shape,c,f,l);return e.runWebGLProgram(d,u,u[0].dtype)},m1e={kernelName:lce,backendName:"webgl",kernelFunc:p1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g1e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Ue(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=y1e(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${iw[a]} = start[${a}] + coords.${iw[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const iw=["x","y","z","w","u","v"];function y1e(t){if(t===1)return"sourceLoc";if(t<=6)return iw.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v1e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Ue(this.rank),r=gn("coords",this.rank),s=gn("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${s[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1e(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=PE(e,qt(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function jc(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=Yz(s,i,o);if(jz(s,a,l),ee(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const f=n.texData.get(s.dataId),d=f0e(f.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,d)}const{isPacked:u}=n.texData.get(s.dataId),c=RE(s.shape,a,l);if(u||!c){const f=B().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new v1e(l):new g1e(l),d=[a];return n.runWebGLProgram(f,[s],s.dtype,d)}return n.uploadToGPU(s.dataId),b1e(s,a,l,n)}const x1e={kernelName:pfe,backendName:"webgl",kernelFunc:jc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w1e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;J(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,b)=>v*b),l=FE(s.shape,i,a),u=LE(l.length,i.length),c=ME(s.shape,i,a),f=sV(o,i.length),d=iV(c,o,i.length),h=[],p=Y({inputs:{x:s},backend:n,attrs:{shape:l}}),m=wn({inputs:{x:p},backend:n,attrs:{perm:u}}),g=Y({inputs:{x:m},backend:n,attrs:{shape:c}}),y=jc({inputs:{x:g},backend:n,attrs:{begin:f,size:d}});return h.push(p),h.push(m),h.push(g),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},S1e={kernelName:Cue,backendName:"webgl",kernelFunc:w1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),u=KV(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const E1e={kernelName:Iue,backendName:"webgl",kernelFunc:$1e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T1e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,_1e=`
  return float(int(a.r) & int(b.r));
`;function C1e(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=B().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=B().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(s.dataId).values,[c,f]=Dye(r.shape,s.shape,l,u,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let a;return i?a=new Mc(T1e,r.shape,s.shape,!1):a=new dl(_1e,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const I1e={kernelName:Nue,backendName:"webgl",kernelFunc:C1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1e(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=yn(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const k1e={kernelName:kue,backendName:"webgl",kernelFunc:N1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1e="return float(a != b);",lW=Jt({opSnippet:A1e,cpuKernelImpl:n0e,dtype:"bool"}),O1e={kernelName:Uce,backendName:"webgl",kernelFunc:lW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Yn({inputs:{x:s.complexTensorInfos.real},backend:n})}const R1e={kernelName:efe,backendName:"webgl",kernelFunc:rp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P1e="return float(int(x));";function D1e(t,e){const n=new Os(t.shape,P1e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Yn({inputs:{x:s},backend:n});const o=ew(s.shape),a=ow({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Yo({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=rp({inputs:{input:s},backend:n}),a=ow({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!Zle(s.dtype,i)){const o=Yn({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,u]=Fye(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,u)}if(i==="int32")return D1e(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",ol("bool",1)),l=lW({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const F1e={kernelName:SE,backendName:"webgl",kernelFunc:ow};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vN="return ceil(x);",L1e=Ce({opSnippet:vN,packedOpSnippet:vN,cpuKernelImpl:Lye}),M1e={kernelName:Aue,backendName:"webgl",kernelFunc:L1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B1e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j1e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;B().getBool("WEBGL_PACK_CLIP")?a=new j1e(s.shape):a=new B1e(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const z1e={kernelName:Oue,backendName:"webgl",kernelFunc:U1e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V1e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bN(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function W1e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new V1e(r.shape),o=[bN(r,s.complexTensorInfos.real),bN(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const G1e={kernelName:jU,backendName:"webgl",kernelFunc:W1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H1e{constructor(e){this.outputShape=[],this.outputShape=fl(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q1e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=fl(e,n);const r=this.outputShape,s=r.length,i=Ue(s),o=gn("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),f=a.join();let d=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];d+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Hp(a,u,g)}),
            vec2(${Hp(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];d+=`
        return getChannel(
          getT${h}(${Hp(a,u,p)}),
          vec2(${Hp(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function Hp(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Yn({inputs:{x:s.complexTensorInfos.imag},backend:n})}const K1e={kernelName:pce,backendName:"webgl",kernelFunc:C0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rf(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(v=>rp({inputs:{input:v},backend:n})),p=t.map(v=>C0({inputs:{input:v},backend:n})),m=Rf(h,e,n),g=Rf(p,e,n),y=Yo({inputs:{real:m,imag:g},backend:n});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const h=t.map(x=>{const $=[-1,ee(x.shape.slice(e))];return Y({inputs:{x},backend:n,attrs:{shape:$}})}),p=h.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=fl(h.map(x=>x.shape),1),g=h[0].shape[0]===1,y=Mye(p,m,r,g),v=fl(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=t.filter(h=>ee(h.shape)>0),o=B().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const h=o?new Os(t[0].shape,Yi):new fo(t[0].shape,Yi);return n.runWebGLProgram(h,t,r)}const a=B().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const h=[];for(let m=0;m<i.length;m+=a){const g=i.slice(m,m+a);h.push(Rf(g,e,n))}const p=Rf(h,e,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(o){const h=new q1e(i.map(p=>p.shape),e);return n.runWebGLProgram(h,i,r)}const{tensors2D:l,outShape:u}=X1e(i,e,n),c=new H1e(l.map(h=>h.shape)),f=n.runWebGLProgram(c,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=Y({inputs:{x:f},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(f),d}function X1e(t,e,n){const r=fl(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Y({inputs:{x:i},attrs:{shape:[-1,ee(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=An(s,e[0].shape)[0],o=e.map(u=>u.shape);Qz(o,i);const a=fl(e.map(u=>u.shape),i);if(ee(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>ee(u.shape)>0);return l.length===1?Yn({inputs:{x:l[0]},backend:n}):Rf(l,i,n)}const Y1e={kernelName:Rue,backendName:"webgl",kernelFunc:uW};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,b=g?3:1;let x="",w="";r&&(s?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const $=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${$}
        ${w}
        setOutput(result);
      }
    `}}class J1e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ln(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)d+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;d+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)d+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(f+1)/2;g++){const y=g*2;if(d+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<c&&(o%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?d+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const v=o%2===0?yE(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:d+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?d+=`
                     xC${y+1} = xTexelC${y};
                     `:d+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(o%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(d+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(d+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(d+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",p="";r&&(s?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q1e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ln(this.outputShape.length);const{dataFormat:r}=n,s=$n(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ug(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function dW({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,f=l[0]*l[1]*l[2],d=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(i!=null){const x=Ug(i.shape,h);x!=null&&(i=Y({inputs:{x:i},backend:r,attrs:{shape:x}}),y.push(i))}if(s!=null){const x=Ug(s.shape,h);x!=null&&(s=Y({inputs:{x:s},backend:r,attrs:{shape:x}}),y.push(s))}if(!((f===1||d===1)&&c>sW)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&Kt(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},$=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,J(Mg(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const E=Y({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(E);const T=jg({a:w,b:E,backend:r,transposeA:p,transposeB:m,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),N=r.texData.get(T.dataId);J(N.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=$,N.shape=n.outShape,g=Yn({inputs:{x:T},backend:r}),g.shape=n.outShape,y.push(T)}else{const x=n.outHeight*n.outWidth,w=Y({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),$=Y({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=jg({a:h?w:$,b:h?$:w,transposeA:!h,transposeB:m,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});g=Y({inputs:{x:E},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push($),y.push(E)}for(const x of y)r.disposeIntermediateTensorInfo(x);return g}function hW({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=d*f,y=[n.batchSize,m,g],v=!0,b=!1,x=[];if(i!=null){const L=Ug(i.shape,p);L!=null&&(i=Y({inputs:{x:i},backend:r,attrs:{shape:L}}),x.push(i))}if(s!=null){const L=Ug(s.shape,p);L!=null&&(s=Y({inputs:{x:s},backend:r,attrs:{shape:L}}),x.push(s))}const w=Y({inputs:{x:e},backend:r,attrs:{shape:[1,m,ee(e.shape)/m]}});x.push(w);const $=new Q1e(y,n),E=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram($,[t],"float32",E),N=Y({inputs:{x:T},backend:r,attrs:{shape:y}});x.push(T),x.push(N);const I=s!=null,R=i!=null,P=a==="leakyrelu",M=a?Bd(a,!0):null,j=new rW(p?N.shape:w.shape,p?w.shape:N.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,b,I,M,R,P),W=p?[N,w]:[w,N];if(s&&W.push(s),R&&W.push(i),P){const L=r.makeTensorInfo([],"float32",Nc(o,"float32"));W.push(L),x.push(L)}const G=r.runWebGLProgram(j,W,"float32"),K=Y({inputs:{x:G},backend:r,attrs:{shape:n.outShape}});x.push(G);for(const L of x)r.disposeIntermediateTensorInfo(L);return K}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,f=Oc(l),d=ws(s.shape,i.shape,o,u,a,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=dW({x:s,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&B().getBool("WEBGL_EXP_CONV")){const m=new fW(d),g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(m,[s,i],"float32",g)}else if(B().getBool("WEBGL_CONV_IM2COL"))h=hW({x:s,filter:i,convInfo:d,backend:n});else{const m=new cW(d);h=n.runWebGLProgram(m,[s,i],"float32")}const p=Y({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),p}const ebe={kernelName:Pue,backendName:"webgl",kernelFunc:Z1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tbe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nbe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class rbe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class sbe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,f=Oc(l),d=ws(s.shape,c,o,1,a,u,!1,f),h=new tbe(d);return n.runWebGLProgram(h,[s,i],"float32")}const obe={kernelName:Due,backendName:"webgl",kernelFunc:ibe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class abe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ln(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,f=Oc(u),d=ws(o,i.shape,a,1,l,c,!1,f);if(B().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],p=new abe(d);return n.runWebGLProgram(p,[s,i],"float32",h)}else{const h=new nbe(d);return n.runWebGLProgram(h,[s,i],"float32")}}const ube={kernelName:Fue,backendName:"webgl",kernelFunc:lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=Zh(s.shape,i.shape,o,l,a),c=new J1e(u);return n.runWebGLProgram(c,[s,i],"float32")}const fbe={kernelName:Lue,backendName:"webgl",kernelFunc:cbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,u=Zh(s.shape,l,o,1,a),c=new rbe(u);return n.runWebGLProgram(c,[s,i],"float32")}const hbe={kernelName:Mue,backendName:"webgl",kernelFunc:dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,u=Zh(l,i.shape,a,1,o),c=new sbe(u);return n.runWebGLProgram(c,[s,i],"float32")}const mbe={kernelName:Bue,backendName:"webgl",kernelFunc:pbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbe=Bc+`
  return cos(x);
`,ybe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Cl}
  return result;
`,vbe=Ce({opSnippet:gbe,packedOpSnippet:ybe}),bbe={kernelName:jue,backendName:"webgl",kernelFunc:vbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xbe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,wbe=Ce({opSnippet:xbe}),Sbe={kernelName:Uue,backendName:"webgl",kernelFunc:wbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $be{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=e,[c]=n,[f,d]=r;this.outputShape=[c,f,d,u];const h=s==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=f>1?[`${(a-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,x,w]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ebe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new $be(s.shape,i.shape,a,l,u);return n.runWebGLProgram(c,[s,i,o],"float32")},Tbe={kernelName:Wue,backendName:"webgl",kernelFunc:Ebe};var Ud;(function(t){t.Prod="*",t.Sum="+"})(Ud||(Ud={}));class xN{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Ud.Prod?"1.0":"0.0",a=r?o:`getX(${wN(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=s?`end != ${l-1}`:"end != 0",c=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${l}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Ue(i)} coords = getOutputCoords();
        int end = ${SN(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${SN(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${wN(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function wN(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function SN(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(t,e,n,r,s,i){const o=e.shape.length,a=Hr([r],o);let l=e;a!=null&&(l=wn({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=qr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let f=Yn({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new xN(t,l.shape,!1,i),p=[[d]],m=f;f=n.runWebGLProgram(h,[f],f.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const d=new xN(t,l.shape,s,i),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const d=kE(a),h=wn({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return pW(Ud.Prod,s,n,i,o,a)}const Cbe={kernelName:zue,backendName:"webgl",kernelFunc:_be};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return pW(Ud.Sum,s,n,i,o,a)}const Nbe={kernelName:Vue,backendName:"webgl",kernelFunc:Ibe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=KV(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=Pye(l,u,o,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Abe={kernelName:Gue,backendName:"webgl",kernelFunc:kbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Obe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],u=o==="NHWC"?s.shape[2]:s.shape[3],c=o==="NHWC"?s.shape[3]:s.shape[1],f=l*i,d=u*i,h=c/(i*i),p=o==="NHWC"?[a,f,d,h]:[a,h,f,d],m=new Obe(p,i,o);return n.runWebGLProgram(m,[s],s.dtype)}const Pbe={kernelName:Hue,backendName:"webgl",kernelFunc:Rbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ln(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(s?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ln(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<f;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(d+1)/2;y++){const v=y*2;if(h+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<f&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?h+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<f)){const b=a%2===0?yE(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:h+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):b===1?h+=`
                    xC${v+1} = xTexelC${v};
                    `:h+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<f&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<f&&(h+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<f&&(h+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<f&&(h+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),J(Ac(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=ws(s.shape,i.shape,o,c,a,u,!0);let d;B().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new gW(f):d=new mW(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[s,i],"float32",h)}const Fbe={kernelName:que,backendName:"webgl",kernelFunc:Dbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lbe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Mbe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,f=ws(s.shape,c,o,a,l,u,!0),d=new Lbe(f);return n.runWebGLProgram(d,[s,i],"float32")}const jbe={kernelName:Kue,backendName:"webgl",kernelFunc:Bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,f=ws(c,i.shape,o,a,l,u,!0),d=new Mbe(f);return n.runWebGLProgram(d,[s,i],"float32")}const zbe={kernelName:Xue,backendName:"webgl",kernelFunc:Ube};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vbe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=ee(r.shape),o=Y({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new Vbe(i),l=n.runWebGLProgram(a,[o],o.dtype),u=Y({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const Gbe={kernelName:Yue,backendName:"webgl",kernelFunc:Wbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hbe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:f,left:d}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=Rz(s.shape,i.shape,o,a,"NHWC",l);let c;const f=new Hbe(u);c=n.runWebGLProgram(f,[s,i],"float32");const d=Y({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}const Kbe={kernelName:Jue,backendName:"webgl",kernelFunc:qbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=pV(s,i.length);gV(o.length,l,i);const{path:u,steps:c}=yV(a,l),f=c.length;let d=null,h=o.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=mV(h,l[g]);let b;vV(y)?b=i[g]:(b=wn({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);Kt(b.shape,x)||(b=Y({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),d===null?d=b:(d=GE({inputs:{a:b,b:d},backend:n}),p.push(d))}m<f-1&&(u[m]>=0&&(d=_0({inputs:{x:d},backend:n,attrs:{axis:u[m]-(o.length-h),keepDims:!1}}),p.push(d)),h--)}for(const m of p)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const Ybe={kernelName:Que,backendName:"webgl",kernelFunc:Xbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jbe="return (x >= 0.0) ? x : (exp(x) - 1.0);",Qbe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Zbe=Ce({opSnippet:Jbe,packedOpSnippet:Qbe}),exe={kernelName:zU,backendName:"webgl",kernelFunc:Zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const txe="return (b >= 0.0) ? a : a * (b + 1.0);",nxe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,rxe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=B().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mc(nxe,r.shape,s.shape):new dl(txe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},sxe={kernelName:Zue,backendName:"webgl",kernelFunc:rxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ixe=`
  return vec4(equal(a, b));
`,oxe="return float(a == b);",axe=Jt({opSnippet:oxe,packedOpSnippet:ixe,dtype:"bool",cpuKernelImpl:Bye}),lxe={kernelName:tce,backendName:"webgl",kernelFunc:axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uxe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${lV};
  float a1 = ${uV};
  float a2 = ${cV};
  float a3 = ${fV};
  float a4 = ${dV};
  float a5 = ${hV};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,cxe=Ce({opSnippet:uxe}),fxe={kernelName:ece,backendName:"webgl",kernelFunc:cxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dxe=Bc+`
  return exp(x);
`,hxe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yW=Ce({opSnippet:dxe,packedOpSnippet:hxe,cpuKernelImpl:jye,dtype:"float32"}),pxe={kernelName:nce,backendName:"webgl",kernelFunc:yW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aw(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(J(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Y({inputs:{x:i},backend:r,attrs:{shape:a}})}const mxe={kernelName:rce,backendName:"webgl",kernelFunc:aw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $N="return exp(x) - 1.0;",gxe=Ce({opSnippet:$N,packedOpSnippet:$N,cpuKernelImpl:Uye}),yxe={kernelName:sce,backendName:"webgl",kernelFunc:gxe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EN{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vW(t,e,n){const r=n.texData.get(t.dataId),s=ee(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Y({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,u=new EN("real",l,e),c=new EN("imag",l,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Yo({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const m=Y({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t){const{inputs:e,backend:n}=t,{input:r}=e;return vW(r,!1,n)}const bxe={kernelName:ice,backendName:"webgl",kernelFunc:vxe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xxe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sp(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Yh(s),i==="string"){const o=Mt(i,ee(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new xxe(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const wxe={kernelName:VU,backendName:"webgl",kernelFunc:sp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sxe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $xe={kernelName:oce,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new Sxe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TN="return floor(x);",Exe=Ce({opSnippet:TN,packedOpSnippet:TN,cpuKernelImpl:zye}),Txe={kernelName:ace,backendName:"webgl",kernelFunc:Exe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _xe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Cxe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Ixe=Jt({opSnippet:_xe,packedOpSnippet:Cxe,dtype:"int32"}),Nxe={kernelName:WU,backendName:"webgl",kernelFunc:Ixe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kxe{constructor(e){this.variableNames=["A"];const n=$n(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Axe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=$n(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oxe={kernelName:zfe,backendName:"webgl",kernelFunc:Rxe};let Rl,x1=B().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Rxe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,u]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[u,l],f=[u,l,i];if(a||o){const m=B().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Rl==null||m!==x1)&&(x1=m,Rl=document.createElement("canvas").getContext("2d",{willReadFrequently:x1})),Rl.canvas.width=l,Rl.canvas.height=u,Rl.drawImage(s,0,0,l,u),s=Rl.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=lr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const h=B().getBool("WEBGL_PACK")?new Axe(f):new kxe(f),p=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,m=Oc(c),g=ws(s.shape,i.shape,l,f,u,d,!1,m);let y;const v=[],b=o!=null,x=a!=null,w=h==="leakyrelu",$=()=>{const T=[s,i],N=(I,R)=>{if(R==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const P=Y({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return v.push(P),P}return I};if(b&&T.push(N(o,c)),x&&T.push(N(a,c)),w){const I=n.makeTensorInfo([],"float32",Nc(p,"float32"));T.push(I),v.push(I)}return T};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=dW({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&B().getBool("WEBGL_EXP_CONV")){const T=h?Bd(h,!0):null,N=new fW(g,b,T,x,w),I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],R=$();y=n.runWebGLProgram(N,R,"float32",I)}else if(B().getBool("WEBGL_CONV_IM2COL"))y=hW({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const T=h?Bd(h,!1):null,N=new cW(g,b,T,x,w),I=$();y=n.runWebGLProgram(N,I,"float32")}const E=Y({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(T=>n.disposeIntermediateTensorInfo(T)),E}const Dxe={kernelName:Gfe,backendName:"webgl",kernelFunc:Pxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),J(Ac(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=ws(s.shape,i.shape,l,m,u,f,!0),y=B().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=d?Bd(d,y):null,b=[s,i],x=o!=null,w=a!=null,$=d==="leakyrelu";if(x&&b.push(o),w&&b.push(a),$){const I=n.makeTensorInfo([],"float32",Nc(h,"float32"));b.push(I),p.push(I)}let E;y?E=new gW(g,x,v,w,$):E=new mW(g,x,v,w,$);const T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=n.runWebGLProgram(E,b,"float32",T);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),N}const Lxe={kernelName:Hfe,backendName:"webgl",kernelFunc:Fxe};class Mxe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=Ue(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=ee(r.shape),[l,u,c,f]=Bz(r,s),d=Y({inputs:{x:s},backend:n,attrs:{shape:[u,o]}}),h=Y({inputs:{x:r},backend:n,attrs:{shape:[ee(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const y=n.readSync(s.dataId),v=n.bufferSync(r),b=Vye(y,v,r.dtype,u,o,c,f,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const p=new Mxe(o,f,[u,c],r.shape),m=n.runWebGLProgram(p,[h,d],h.dtype),g=Y({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const jxe={kernelName:cce,backendName:"webgl",kernelFunc:Bxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uxe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Ue(this.rank),s=zxe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function zxe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=An(o,s.shape)[0];if(B().get("DEBUG")){const v=n.readSync(i.dataId),b=s.shape[l];for(let x=0;x<v.length;++x){const w=v[x];J(w<=b-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${b-1}]`)}}const u=RV(s,i,l,a),c=ee(i.shape),f=[],d=Y({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=Y({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});f.push(d),f.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const v=n.bufferSync(h),b=n.bufferSync(d),x=Wye(b,v,p);return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new Uxe(d.shape,p),g=n.runWebGLProgram(m,[d,h],d.dtype);f.push(g);const y=Y({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const Vxe={kernelName:uce,backendName:"webgl",kernelFunc:bW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wxe="return float(a > b);",Gxe=`
  return vec4(greaterThan(a, b));
`,Hxe=Jt({opSnippet:Wxe,packedOpSnippet:Gxe,cpuKernelImpl:Gye,dtype:"bool"}),qxe={kernelName:fce,backendName:"webgl",kernelFunc:Hxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kxe="return float(a >= b);",Xxe=`
  return vec4(greaterThanEqual(a, b));
`,Yxe=Jt({opSnippet:Kxe,packedOpSnippet:Xxe,dtype:"bool",cpuKernelImpl:Hye}),Jxe={kernelName:dce,backendName:"webgl",kernelFunc:Yxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(t){const{inputs:e,backend:n}=t,{input:r}=e;return vW(r,!0,n)}const Zxe={kernelName:hce,backendName:"webgl",kernelFunc:Qxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ewe="return float(!isnan(x) && !isinf(x));",twe=Ce({opSnippet:ewe,dtype:"bool"}),nwe={kernelName:mce,backendName:"webgl",kernelFunc:twe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rwe="return float(isinf(x));",swe=Ce({opSnippet:rwe,dtype:"bool"}),iwe={kernelName:gce,backendName:"webgl",kernelFunc:swe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const owe="return float(isnan(x));",awe=Ce({opSnippet:owe,dtype:"bool"}),lwe={kernelName:yce,backendName:"webgl",kernelFunc:awe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uwe="return float(a < b);",cwe=`
  return vec4(lessThan(a, b));
`,fwe=Jt({opSnippet:uwe,packedOpSnippet:cwe,cpuKernelImpl:qye,dtype:"bool"}),dwe={kernelName:vce,backendName:"webgl",kernelFunc:fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe="return float(a <= b);",pwe=`
  return vec4(lessThanEqual(a, b));
`,mwe=Jt({opSnippet:hwe,packedOpSnippet:pwe,cpuKernelImpl:Kye,dtype:"bool"}),gwe={kernelName:bce,backendName:"webgl",kernelFunc:mwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=Xye(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const vwe={kernelName:xce,backendName:"webgl",kernelFunc:ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bwe=Bc+`
  return x < 0.0 ? 0./0. : log(x);
`,xwe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,wwe=Ce({opSnippet:bwe,packedOpSnippet:xwe,cpuKernelImpl:Yye}),Swe={kernelName:wce,backendName:"webgl",kernelFunc:wwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $we=Bc+`
  return log(1.0 + x);
`,Ewe=Ce({opSnippet:$we}),Twe={kernelName:Sce,backendName:"webgl",kernelFunc:Ewe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _we="return float(a >= 1.0 && b >= 1.0);",Cwe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Iwe=Jt({opSnippet:_we,packedOpSnippet:Cwe,dtype:"bool"}),Nwe={kernelName:$ce,backendName:"webgl",kernelFunc:Iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe="return float(!(x >= 1.0));",Awe=Ce({opSnippet:kwe}),Owe={kernelName:Ece,backendName:"webgl",kernelFunc:Awe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwe="return float(a >= 1.0 || b >= 1.0);",Pwe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Dwe=Jt({opSnippet:Rwe,packedOpSnippet:Pwe,dtype:"bool"}),Fwe={kernelName:Tce,backendName:"webgl",kernelFunc:Dwe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lwe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mwe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bwe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,u=B().getBool("WEBGL_PACK_NORMALIZATION")?new Mwe(s.shape,i,o,a,l):new Lwe(s.shape,i,o,a,l);return n.runWebGLProgram(u,[s],s.dtype)},jwe={kernelName:_ce,backendName:"webgl",kernelFunc:Bwe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uwe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zwe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,f=new Uwe(s.shape,a,l,u,c);return n.runWebGLProgram(f,[s,i,o],s.dtype)},Vwe={kernelName:Cce,backendName:"webgl",kernelFunc:zwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwe(t,e,n,r){const s=ee(e),o=ee(t.shape)/s,a=Y({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=Il(a,t.dtype,"max",r),u=Y({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=An(i,s.shape);let u=l;const c=Hr(u,a),f=c!=null,d=n.shouldExecuteOnCPU([s]);let h=s;if(f){if(d){const b=n.texData.get(h.dataId).values,x=new Array(a);for(let E=0;E<x.length;E++)x[E]=s.shape[c[E]];const w=VE(b,s.shape,s.dtype,c,x);h=n.makeTensorInfo(x,s.dtype);const $=n.texData.get(h.dataId);$.values=w}else h=T0(s,c,n);u=qr(u.length,a)}Ss("max",u,a);const[p,m]=Ys(h.shape,u);let g=p;o&&(g=Li(p,l));let y;if(d){const b=n.texData.get(h.dataId).values,x=Jye(b,ee(m),g,s.dtype);y=n.makeTensorInfo(g,s.dtype);const w=n.texData.get(y.dataId);w.values=x}else y=Wwe(h,m,g,n);return f&&n.disposeIntermediateTensorInfo(h),y}const Gwe={kernelName:Ice,backendName:"webgl",kernelFunc:xW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hwe=WE+`
  return max(a, b);
`,qwe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Cl+`
  return result;
`,Kwe=Jt({opSnippet:Hwe,packedOpSnippet:qwe,cpuKernelImpl:Qye}),Xwe={kernelName:HU,backendName:"webgl",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;tp(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;J(Ac(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=kc(s.shape,i,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Kt(c.inShape,c.outShape))return Yn({inputs:{x:s},backend:n});const f=new jd(c,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const Jwe={kernelName:Nce,backendName:"webgl",kernelFunc:Ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],f=Qh(s.shape,i,o,c,a,u,l),d=new HE(f,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const Zwe={kernelName:Ace,backendName:"webgl",kernelFunc:Qwe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eSe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class tSe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.front,d=u-1-e.padInfo.top,h=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=Qh(o.shape,a,l,f,u,c),h=new HE(d,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),m=new tSe(d),g=n.runWebGLProgram(m,[s,p],o.dtype);return n.disposeIntermediateTensorInfo(p),g}const rSe={kernelName:Oce,backendName:"webgl",kernelFunc:nSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;tp([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=kc(a.shape,l,u,1,c,f),h=!0,p=new jd(d,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new eSe(d),y=n.runWebGLProgram(g,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const iSe={kernelName:kce,backendName:"webgl",kernelFunc:sSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(t,e,n,r){let s=new jd(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new jd(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aSe={kernelName:Rce,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;J(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];J(Ac(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=kc(r.shape,s,i,u,o),[f,d]=oSe(r,a,c,l);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t,e,n,r){const s=ee(e),o=ee(t.shape)/s,a=Y({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=Il(a,"float32","mean",r),u=Y({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uSe={kernelName:Pce,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=An(i,r.shape);let u=l;const c=Hr(u,a),f=c!=null,d=o.shouldExecuteOnCPU([r]),h=[];let p=r;if(f){if(d){const x=o.texData.get(p.dataId).values,w=new Array(a);for(let T=0;T<w.length;T++)w[T]=r.shape[c[T]];const $=VE(x,r.shape,r.dtype,c,w);p=o.makeTensorInfo(w,r.dtype);const E=o.texData.get(p.dataId);E.values=$}else p=T0(r,c,o);h.push(p),u=qr(u.length,a)}Ss("sum",u,a);const[m,g]=Ys(p.shape,u);let y=m;s&&(y=Li(m,l));const v=lSe(p,g,y,o);for(const b of h)o.disposeIntermediateTensorInfo(b);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=An(i,s.shape);let u=l;const c=Hr(u,a);let f=s;c!=null&&(f=wn({inputs:{x:s},backend:n,attrs:{perm:c}}),u=qr(u.length,s.shape.length)),Ss("min",u,a);const[d,h]=Ys(f.shape,u),p=ee(h),m=Y({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Il(m,m.dtype,"min",n);let y;if(o){const v=Li(d,l);y=Y({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Y({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const fSe={kernelName:Dce,backendName:"webgl",kernelFunc:cSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dSe=WE+`
  return min(a, b);
`,hSe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Cl+`
  return result;
`,pSe=Jt({opSnippet:dSe,packedOpSnippet:hSe,cpuKernelImpl:Zye}),mSe={kernelName:Fce,backendName:"webgl",kernelFunc:pSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gSe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const s=e.length,i=Ue(s),o=n.map(c=>c[0]).join(","),a=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),u=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ySe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=Ue(s),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=gn("rc",s),u=gn("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${u.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[s-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=B().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ySe(r.shape,s,i):new gSe(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},bSe={kernelName:Lce,backendName:"webgl",kernelFunc:vSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xSe=`if (b == 0.0) return NAN;
  return mod(a, b);`,wSe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Cl+`
  return result;
`,SSe=Jt({opSnippet:xSe,packedOpSnippet:wSe}),$Se={kernelName:Mce,backendName:"webgl",kernelFunc:SSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ESe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TSe=`
if (a == b) {
  return 1.0;
};
return a / b;`,_Se=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,wW=Jt({opSnippet:TSe,packedOpSnippet:_Se,checkOutOfBounds:!0}),CSe={kernelName:UU,backendName:"webgl",kernelFunc:wW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _N="return a - b;",SW=Jt({opSnippet:_N,packedOpSnippet:_N,supportsComplex:!0,cpuKernelImpl:x0e}),ISe={kernelName:nz,backendName:"webgl",kernelFunc:SW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $W(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=An([i],s.shape),a=xW({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Li(a.shape,o),u=Y({inputs:{x:a},backend:n,attrs:{shape:l}}),c=SW({inputs:{a:s,b:u},backend:n}),f=yW({inputs:{x:c},backend:n}),d=_0({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),h=Y({inputs:{x:d},backend:n,attrs:{shape:l}}),p=wW({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}const NSe={kernelName:wfe,backendName:"webgl",kernelFunc:$W};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:$W({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=l.shape[0],c=l.shape[1],f=new ESe(u,c,i),d=[[o]],h=n.runWebGLProgram(f,[l],"int32",d);return a||n.disposeIntermediateTensorInfo(l),h}const ASe={kernelName:Bce,backendName:"webgl",kernelFunc:kSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OSe=Kr+`
  return -x;
`,RSe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function PSe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=t0e(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return B().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new fo(r.shape,RSe):s=new Os(r.shape,OSe),n.runWebGLProgram(s,[r],r.dtype)}const DSe={kernelName:jce,backendName:"webgl",kernelFunc:PSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSe=qhe;function LSe(t){os("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),{selectedIndices:f}=FSe(u,c,o,a,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const MSe={kernelName:zce,backendName:"webgl",kernelFunc:LSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe=Khe;function jSe(t){os("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(s.dataId),f=n.readSync(i.dataId),{selectedIndices:d,validOutputs:h}=BSe(c,f,o,a,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const USe={kernelName:Vce,backendName:"webgl",kernelFunc:jSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zSe=Xhe;function VSe(t){os("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),f=n.readSync(i.dataId),d=o,h=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=zSe(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const WSe={kernelName:Wce,backendName:"webgl",kernelFunc:VSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GSe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,u=ee(s.shape),c=new GSe(u,o,a,l),f=Y({inputs:{x:s},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[f],i);n.disposeIntermediateTensorInfo(f);const h=[...s.shape,o],p=Y({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),p},qSe={kernelName:Hce,backendName:"webgl",kernelFunc:HSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=rp({inputs:{input:r},backend:n}),i=zg({inputs:{x:s},backend:n}),o=C0({inputs:{input:r},backend:n}),a=zg({inputs:{x:o},backend:n}),l=Yo({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return sp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const KSe={kernelName:sz,backendName:"webgl",kernelFunc:zg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EW(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=rp({inputs:{input:r},backend:n}),i=EW({inputs:{x:s},backend:n}),o=C0({inputs:{input:r},backend:n}),a=zg({inputs:{x:o},backend:n}),l=Yo({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return sp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const XSe={kernelName:Gce,backendName:"webgl",kernelFunc:EW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return aw({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{PU(i,c.shape,"All tensors passed to stack must have matching shapes"),J(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const f=aw({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(f),f}),u=uW({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const JSe={kernelName:qce,backendName:"webgl",kernelFunc:YSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QSe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const s=e.length,i=Ue(s),o=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZSe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=Ue(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=gn("rc",s),u=gn("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${u.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${c}) {`],h=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=s===1?2:4;m<g;m++)p+=`
        ${d[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${f});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TW=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(ee(s.shape)===0){const u=i.map((c,f)=>c[0]+s.shape[f]+c[1]);return sp({backend:n,attrs:{shape:u,value:o,dtype:s.dtype}})}const a=B().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZSe(s.shape,i,o):new QSe(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},e2e={kernelName:Kce,backendName:"webgl",kernelFunc:TW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n2e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Cl+`
  return result;
`,r2e=Jt({opSnippet:t2e,packedOpSnippet:n2e}),s2e={kernelName:KU,backendName:"webgl",kernelFunc:r2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],u=An(i,s.shape);let c=u;const f=Hr(c,a);let d=s;f!=null&&(d=wn({inputs:{x:s},backend:n,attrs:{perm:f}}),c=qr(c.length,a),l.push(d)),Ss("prod",c,a);let h;if(n.shouldExecuteOnCPU([d])){const p=n.texData.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=r0e(d.shape,d.dtype,p,c);h=n.makeTensorInfo(g,y,m)}else{const[p,m]=Ys(d.shape,c),g=ee(m),y=Y({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=TE(s.dtype),b=Il(y,v,"prod",n);h=Y({inputs:{x:b},backend:n,attrs:{shape:p}}),l.push(y),l.push(b)}if(o){l.push(h);const p=Li(h.shape,u);h=Y({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const o2e={kernelName:Xce,backendName:"webgl",kernelFunc:i2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(y=>n.readSync(y.dataId)),u=s.map(y=>y.shape),c=n.readSync(i.dataId),f=n.readSync(o.dataId),[d,h,p]=s0e(l,u,c,i.shape,i.dtype,f,o.shape,a),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,i.dtype,h);return m.concat([g])}const l2e={kernelName:Yce,backendName:"webgl",kernelFunc:a2e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=i0e(o,r.shape,r.dtype,a,s.shape,l,i.shape),f=n.makeTensorInfo([u.length],"int32",u),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const c2e={kernelName:Jce,backendName:"webgl",kernelFunc:u2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),f=n.readSync(o.dataId),d=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,m]=o0e(u,s.shape,c,i.shape,i.dtype,f,o.shape,d,h,l);return n.makeTensorInfo(p,i.dtype,m)}const d2e={kernelName:Qce,backendName:"webgl",kernelFunc:f2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _W=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=a0e(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},h2e={kernelName:Zce,backendName:"webgl",kernelFunc:_W};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2e="return 1.0 / x;",m2e=Ce({opSnippet:p2e}),g2e={kernelName:tfe,backendName:"webgl",kernelFunc:m2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2e=Kr+`
  return (x < 0.0) ? 0.0 : x;
`,v2e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,b2e=Ce({opSnippet:y2e,packedOpSnippet:v2e}),x2e={kernelName:YU,backendName:"webgl",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e=Kr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,S2e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$2e=Ce({opSnippet:w2e,packedOpSnippet:S2e}),E2e={kernelName:QU,backendName:"webgl",kernelFunc:$2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T2e{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _2e{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=B().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _2e(s.shape,l,u,i,o):new T2e(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],"float32")}const I2e={kernelName:sfe,backendName:"webgl",kernelFunc:C2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N2e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new N2e(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const A2e={kernelName:ife,backendName:"webgl",kernelFunc:k2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O2e{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R2e{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=B().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new R2e(s.shape,l,u,i,o):new O2e(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],s.dtype)}const D2e={kernelName:nfe,backendName:"webgl",kernelFunc:P2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F2e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new F2e(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const M2e={kernelName:rfe,backendName:"webgl",kernelFunc:L2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B2e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=Ue(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j2e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=gn("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Ue(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${u(s.slice())};
          }
          if(${o}) {
            result.b = ${c(s.slice())};
            if(${i}) {
              result.a = ${f(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return d(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",d(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",d(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",d(p)}function d(p){const m=e.map((v,b)=>h(b,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=An(i,s.shape);if(o===0)return Yn({inputs:{x:s},backend:n});const l=B().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new j2e(s.shape,a):new B2e(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const z2e={kernelName:ofe,backendName:"webgl",kernelFunc:U2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V2e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e={kernelName:Vfe,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new V2e(r.shape,i),[u,c]=rV(o,r.shape[1],r.shape[2]),f=[[u,c,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G2e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,H2e=Ce({opSnippet:G2e}),q2e={kernelName:afe,backendName:"webgl",kernelFunc:H2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2e="return inversesqrt(x);",X2e=Ce({opSnippet:K2e,cpuKernelImpl:l0e}),Y2e={kernelName:lfe,backendName:"webgl",kernelFunc:X2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qE{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=Ue(i.length),c=Ue(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";s===1?h="i":s===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J2e{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=Ue(i.length),c=Ue(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";s===1?h="i":s===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=w0(i,s,o),d=[f/u,u];if(f===0)return n.makeTensorInfo(o,s.dtype);const h=Y({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=Y({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;B().getBool("WEBGL_PACK")?g=new J2e(l,a,h.shape.length,p.shape.length,c,d):g=new qE(l,a,h.shape.length,p.shape.length,c,d);const y=n.runWebGLProgram(g,[p,h,m],p.dtype),v=Y({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const Z2e={kernelName:ufe,backendName:"webgl",kernelFunc:Q2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e$e{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=B().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new e$e(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const n$e={kernelName:ffe,backendName:"webgl",kernelFunc:t$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r$e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);s=l.join(),i=u.join()}const o=Ue(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new r$e(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],Ks(s.dtype,i.dtype))}const i$e={kernelName:dfe,backendName:"webgl",kernelFunc:s$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${oV};
  float scale = ${aV};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,a$e=Ce({opSnippet:o$e}),l$e={kernelName:hfe,backendName:"webgl",kernelFunc:a$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u$e=Bc+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,c$e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,f$e=Ce({opSnippet:u$e,packedOpSnippet:c$e,cpuKernelImpl:c0e}),d$e={kernelName:ZU,backendName:"webgl",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h$e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,p$e=Ce({opSnippet:h$e}),m$e={kernelName:yfe,backendName:"webgl",kernelFunc:p$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$e=Bc+`
  return sin(x);
`,y$e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Cl}
  return result;
`,v$e=Ce({opSnippet:g$e,packedOpSnippet:y$e}),b$e={kernelName:mfe,backendName:"webgl",kernelFunc:v$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,w$e=Ce({opSnippet:x$e}),S$e={kernelName:gfe,backendName:"webgl",kernelFunc:w$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $$e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,E$e=Ce({opSnippet:$$e}),T$e={kernelName:vfe,backendName:"webgl",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;J(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((y,v)=>y*v),l=[[0,0]];l.push(...o);for(let y=1+i.length;y<s.shape.length;++y)l.push([0,0]);const u=[],c=TW({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),f=FE(c.shape,i,a,!1),d=LE(f.length,i.length,!1),h=ME(c.shape,i,a,!1),p=Y({inputs:{x:c},backend:n,attrs:{shape:f}}),m=wn({inputs:{x:p},backend:n,attrs:{perm:d}}),g=Y({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},C$e={kernelName:bfe,backendName:"webgl",kernelFunc:_$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[f,d,h,p,m]=d0e(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],s.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const N$e={kernelName:Sfe,backendName:"webgl",kernelFunc:I$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,f]=h0e(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const A$e={kernelName:$fe,backendName:"webgl",kernelFunc:k$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=YV(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const R$e={kernelName:Efe,backendName:"webgl",kernelFunc:O$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=YV(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const D$e={kernelName:Tfe,backendName:"webgl",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=w0(i,s,a),h=!1;if(i.dtype==="string"){const y=n.bufferSync(s),v=n.bufferSync(i),b=Hu(n.readSync(o.dataId)[0]),x=u0e(y,v,a,d,c,u,l,f,b,h);return n.makeTensorInfo(a,x.dtype,x.values)}const p=new qE(u,l,s.shape.length,i.shape.length,f,[d,1],h),m=n.runWebGLProgram(p,[i,s,o],i.dtype),g=Y({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const L$e={kernelName:_fe,backendName:"webgl",kernelFunc:F$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=An(o,s.shape)[0],l=bV(s,i,a),u=s.shape.length,c=new Array(u).fill(0),f=s.shape.slice();return l.map(d=>{const h=[...f];h[a]=d;const p=jc({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,p})}const B$e={kernelName:xfe,backendName:"webgl",kernelFunc:M$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CN="return sqrt(x);",j$e=Ce({opSnippet:CN,packedOpSnippet:CN,cpuKernelImpl:p0e}),U$e={kernelName:ez,backendName:"webgl",kernelFunc:j$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z$e="return x * x;",V$e=Ce({opSnippet:z$e}),W$e={kernelName:Ife,backendName:"webgl",kernelFunc:V$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IN="return (a - b) * (a - b);",G$e=Jt({opSnippet:IN,packedOpSnippet:IN}),H$e={kernelName:Cfe,backendName:"webgl",kernelFunc:G$e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=Xu(i),a=m0e(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const K$e={kernelName:Nfe,backendName:"webgl",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Kr+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Os(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const Y$e={kernelName:iz,backendName:"webgl",kernelFunc:X$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J$e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=Ue(r.length),o=Ue(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=Jz(s.shape,i,o,a,l,u,c,f,d);let w;if(m)w=Y({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){J(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const E=Uz(v,b,x),T=jc({inputs:{x:s},backend:n,attrs:{begin:v,size:E}});w=Y({inputs:{x:T},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([s])){const T=n.readSync(s.dataId),N=Xt(s.shape,s.dtype,T),I=g0e(h,N,x,v);w=n.makeTensorInfo(p,s.dtype,I.values)}else{const T=new J$e(v,x,h);w=n.runWebGLProgram(T,[s],s.dtype)}const $=Y({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),$}const Z$e={kernelName:kfe,backendName:"webgl",kernelFunc:Q$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[p,m]=y0e(d,h,s,i,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const tEe={kernelName:Afe,backendName:"webgl",kernelFunc:eEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,f]=v0e(a,l,s),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const rEe={kernelName:Ofe,backendName:"webgl",kernelFunc:nEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=b0e(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const iEe={kernelName:Rfe,backendName:"webgl",kernelFunc:sEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oEe="return tan(x);",aEe=Ce({opSnippet:oEe}),lEe={kernelName:Pfe,backendName:"webgl",kernelFunc:aEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uEe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,cEe=Ce({opSnippet:uEe}),fEe={kernelName:Dfe,backendName:"webgl",kernelFunc:cEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=w0(o,i,s.shape),d=[f/u,u];if(f===0)return n.makeTensorInfo(s.shape,i.dtype);const h=Y({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=Y({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=Y({inputs:{x:s},backend:n,attrs:{shape:d}}),g=new qE(l,a,h.shape.length,p.shape.length,c,d,!1,!0),y=n.runWebGLProgram(g,[p,h,m],m.dtype),v=Y({inputs:{x:y},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const hEe={kernelName:cfe,backendName:"webgl",kernelFunc:dEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pEe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=Ue(this.rank),i=mEe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function mEe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),u=s.dtype==="string"?l.map(d=>Hu(d)):l,c=Xt(s.shape,s.dtype,u),f=w0e(c,i);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new pEe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const gEe={kernelName:rz,backendName:"webgl",kernelFunc:CW};class yEe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class vEe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ia(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function NN(t){let e=1;for(;e<t;)e*=2;return e}function bEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=B().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=B().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=s.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([s])||c<a||i>l){const I=n.readSync(s.dataId),[R,P]=S0e(I,u,s.dtype,i,o);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,s.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[s,sp({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const f=n.texData.get(s.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(s):s,m=ee(u)/c,g=Y({inputs:{x:h},attrs:{shape:[m,c]},backend:n});d&&ia(n,h);const y=NN(i),v=NN(c);let b=null;const x=()=>b===null?[g,g]:[g,b],w=(I,R,P)=>{const M=x(),j=new yEe(P),G=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[I],[R]],K=b;b=n.runWebGLProgram(j,M,"int32",G),ia(n,K)};for(let I=1;I<y;I*=2){const R=I*2;for(let P=I;P>=1;P/=2)w(R,P,[m,v])}for(let I=v;I>y;I/=2){const R=x(),P=new vEe([m,I/2]),j=[[c],[b===null?1:0],[y]],W=b;b=n.runWebGLProgram(P,R,"int32",j),ia(n,W);const G=y/2,K=G*2;for(let L=G;L>=1;L/=2)w(K,L,b.shape)}let $=b;b=jc({inputs:{x:b},backend:n,attrs:{begin:0,size:[m,i]}}),ia(n,$);let E=bW({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});ia(n,g);const T=u.slice(0,-1);T.push(i),$=b,b=Y({inputs:{x:b},attrs:{shape:T},backend:n}),ia(n,$);const N=E;return E=Y({inputs:{x:E},attrs:{shape:T},backend:n}),ia(n,N),[E,b]}const xEe={kernelName:Ffe,backendName:"webgl",kernelFunc:bEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wEe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[c,f,d,h]=s.shape,[p,m]=u??[f,d],g=[c,p,m,h],y=new wEe(f,d,o,a,l,g);return n.runWebGLProgram(y,[s,i],"float32")}const $Ee={kernelName:Lfe,backendName:"webgl",kernelFunc:SEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;tp(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:u}=$0e(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const TEe={kernelName:Bfe,backendName:"webgl",kernelFunc:EEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==i&&(u[c++]=o.shape[m]);const f=[],d=new Array(a).fill(0),h=o.shape.slice();h[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){d[i]=m;const g=jc({inputs:{x:o},backend:n,attrs:{begin:d,size:h}}),y=Y({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,f.push(g)}return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const CEe={kernelName:jfe,backendName:"webgl",kernelFunc:_Ee};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IEe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let u=0;const c=Hr([u],a);let f=s;c!=null&&(f=wn({inputs:{x:s},backend:n,attrs:{perm:c}}),l.push(f),u=qr(1,a)[0]);const d=OV(f.shape,u,o),h=ee([f.shape[u]]),p=Y({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=TE(s.dtype),g=(x,w,$,E,T)=>{const N=x.shape[0],I=x.shape[1],R=AV(I,T),P={windowSize:R,inSize:I,batchSize:N,numSegments:T},M=new IEe(P,w),j=n.compileAndRun(M,[x,$],E);if(l.push(j),j.shape[1]===T)return j;const W=_W({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),G=CW({inputs:{x:W},backend:n,attrs:{reps:[I/R]}});return l.push(W),l.push(G),g(j,w,G,E,T)},y=g(p,"unsortedSegmentSum",i,m,o),v=Y({inputs:{x:y},backend:n,attrs:{shape:d}});let b=v;if(c!=null){l.push(v);const x=kE(c);b=wn({inputs:{x:b},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const kEe={kernelName:Ufe,backendName:"webgl",kernelFunc:NEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AEe=[pve,gve,bve,Sve,Eve,Cve,Nve,Ave,Dve,Lve,jve,Vve,Hve,Yve,Zve,t1e,r1e,a1e,u1e,f1e,m1e,S1e,E1e,I1e,k1e,F1e,M1e,z1e,J0e,G1e,Y1e,ebe,obe,ube,fbe,hbe,mbe,bbe,Sbe,Tbe,Cbe,Nbe,Abe,Pbe,Fbe,jbe,zbe,Gbe,Kbe,Ybe,exe,sxe,lxe,fxe,pxe,mxe,yxe,bxe,wxe,$xe,Txe,Nxe,Oxe,Dxe,Lxe,jxe,Vxe,qxe,Jxe,Y0e,Zxe,K1e,nwe,iwe,lwe,Z0e,dwe,gwe,vwe,Swe,Twe,Nwe,Owe,Fwe,jwe,Vwe,Gwe,Xwe,Jwe,Zwe,rSe,iSe,aSe,uSe,fSe,mSe,bSe,$Se,ASe,nve,DSe,MSe,USe,WSe,O1e,qSe,XSe,JSe,e2e,s2e,tve,o2e,l2e,c2e,d2e,h2e,R1e,CSe,g2e,x2e,E2e,sve,I2e,A2e,D2e,M2e,z2e,W2e,q2e,Y2e,Z2e,n$e,i$e,l$e,d$e,m$e,b$e,S$e,x1e,NSe,T$e,C$e,N$e,A$e,R$e,D$e,L$e,B$e,U$e,W$e,H$e,K$e,Y$e,Z$e,tEe,rEe,iEe,ISe,fve,lEe,fEe,hEe,gEe,xEe,$Ee,dve,TEe,CEe,kEe,KSe];for(const t of AEe)Xfe(t);function IW(t,e){return function(){return t.apply(e,arguments)}}const{toString:OEe}=Object.prototype,{getPrototypeOf:KE}=Object,I0=(t=>e=>{const n=OEe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$s=t=>(t=t.toLowerCase(),e=>I0(e)===t),N0=t=>e=>typeof e===t,{isArray:Uc}=Array,zd=N0("undefined");function REe(t){return t!==null&&!zd(t)&&t.constructor!==null&&!zd(t.constructor)&&jr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const NW=$s("ArrayBuffer");function PEe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&NW(t.buffer),e}const DEe=N0("string"),jr=N0("function"),kW=N0("number"),k0=t=>t!==null&&typeof t=="object",FEe=t=>t===!0||t===!1,Nm=t=>{if(I0(t)!=="object")return!1;const e=KE(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},LEe=$s("Date"),MEe=$s("File"),BEe=$s("Blob"),jEe=$s("FileList"),UEe=t=>k0(t)&&jr(t.pipe),zEe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||jr(t.append)&&((e=I0(t))==="formdata"||e==="object"&&jr(t.toString)&&t.toString()==="[object FormData]"))},VEe=$s("URLSearchParams"),[WEe,GEe,HEe,qEe]=["ReadableStream","Request","Response","Headers"].map($s),KEe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ip(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Uc(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function AW(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const OW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,RW=t=>!zd(t)&&t!==OW;function lw(){const{caseless:t}=RW(this)&&this||{},e={},n=(r,s)=>{const i=t&&AW(e,s)||s;Nm(e[i])&&Nm(r)?e[i]=lw(e[i],r):Nm(r)?e[i]=lw({},r):Uc(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ip(arguments[r],n);return e}const XEe=(t,e,n,{allOwnKeys:r}={})=>(ip(e,(s,i)=>{n&&jr(s)?t[i]=IW(s,n):t[i]=s},{allOwnKeys:r}),t),YEe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),JEe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},QEe=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&KE(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},ZEe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},eTe=t=>{if(!t)return null;if(Uc(t))return t;let e=t.length;if(!kW(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},tTe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&KE(Uint8Array)),nTe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},rTe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},sTe=$s("HTMLFormElement"),iTe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),kN=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),oTe=$s("RegExp"),PW=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ip(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},aTe=t=>{PW(t,(e,n)=>{if(jr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(jr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},lTe=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Uc(t)?r(t):r(String(t).split(e)),n},uTe=()=>{},cTe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,w1="abcdefghijklmnopqrstuvwxyz",AN="0123456789",DW={DIGIT:AN,ALPHA:w1,ALPHA_DIGIT:w1+w1.toUpperCase()+AN},fTe=(t=16,e=DW.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function dTe(t){return!!(t&&jr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const hTe=t=>{const e=new Array(10),n=(r,s)=>{if(k0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Uc(r)?[]:{};return ip(r,(o,a)=>{const l=n(o,s+1);!zd(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},pTe=$s("AsyncFunction"),mTe=t=>t&&(k0(t)||jr(t))&&jr(t.then)&&jr(t.catch),U={isArray:Uc,isArrayBuffer:NW,isBuffer:REe,isFormData:zEe,isArrayBufferView:PEe,isString:DEe,isNumber:kW,isBoolean:FEe,isObject:k0,isPlainObject:Nm,isReadableStream:WEe,isRequest:GEe,isResponse:HEe,isHeaders:qEe,isUndefined:zd,isDate:LEe,isFile:MEe,isBlob:BEe,isRegExp:oTe,isFunction:jr,isStream:UEe,isURLSearchParams:VEe,isTypedArray:tTe,isFileList:jEe,forEach:ip,merge:lw,extend:XEe,trim:KEe,stripBOM:YEe,inherits:JEe,toFlatObject:QEe,kindOf:I0,kindOfTest:$s,endsWith:ZEe,toArray:eTe,forEachEntry:nTe,matchAll:rTe,isHTMLForm:sTe,hasOwnProperty:kN,hasOwnProp:kN,reduceDescriptors:PW,freezeMethods:aTe,toObjectSet:lTe,toCamelCase:iTe,noop:uTe,toFiniteNumber:cTe,findKey:AW,global:OW,isContextDefined:RW,ALPHABET:DW,generateString:fTe,isSpecCompliantForm:dTe,toJSONObject:hTe,isAsyncFn:pTe,isThenable:mTe};function ve(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}U.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const FW=ve.prototype,LW={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{LW[t]={value:t}});Object.defineProperties(ve,LW);Object.defineProperty(FW,"isAxiosError",{value:!0});ve.from=(t,e,n,r,s,i)=>{const o=Object.create(FW);return U.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ve.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const gTe=null;function uw(t){return U.isPlainObject(t)||U.isArray(t)}function MW(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function ON(t,e,n){return t?t.concat(e).map(function(s,i){return s=MW(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function yTe(t){return U.isArray(t)&&!t.some(uw)}const vTe=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function A0(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!U.isUndefined(g[m])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(U.isDate(p))return p.toISOString();if(!l&&U.isBlob(p))throw new ve("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(p)||U.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(U.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(U.isArray(p)&&yTe(p)||(U.isFileList(p)||U.endsWith(m,"[]"))&&(y=U.toArray(p)))return m=MW(m),y.forEach(function(b,x){!(U.isUndefined(b)||b===null)&&e.append(o===!0?ON([m],x,i):o===null?m:m+"[]",u(b))}),!1}return uw(p)?!0:(e.append(ON(g,m,i),u(p)),!1)}const f=[],d=Object.assign(vTe,{defaultVisitor:c,convertValue:u,isVisitable:uw});function h(p,m){if(!U.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),U.forEach(p,function(y,v){(!(U.isUndefined(y)||y===null)&&s.call(e,y,U.isString(v)?v.trim():v,m,d))===!0&&h(y,m?m.concat(v):[v])}),f.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return h(t),e}function RN(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function XE(t,e){this._pairs=[],t&&A0(t,this,e)}const BW=XE.prototype;BW.append=function(e,n){this._pairs.push([e,n])};BW.toString=function(e){const n=e?function(r){return e.call(this,r,RN)}:RN;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function bTe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jW(t,e,n){if(!e)return t;const r=n&&n.encode||bTe,s=n&&n.serialize;let i;if(s?i=s(e,n):i=U.isURLSearchParams(e)?e.toString():new XE(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class PN{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const UW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xTe=typeof URLSearchParams<"u"?URLSearchParams:XE,wTe=typeof FormData<"u"?FormData:null,STe=typeof Blob<"u"?Blob:null,$Te={isBrowser:!0,classes:{URLSearchParams:xTe,FormData:wTe,Blob:STe},protocols:["http","https","file","blob","url","data"]},YE=typeof window<"u"&&typeof document<"u",ETe=(t=>YE&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),TTe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_Te=YE&&window.location.href||"http://localhost",CTe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:YE,hasStandardBrowserEnv:ETe,hasStandardBrowserWebWorkerEnv:TTe,origin:_Te},Symbol.toStringTag,{value:"Module"})),ps={...CTe,...$Te};function ITe(t,e){return A0(t,new ps.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return ps.isNode&&U.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function NTe(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kTe(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function zW(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&U.isArray(s)?s.length:o,l?(U.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!U.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&U.isArray(s[o])&&(s[o]=kTe(s[o])),!a)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(r,s)=>{e(NTe(r),s,n,0)}),n}return null}function ATe(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const op={transitional:UW,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=U.isObject(e);if(i&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return s?JSON.stringify(zW(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ITe(e,this.formSerializer).toString();if((a=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return A0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),ATe(e)):e}],transformResponse:[function(e){const n=this.transitional||op.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ve.from(a,ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ps.classes.FormData,Blob:ps.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{op.headers[t]={}});const OTe=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RTe=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&OTe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},DN=Symbol("internals");function pf(t){return t&&String(t).trim().toLowerCase()}function km(t){return t===!1||t==null?t:U.isArray(t)?t.map(km):String(t)}function PTe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const DTe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function S1(t,e,n,r,s){if(U.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function FTe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function LTe(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class Kn{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,u){const c=pf(l);if(!c)throw new Error("header name must be a non-empty string");const f=U.findKey(s,c);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||l]=km(a))}const o=(a,l)=>U.forEach(a,(u,c)=>i(u,c,l));if(U.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(U.isString(e)&&(e=e.trim())&&!DTe(e))o(RTe(e),n);else if(U.isHeaders(e))for(const[a,l]of e.entries())i(l,a,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=pf(e),e){const r=U.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return PTe(s);if(U.isFunction(n))return n.call(this,s,r);if(U.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=pf(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||S1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=pf(o),o){const a=U.findKey(r,o);a&&(!n||S1(r,r[a],a,n))&&(delete r[a],s=!0)}}return U.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||S1(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return U.forEach(this,(s,i)=>{const o=U.findKey(r,i);if(o){n[o]=km(s),delete n[i];return}const a=e?FTe(i):String(i).trim();a!==i&&delete n[i],n[a]=km(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&U.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[DN]=this[DN]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=pf(o);r[a]||(LTe(s,o),r[a]=!0)}return U.isArray(e)?e.forEach(i):i(e),this}}Kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(Kn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});U.freezeMethods(Kn);function $1(t,e){const n=this||op,r=e||n,s=Kn.from(r.headers);let i=r.data;return U.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function VW(t){return!!(t&&t.__CANCEL__)}function zc(t,e,n){ve.call(this,t??"canceled",ve.ERR_CANCELED,e,n),this.name="CanceledError"}U.inherits(zc,ve,{__CANCEL__:!0});function WW(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ve("Request failed with status code "+n.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function MTe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function BTe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[i];o||(o=u),n[s]=l,r[s]=u;let f=i,d=0;for(;f!==s;)d+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const h=c&&u-c;return h?Math.round(d*1e3/h):void 0}}function jTe(t,e){let n=0;const r=1e3/e;let s=null;return function(){const o=this===!0,a=Date.now();if(o||a-n>r)return s&&(clearTimeout(s),s=null),n=a,t.apply(null,arguments);s||(s=setTimeout(()=>(s=null,n=Date.now(),t.apply(null,arguments)),r-(a-n)))}}const Vg=(t,e,n=3)=>{let r=0;const s=BTe(50,250);return jTe(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,u=s(l),c=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i,lengthComputable:a!=null};f[e?"download":"upload"]=!0,t(f)},n)},UTe=ps.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=U.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),zTe=ps.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];U.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),U.isString(r)&&o.push("path="+r),U.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function VTe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function WTe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function GW(t,e){return t&&!VTe(e)?WTe(t,e):e}const FN=t=>t instanceof Kn?{...t}:t;function hl(t,e){e=e||{};const n={};function r(u,c,f){return U.isPlainObject(u)&&U.isPlainObject(c)?U.merge.call({caseless:f},u,c):U.isPlainObject(c)?U.merge({},c):U.isArray(c)?c.slice():c}function s(u,c,f){if(U.isUndefined(c)){if(!U.isUndefined(u))return r(void 0,u,f)}else return r(u,c,f)}function i(u,c){if(!U.isUndefined(c))return r(void 0,c)}function o(u,c){if(U.isUndefined(c)){if(!U.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,f){if(f in e)return r(u,c);if(f in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>s(FN(u),FN(c),!0)};return U.forEach(Object.keys(Object.assign({},t,e)),function(c){const f=l[c]||s,d=f(t[c],e[c],c);U.isUndefined(d)&&f!==a||(n[c]=d)}),n}const HW=t=>{const e=hl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=Kn.from(o),e.url=jW(GW(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(U.isFormData(n)){if(ps.hasStandardBrowserEnv||ps.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(ps.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&UTe(e.url))){const u=s&&i&&zTe.read(i);u&&o.set(s,u)}return e},GTe=typeof XMLHttpRequest<"u",HTe=GTe&&function(t){return new Promise(function(n,r){const s=HW(t);let i=s.data;const o=Kn.from(s.headers).normalize();let{responseType:a}=s,l;function u(){s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let c=new XMLHttpRequest;c.open(s.method.toUpperCase(),s.url,!0),c.timeout=s.timeout;function f(){if(!c)return;const h=Kn.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:h,config:t,request:c};WW(function(y){n(y),u()},function(y){r(y),u()},m),c=null}"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(f)},c.onabort=function(){c&&(r(new ve("Request aborted",ve.ECONNABORTED,s,c)),c=null)},c.onerror=function(){r(new ve("Network Error",ve.ERR_NETWORK,s,c)),c=null},c.ontimeout=function(){let p=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const m=s.transitional||UW;s.timeoutErrorMessage&&(p=s.timeoutErrorMessage),r(new ve(p,m.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,s,c)),c=null},i===void 0&&o.setContentType(null),"setRequestHeader"in c&&U.forEach(o.toJSON(),function(p,m){c.setRequestHeader(m,p)}),U.isUndefined(s.withCredentials)||(c.withCredentials=!!s.withCredentials),a&&a!=="json"&&(c.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&c.addEventListener("progress",Vg(s.onDownloadProgress,!0)),typeof s.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Vg(s.onUploadProgress)),(s.cancelToken||s.signal)&&(l=h=>{c&&(r(!h||h.type?new zc(null,t,c):h),c.abort(),c=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const d=MTe(s.url);if(d&&ps.protocols.indexOf(d)===-1){r(new ve("Unsupported protocol "+d+":",ve.ERR_BAD_REQUEST,t));return}c.send(i||null)})},qTe=(t,e)=>{let n=new AbortController,r;const s=function(l){if(!r){r=!0,o();const u=l instanceof Error?l:this.reason;n.abort(u instanceof ve?u:new zc(u instanceof Error?u.message:u))}};let i=e&&setTimeout(()=>{s(new ve(`timeout ${e} of ms exceeded`,ve.ETIMEDOUT))},e);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",s):l.unsubscribe(s))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",s));const{signal:a}=n;return a.unsubscribe=o,[a,()=>{i&&clearTimeout(i),i=null}]},KTe=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},XTe=async function*(t,e,n){for await(const r of t)yield*KTe(ArrayBuffer.isView(r)?r:await n(String(r)),e)},LN=(t,e,n,r,s)=>{const i=XTe(t,e,s);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:u}=await i.next();if(l){a.close(),r();return}let c=u.byteLength;n&&n(o+=c),a.enqueue(new Uint8Array(u))},cancel(a){return r(a),i.return()}},{highWaterMark:2})},MN=(t,e)=>{const n=t!=null;return r=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:r}))},O0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qW=O0&&typeof ReadableStream=="function",cw=O0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),YTe=qW&&(()=>{let t=!1;const e=new Request(ps.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),BN=64*1024,fw=qW&&!!(()=>{try{return U.isReadableStream(new Response("").body)}catch{}})(),Wg={stream:fw&&(t=>t.body)};O0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Wg[e]&&(Wg[e]=U.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ve(`Response type '${e}' is not supported`,ve.ERR_NOT_SUPPORT,r)})})})(new Response);const JTe=async t=>{if(t==null)return 0;if(U.isBlob(t))return t.size;if(U.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(U.isArrayBufferView(t))return t.byteLength;if(U.isURLSearchParams(t)&&(t=t+""),U.isString(t))return(await cw(t)).byteLength},QTe=async(t,e)=>{const n=U.toFiniteNumber(t.getContentLength());return n??JTe(e)},ZTe=O0&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:f="same-origin",fetchOptions:d}=HW(t);u=u?(u+"").toLowerCase():"text";let[h,p]=s||i||o?qTe([s,i],o):[],m,g;const y=()=>{!m&&setTimeout(()=>{h&&h.unsubscribe()}),m=!0};let v;try{if(l&&YTe&&n!=="get"&&n!=="head"&&(v=await QTe(c,r))!==0){let $=new Request(e,{method:"POST",body:r,duplex:"half"}),E;U.isFormData(r)&&(E=$.headers.get("content-type"))&&c.setContentType(E),$.body&&(r=LN($.body,BN,MN(v,Vg(l)),null,cw))}U.isString(f)||(f=f?"cors":"omit"),g=new Request(e,{...d,signal:h,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",withCredentials:f});let b=await fetch(g);const x=fw&&(u==="stream"||u==="response");if(fw&&(a||x)){const $={};["status","statusText","headers"].forEach(T=>{$[T]=b[T]});const E=U.toFiniteNumber(b.headers.get("content-length"));b=new Response(LN(b.body,BN,a&&MN(E,Vg(a,!0)),x&&y,cw),$)}u=u||"text";let w=await Wg[U.findKey(Wg,u)||"text"](b,t);return!x&&y(),p&&p(),await new Promise(($,E)=>{WW($,E,{data:w,headers:Kn.from(b.headers),status:b.status,statusText:b.statusText,config:t,request:g})})}catch(b){throw y(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new ve("Network Error",ve.ERR_NETWORK,t,g),{cause:b.cause||b}):ve.from(b,b&&b.code,t,g)}}),dw={http:gTe,xhr:HTe,fetch:ZTe};U.forEach(dw,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const jN=t=>`- ${t}`,e_e=t=>U.isFunction(t)||t===null||t===!1,KW={getAdapter:t=>{t=U.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!e_e(n)&&(r=dw[(o=String(n)).toLowerCase()],r===void 0))throw new ve(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(jN).join(`
`):" "+jN(i[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:dw};function E1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zc(null,t)}function UN(t){return E1(t),t.headers=Kn.from(t.headers),t.data=$1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),KW.getAdapter(t.adapter||op.adapter)(t).then(function(r){return E1(t),r.data=$1.call(t,t.transformResponse,r),r.headers=Kn.from(r.headers),r},function(r){return VW(r)||(E1(t),r&&r.response&&(r.response.data=$1.call(t,t.transformResponse,r.response),r.response.headers=Kn.from(r.response.headers))),Promise.reject(r)})}const XW="1.7.2",JE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{JE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const zN={};JE.transitional=function(e,n,r){function s(i,o){return"[Axios v"+XW+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new ve(s(o," has been removed"+(n?" in "+n:"")),ve.ERR_DEPRECATED);return n&&!zN[o]&&(zN[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function t_e(t,e,n){if(typeof t!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new ve("option "+i+" must be "+l,ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ve("Unknown option "+i,ve.ERR_BAD_OPTION)}}const hw={assertOptions:t_e,validators:JE},Hi=hw.validators;class za{constructor(e){this.defaults=e,this.interceptors={request:new PN,response:new PN}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hl(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&hw.assertOptions(r,{silentJSONParsing:Hi.transitional(Hi.boolean),forcedJSONParsing:Hi.transitional(Hi.boolean),clarifyTimeoutError:Hi.transitional(Hi.boolean)},!1),s!=null&&(U.isFunction(s)?n.paramsSerializer={serialize:s}:hw.assertOptions(s,{encode:Hi.function,serialize:Hi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&U.merge(i.common,i[n.method]);i&&U.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=Kn.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let c,f=0,d;if(!l){const p=[UN.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),d=p.length,c=Promise.resolve(n);f<d;)c=c.then(p[f++],p[f++]);return c}d=a.length;let h=n;for(f=0;f<d;){const p=a[f++],m=a[f++];try{h=p(h)}catch(g){m.call(this,g);break}}try{c=UN.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=u.length;f<d;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=hl(this.defaults,e);const n=GW(e.baseURL,e.url);return jW(n,e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(e){za.prototype[e]=function(n,r){return this.request(hl(r||{},{method:e,url:n,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(hl(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}za.prototype[e]=n(),za.prototype[e+"Form"]=n(!0)});class QE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new zc(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new QE(function(s){e=s}),cancel:e}}}function n_e(t){return function(n){return t.apply(null,n)}}function r_e(t){return U.isObject(t)&&t.isAxiosError===!0}const pw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pw).forEach(([t,e])=>{pw[e]=t});function YW(t){const e=new za(t),n=IW(za.prototype.request,e);return U.extend(n,za.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return YW(hl(t,s))},n}const Nt=YW(op);Nt.Axios=za;Nt.CanceledError=zc;Nt.CancelToken=QE;Nt.isCancel=VW;Nt.VERSION=XW;Nt.toFormData=A0;Nt.AxiosError=ve;Nt.Cancel=Nt.CanceledError;Nt.all=function(e){return Promise.all(e)};Nt.spread=n_e;Nt.isAxiosError=r_e;Nt.mergeConfig=hl;Nt.AxiosHeaders=Kn;Nt.formToJSON=t=>zW(U.isHTMLForm(t)?new FormData(t):t);Nt.getAdapter=KW.getAdapter;Nt.HttpStatusCode=pw;Nt.default=Nt;const s_e="/Project_S11_Domingo/assets/attach-icon-BpJhuQYk.svg",i_e="data:image/svg+xml,%3csvg%20id='Capa_1'%20enable-background='new%200%200%20512%20512'%20height='50'%20viewBox='0%200%2050%2050'%20width='50'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='M3.03%2017.273a0.755%200.755%200%200%200%20-0.755%200.755v14.548a0.755%200.755%200%200%200%201.509%200v-14.548a0.754%200.754%200%200%200%20-0.755%20-0.755'%20fill='%23dedde0'/%3e%3cpath%20d='M6.061%2041.667h1.515V29.546H6.061C2.713%2029.546%200%2032.259%200%2035.606c0%203.338%202.704%206.061%206.061%206.061'%20fill='%233b5a9b'/%3e%3cpath%20d='M40.909%2041.667h-1.515V29.546h1.515c3.347%200%206.061%202.713%206.061%206.061%200%203.338%20-2.704%206.061%20-6.061%206.061'%20fill='%235972a5'/%3e%3cpath%20d='M42.425%2035.606c0%207.928%20-6.423%2014.394%20-14.394%2014.394h-9.092C10.99%2050%204.546%2043.556%204.546%2035.606c0%20-10.431%208.451%20-18.939%2018.939%20-18.939%204.173%200%208.038%201.352%2011.173%203.646%204.704%203.441%207.767%209%207.767%2015.293'%20fill='%237888af'/%3e%3cpath%20d='M34.658%2020.313H33.201a1.511%201.511%200%200%200%20-1.068%200.442l-3.799%203.8c-0.951%200.951%20-2.577%200.277%20-2.577%20-1.068v-1.665c0%20-0.834%20-0.676%20-1.509%20-1.509%20-1.509h-1.544a6.013%206.013%200%200%201%20-3.509%20-1.125c-0.809%20-0.581%20-1.949%20-0.197%20-2.282%200.742%20-2.483%206.995%20-3.867%2019.114%208.26%2030.07h-6.233C10.99%2050%204.546%2043.556%204.546%2035.606c0%20-10.431%208.451%20-18.939%2018.939%20-18.939%204.173%200%208.038%201.352%2011.173%203.646'%20fill='%235972a5'/%3e%3cpath%20d='M37.879%2035.606c0%205.007%20-4.056%209.091%20-9.091%209.091H18.182c-5.022%200%20-9.092%20-4.07%20-9.092%20-9.091%200%20-4.023%202.618%20-7.449%206.259%20-8.641%200.89%20-0.292%201.842%20-0.45%202.832%20-0.45h10.606c5.021%200%209.091%204.07%209.091%209.091'%20fill='%23f4f4f5'/%3e%3cpath%20d='M20.353%2044.696h-2.17c-5.022%200%20-9.092%20-4.07%20-9.092%20-9.091%200%20-4.023%202.618%20-7.449%206.259%20-8.641%20-0.483%205.234%200.469%2011.507%205.003%2017.731'%20fill='%23dedde0'/%3e%3cpath%20d='M50%205.246v7.69c0%202.897%20-2.348%205.246%20-5.246%205.246h-11.553a1.511%201.511%200%200%200%20-1.068%200.442l-3.573%203.572c-0.475%200.476%20-1.288%200.139%20-1.288%20-0.533V19.691c0%20-0.834%20-0.676%20-1.509%20-1.509%20-1.509h-1.583c-3.313%200%20-5.999%20-2.686%20-5.999%20-6V5.246c0%20-2.898%202.348%20-5.246%205.245%20-5.246H44.754C47.652%200%2050%202.348%2050%205.246'%20fill='%23b4e9f1'/%3e%3cpath%20d='M34.557%2018.182H33.201a1.511%201.511%200%200%200%20-1.068%200.442l-3.573%203.572c-0.475%200.476%20-1.288%200.139%20-1.288%20-0.533v-1.971c0%20-0.834%20-0.676%20-1.509%20-1.509%20-1.509h-1.583c-3.313%200%20-5.999%20-2.686%20-5.999%20-6V5.246c0%20-2.898%202.348%20-5.246%205.245%20-5.246h7.137c-1.421%202.665%20-2.997%2012.29%203.993%2018.182'%20fill='%2381d8e7'/%3e%3cpath%20cx='31.03'%20cy='193.939'%20fill='%235972a5'%20r='23.273'%20d='M5.303%2018.939A2.273%202.273%200%200%201%203.03%2021.212A2.273%202.273%200%200%201%200.758%2018.939A2.273%202.273%200%200%201%205.303%2018.939z'/%3e%3cpath%20cx='349.091'%20cy='93.091'%20fill='%237888af'%20r='23.273'%20d='M36.364%209.091A2.273%202.273%200%200%201%2034.091%2011.364A2.273%202.273%200%200%201%2031.818%209.091A2.273%202.273%200%200%201%2036.364%209.091z'/%3e%3cpath%20cx='442.182'%20cy='93.091'%20fill='%237888af'%20r='23.273'%20d='M45.455%209.091A2.273%202.273%200%200%201%2043.182%2011.364A2.273%202.273%200%200%201%2040.909%209.091A2.273%202.273%200%200%201%2045.455%209.091z'/%3e%3cpath%20cx='256'%20cy='93.091'%20fill='%235972a5'%20r='23.273'%20d='M27.273%209.091A2.273%202.273%200%200%201%2025%2011.364A2.273%202.273%200%200%201%2022.727%209.091A2.273%202.273%200%200%201%2027.273%209.091z'/%3e%3cpath%20d='M18.228%2036.608c0.001%201.352%20-1.375%202.449%20-3.073%202.45s-3.075%20-1.094%20-3.075%20-2.446%201.375%20-2.449%203.073%20-2.45%203.075%201.095%203.075%202.447'%20fill='%23ffa1ac'/%3e%3cpath%20d='M28.742%2036.603c0.001%201.352%201.378%202.447%203.075%202.446%201.698%20-0.001%203.074%20-1.098%203.073%20-2.45s-1.378%20-2.447%20-3.075%20-2.447%20-3.074%201.098%20-3.073%202.45'%20fill='%23ffa1ac'/%3e%3cg%20fill='%23495560'%3e%3cpath%20d='M26.498%2035.497c-0.001%20-1.862%20-1.35%20-2.037%20-3.014%20-2.036s-3.013%200.176%20-3.012%202.039%201.351%203.371%203.015%203.37c1.664%20-0.001%203.013%20-1.511%203.012%20-3.373'/%3e%3cpath%20d='M15.48%2034.7a0.754%200.754%200%200%201%20-0.755%20-0.754c-0.001%20-1.226%200.991%20-2.218%202.217%20-2.219%201.222%20-0.001%202.218%200.993%202.219%202.217a0.754%200.754%200%200%201%20-0.754%200.755%200.754%200.754%200%200%201%20-0.755%20-0.754c0%20-0.633%20-0.768%20-0.943%20-1.21%20-0.5a0.703%200.703%200%200%200%20-0.207%200.501%200.755%200.755%200%200%201%20-0.755%200.755'/%3e%3cpath%20d='M28.56%2034.694a0.755%200.755%200%200%201%20-0.755%20-0.754c-0.001%20-1.223%200.994%20-2.218%202.217%20-2.219%201.226%20-0.001%202.218%200.991%202.219%202.217a0.755%200.755%200%201%201%20-1.509%200.001%200.708%200.708%200%200%200%20-0.709%20-0.708c-0.39%200%20-0.709%200.317%20-0.709%200.709%200%200.415%20-0.336%200.755%20-0.755%200.755'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o_e="/Project_S11_Domingo/assets/photo-icon-DdIXCds-.svg",a_e="data:image/svg+xml,%3csvg%20version='1.0'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='50px'%20height='50px'%20viewBox='0%200%204%204'%20enable-background='new%200%200%2064%2064'%20xml:space='preserve'%3e%3cg%3e%3cpath%20fill='%23F9EBB2'%20d='M2.313%203.334a1.25%201.25%200%200%201%20-0.125%200.025V3.75a0.125%200.125%200%200%201%20-0.125%200.125h-0.125a0.125%200.125%200%200%201%20-0.125%20-0.125v-0.39a1.313%201.313%200%200%201%20-0.125%20-0.025c-0.539%20-0.139%20-0.938%20-0.627%20-0.938%20-1.209a0.063%200.063%200%201%201%200.125%200C0.875%202.746%201.379%203.25%202%203.25s1.125%20-0.504%201.125%20-1.125a0.063%200.063%200%200%201%200.125%200c0%200.582%20-0.399%201.07%20-0.938%201.209'/%3e%3cpath%20fill='%2345AAB8'%20d='M1.25%201.938h0.313a0.063%200.063%200%201%200%200%20-0.125h-0.313v-0.25h0.313a0.063%200.063%200%201%200%200%20-0.125h-0.313v-0.25h0.313a0.063%200.063%200%201%200%200%20-0.125h-0.313v-0.188c0%20-0.414%200.336%20-0.75%200.75%20-0.75s0.75%200.336%200.75%200.75v0.188h-0.313a0.063%200.063%200%201%200%200%200.125h0.313v0.25h-0.313a0.063%200.063%200%201%200%200%200.125h0.313v0.25h-0.313a0.063%200.063%200%201%200%200%200.125h0.313v0.188c0%200.414%20-0.336%200.75%20-0.75%200.75s-0.75%20-0.336%20-0.75%20-0.75z'/%3e%3cg%3e%3cpath%20fill='%23394240'%20d='M2%203c0.483%200%200.875%20-0.392%200.875%20-0.875v-1.25c0%20-0.483%20-0.392%20-0.875%20-0.875%20-0.875s-0.875%200.392%20-0.875%200.875v1.25c0%200.483%200.392%200.875%200.875%200.875m-0.75%20-1.063h0.313a0.063%200.063%200%201%200%200%20-0.125h-0.313v-0.25h0.313a0.063%200.063%200%201%200%200%20-0.125h-0.313v-0.25h0.313a0.063%200.063%200%201%200%200%20-0.125h-0.313v-0.188c0%20-0.414%200.336%20-0.75%200.75%20-0.75s0.75%200.336%200.75%200.75v0.188h-0.313a0.063%200.063%200%201%200%200%200.125h0.313v0.25h-0.313a0.063%200.063%200%201%200%200%200.125h0.313v0.25h-0.313a0.063%200.063%200%201%200%200%200.125h0.313v0.188c0%200.414%20-0.336%200.75%20-0.75%200.75s-0.75%20-0.336%20-0.75%20-0.75z'/%3e%3cpath%20fill='%23394240'%20d='M3.188%201.938a0.188%200.188%200%200%200%20-0.188%200.187C3%202.677%202.552%203.125%202%203.125s-1%20-0.448%20-1%20-1a0.188%200.188%200%200%200%20-0.375%200c0%200.652%200.454%201.197%201.063%201.339V3.75a0.25%200.25%200%200%200%200.25%200.25h0.125a0.25%200.25%200%200%200%200.25%20-0.25v-0.286c0.609%20-0.142%201.063%20-0.687%201.063%20-1.339a0.188%200.188%200%200%200%20-0.188%20-0.187M2.313%203.334a1.25%201.25%200%200%201%20-0.125%200.025V3.75a0.125%200.125%200%200%201%20-0.125%200.125h-0.125a0.125%200.125%200%200%201%20-0.125%20-0.125v-0.39a1.313%201.313%200%200%201%20-0.125%20-0.025c-0.539%20-0.139%20-0.938%20-0.627%20-0.938%20-1.209a0.063%200.063%200%201%201%200.125%200C0.875%202.746%201.379%203.25%202%203.25s1.125%20-0.504%201.125%20-1.125a0.063%200.063%200%200%201%200.125%200c0%200.582%20-0.399%201.07%20-0.938%201.209'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",l_e="data:image/svg+xml,%3csvg%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='50px'%20height='50px'%20viewBox='0%200%2064%2064'%20class='icon'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M32%2064C14.356%2064%200%2049.644%200%2032S14.356%200%2032%200s32%2014.356%2032%2032%20-14.356%2032%20-32%2032m0%20-58.669C17.294%205.331%205.331%2017.294%205.331%2032S17.294%2058.669%2032%2058.669%2058.669%2046.706%2058.669%2032%2046.706%205.331%2032%205.331'%20fill='%233688FF'/%3e%3cpath%20d='M27.175%2043.013c-0.463%200%20-0.919%20-0.119%20-1.331%20-0.356%20-0.825%20-0.475%20-1.331%20-1.356%20-1.331%20-2.313V24c0%20-0.95%200.506%20-1.831%201.331%20-2.313%200.825%20-0.475%201.844%20-0.475%202.669%200l14.156%208.175c0.825%200.475%201.331%201.356%201.331%202.313%200%200.95%20-0.506%201.831%20-1.331%202.313L28.506%2042.656c-0.412%200.244%20-0.869%200.356%20-1.331%200.356m2.669%20-14.394v7.112l6.156%20-3.556z'%20fill='%235F6379'/%3e%3c/svg%3e",VN="/Project_S11_Domingo/assets/user-icon-DG05bf6d.svg",u_e="AIzaSyCF02A7uVq2uvAhpjgm_x15B2B2JPGABXo",c_e="https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent",f_e=()=>{const[t,e]=D.useState(null),[n,r]=D.useState([]),[s,i]=D.useState(""),[o,a]=D.useState(!1),l=D.useRef(null),[u,c]=D.useState("chat"),f=D.useRef(null),d=D.useRef(null),[h,p]=D.useState(!1),[m,g]=D.useState(null),[y,v]=D.useState(!1);D.useEffect(()=>{const N=H2(Fu,I=>{e(I||null)});return()=>N()},[]),D.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth"})},[n]),D.useEffect(()=>{u!=="deteccion"&&h&&w()},[u]);const b=async N=>{if(N.preventDefault(),s.trim()){const I={text:s,sender:"user",photoURL:t==null?void 0:t.photoURL};r([...n,I]),i(""),a(!0);try{const P={text:(await Nt.post(`${c_e}?key=${u_e}`,{contents:[{parts:[{text:s}]}]})).data.candidates[0].content.parts[0].text,sender:"bot"};r(M=>[...M,P])}catch(R){console.error("Error fetching response from GoogleStudio:",R);const P={text:"Oops! There was an error contacting the bot.",sender:"bot"};r(M=>[...M,P])}a(!1)}},x=async()=>{p(!0);const N=await OU.load(),I={video:{facingMode:y?{exact:"environment"}:"user"}};try{const R=await navigator.mediaDevices.getUserMedia(I);g(R),f.current&&(f.current.srcObject=R,f.current.onloadedmetadata=()=>{f.current.play(),E(f.current,N)})}catch(R){console.error("Error accessing camera:",R)}},w=()=>{p(!1),m&&(m.getTracks().forEach(N=>N.stop()),g(null))},$=()=>{v(N=>!N),w(),setTimeout(()=>{x()},500)},E=(N,I)=>{I.detect(N).then(R=>{T(R),requestAnimationFrame(()=>{E(N,I)})})},T=N=>{const I=d.current.getContext("2d");I.clearRect(0,0,d.current.width,d.current.height),d.current.width=f.current.videoWidth,d.current.height=f.current.videoHeight,I.font="18px Arial",N.forEach(R=>{const[P,M,j,W]=R.bbox;I.strokeStyle="#00FF00",I.lineWidth=4,I.strokeRect(P,M,j,W),I.fillStyle="#00FF00",I.fillText(`${R.class} (${Math.round(R.score*100)}%)`,P,M>10?M-5:10)})};return k.jsxs("div",{className:"chatbot-page",children:[k.jsxs("div",{className:"chatbot-header",children:[k.jsx("button",{className:"chatbot-tab",onClick:()=>c("chat"),children:"Chat"}),k.jsx("button",{className:"chatbot-tab",onClick:()=>c("deteccion"),children:"Detección"}),k.jsx("button",{className:"chatbot-tab",onClick:()=>c("mapa"),children:"Mapa"})]}),k.jsxs("div",{className:"chatbot-container",children:[u==="chat"&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"chatbot-body",children:k.jsxs("div",{className:"chatbot-message-container",children:[n.map((N,I)=>k.jsxs("div",{className:`chat-message ${N.sender==="bot"?"bot-message":"user-message"}`,children:[k.jsx("img",{src:N.sender==="bot"?i_e:N.photoURL||VN,alt:"avatar",className:"chat-icon"}),k.jsx("div",{className:"chat-text",children:N.text})]},I)),k.jsx("div",{ref:l})]})}),k.jsxs("form",{className:"chatbot-footer",onSubmit:b,children:[k.jsxs("div",{className:"chat-input-container",children:[k.jsx("input",{type:"text",className:"chat-input",value:s,onChange:N=>i(N.target.value),disabled:o}),k.jsxs("div",{className:"chatbot-icons",children:[k.jsx("img",{src:s_e,alt:"attach"}),k.jsx("img",{src:o_e,alt:"photo"}),k.jsx("img",{src:a_e,alt:"record"}),k.jsx("button",{type:"submit",disabled:o,children:k.jsx("img",{src:l_e,alt:"send"})})]})]}),k.jsx("img",{src:(t==null?void 0:t.photoURL)||VN,alt:"user",className:"chat-icon user-icon"})]})]}),u==="deteccion"&&k.jsxs("div",{className:"deteccion-container",children:[k.jsx("h2",{children:"Detección de Objetos en Tiempo Real"}),k.jsxs("div",{className:"button-group",children:[k.jsx("button",{onClick:x,className:"activate-camera-btn",children:"Activar Cámara"}),k.jsx("button",{onClick:w,className:"deactivate-camera-btn",children:"Desactivar Cámara"}),k.jsx("button",{onClick:$,className:"switch-camera-btn",children:"Cambiar Cámara"})]}),k.jsxs("div",{className:"camera-container",children:[k.jsx("video",{ref:f,style:{display:h?"block":"none"}}),k.jsx("canvas",{ref:d,style:{position:"absolute",top:0,left:0,display:h?"block":"none"}})]})]}),u==="mapa"&&k.jsx("div",{className:"mapa-container"})]})]})};function JW(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=JW(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fe(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=JW(t))&&(r&&(r+=" "),r+=e);return r}var d_e=Array.isArray,er=d_e,h_e=typeof Cr=="object"&&Cr&&Cr.Object===Object&&Cr,QW=h_e,p_e=QW,m_e=typeof self=="object"&&self&&self.Object===Object&&self,g_e=p_e||m_e||Function("return this")(),Js=g_e,y_e=Js,v_e=y_e.Symbol,ap=v_e,WN=ap,ZW=Object.prototype,b_e=ZW.hasOwnProperty,x_e=ZW.toString,mf=WN?WN.toStringTag:void 0;function w_e(t){var e=b_e.call(t,mf),n=t[mf];try{t[mf]=void 0;var r=!0}catch{}var s=x_e.call(t);return r&&(e?t[mf]=n:delete t[mf]),s}var S_e=w_e,$_e=Object.prototype,E_e=$_e.toString;function T_e(t){return E_e.call(t)}var __e=T_e,GN=ap,C_e=S_e,I_e=__e,N_e="[object Null]",k_e="[object Undefined]",HN=GN?GN.toStringTag:void 0;function A_e(t){return t==null?t===void 0?k_e:N_e:HN&&HN in Object(t)?C_e(t):I_e(t)}var ji=A_e;function O_e(t){return t!=null&&typeof t=="object"}var Ui=O_e,R_e=ji,P_e=Ui,D_e="[object Symbol]";function F_e(t){return typeof t=="symbol"||P_e(t)&&R_e(t)==D_e}var Vc=F_e,L_e=er,M_e=Vc,B_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j_e=/^\w*$/;function U_e(t,e){if(L_e(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||M_e(t)?!0:j_e.test(t)||!B_e.test(t)||e!=null&&t in Object(e)}var ZE=U_e;function z_e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Jo=z_e;const Wc=Le(Jo);var V_e=ji,W_e=Jo,G_e="[object AsyncFunction]",H_e="[object Function]",q_e="[object GeneratorFunction]",K_e="[object Proxy]";function X_e(t){if(!W_e(t))return!1;var e=V_e(t);return e==H_e||e==q_e||e==G_e||e==K_e}var eT=X_e;const Se=Le(eT);var Y_e=Js,J_e=Y_e["__core-js_shared__"],Q_e=J_e,T1=Q_e,qN=function(){var t=/[^.]+$/.exec(T1&&T1.keys&&T1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Z_e(t){return!!qN&&qN in t}var eCe=Z_e,tCe=Function.prototype,nCe=tCe.toString;function rCe(t){if(t!=null){try{return nCe.call(t)}catch{}try{return t+""}catch{}}return""}var e6=rCe,sCe=eT,iCe=eCe,oCe=Jo,aCe=e6,lCe=/[\\^$.*+?()[\]{}|]/g,uCe=/^\[object .+?Constructor\]$/,cCe=Function.prototype,fCe=Object.prototype,dCe=cCe.toString,hCe=fCe.hasOwnProperty,pCe=RegExp("^"+dCe.call(hCe).replace(lCe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mCe(t){if(!oCe(t)||iCe(t))return!1;var e=sCe(t)?pCe:uCe;return e.test(aCe(t))}var gCe=mCe;function yCe(t,e){return t==null?void 0:t[e]}var vCe=yCe,bCe=gCe,xCe=vCe;function wCe(t,e){var n=xCe(t,e);return bCe(n)?n:void 0}var Nl=wCe,SCe=Nl,$Ce=SCe(Object,"create"),R0=$Ce,KN=R0;function ECe(){this.__data__=KN?KN(null):{},this.size=0}var TCe=ECe;function _Ce(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var CCe=_Ce,ICe=R0,NCe="__lodash_hash_undefined__",kCe=Object.prototype,ACe=kCe.hasOwnProperty;function OCe(t){var e=this.__data__;if(ICe){var n=e[t];return n===NCe?void 0:n}return ACe.call(e,t)?e[t]:void 0}var RCe=OCe,PCe=R0,DCe=Object.prototype,FCe=DCe.hasOwnProperty;function LCe(t){var e=this.__data__;return PCe?e[t]!==void 0:FCe.call(e,t)}var MCe=LCe,BCe=R0,jCe="__lodash_hash_undefined__";function UCe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=BCe&&e===void 0?jCe:e,this}var zCe=UCe,VCe=TCe,WCe=CCe,GCe=RCe,HCe=MCe,qCe=zCe;function Gc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Gc.prototype.clear=VCe;Gc.prototype.delete=WCe;Gc.prototype.get=GCe;Gc.prototype.has=HCe;Gc.prototype.set=qCe;var KCe=Gc;function XCe(){this.__data__=[],this.size=0}var YCe=XCe;function JCe(t,e){return t===e||t!==t&&e!==e}var tT=JCe,QCe=tT;function ZCe(t,e){for(var n=t.length;n--;)if(QCe(t[n][0],e))return n;return-1}var P0=ZCe,eIe=P0,tIe=Array.prototype,nIe=tIe.splice;function rIe(t){var e=this.__data__,n=eIe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():nIe.call(e,n,1),--this.size,!0}var sIe=rIe,iIe=P0;function oIe(t){var e=this.__data__,n=iIe(e,t);return n<0?void 0:e[n][1]}var aIe=oIe,lIe=P0;function uIe(t){return lIe(this.__data__,t)>-1}var cIe=uIe,fIe=P0;function dIe(t,e){var n=this.__data__,r=fIe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var hIe=dIe,pIe=YCe,mIe=sIe,gIe=aIe,yIe=cIe,vIe=hIe;function Hc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hc.prototype.clear=pIe;Hc.prototype.delete=mIe;Hc.prototype.get=gIe;Hc.prototype.has=yIe;Hc.prototype.set=vIe;var D0=Hc,bIe=Nl,xIe=Js,wIe=bIe(xIe,"Map"),nT=wIe,XN=KCe,SIe=D0,$Ie=nT;function EIe(){this.size=0,this.__data__={hash:new XN,map:new($Ie||SIe),string:new XN}}var TIe=EIe;function _Ie(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var CIe=_Ie,IIe=CIe;function NIe(t,e){var n=t.__data__;return IIe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var F0=NIe,kIe=F0;function AIe(t){var e=kIe(this,t).delete(t);return this.size-=e?1:0,e}var OIe=AIe,RIe=F0;function PIe(t){return RIe(this,t).get(t)}var DIe=PIe,FIe=F0;function LIe(t){return FIe(this,t).has(t)}var MIe=LIe,BIe=F0;function jIe(t,e){var n=BIe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var UIe=jIe,zIe=TIe,VIe=OIe,WIe=DIe,GIe=MIe,HIe=UIe;function qc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qc.prototype.clear=zIe;qc.prototype.delete=VIe;qc.prototype.get=WIe;qc.prototype.has=GIe;qc.prototype.set=HIe;var rT=qc,t6=rT,qIe="Expected a function";function sT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(qIe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(sT.Cache||t6),n}sT.Cache=t6;var n6=sT;const KIe=Le(n6);var XIe=n6,YIe=500;function JIe(t){var e=XIe(t,function(r){return n.size===YIe&&n.clear(),r}),n=e.cache;return e}var QIe=JIe,ZIe=QIe,eNe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tNe=/\\(\\)?/g,nNe=ZIe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(eNe,function(n,r,s,i){e.push(s?i.replace(tNe,"$1"):r||n)}),e}),rNe=nNe;function sNe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var iT=sNe,YN=ap,iNe=iT,oNe=er,aNe=Vc,lNe=1/0,JN=YN?YN.prototype:void 0,QN=JN?JN.toString:void 0;function r6(t){if(typeof t=="string")return t;if(oNe(t))return iNe(t,r6)+"";if(aNe(t))return QN?QN.call(t):"";var e=t+"";return e=="0"&&1/t==-lNe?"-0":e}var uNe=r6,cNe=uNe;function fNe(t){return t==null?"":cNe(t)}var s6=fNe,dNe=er,hNe=ZE,pNe=rNe,mNe=s6;function gNe(t,e){return dNe(t)?t:hNe(t,e)?[t]:pNe(mNe(t))}var i6=gNe,yNe=Vc,vNe=1/0;function bNe(t){if(typeof t=="string"||yNe(t))return t;var e=t+"";return e=="0"&&1/t==-vNe?"-0":e}var L0=bNe,xNe=i6,wNe=L0;function SNe(t,e){e=xNe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[wNe(e[n++])];return n&&n==r?t:void 0}var oT=SNe,$Ne=oT;function ENe(t,e,n){var r=t==null?void 0:$Ne(t,e);return r===void 0?n:r}var o6=ENe;const ms=Le(o6);function TNe(t){return t==null}var _Ne=TNe;const _e=Le(_Ne);var CNe=ji,INe=er,NNe=Ui,kNe="[object String]";function ANe(t){return typeof t=="string"||!INe(t)&&NNe(t)&&CNe(t)==kNe}var ONe=ANe;const lp=Le(ONe);var a6={exports:{}},ze={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qt=typeof Symbol=="function"&&Symbol.for,aT=Qt?Symbol.for("react.element"):60103,lT=Qt?Symbol.for("react.portal"):60106,M0=Qt?Symbol.for("react.fragment"):60107,B0=Qt?Symbol.for("react.strict_mode"):60108,j0=Qt?Symbol.for("react.profiler"):60114,U0=Qt?Symbol.for("react.provider"):60109,z0=Qt?Symbol.for("react.context"):60110,uT=Qt?Symbol.for("react.async_mode"):60111,V0=Qt?Symbol.for("react.concurrent_mode"):60111,W0=Qt?Symbol.for("react.forward_ref"):60112,G0=Qt?Symbol.for("react.suspense"):60113,RNe=Qt?Symbol.for("react.suspense_list"):60120,H0=Qt?Symbol.for("react.memo"):60115,q0=Qt?Symbol.for("react.lazy"):60116,PNe=Qt?Symbol.for("react.block"):60121,DNe=Qt?Symbol.for("react.fundamental"):60117,FNe=Qt?Symbol.for("react.responder"):60118,LNe=Qt?Symbol.for("react.scope"):60119;function mr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case aT:switch(t=t.type,t){case uT:case V0:case M0:case j0:case B0:case G0:return t;default:switch(t=t&&t.$$typeof,t){case z0:case W0:case q0:case H0:case U0:return t;default:return e}}case lT:return e}}}function l6(t){return mr(t)===V0}ze.AsyncMode=uT;ze.ConcurrentMode=V0;ze.ContextConsumer=z0;ze.ContextProvider=U0;ze.Element=aT;ze.ForwardRef=W0;ze.Fragment=M0;ze.Lazy=q0;ze.Memo=H0;ze.Portal=lT;ze.Profiler=j0;ze.StrictMode=B0;ze.Suspense=G0;ze.isAsyncMode=function(t){return l6(t)||mr(t)===uT};ze.isConcurrentMode=l6;ze.isContextConsumer=function(t){return mr(t)===z0};ze.isContextProvider=function(t){return mr(t)===U0};ze.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===aT};ze.isForwardRef=function(t){return mr(t)===W0};ze.isFragment=function(t){return mr(t)===M0};ze.isLazy=function(t){return mr(t)===q0};ze.isMemo=function(t){return mr(t)===H0};ze.isPortal=function(t){return mr(t)===lT};ze.isProfiler=function(t){return mr(t)===j0};ze.isStrictMode=function(t){return mr(t)===B0};ze.isSuspense=function(t){return mr(t)===G0};ze.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===M0||t===V0||t===j0||t===B0||t===G0||t===RNe||typeof t=="object"&&t!==null&&(t.$$typeof===q0||t.$$typeof===H0||t.$$typeof===U0||t.$$typeof===z0||t.$$typeof===W0||t.$$typeof===DNe||t.$$typeof===FNe||t.$$typeof===LNe||t.$$typeof===PNe)};ze.typeOf=mr;a6.exports=ze;var MNe=a6.exports,BNe=ji,jNe=Ui,UNe="[object Number]";function zNe(t){return typeof t=="number"||jNe(t)&&BNe(t)==UNe}var u6=zNe;const VNe=Le(u6);var WNe=u6;function GNe(t){return WNe(t)&&t!=+t}var HNe=GNe;const up=Le(HNe);var Fr=function(e){return e===0?0:e>0?1:-1},mw=function(e){return lp(e)&&e.indexOf("%")===e.length-1},se=function(e){return VNe(e)&&!up(e)},Bt=function(e){return se(e)||lp(e)},qNe=0,K0=function(e){var n=++qNe;return"".concat(e||"").concat(n)},zn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!se(e)&&!lp(e))return r;var i;if(mw(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return up(i)&&(i=r),s&&i>n&&(i=n),i},Ul=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},KNe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},ZN=function(e,n){return se(e)&&se(n)?function(r){return e+r*(n-e)}:function(){return n}};function gw(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):ms(r,e))===n})}function yw(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function vw(t){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vw(t)}var XNe=["viewBox","children"],YNe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ek=["points","pathLength"],_1={svg:XNe,polygon:ek,polyline:ek},cT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Gg=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(D.isValidElement(e)&&(r=e.props),!Wc(r))return null;var s={};return Object.keys(r).forEach(function(i){cT.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},JNe=function(e,n,r){return function(s){return e(n,r,s),null}},X0=function(e,n,r){if(!Wc(e)||vw(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];cT.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=JNe(o,n,r))}),s},QNe=["children"],ZNe=["children"];function tk(t,e){if(t==null)return{};var n=eke(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eke(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var nk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},_o=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},rk=null,C1=null,fT=function t(e){if(e===rk&&Array.isArray(C1))return C1;var n=[];return D.Children.forEach(e,function(r){_e(r)||(MNe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),C1=n,rk=e,n};function Bs(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return _o(s)}):r=[_o(e)],fT(t).forEach(function(s){var i=ms(s,"type.displayName")||ms(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function wr(t,e){var n=Bs(t,e);return n&&n[0]}var sk=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!se(r)||r<=0||!se(s)||s<=0)},tke=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],nke=function(e){return e&&e.type&&lp(e.type)&&tke.indexOf(e.type)>=0},rke=function(e,n,r,s){var i,o=(i=_1==null?void 0:_1[s])!==null&&i!==void 0?i:[];return!Se(e)&&(s&&o.includes(n)||YNe.includes(n))||r&&cT.includes(n)},xe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(D.isValidElement(e)&&(s=e.props),!Wc(s))return null;var i={};return Object.keys(s).forEach(function(o){var a;rke((a=s)===null||a===void 0?void 0:a[o],o,n,r)&&(i[o]=s[o])}),i},bw=function t(e,n){if(e===n)return!0;var r=D.Children.count(e);if(r!==D.Children.count(n))return!1;if(r===0)return!0;if(r===1)return ik(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!ik(i,o))return!1}return!0},ik=function(e,n){if(_e(e)&&_e(n))return!0;if(!_e(e)&&!_e(n)){var r=e.props||{},s=r.children,i=tk(r,QNe),o=n.props||{},a=o.children,l=tk(o,ZNe);return s&&a?yw(i,l)&&bw(s,a):!s&&!a?yw(i,l):!1}return!1},ok=function(e,n){var r=[],s={};return fT(e).forEach(function(i,o){if(nke(i))r.push(i);else if(i){var a=_o(i.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!s[a])){var f=u(i,a,o);r.push(f),s[a]=!0}}}),r},ske=function(e){var n=e&&e.type;return n&&nk[n]?nk[n]:null},ike=function(e,n){return fT(n).indexOf(e)},oke=["children","width","height","viewBox","className","style","title","desc"];function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xw.apply(this,arguments)}function ake(t,e){if(t==null)return{};var n=lke(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lke(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ww(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,a=t.title,l=t.desc,u=ake(t,oke),c=s||{width:n,height:r,x:0,y:0},f=Fe("recharts-surface",i);return F.createElement("svg",xw({},xe(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),F.createElement("title",null,a),F.createElement("desc",null,l),e)}var uke=["children","className"];function Sw(){return Sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sw.apply(this,arguments)}function cke(t,e){if(t==null)return{};var n=fke(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fke(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var xt=F.forwardRef(function(t,e){var n=t.children,r=t.className,s=cke(t,uke),i=Fe("recharts-layer",r);return F.createElement("g",Sw({className:i},xe(s,!0),{ref:e}),n)}),Qu=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function dke(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var hke=dke,pke=hke;function mke(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:pke(t,e,n)}var gke=mke,yke="\\ud800-\\udfff",vke="\\u0300-\\u036f",bke="\\ufe20-\\ufe2f",xke="\\u20d0-\\u20ff",wke=vke+bke+xke,Ske="\\ufe0e\\ufe0f",$ke="\\u200d",Eke=RegExp("["+$ke+yke+wke+Ske+"]");function Tke(t){return Eke.test(t)}var c6=Tke;function _ke(t){return t.split("")}var Cke=_ke,f6="\\ud800-\\udfff",Ike="\\u0300-\\u036f",Nke="\\ufe20-\\ufe2f",kke="\\u20d0-\\u20ff",Ake=Ike+Nke+kke,Oke="\\ufe0e\\ufe0f",Rke="["+f6+"]",$w="["+Ake+"]",Ew="\\ud83c[\\udffb-\\udfff]",Pke="(?:"+$w+"|"+Ew+")",d6="[^"+f6+"]",h6="(?:\\ud83c[\\udde6-\\uddff]){2}",p6="[\\ud800-\\udbff][\\udc00-\\udfff]",Dke="\\u200d",m6=Pke+"?",g6="["+Oke+"]?",Fke="(?:"+Dke+"(?:"+[d6,h6,p6].join("|")+")"+g6+m6+")*",Lke=g6+m6+Fke,Mke="(?:"+[d6+$w+"?",$w,h6,p6,Rke].join("|")+")",Bke=RegExp(Ew+"(?="+Ew+")|"+Mke+Lke,"g");function jke(t){return t.match(Bke)||[]}var Uke=jke,zke=Cke,Vke=c6,Wke=Uke;function Gke(t){return Vke(t)?Wke(t):zke(t)}var Hke=Gke,qke=gke,Kke=c6,Xke=Hke,Yke=s6;function Jke(t){return function(e){e=Yke(e);var n=Kke(e)?Xke(e):void 0,r=n?n[0]:e.charAt(0),s=n?qke(n,1).join(""):e.slice(1);return r[t]()+s}}var Qke=Jke,Zke=Qke,eAe=Zke("toUpperCase"),tAe=eAe;const Y0=Le(tAe);function Qe(t){return function(){return t}}const y6=Math.cos,Hg=Math.sin,Es=Math.sqrt,qg=Math.PI,J0=2*qg,Tw=Math.PI,_w=2*Tw,pa=1e-6,nAe=_w-pa;function v6(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function rAe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return v6;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class sAe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?v6:rAe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-e,u=s-n,c=o-e,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>pa)if(!(Math.abs(f*l-u*c)>pa)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,p=s-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=i*Math.tan((Tw-Math.acos((m+d-g)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>pa&&this._append`L${e+x*c},${n+x*f}`,this._append`A${i},${i},0,0,${+(f*h>c*p)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,s,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),u=e+a,c=n+l,f=1^o,d=o?s-i:i-s;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>pa||Math.abs(this._y1-c)>pa)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%_w+_w),d>nAe?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>pa&&this._append`A${r},${r},0,${+(d>=Tw)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function dT(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new sAe(e)}function hT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function b6(t){this._context=t}b6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Q0(t){return new b6(t)}function x6(t){return t[0]}function w6(t){return t[1]}function S6(t,e){var n=Qe(!0),r=null,s=Q0,i=null,o=dT(a);t=typeof t=="function"?t:t===void 0?x6:Qe(t),e=typeof e=="function"?e:e===void 0?w6:Qe(e);function a(l){var u,c=(l=hT(l)).length,f,d=!1,h;for(r==null&&(i=s(h=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(f,u,l),+e(f,u,l));if(h)return i=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Qe(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Qe(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Qe(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),a):s},a.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),a):r},a}function qp(t,e,n){var r=null,s=Qe(!0),i=null,o=Q0,a=null,l=dT(u);t=typeof t=="function"?t:t===void 0?x6:Qe(+t),e=typeof e=="function"?e:Qe(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?w6:Qe(+n);function u(f){var d,h,p,m=(f=hT(f)).length,g,y=!1,v,b=new Array(m),x=new Array(m);for(i==null&&(a=o(v=l())),d=0;d<=m;++d){if(!(d<m&&s(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+t(g,d,f),x[d]=+e(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return S6().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qe(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Qe(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Qe(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qe(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Qe(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(a=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=a=null:a=o(i=f),u):i},u}class $6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function iAe(t){return new $6(t,!0)}function oAe(t){return new $6(t,!1)}const pT={draw(t,e){const n=Es(e/qg);t.moveTo(n,0),t.arc(0,0,n,0,J0)}},aAe={draw(t,e){const n=Es(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},E6=Es(1/3),lAe=E6*2,uAe={draw(t,e){const n=Es(e/lAe),r=n*E6;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},cAe={draw(t,e){const n=Es(e),r=-n/2;t.rect(r,r,n,n)}},fAe=.8908130915292852,T6=Hg(qg/10)/Hg(7*qg/10),dAe=Hg(J0/10)*T6,hAe=-y6(J0/10)*T6,pAe={draw(t,e){const n=Es(e*fAe),r=dAe*n,s=hAe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const o=J0*i/5,a=y6(o),l=Hg(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*s,l*r+a*s)}t.closePath()}},I1=Es(3),mAe={draw(t,e){const n=-Es(e/(I1*3));t.moveTo(0,n*2),t.lineTo(-I1*n,-n),t.lineTo(I1*n,-n),t.closePath()}},yr=-.5,vr=Es(3)/2,Cw=1/Es(12),gAe=(Cw/2+1)*3,yAe={draw(t,e){const n=Es(e/gAe),r=n/2,s=n*Cw,i=r,o=n*Cw+n,a=-i,l=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(a,l),t.lineTo(yr*r-vr*s,vr*r+yr*s),t.lineTo(yr*i-vr*o,vr*i+yr*o),t.lineTo(yr*a-vr*l,vr*a+yr*l),t.lineTo(yr*r+vr*s,yr*s-vr*r),t.lineTo(yr*i+vr*o,yr*o-vr*i),t.lineTo(yr*a+vr*l,yr*l-vr*a),t.closePath()}};function vAe(t,e){let n=null,r=dT(s);t=typeof t=="function"?t:Qe(t||pT),e=typeof e=="function"?e:Qe(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Qe(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Qe(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function Kg(){}function Xg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _6(t){this._context=t}_6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bAe(t){return new _6(t)}function C6(t){this._context=t}C6.prototype={areaStart:Kg,areaEnd:Kg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xAe(t){return new C6(t)}function I6(t){this._context=t}I6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wAe(t){return new I6(t)}function N6(t){this._context=t}N6.prototype={areaStart:Kg,areaEnd:Kg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function SAe(t){return new N6(t)}function ak(t){return t<0?-1:1}function lk(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),a=(i*s+o*r)/(r+s);return(ak(i)+ak(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function uk(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function N1(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,s+a*e,i-a,o-a*n,i,o)}function Yg(t){this._context=t}Yg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:N1(this,this._t0,uk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,N1(this,uk(this,n=lk(this,t,e)),n);break;default:N1(this,this._t0,n=lk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function k6(t){this._context=new A6(t)}(k6.prototype=Object.create(Yg.prototype)).point=function(t,e){Yg.prototype.point.call(this,e,t)};function A6(t){this._context=t}A6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function $Ae(t){return new Yg(t)}function EAe(t){return new k6(t)}function O6(t){this._context=t}O6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=ck(t),s=ck(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ck(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function TAe(t){return new O6(t)}function Z0(t,e){this._context=t,this._t=e}Z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _Ae(t){return new Z0(t,.5)}function CAe(t){return new Z0(t,0)}function IAe(t){return new Z0(t,1)}function Zu(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,a=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function Iw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function NAe(t,e){return t[e]}function kAe(t){const e=[];return e.key=t,e}function AAe(){var t=Qe([]),e=Iw,n=Zu,r=NAe;function s(i){var o=Array.from(t.apply(this,arguments),kAe),a,l=o.length,u=-1,c;for(const f of i)for(a=0,++u;a<l;++a)(o[a][u]=[0,+r(f,o[a].key,u,i)]).data=f;for(a=0,c=hT(e(o));a<l;++a)o[c[a]].index=a;return n(o,c),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Qe(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Qe(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?Iw:typeof i=="function"?i:Qe(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??Zu,s):n},s}function OAe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}Zu(t,e)}}function RAe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,a=0;o<s;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Zu(t,e)}}function PAe(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var a=0,l=0,u=0;a<o;++a){for(var c=t[e[a]],f=c[r][1]||0,d=c[r-1][1]||0,h=(f-d)/2,p=0;p<a;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;h+=g-y}l+=f,u+=h*f}s[r-1][1]+=s[r-1][0]=n,l&&(n-=u/l)}s[r-1][1]+=s[r-1][0]=n,Zu(t,e)}}function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}var DAe=["type","size","sizeType"];function Nw(){return Nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nw.apply(this,arguments)}function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(r){FAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FAe(t,e,n){return e=LAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LAe(t){var e=MAe(t,"string");return Vd(e)=="symbol"?e:String(e)}function MAe(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BAe(t,e){if(t==null)return{};var n=jAe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jAe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var R6={symbolCircle:pT,symbolCross:aAe,symbolDiamond:uAe,symbolSquare:cAe,symbolStar:pAe,symbolTriangle:mAe,symbolWye:yAe},UAe=Math.PI/180,zAe=function(e){var n="symbol".concat(Y0(e));return R6[n]||pT},VAe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*UAe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},WAe=function(e,n){R6["symbol".concat(Y0(e))]=n},mT=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,i=s===void 0?64:s,o=e.sizeType,a=o===void 0?"area":o,l=BAe(e,DAe),u=dk(dk({},l),{},{type:r,size:i,sizeType:a}),c=function(){var g=zAe(r),y=vAe().type(g).size(VAe(i,a,r));return y()},f=u.className,d=u.cx,h=u.cy,p=xe(u,!0);return d===+d&&h===+h&&i===+i?F.createElement("path",Nw({},p,{className:Fe("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(h,")"),d:c()})):null};mT.registerSymbol=WAe;function ec(t){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(t)}function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kw.apply(this,arguments)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function GAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){Wd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D6(r.key),r)}}function KAe(t,e,n){return e&&qAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XAe(t,e,n){return e=Jg(e),YAe(t,P6()?Reflect.construct(e,n||[],Jg(t).constructor):e.apply(t,n))}function YAe(t,e){if(e&&(ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JAe(t)}function JAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P6=function(){return!!t})()}function Jg(t){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(t)}function QAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aw(t,e)}function Aw(t,e){return Aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Aw(t,e)}function Wd(t,e,n){return e=D6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D6(t){var e=ZAe(t,"string");return ec(e)=="symbol"?e:String(e)}function ZAe(t,e){if(ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var br=32,gT=function(t){QAe(e,t);function e(){return HAe(this,e),XAe(this,e,arguments)}return KAe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=br/2,o=br/6,a=br/3,l=r.inactive?s:r.color;if(r.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:br,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(br,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return F.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(br/8,"h").concat(br,"v").concat(br*3/4,"h").concat(-br,"z"),className:"recharts-legend-icon"});if(F.isValidElement(r.legendIcon)){var u=GAe({},r);return delete u.legendIcon,F.cloneElement(r.legendIcon,u)}return F.createElement(mT,{fill:l,cx:i,cy:i,size:br,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,a=s.layout,l=s.formatter,u=s.inactiveColor,c={x:0,y:0,width:br,height:br},f={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,p){var m=h.formatter||l,g=Fe(Wd(Wd({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Se(h.value)?null:h.value;Qu(!Se(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return F.createElement("li",kw({className:g,style:f,key:"legend-item-".concat(p)},X0(r.props,h,p)),F.createElement(ww,{width:o,height:o,viewBox:c,style:d},r.renderIcon(h)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,h,p):y))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var a={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}]),e}(D.PureComponent);Wd(gT,"displayName","Legend");Wd(gT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var eOe=D0;function tOe(){this.__data__=new eOe,this.size=0}var nOe=tOe;function rOe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var sOe=rOe;function iOe(t){return this.__data__.get(t)}var oOe=iOe;function aOe(t){return this.__data__.has(t)}var lOe=aOe,uOe=D0,cOe=nT,fOe=rT,dOe=200;function hOe(t,e){var n=this.__data__;if(n instanceof uOe){var r=n.__data__;if(!cOe||r.length<dOe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fOe(r)}return n.set(t,e),this.size=n.size,this}var pOe=hOe,mOe=D0,gOe=nOe,yOe=sOe,vOe=oOe,bOe=lOe,xOe=pOe;function Kc(t){var e=this.__data__=new mOe(t);this.size=e.size}Kc.prototype.clear=gOe;Kc.prototype.delete=yOe;Kc.prototype.get=vOe;Kc.prototype.has=bOe;Kc.prototype.set=xOe;var F6=Kc,wOe="__lodash_hash_undefined__";function SOe(t){return this.__data__.set(t,wOe),this}var $Oe=SOe;function EOe(t){return this.__data__.has(t)}var TOe=EOe,_Oe=rT,COe=$Oe,IOe=TOe;function Qg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new _Oe;++e<n;)this.add(t[e])}Qg.prototype.add=Qg.prototype.push=COe;Qg.prototype.has=IOe;var L6=Qg;function NOe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var M6=NOe;function kOe(t,e){return t.has(e)}var B6=kOe,AOe=L6,OOe=M6,ROe=B6,POe=1,DOe=2;function FOe(t,e,n,r,s,i){var o=n&POe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=i.get(t),c=i.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,h=n&DOe?new AOe:void 0;for(i.set(t,e),i.set(e,t);++f<a;){var p=t[f],m=e[f];if(r)var g=o?r(m,p,f,e,t,i):r(p,m,f,t,e,i);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!OOe(e,function(y,v){if(!ROe(h,v)&&(p===y||s(p,y,n,r,i)))return h.push(v)})){d=!1;break}}else if(!(p===m||s(p,m,n,r,i))){d=!1;break}}return i.delete(t),i.delete(e),d}var j6=FOe,LOe=Js,MOe=LOe.Uint8Array,BOe=MOe;function jOe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var UOe=jOe;function zOe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var yT=zOe,pk=ap,mk=BOe,VOe=tT,WOe=j6,GOe=UOe,HOe=yT,qOe=1,KOe=2,XOe="[object Boolean]",YOe="[object Date]",JOe="[object Error]",QOe="[object Map]",ZOe="[object Number]",eRe="[object RegExp]",tRe="[object Set]",nRe="[object String]",rRe="[object Symbol]",sRe="[object ArrayBuffer]",iRe="[object DataView]",gk=pk?pk.prototype:void 0,k1=gk?gk.valueOf:void 0;function oRe(t,e,n,r,s,i,o){switch(n){case iRe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sRe:return!(t.byteLength!=e.byteLength||!i(new mk(t),new mk(e)));case XOe:case YOe:case ZOe:return VOe(+t,+e);case JOe:return t.name==e.name&&t.message==e.message;case eRe:case nRe:return t==e+"";case QOe:var a=GOe;case tRe:var l=r&qOe;if(a||(a=HOe),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=KOe,o.set(t,e);var c=WOe(a(t),a(e),r,s,i,o);return o.delete(t),c;case rRe:if(k1)return k1.call(t)==k1.call(e)}return!1}var aRe=oRe;function lRe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var U6=lRe,uRe=U6,cRe=er;function fRe(t,e,n){var r=e(t);return cRe(t)?r:uRe(r,n(t))}var dRe=fRe;function hRe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var pRe=hRe;function mRe(){return[]}var gRe=mRe,yRe=pRe,vRe=gRe,bRe=Object.prototype,xRe=bRe.propertyIsEnumerable,yk=Object.getOwnPropertySymbols,wRe=yk?function(t){return t==null?[]:(t=Object(t),yRe(yk(t),function(e){return xRe.call(t,e)}))}:vRe,SRe=wRe;function $Re(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ERe=$Re,TRe=ji,_Re=Ui,CRe="[object Arguments]";function IRe(t){return _Re(t)&&TRe(t)==CRe}var NRe=IRe,vk=NRe,kRe=Ui,z6=Object.prototype,ARe=z6.hasOwnProperty,ORe=z6.propertyIsEnumerable,RRe=vk(function(){return arguments}())?vk:function(t){return kRe(t)&&ARe.call(t,"callee")&&!ORe.call(t,"callee")},vT=RRe,Zg={exports:{}};function PRe(){return!1}var DRe=PRe;Zg.exports;(function(t,e){var n=Js,r=DRe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Zg,Zg.exports);var V6=Zg.exports,FRe=9007199254740991,LRe=/^(?:0|[1-9]\d*)$/;function MRe(t,e){var n=typeof t;return e=e??FRe,!!e&&(n=="number"||n!="symbol"&&LRe.test(t))&&t>-1&&t%1==0&&t<e}var bT=MRe,BRe=9007199254740991;function jRe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=BRe}var xT=jRe,URe=ji,zRe=xT,VRe=Ui,WRe="[object Arguments]",GRe="[object Array]",HRe="[object Boolean]",qRe="[object Date]",KRe="[object Error]",XRe="[object Function]",YRe="[object Map]",JRe="[object Number]",QRe="[object Object]",ZRe="[object RegExp]",ePe="[object Set]",tPe="[object String]",nPe="[object WeakMap]",rPe="[object ArrayBuffer]",sPe="[object DataView]",iPe="[object Float32Array]",oPe="[object Float64Array]",aPe="[object Int8Array]",lPe="[object Int16Array]",uPe="[object Int32Array]",cPe="[object Uint8Array]",fPe="[object Uint8ClampedArray]",dPe="[object Uint16Array]",hPe="[object Uint32Array]",ot={};ot[iPe]=ot[oPe]=ot[aPe]=ot[lPe]=ot[uPe]=ot[cPe]=ot[fPe]=ot[dPe]=ot[hPe]=!0;ot[WRe]=ot[GRe]=ot[rPe]=ot[HRe]=ot[sPe]=ot[qRe]=ot[KRe]=ot[XRe]=ot[YRe]=ot[JRe]=ot[QRe]=ot[ZRe]=ot[ePe]=ot[tPe]=ot[nPe]=!1;function pPe(t){return VRe(t)&&zRe(t.length)&&!!ot[URe(t)]}var mPe=pPe;function gPe(t){return function(e){return t(e)}}var W6=gPe,ey={exports:{}};ey.exports;(function(t,e){var n=QW,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(ey,ey.exports);var yPe=ey.exports,vPe=mPe,bPe=W6,bk=yPe,xk=bk&&bk.isTypedArray,xPe=xk?bPe(xk):vPe,G6=xPe,wPe=ERe,SPe=vT,$Pe=er,EPe=V6,TPe=bT,_Pe=G6,CPe=Object.prototype,IPe=CPe.hasOwnProperty;function NPe(t,e){var n=$Pe(t),r=!n&&SPe(t),s=!n&&!r&&EPe(t),i=!n&&!r&&!s&&_Pe(t),o=n||r||s||i,a=o?wPe(t.length,String):[],l=a.length;for(var u in t)(e||IPe.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||TPe(u,l)))&&a.push(u);return a}var kPe=NPe,APe=Object.prototype;function OPe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||APe;return t===n}var RPe=OPe;function PPe(t,e){return function(n){return t(e(n))}}var H6=PPe,DPe=H6,FPe=DPe(Object.keys,Object),LPe=FPe,MPe=RPe,BPe=LPe,jPe=Object.prototype,UPe=jPe.hasOwnProperty;function zPe(t){if(!MPe(t))return BPe(t);var e=[];for(var n in Object(t))UPe.call(t,n)&&n!="constructor"&&e.push(n);return e}var VPe=zPe,WPe=eT,GPe=xT;function HPe(t){return t!=null&&GPe(t.length)&&!WPe(t)}var ev=HPe,qPe=kPe,KPe=VPe,XPe=ev;function YPe(t){return XPe(t)?qPe(t):KPe(t)}var wT=YPe,JPe=dRe,QPe=SRe,ZPe=wT;function eDe(t){return JPe(t,ZPe,QPe)}var tDe=eDe,wk=tDe,nDe=1,rDe=Object.prototype,sDe=rDe.hasOwnProperty;function iDe(t,e,n,r,s,i){var o=n&nDe,a=wk(t),l=a.length,u=wk(e),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var d=a[f];if(!(o?d in e:sDe.call(e,d)))return!1}var h=i.get(t),p=i.get(e);if(h&&p)return h==e&&p==t;var m=!0;i.set(t,e),i.set(e,t);for(var g=o;++f<l;){d=a[f];var y=t[d],v=e[d];if(r)var b=o?r(v,y,d,e,t,i):r(y,v,d,t,e,i);if(!(b===void 0?y===v||s(y,v,n,r,i):b)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(m=!1)}return i.delete(t),i.delete(e),m}var oDe=iDe,aDe=Nl,lDe=Js,uDe=aDe(lDe,"DataView"),cDe=uDe,fDe=Nl,dDe=Js,hDe=fDe(dDe,"Promise"),pDe=hDe,mDe=Nl,gDe=Js,yDe=mDe(gDe,"Set"),q6=yDe,vDe=Nl,bDe=Js,xDe=vDe(bDe,"WeakMap"),wDe=xDe,Ow=cDe,Rw=nT,Pw=pDe,Dw=q6,Fw=wDe,K6=ji,Xc=e6,Sk="[object Map]",SDe="[object Object]",$k="[object Promise]",Ek="[object Set]",Tk="[object WeakMap]",_k="[object DataView]",$De=Xc(Ow),EDe=Xc(Rw),TDe=Xc(Pw),_De=Xc(Dw),CDe=Xc(Fw),ma=K6;(Ow&&ma(new Ow(new ArrayBuffer(1)))!=_k||Rw&&ma(new Rw)!=Sk||Pw&&ma(Pw.resolve())!=$k||Dw&&ma(new Dw)!=Ek||Fw&&ma(new Fw)!=Tk)&&(ma=function(t){var e=K6(t),n=e==SDe?t.constructor:void 0,r=n?Xc(n):"";if(r)switch(r){case $De:return _k;case EDe:return Sk;case TDe:return $k;case _De:return Ek;case CDe:return Tk}return e});var IDe=ma,A1=F6,NDe=j6,kDe=aRe,ADe=oDe,Ck=IDe,Ik=er,Nk=V6,ODe=G6,RDe=1,kk="[object Arguments]",Ak="[object Array]",Kp="[object Object]",PDe=Object.prototype,Ok=PDe.hasOwnProperty;function DDe(t,e,n,r,s,i){var o=Ik(t),a=Ik(e),l=o?Ak:Ck(t),u=a?Ak:Ck(e);l=l==kk?Kp:l,u=u==kk?Kp:u;var c=l==Kp,f=u==Kp,d=l==u;if(d&&Nk(t)){if(!Nk(e))return!1;o=!0,c=!1}if(d&&!c)return i||(i=new A1),o||ODe(t)?NDe(t,e,n,r,s,i):kDe(t,e,l,n,r,s,i);if(!(n&RDe)){var h=c&&Ok.call(t,"__wrapped__"),p=f&&Ok.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,g=p?e.value():e;return i||(i=new A1),s(m,g,n,r,i)}}return d?(i||(i=new A1),ADe(t,e,n,r,s,i)):!1}var FDe=DDe,LDe=FDe,Rk=Ui;function X6(t,e,n,r,s){return t===e?!0:t==null||e==null||!Rk(t)&&!Rk(e)?t!==t&&e!==e:LDe(t,e,n,r,X6,s)}var ST=X6,MDe=F6,BDe=ST,jDe=1,UDe=2;function zDe(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var f=new MDe;if(r)var d=r(u,c,l,t,e,f);if(!(d===void 0?BDe(c,u,jDe|UDe,r,f):d))return!1}}return!0}var VDe=zDe,WDe=Jo;function GDe(t){return t===t&&!WDe(t)}var Y6=GDe,HDe=Y6,qDe=wT;function KDe(t){for(var e=qDe(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,HDe(s)]}return e}var XDe=KDe;function YDe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var J6=YDe,JDe=VDe,QDe=XDe,ZDe=J6;function e3e(t){var e=QDe(t);return e.length==1&&e[0][2]?ZDe(e[0][0],e[0][1]):function(n){return n===t||JDe(n,t,e)}}var t3e=e3e;function n3e(t,e){return t!=null&&e in Object(t)}var r3e=n3e,s3e=i6,i3e=vT,o3e=er,a3e=bT,l3e=xT,u3e=L0;function c3e(t,e,n){e=s3e(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=u3e(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&l3e(s)&&a3e(o,s)&&(o3e(t)||i3e(t)))}var f3e=c3e,d3e=r3e,h3e=f3e;function p3e(t,e){return t!=null&&h3e(t,e,d3e)}var m3e=p3e,g3e=ST,y3e=o6,v3e=m3e,b3e=ZE,x3e=Y6,w3e=J6,S3e=L0,$3e=1,E3e=2;function T3e(t,e){return b3e(t)&&x3e(e)?w3e(S3e(t),e):function(n){var r=y3e(n,t);return r===void 0&&r===e?v3e(n,t):g3e(e,r,$3e|E3e)}}var _3e=T3e;function C3e(t){return t}var Yc=C3e;function I3e(t){return function(e){return e==null?void 0:e[t]}}var N3e=I3e,k3e=oT;function A3e(t){return function(e){return k3e(e,t)}}var O3e=A3e,R3e=N3e,P3e=O3e,D3e=ZE,F3e=L0;function L3e(t){return D3e(t)?R3e(F3e(t)):P3e(t)}var M3e=L3e,B3e=t3e,j3e=_3e,U3e=Yc,z3e=er,V3e=M3e;function W3e(t){return typeof t=="function"?t:t==null?U3e:typeof t=="object"?z3e(t)?j3e(t[0],t[1]):B3e(t):V3e(t)}var Qo=W3e;function G3e(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var H3e=G3e;function q3e(t){return t!==t}var K3e=q3e;function X3e(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var Y3e=X3e,J3e=H3e,Q3e=K3e,Z3e=Y3e;function eFe(t,e,n){return e===e?Z3e(t,e,n):J3e(t,Q3e,n)}var tFe=eFe,nFe=tFe;function rFe(t,e){var n=t==null?0:t.length;return!!n&&nFe(t,e,0)>-1}var sFe=rFe;function iFe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var oFe=iFe;function aFe(){}var lFe=aFe,O1=q6,uFe=lFe,cFe=yT,fFe=1/0,dFe=O1&&1/cFe(new O1([,-0]))[1]==fFe?function(t){return new O1(t)}:uFe,hFe=dFe,pFe=L6,mFe=sFe,gFe=oFe,yFe=B6,vFe=hFe,bFe=yT,xFe=200;function wFe(t,e,n){var r=-1,s=mFe,i=t.length,o=!0,a=[],l=a;if(n)o=!1,s=gFe;else if(i>=xFe){var u=e?null:vFe(t);if(u)return bFe(u);o=!1,s=yFe,l=new pFe}else l=e?[]:a;e:for(;++r<i;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),a.push(c)}else s(l,f,n)||(l!==a&&l.push(f),a.push(c))}return a}var SFe=wFe,$Fe=Qo,EFe=SFe;function TFe(t,e){return t&&t.length?EFe(t,$Fe(e)):[]}var _Fe=TFe;const Pk=Le(_Fe);function Q6(t,e,n){return e===!0?Pk(t,n):Se(e)?Pk(t,e):t}function tc(t){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(t)}var CFe=["ref"];function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){tv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t5(r.key),r)}}function NFe(t,e,n){return e&&Fk(t.prototype,e),n&&Fk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kFe(t,e,n){return e=ty(e),AFe(t,Z6()?Reflect.construct(e,n||[],ty(t).constructor):e.apply(t,n))}function AFe(t,e){if(e&&(tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e5(t)}function Z6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z6=function(){return!!t})()}function ty(t){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(t)}function e5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lw(t,e)}function Lw(t,e){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Lw(t,e)}function tv(t,e,n){return e=t5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t5(t){var e=RFe(t,"string");return tc(e)=="symbol"?e:String(e)}function RFe(t,e){if(tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PFe(t,e){if(t==null)return{};var n=DFe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DFe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function FFe(t){return t.value}function LFe(t,e){if(F.isValidElement(t))return F.cloneElement(t,e);if(typeof t=="function")return F.createElement(t,e);e.ref;var n=PFe(e,CFe);return F.createElement(gT,n)}var Lk=1,Gd=function(t){OFe(e,t);function e(){var n;IFe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=kFe(this,e,[].concat(s)),tv(e5(n),"lastBoundingBox",{width:-1,height:-1}),n}return NFe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>Lk||Math.abs(s.height-this.lastBoundingBox.height)>Lk)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?oa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,a=s.verticalAlign,l=s.margin,u=s.chartWidth,c=s.chartHeight,f,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var p=this.getBBoxSnapshot();d={top:((c||0)-p.height)/2}}else d=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return oa(oa({},f),d)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,a=s.height,l=s.wrapperStyle,u=s.payloadUniqBy,c=s.payload,f=oa(oa({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return F.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){r.wrapperNode=h}},LFe(i,oa(oa({},this.props),{},{payload:Q6(c,u,FFe)})))}}],[{key:"getWithHeight",value:function(r,s){var i=r.props.layout;return i==="vertical"&&se(r.props.height)?{height:r.props.height}:i==="horizontal"?{width:r.props.width||s}:null}}]),e}(D.PureComponent);tv(Gd,"displayName","Legend");tv(Gd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Mk=ap,MFe=vT,BFe=er,Bk=Mk?Mk.isConcatSpreadable:void 0;function jFe(t){return BFe(t)||MFe(t)||!!(Bk&&t&&t[Bk])}var UFe=jFe,zFe=U6,VFe=UFe;function n5(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=VFe),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?n5(a,e-1,n,r,s):zFe(s,a):r||(s[s.length]=a)}return s}var r5=n5;function WFe(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++s];if(n(i[l],l,i)===!1)break}return e}}var GFe=WFe,HFe=GFe,qFe=HFe(),KFe=qFe,XFe=KFe,YFe=wT;function JFe(t,e){return t&&XFe(t,e,YFe)}var s5=JFe,QFe=ev;function ZFe(t,e){return function(n,r){if(n==null)return n;if(!QFe(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var eLe=ZFe,tLe=s5,nLe=eLe,rLe=nLe(tLe),$T=rLe,sLe=$T,iLe=ev;function oLe(t,e){var n=-1,r=iLe(t)?Array(t.length):[];return sLe(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var i5=oLe;function aLe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var lLe=aLe,jk=Vc;function uLe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=jk(t),o=e!==void 0,a=e===null,l=e===e,u=jk(e);if(!a&&!u&&!i&&t>e||i&&o&&l&&!a&&!u||r&&o&&l||!n&&l||!s)return 1;if(!r&&!i&&!u&&t<e||u&&n&&s&&!r&&!i||a&&n&&s||!o&&s||!l)return-1}return 0}var cLe=uLe,fLe=cLe;function dLe(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,a=n.length;++r<o;){var l=fLe(s[r],i[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var hLe=dLe,R1=iT,pLe=oT,mLe=Qo,gLe=i5,yLe=lLe,vLe=W6,bLe=hLe,xLe=Yc,wLe=er;function SLe(t,e,n){e.length?e=R1(e,function(i){return wLe(i)?function(o){return pLe(o,i.length===1?i[0]:i)}:i}):e=[xLe];var r=-1;e=R1(e,vLe(mLe));var s=gLe(t,function(i,o,a){var l=R1(e,function(u){return u(i)});return{criteria:l,index:++r,value:i}});return yLe(s,function(i,o){return bLe(i,o,n)})}var $Le=SLe;function ELe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var TLe=ELe,_Le=TLe,Uk=Math.max;function CLe(t,e,n){return e=Uk(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=Uk(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),_Le(t,this,a)}}var ILe=CLe;function NLe(t){return function(){return t}}var kLe=NLe,ALe=Nl,OLe=function(){try{var t=ALe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),o5=OLe,RLe=kLe,zk=o5,PLe=Yc,DLe=zk?function(t,e){return zk(t,"toString",{configurable:!0,enumerable:!1,value:RLe(e),writable:!0})}:PLe,FLe=DLe,LLe=800,MLe=16,BLe=Date.now;function jLe(t){var e=0,n=0;return function(){var r=BLe(),s=MLe-(r-n);if(n=r,s>0){if(++e>=LLe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ULe=jLe,zLe=FLe,VLe=ULe,WLe=VLe(zLe),GLe=WLe,HLe=Yc,qLe=ILe,KLe=GLe;function XLe(t,e){return KLe(qLe(t,e,HLe),t+"")}var YLe=XLe,JLe=tT,QLe=ev,ZLe=bT,eMe=Jo;function tMe(t,e,n){if(!eMe(n))return!1;var r=typeof e;return(r=="number"?QLe(n)&&ZLe(e,n.length):r=="string"&&e in n)?JLe(n[e],t):!1}var nv=tMe,nMe=r5,rMe=$Le,sMe=YLe,Vk=nv,iMe=sMe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Vk(t,e[0],e[1])?e=[]:n>2&&Vk(e[0],e[1],e[2])&&(e=[e[0]]),rMe(t,nMe(e,1),[])}),oMe=iMe;const ET=Le(oMe);function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(this,arguments)}function aMe(t,e){return fMe(t)||cMe(t,e)||uMe(t,e)||lMe()}function lMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uMe(t,e){if(t){if(typeof t=="string")return Wk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wk(t,e)}}function Wk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function fMe(t){if(Array.isArray(t))return t}function Gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function P1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(n),!0).forEach(function(r){dMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dMe(t,e,n){return e=hMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hMe(t){var e=pMe(t,"string");return Hd(e)=="symbol"?e:String(e)}function pMe(t,e){if(Hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mMe(t){return Array.isArray(t)&&Bt(t[0])&&Bt(t[1])?t.join(" ~ "):t}var gMe=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,f=e.formatter,d=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,b=function(){if(c&&c.length){var P={padding:0,margin:0},M=(d?ET(c,d):c).map(function(j,W){if(j.type==="none")return null;var G=P1({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},a),K=j.formatter||f||mMe,L=j.value,H=j.name,te=L,ce=H;if(K&&te!=null&&ce!=null){var le=K(L,H,j,W,c);if(Array.isArray(le)){var Ae=aMe(le,2);te=Ae[0],ce=Ae[1]}else te=le}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:G},Bt(ce)?F.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Bt(ce)?F.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,F.createElement("span",{className:"recharts-tooltip-item-value"},te),F.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:P},M)}return null},x=P1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=P1({margin:0},u),$=!_e(m),E=$?m:"",T=Fe("recharts-default-tooltip",h),N=Fe("recharts-tooltip-label",p);$&&g&&c!==void 0&&c!==null&&(E=g(m,c));var I=v?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",Mw({className:T,style:x},I),F.createElement("p",{className:N,style:w},F.isValidElement(E)?E:"".concat(E)),b())};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function Xp(t,e,n){return e=yMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yMe(t){var e=vMe(t,"string");return qd(e)=="symbol"?e:String(e)}function vMe(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gf="recharts-tooltip-wrapper",bMe={visibility:"hidden"};function xMe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Fe(gf,Xp(Xp(Xp(Xp({},"".concat(gf,"-right"),se(n)&&e&&se(e.x)&&n>=e.x),"".concat(gf,"-left"),se(n)&&e&&se(e.x)&&n<e.x),"".concat(gf,"-bottom"),se(r)&&e&&se(e.y)&&r>=e.y),"".concat(gf,"-top"),se(r)&&e&&se(e.y)&&r<e.y))}function Hk(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(i&&se(i[r]))return i[r];var c=n[r]-a-s,f=n[r]+s;if(e[r])return o[r]?c:f;if(o[r]){var d=c,h=l[r];return d<h?Math.max(f,l[r]):Math.max(c,l[r])}var p=f+a,m=l[r]+u;return p>m?Math.max(c,l[r]):Math.max(f,l[r])}function wMe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function SMe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,f;return o.height>0&&o.width>0&&n?(c=Hk({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=Hk({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=wMe({translateX:c,translateY:f,useTranslate3d:a})):u=bMe,{cssProperties:u,cssClasses:xMe({translateX:c,translateY:f,coordinate:n})}}function nc(t){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(t)}function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Kk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){Uw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l5(r.key),r)}}function TMe(t,e,n){return e&&EMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Me(t,e,n){return e=ny(e),CMe(t,a5()?Reflect.construct(e,n||[],ny(t).constructor):e.apply(t,n))}function CMe(t,e){if(e&&(nc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bw(t)}function a5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a5=function(){return!!t})()}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(t)}function Bw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jw(t,e)}function jw(t,e){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jw(t,e)}function Uw(t,e,n){return e=l5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l5(t){var e=NMe(t,"string");return nc(e)=="symbol"?e:String(e)}function NMe(t,e){if(nc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xk=1,kMe=function(t){IMe(e,t);function e(){var n;$Me(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=_Me(this,e,[].concat(s)),Uw(Bw(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Uw(Bw(n),"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return TMe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Xk||Math.abs(r.height-this.state.lastBoundingBox.height)>Xk)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,u=s.children,c=s.coordinate,f=s.hasPayload,d=s.isAnimationActive,h=s.offset,p=s.position,m=s.reverseDirection,g=s.useTranslate3d,y=s.viewBox,v=s.wrapperStyle,b=SMe({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),x=b.cssClasses,w=b.cssProperties,$=Kk(Kk({transition:d&&i?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return F.createElement("div",{tabIndex:-1,className:x,style:$,ref:function(T){r.wrapperNode=T}},u)}}]),e}(D.PureComponent),AMe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Va={isSsr:AMe(),get:function(e){return Va[e]},set:function(e,n){if(typeof e=="string")Va[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){Va[s]=e[s]})}}};function rc(t){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(t)}function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(n),!0).forEach(function(r){TT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c5(r.key),r)}}function PMe(t,e,n){return e&&RMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DMe(t,e,n){return e=ry(e),FMe(t,u5()?Reflect.construct(e,n||[],ry(t).constructor):e.apply(t,n))}function FMe(t,e){if(e&&(rc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LMe(t)}function LMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u5=function(){return!!t})()}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ry(t)}function MMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zw(t,e)}function zw(t,e){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},zw(t,e)}function TT(t,e,n){return e=c5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c5(t){var e=BMe(t,"string");return rc(e)=="symbol"?e:String(e)}function BMe(t,e){if(rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jMe(t){return t.dataKey}function UMe(t,e){return F.isValidElement(t)?F.cloneElement(t,e):typeof t=="function"?F.createElement(t,e):F.createElement(gMe,e)}var ni=function(t){MMe(e,t);function e(){return OMe(this,e),DMe(this,e,arguments)}return PMe(e,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,u=s.content,c=s.coordinate,f=s.filterNull,d=s.isAnimationActive,h=s.offset,p=s.payload,m=s.payloadUniqBy,g=s.position,y=s.reverseDirection,v=s.useTranslate3d,b=s.viewBox,x=s.wrapperStyle,w=p??[];f&&w.length&&(w=Q6(p.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),m,jMe));var $=w.length>0;return F.createElement(kMe,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:d,active:i,coordinate:c,hasPayload:$,offset:h,position:g,reverseDirection:y,useTranslate3d:v,viewBox:b,wrapperStyle:x},UMe(u,Jk(Jk({},this.props),{},{payload:w})))}}]),e}(D.PureComponent);TT(ni,"displayName","Tooltip");TT(ni,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Va.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zMe=Js,VMe=function(){return zMe.Date.now()},WMe=VMe,GMe=/\s/;function HMe(t){for(var e=t.length;e--&&GMe.test(t.charAt(e)););return e}var qMe=HMe,KMe=qMe,XMe=/^\s+/;function YMe(t){return t&&t.slice(0,KMe(t)+1).replace(XMe,"")}var JMe=YMe,QMe=JMe,Qk=Jo,ZMe=Vc,Zk=NaN,eBe=/^[-+]0x[0-9a-f]+$/i,tBe=/^0b[01]+$/i,nBe=/^0o[0-7]+$/i,rBe=parseInt;function sBe(t){if(typeof t=="number")return t;if(ZMe(t))return Zk;if(Qk(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Qk(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=QMe(t);var n=tBe.test(t);return n||nBe.test(t)?rBe(t.slice(2),n?2:8):eBe.test(t)?Zk:+t}var f5=sBe,iBe=Jo,D1=WMe,eA=f5,oBe="Expected a function",aBe=Math.max,lBe=Math.min;function uBe(t,e,n){var r,s,i,o,a,l,u=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(oBe);e=eA(e)||0,iBe(n)&&(c=!!n.leading,f="maxWait"in n,i=f?aBe(eA(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d);function h($){var E=r,T=s;return r=s=void 0,u=$,o=t.apply(T,E),o}function p($){return u=$,a=setTimeout(y,e),c?h($):o}function m($){var E=$-l,T=$-u,N=e-E;return f?lBe(N,i-T):N}function g($){var E=$-l,T=$-u;return l===void 0||E>=e||E<0||f&&T>=i}function y(){var $=D1();if(g($))return v($);a=setTimeout(y,m($))}function v($){return a=void 0,d&&r?h($):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=s=a=void 0}function x(){return a===void 0?o:v(D1())}function w(){var $=D1(),E=g($);if(r=arguments,s=this,l=$,E){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(y,e),h(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=b,w.flush=x,w}var cBe=uBe,fBe=cBe,dBe=Jo,hBe="Expected a function";function pBe(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(hBe);return dBe(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),fBe(t,e,{leading:r,maxWait:e,trailing:s})}var mBe=pBe;const gBe=Le(mBe);var Co=function(e){return null};Co.displayName="Cell";function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function tA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tA(Object(n),!0).forEach(function(r){yBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yBe(t,e,n){return e=vBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vBe(t){var e=bBe(t,"string");return Kd(e)=="symbol"?e:String(e)}function bBe(t,e){if(Kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pl={widthCache:{},cacheCount:0},xBe=2e3,wBe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nA="recharts_measurement_span";function SBe(t){var e=Vw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var rA=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Va.isSsr)return{width:0,height:0};var r=SBe(n),s=JSON.stringify({text:e,copyStyle:r});if(Pl.widthCache[s])return Pl.widthCache[s];try{var i=document.getElementById(nA);i||(i=document.createElement("span"),i.setAttribute("id",nA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Vw(Vw({},wBe),r);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),l={width:a.width,height:a.height};return Pl.widthCache[s]=l,++Pl.cacheCount>xBe&&(Pl.cacheCount=0,Pl.widthCache={}),l}catch{return{width:0,height:0}}},$Be=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function sy(t,e){return CBe(t)||_Be(t,e)||TBe(t,e)||EBe()}function EBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TBe(t,e){if(t){if(typeof t=="string")return sA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sA(t,e)}}function sA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _Be(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function CBe(t){if(Array.isArray(t))return t}function IBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kBe(r.key),r)}}function NBe(t,e,n){return e&&iA(t.prototype,e),n&&iA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kBe(t){var e=ABe(t,"string");return Xd(e)=="symbol"?e:String(e)}function ABe(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,OBe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,RBe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,d5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},PBe=Object.keys(d5),su="NaN";function DBe(t,e){return t*d5[e]}var Yp=function(){function t(e,n){IBe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!OBe.test(n)&&(this.num=NaN,this.unit=""),PBe.includes(n)&&(this.num=DBe(e,n),this.unit="px")}return NBe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=RBe.exec(n))!==null&&r!==void 0?r:[],i=sy(s,3),o=i[1],a=i[2];return new t(parseFloat(o),a??"")}}]),t}();function h5(t){if(t.includes(su))return su;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=oA.exec(e))!==null&&n!==void 0?n:[],s=sy(r,4),i=s[1],o=s[2],a=s[3],l=Yp.parse(i??""),u=Yp.parse(a??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return su;e=e.replace(oA,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,d=(f=aA.exec(e))!==null&&f!==void 0?f:[],h=sy(d,4),p=h[1],m=h[2],g=h[3],y=Yp.parse(p??""),v=Yp.parse(g??""),b=m==="+"?y.add(v):y.subtract(v);if(b.isNaN())return su;e=e.replace(aA,b.toString())}return e}var lA=/\(([^()]*)\)/;function FBe(t){for(var e=t;e.includes("(");){var n=lA.exec(e),r=sy(n,2),s=r[1];e=e.replace(lA,h5(s))}return e}function LBe(t){var e=t.replace(/\s+/g,"");return e=FBe(e),e=h5(e),e}function MBe(t){try{return LBe(t)}catch{return su}}function F1(t){var e=MBe(t.slice(5,-1));return e===su?"":e}var BBe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jBe=["dx","dy","angle","className","breakAll"];function Ww(){return Ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ww.apply(this,arguments)}function uA(t,e){if(t==null)return{};var n=UBe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UBe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cA(t,e){return GBe(t)||WBe(t,e)||VBe(t,e)||zBe()}function zBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VBe(t,e){if(t){if(typeof t=="string")return fA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fA(t,e)}}function fA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function GBe(t){if(Array.isArray(t))return t}var p5=/[ \f\n\r\t\v\u2028\u2029]+/,m5=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var i=[];_e(n)||(r?i=n.toString().split(""):i=n.toString().split(p5));var o=i.map(function(l){return{word:l,width:rA(l,s).width}}),a=r?0:rA(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},HBe=function(e,n,r,s,i){var o=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=se(o),f=a,d=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(G,K){var L=K.word,H=K.width,te=G[G.length-1];if(te&&(s==null||i||te.width+H+r<Number(s)))te.words.push(L),te.width+=H+r;else{var ce={words:[L],width:H};G.push(ce)}return G},[])},h=d(n),p=function(W){return W.reduce(function(G,K){return G.width>K.width?G:K})};if(!c)return h;for(var m="…",g=function(W){var G=f.slice(0,W),K=m5({breakAll:u,style:l,children:G+m}).wordsWithComputedWidth,L=d(K),H=L.length>o||p(L).width>Number(s);return[H,L]},y=0,v=f.length-1,b=0,x;y<=v&&b<=f.length-1;){var w=Math.floor((y+v)/2),$=w-1,E=g($),T=cA(E,2),N=T[0],I=T[1],R=g(w),P=cA(R,1),M=P[0];if(!N&&!M&&(y=w+1),N&&M&&(v=w-1),!N&&M){x=I;break}b++}return x||h},dA=function(e){var n=_e(e)?[]:e.toString().split(p5);return[{words:n}]},qBe=function(e){var n=e.width,r=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Va.isSsr){var l,u,c=m5({breakAll:o,children:s,style:i});if(c){var f=c.wordsWithComputedWidth,d=c.spaceWidth;l=f,u=d}else return dA(s);return HBe({breakAll:o,children:s,maxLines:a,style:i},l,u,n,r)}return dA(s)},hA="#808080",sc=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,f=c===void 0?!1:c,d=e.textAnchor,h=d===void 0?"start":d,p=e.verticalAnchor,m=p===void 0?"end":p,g=e.fill,y=g===void 0?hA:g,v=uA(e,BBe),b=D.useMemo(function(){return qBe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),x=v.dx,w=v.dy,$=v.angle,E=v.className,T=v.breakAll,N=uA(v,jBe);if(!Bt(r)||!Bt(i))return null;var I=r+(se(x)?x:0),R=i+(se(w)?w:0),P;switch(m){case"start":P=F1("calc(".concat(u,")"));break;case"middle":P=F1("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:P=F1("calc(".concat(b.length-1," * -").concat(a,")"));break}var M=[];if(f){var j=b[0].width,W=v.width;M.push("scale(".concat((se(W)?W/j:1)/j,")"))}return $&&M.push("rotate(".concat($,", ").concat(I,", ").concat(R,")")),M.length&&(N.transform=M.join(" ")),F.createElement("text",Ww({},xe(N,!0),{x:I,y:R,className:Fe("recharts-text",E),textAnchor:h,fill:y.includes("url")?hA:y}),b.map(function(G,K){var L=G.words.join(T?"":" ");return F.createElement("tspan",{x:I,dy:K===0?P:a,key:L},L)}))};function Io(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KBe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _T(t){let e,n,r;t.length!==2?(e=Io,n=(a,l)=>Io(t(a),l),r=(a,l)=>t(a)-l):(e=t===Io||t===KBe?t:XBe,n=t,r=t);function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){const f=s(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:s,center:o,right:i}}function XBe(){return 0}function g5(t){return t===null?NaN:+t}function*YBe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const JBe=_T(Io),cp=JBe.right;_T(g5).center;class pA extends Map{constructor(e,n=e4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(mA(this,e))}has(e){return super.has(mA(this,e))}set(e,n){return super.set(QBe(this,e),n)}delete(e){return super.delete(ZBe(this,e))}}function mA({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function QBe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ZBe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function e4e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function t4e(t=Io){if(t===Io)return y5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function y5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const n4e=Math.sqrt(50),r4e=Math.sqrt(10),s4e=Math.sqrt(2);function iy(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=n4e?10:i>=r4e?5:i>=s4e?2:1;let a,l,u;return s<0?(u=Math.pow(10,-s)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,s)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?iy(t,e,n*2):[a,l,u]}function Gw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,o]=r?iy(e,t,n):iy(t,e,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(i-u)/-o;else for(let u=0;u<a;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(s+u)/-o;else for(let u=0;u<a;++u)l[u]=(s+u)*o;return l}function Hw(t,e,n){return e=+e,t=+t,n=+n,iy(t,e,n)[2]}function qw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?Hw(e,t,n):Hw(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function gA(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function yA(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function v5(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?y5:t4e(s);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+d)),p=Math.min(r,Math.floor(e+(l-u)*f/l+d));v5(t,e,h,p,s)}const i=t[e];let o=n,a=r;for(yf(t,n,e),s(t[r],i)>0&&yf(t,n,r);o<a;){for(yf(t,o,a),++o,--a;s(t[o],i)<0;)++o;for(;s(t[a],i)>0;)--a}s(t[n],i)===0?yf(t,n,a):(++a,yf(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function yf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function i4e(t,e,n){if(t=Float64Array.from(YBe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return yA(t);if(e>=1)return gA(t);var r,s=(r-1)*e,i=Math.floor(s),o=gA(v5(t,i).subarray(0,i+1)),a=yA(t.subarray(i+1));return o+(a-o)*(s-i)}}function o4e(t,e,n=g5){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return o+(a-o)*(s-i)}}function a4e(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Xr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function zi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Kw=Symbol("implicit");function CT(){var t=new pA,e=[],n=[],r=Kw;function s(i){let o=t.get(i);if(o===void 0){if(r!==Kw)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new pA;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return CT(e,n).unknown(r)},Xr.apply(s,arguments),s}function Yd(){var t=CT().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var d=e().length,h=s<r,p=h?s:r,m=h?r:s;i=(m-p)/Math.max(1,d-l+u*2),a&&(i=Math.floor(i)),p+=(m-p-i*(d-l))*c,o=i*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=a4e(d).map(function(y){return p+i*y});return n(h?g.reverse():g)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,s]=d,r=+r,s=+s,f()):[r,s]},t.rangeRound=function(d){return[r,s]=d,r=+r,s=+s,a=!0,f()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.copy=function(){return Yd(e(),[r,s]).round(a).paddingInner(l).paddingOuter(u).align(c)},Xr.apply(f(),arguments)}function b5(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return b5(e())},t}function Kf(){return b5(Yd.apply(null,arguments).paddingInner(1))}function IT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function x5(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function fp(){}var Jd=.7,oy=1/Jd,Eu="\\s*([+-]?\\d+)\\s*",Qd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l4e=/^#([0-9a-f]{3,8})$/,u4e=new RegExp(`^rgb\\(${Eu},${Eu},${Eu}\\)$`),c4e=new RegExp(`^rgb\\(${js},${js},${js}\\)$`),f4e=new RegExp(`^rgba\\(${Eu},${Eu},${Eu},${Qd}\\)$`),d4e=new RegExp(`^rgba\\(${js},${js},${js},${Qd}\\)$`),h4e=new RegExp(`^hsl\\(${Qd},${js},${js}\\)$`),p4e=new RegExp(`^hsla\\(${Qd},${js},${js},${Qd}\\)$`),vA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};IT(fp,Zd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bA,formatHex:bA,formatHex8:m4e,formatHsl:g4e,formatRgb:xA,toString:xA});function bA(){return this.rgb().formatHex()}function m4e(){return this.rgb().formatHex8()}function g4e(){return w5(this).formatHsl()}function xA(){return this.rgb().formatRgb()}function Zd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=l4e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?wA(e):n===3?new Vn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Jp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Jp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=u4e.exec(t))?new Vn(e[1],e[2],e[3],1):(e=c4e.exec(t))?new Vn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=f4e.exec(t))?Jp(e[1],e[2],e[3],e[4]):(e=d4e.exec(t))?Jp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=h4e.exec(t))?EA(e[1],e[2]/100,e[3]/100,1):(e=p4e.exec(t))?EA(e[1],e[2]/100,e[3]/100,e[4]):vA.hasOwnProperty(t)?wA(vA[t]):t==="transparent"?new Vn(NaN,NaN,NaN,0):null}function wA(t){return new Vn(t>>16&255,t>>8&255,t&255,1)}function Jp(t,e,n,r){return r<=0&&(t=e=n=NaN),new Vn(t,e,n,r)}function y4e(t){return t instanceof fp||(t=Zd(t)),t?(t=t.rgb(),new Vn(t.r,t.g,t.b,t.opacity)):new Vn}function Xw(t,e,n,r){return arguments.length===1?y4e(t):new Vn(t,e,n,r??1)}function Vn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}IT(Vn,Xw,x5(fp,{brighter(t){return t=t==null?oy:Math.pow(oy,t),new Vn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new Vn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Vn(Wa(this.r),Wa(this.g),Wa(this.b),ay(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SA,formatHex:SA,formatHex8:v4e,formatRgb:$A,toString:$A}));function SA(){return`#${Oa(this.r)}${Oa(this.g)}${Oa(this.b)}`}function v4e(){return`#${Oa(this.r)}${Oa(this.g)}${Oa(this.b)}${Oa((isNaN(this.opacity)?1:this.opacity)*255)}`}function $A(){const t=ay(this.opacity);return`${t===1?"rgb(":"rgba("}${Wa(this.r)}, ${Wa(this.g)}, ${Wa(this.b)}${t===1?")":`, ${t})`}`}function ay(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Oa(t){return t=Wa(t),(t<16?"0":"")+t.toString(16)}function EA(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new as(t,e,n,r)}function w5(t){if(t instanceof as)return new as(t.h,t.s,t.l,t.opacity);if(t instanceof fp||(t=Zd(t)),!t)return new as;if(t instanceof as)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new as(o,a,l,t.opacity)}function b4e(t,e,n,r){return arguments.length===1?w5(t):new as(t,e,n,r??1)}function as(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}IT(as,b4e,x5(fp,{brighter(t){return t=t==null?oy:Math.pow(oy,t),new as(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new as(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Vn(L1(t>=240?t-240:t+120,s,r),L1(t,s,r),L1(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new as(TA(this.h),Qp(this.s),Qp(this.l),ay(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ay(this.opacity);return`${t===1?"hsl(":"hsla("}${TA(this.h)}, ${Qp(this.s)*100}%, ${Qp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function TA(t){return t=(t||0)%360,t<0?t+360:t}function Qp(t){return Math.max(0,Math.min(1,t||0))}function L1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const NT=t=>()=>t;function x4e(t,e){return function(n){return t+n*e}}function w4e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function S4e(t){return(t=+t)==1?S5:function(e,n){return n-e?w4e(e,n,t):NT(isNaN(e)?n:e)}}function S5(t,e){var n=e-t;return n?x4e(t,n):NT(isNaN(t)?e:t)}const _A=function t(e){var n=S4e(e);function r(s,i){var o=n((s=Xw(s)).r,(i=Xw(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),u=S5(s.opacity,i.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=l(c),s.opacity=u(c),s+""}}return r.gamma=t,r}(1);function $4e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function E4e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function T4e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=Jc(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function _4e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ly(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function C4e(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Jc(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var Yw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M1=new RegExp(Yw.source,"g");function I4e(t){return function(){return t}}function N4e(t){return function(e){return t(e)+""}}function k4e(t,e){var n=Yw.lastIndex=M1.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Yw.exec(t))&&(s=M1.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:ly(r,s)})),n=M1.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?N4e(l[0].x):I4e(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Jc(t,e){var n=typeof e,r;return e==null||n==="boolean"?NT(e):(n==="number"?ly:n==="string"?(r=Zd(e))?(e=r,_A):k4e:e instanceof Zd?_A:e instanceof Date?_4e:E4e(e)?$4e:Array.isArray(e)?T4e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?C4e:ly)(t,e)}function kT(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function A4e(t,e){e===void 0&&(e=t,t=Jc);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[a](o-a)}}function O4e(t){return function(){return t}}function uy(t){return+t}var CA=[0,1];function Tn(t){return t}function Jw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:O4e(isNaN(e)?NaN:.5)}function R4e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function P4e(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=Jw(s,r),i=n(o,i)):(r=Jw(r,s),i=n(i,o)),function(a){return i(r(a))}}function D4e(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=Jw(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=cp(t,a,1,r)-1;return i[l](s[l](a))}}function dp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rv(){var t=CA,e=CA,n=Jc,r,s,i,o=Tn,a,l,u;function c(){var d=Math.min(t.length,e.length);return o!==Tn&&(o=R4e(t[0],t[d-1])),a=d>2?D4e:P4e,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?i:(l||(l=a(t.map(r),e,n)))(r(o(d)))}return f.invert=function(d){return o(s((u||(u=a(e,t.map(r),ly)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,uy),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=kT,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Tn,c()):o!==Tn},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(i=d,f):i},function(d,h){return r=d,s=h,c()}}function AT(){return rv()(Tn,Tn)}function F4e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cy(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ic(t){return t=cy(Math.abs(t)),t?t[1]:NaN}function L4e(t,e){return function(n,r){for(var s=n.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function M4e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var B4e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eh(t){if(!(e=B4e.exec(t)))throw new Error("invalid format: "+t);var e;return new OT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}eh.prototype=OT.prototype;function OT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}OT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function j4e(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var $5;function U4e(t,e){var n=cy(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-($5=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+cy(t,Math.max(0,e+i-1))[0]}function IA(t,e){var n=cy(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const NA={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:F4e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>IA(t*100,e),r:IA,s:U4e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function kA(t){return t}var AA=Array.prototype.map,OA=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function z4e(t){var e=t.grouping===void 0||t.thousands===void 0?kA:L4e(AA.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?kA:M4e(AA.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=eh(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):NA[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var $=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=m==="$"?r:/[%p]/.test(w)?o:"",T=NA[w],N=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var P=$,M=E,j,W,G;if(w==="c")M=T(R)+M,R="";else{R=+R;var K=R<0||1/R<0;if(R=isNaN(R)?l:T(Math.abs(R),b),x&&(R=j4e(R)),K&&+R==0&&p!=="+"&&(K=!1),P=(K?p==="("?p:a:p==="-"||p==="("?"":p)+P,M=(w==="s"?OA[8+$5/3]:"")+M+(K&&p==="("?")":""),N){for(j=-1,W=R.length;++j<W;)if(G=R.charCodeAt(j),48>G||G>57){M=(G===46?s+R.slice(j+1):R.slice(j))+M,R=R.slice(0,j);break}}}v&&!g&&(R=e(R,1/0));var L=P.length+R.length+M.length,H=L<y?new Array(y-L+1).join(d):"";switch(v&&g&&(R=e(H+R,H.length?y-M.length:1/0),H=""),h){case"<":R=P+R+M+H;break;case"=":R=P+H+R+M;break;case"^":R=H.slice(0,L=H.length>>1)+P+R+M+H.slice(L);break;default:R=H+P+R+M;break}return i(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=u((f=eh(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ic(d)/3)))*3,m=Math.pow(10,-p),g=OA[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var Zp,RT,E5;V4e({thousands:",",grouping:[3],currency:["$",""]});function V4e(t){return Zp=z4e(t),RT=Zp.format,E5=Zp.formatPrefix,Zp}function W4e(t){return Math.max(0,-ic(Math.abs(t)))}function G4e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ic(e)/3)))*3-ic(Math.abs(t)))}function H4e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ic(e)-ic(t))+1}function T5(t,e,n,r){var s=qw(t,e,n),i;switch(r=eh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=G4e(s,o))&&(r.precision=i),E5(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=H4e(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=W4e(s))&&(r.precision=i-(r.type==="%")*2);break}}return RT(r)}function Zo(t){var e=t.domain;return t.ticks=function(n){var r=e();return Gw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return T5(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],a=r[i],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=s,s=i,i=u);c-- >0;){if(u=Hw(o,a,n),u===l)return r[s]=o,r[i]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function fy(){var t=AT();return t.copy=function(){return dp(t,fy())},Xr.apply(t,arguments),Zo(t)}function _5(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,uy),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return _5(t).unknown(e)},t=arguments.length?Array.from(t,uy):[0,1],Zo(n)}function C5(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function RA(t){return Math.log(t)}function PA(t){return Math.exp(t)}function q4e(t){return-Math.log(-t)}function K4e(t){return-Math.exp(-t)}function X4e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Y4e(t){return t===10?X4e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function J4e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function DA(t){return(e,n)=>-t(-e,n)}function PT(t){const e=t(RA,PA),n=e.domain;let r=10,s,i;function o(){return s=J4e(r),i=Y4e(r),n()[0]<0?(s=DA(s),i=DA(i),t(q4e,K4e)):t(RA,PA),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=s(u),h=s(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/i(-d):p*i(d),!(m<u)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/i(-d):p*i(d),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=Gw(u,c,g))}else y=Gw(d,h,Math.min(h-d,g)).map(i);return f?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=eh(l)).precision==null&&(l.trim=!0),l=RT(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let f=c/i(Math.round(s(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>n(C5(n(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),e}function I5(){const t=PT(rv()).domain([1,10]);return t.copy=()=>dp(t,I5()).base(t.base()),Xr.apply(t,arguments),t}function FA(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function LA(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function DT(t){var e=1,n=t(FA(e),LA(e));return n.constant=function(r){return arguments.length?t(FA(e=+r),LA(e)):e},Zo(n)}function N5(){var t=DT(rv());return t.copy=function(){return dp(t,N5()).constant(t.constant())},Xr.apply(t,arguments)}function MA(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Q4e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Z4e(t){return t<0?-t*t:t*t}function FT(t){var e=t(Tn,Tn),n=1;function r(){return n===1?t(Tn,Tn):n===.5?t(Q4e,Z4e):t(MA(n),MA(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Zo(e)}function LT(){var t=FT(rv());return t.copy=function(){return dp(t,LT()).exponent(t.exponent())},Xr.apply(t,arguments),t}function eje(){return LT.apply(null,arguments).exponent(.5)}function BA(t){return Math.sign(t)*t*t}function tje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function k5(){var t=AT(),e=[0,1],n=!1,r;function s(i){var o=tje(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(BA(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,uy)).map(BA)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return k5(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Xr.apply(s,arguments),Zo(s)}function A5(){var t=[],e=[],n=[],r;function s(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=o4e(t,o/a);return i}function i(o){return o==null||isNaN(o=+o)?r:e[cp(n,o)]}return i.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Io),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return A5().domain(t).range(e).unknown(r)},Xr.apply(i,arguments)}function O5(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[cp(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return O5().domain([t,e]).range(s).unknown(i)},Xr.apply(Zo(o),arguments)}function R5(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[cp(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return R5().domain(t).range(e).unknown(n)},Xr.apply(s,arguments)}const B1=new Date,j1=new Date;function jt(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let u;do l.push(u=new Date(+i)),e(i,a),t(i);while(u<i&&i<o);return l},s.filter=i=>jt(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!i(o););else for(;--a>=0;)for(;e(o,1),!i(o););}),n&&(s.count=(i,o)=>(B1.setTime(+i),j1.setTime(+o),t(B1),t(j1),Math.floor(n(B1,j1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const dy=jt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);dy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?jt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):dy);dy.range;const yi=1e3,Lr=yi*60,vi=Lr*60,Ni=vi*24,MT=Ni*7,jA=Ni*30,U1=Ni*365,Ra=jt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*yi)},(t,e)=>(e-t)/yi,t=>t.getUTCSeconds());Ra.range;const BT=jt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yi)},(t,e)=>{t.setTime(+t+e*Lr)},(t,e)=>(e-t)/Lr,t=>t.getMinutes());BT.range;const jT=jt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Lr)},(t,e)=>(e-t)/Lr,t=>t.getUTCMinutes());jT.range;const UT=jt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yi-t.getMinutes()*Lr)},(t,e)=>{t.setTime(+t+e*vi)},(t,e)=>(e-t)/vi,t=>t.getHours());UT.range;const zT=jt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*vi)},(t,e)=>(e-t)/vi,t=>t.getUTCHours());zT.range;const hp=jt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Lr)/Ni,t=>t.getDate()-1);hp.range;const sv=jt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ni,t=>t.getUTCDate()-1);sv.range;const P5=jt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ni,t=>Math.floor(t/Ni));P5.range;function kl(t){return jt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Lr)/MT)}const iv=kl(0),hy=kl(1),nje=kl(2),rje=kl(3),oc=kl(4),sje=kl(5),ije=kl(6);iv.range;hy.range;nje.range;rje.range;oc.range;sje.range;ije.range;function Al(t){return jt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/MT)}const ov=Al(0),py=Al(1),oje=Al(2),aje=Al(3),ac=Al(4),lje=Al(5),uje=Al(6);ov.range;py.range;oje.range;aje.range;ac.range;lje.range;uje.range;const VT=jt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());VT.range;const WT=jt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());WT.range;const ki=jt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ki.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ki.range;const Ai=jt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ai.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ai.range;function D5(t,e,n,r,s,i){const o=[[Ra,1,yi],[Ra,5,5*yi],[Ra,15,15*yi],[Ra,30,30*yi],[i,1,Lr],[i,5,5*Lr],[i,15,15*Lr],[i,30,30*Lr],[s,1,vi],[s,3,3*vi],[s,6,6*vi],[s,12,12*vi],[r,1,Ni],[r,2,2*Ni],[n,1,MT],[e,1,jA],[e,3,3*jA],[t,1,U1]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=_T(([,,g])=>g).right(o,d);if(h===o.length)return t.every(qw(u/U1,c/U1,f));if(h===0)return dy.every(Math.max(qw(u,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,l]}const[cje,fje]=D5(Ai,WT,ov,P5,zT,jT),[dje,hje]=D5(ki,VT,iv,hp,UT,BT);function z1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function V1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function pje(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=bf(s),c=xf(s),f=bf(i),d=xf(i),h=bf(o),p=xf(o),m=bf(a),g=xf(a),y=bf(l),v=xf(l),b={a:K,A:L,b:H,B:te,c:null,d:HA,e:HA,f:Lje,g:qje,G:Xje,H:Pje,I:Dje,j:Fje,L:F5,m:Mje,M:Bje,p:ce,q:le,Q:XA,s:YA,S:jje,u:Uje,U:zje,V:Vje,w:Wje,W:Gje,x:null,X:null,y:Hje,Y:Kje,Z:Yje,"%":KA},x={a:Ae,A:vt,b:en,B:un,c:null,d:qA,e:qA,f:eUe,g:cUe,G:dUe,H:Jje,I:Qje,j:Zje,L:M5,m:tUe,M:nUe,p:kt,q:Qs,Q:XA,s:YA,S:rUe,u:sUe,U:iUe,V:oUe,w:aUe,W:lUe,x:null,X:null,y:uUe,Y:fUe,Z:hUe,"%":KA},w={a:I,A:R,b:P,B:M,c:j,d:WA,e:WA,f:kje,g:VA,G:zA,H:GA,I:GA,j:_je,L:Nje,m:Tje,M:Cje,p:N,q:Eje,Q:Oje,s:Rje,S:Ije,u:bje,U:xje,V:wje,w:vje,W:Sje,x:W,X:G,y:VA,Y:zA,Z:$je,"%":Aje};b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),x.x=$(n,x),x.X=$(r,x),x.c=$(e,x);function $(ie,ge){return function(we){var q=[],wt=-1,Oe=0,At=ie.length,_t,tr,Zs;for(we instanceof Date||(we=new Date(+we));++wt<At;)ie.charCodeAt(wt)===37&&(q.push(ie.slice(Oe,wt)),(tr=UA[_t=ie.charAt(++wt)])!=null?_t=ie.charAt(++wt):tr=_t==="e"?" ":"0",(Zs=ge[_t])&&(_t=Zs(we,tr)),q.push(_t),Oe=wt+1);return q.push(ie.slice(Oe,wt)),q.join("")}}function E(ie,ge){return function(we){var q=vf(1900,void 0,1),wt=T(q,ie,we+="",0),Oe,At;if(wt!=we.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(ge&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Oe=V1(vf(q.y,0,1)),At=Oe.getUTCDay(),Oe=At>4||At===0?py.ceil(Oe):py(Oe),Oe=sv.offset(Oe,(q.V-1)*7),q.y=Oe.getUTCFullYear(),q.m=Oe.getUTCMonth(),q.d=Oe.getUTCDate()+(q.w+6)%7):(Oe=z1(vf(q.y,0,1)),At=Oe.getDay(),Oe=At>4||At===0?hy.ceil(Oe):hy(Oe),Oe=hp.offset(Oe,(q.V-1)*7),q.y=Oe.getFullYear(),q.m=Oe.getMonth(),q.d=Oe.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),At="Z"in q?V1(vf(q.y,0,1)).getUTCDay():z1(vf(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(At+5)%7:q.w+q.U*7-(At+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,V1(q)):z1(q)}}function T(ie,ge,we,q){for(var wt=0,Oe=ge.length,At=we.length,_t,tr;wt<Oe;){if(q>=At)return-1;if(_t=ge.charCodeAt(wt++),_t===37){if(_t=ge.charAt(wt++),tr=w[_t in UA?ge.charAt(wt++):_t],!tr||(q=tr(ie,we,q))<0)return-1}else if(_t!=we.charCodeAt(q++))return-1}return q}function N(ie,ge,we){var q=u.exec(ge.slice(we));return q?(ie.p=c.get(q[0].toLowerCase()),we+q[0].length):-1}function I(ie,ge,we){var q=h.exec(ge.slice(we));return q?(ie.w=p.get(q[0].toLowerCase()),we+q[0].length):-1}function R(ie,ge,we){var q=f.exec(ge.slice(we));return q?(ie.w=d.get(q[0].toLowerCase()),we+q[0].length):-1}function P(ie,ge,we){var q=y.exec(ge.slice(we));return q?(ie.m=v.get(q[0].toLowerCase()),we+q[0].length):-1}function M(ie,ge,we){var q=m.exec(ge.slice(we));return q?(ie.m=g.get(q[0].toLowerCase()),we+q[0].length):-1}function j(ie,ge,we){return T(ie,e,ge,we)}function W(ie,ge,we){return T(ie,n,ge,we)}function G(ie,ge,we){return T(ie,r,ge,we)}function K(ie){return o[ie.getDay()]}function L(ie){return i[ie.getDay()]}function H(ie){return l[ie.getMonth()]}function te(ie){return a[ie.getMonth()]}function ce(ie){return s[+(ie.getHours()>=12)]}function le(ie){return 1+~~(ie.getMonth()/3)}function Ae(ie){return o[ie.getUTCDay()]}function vt(ie){return i[ie.getUTCDay()]}function en(ie){return l[ie.getUTCMonth()]}function un(ie){return a[ie.getUTCMonth()]}function kt(ie){return s[+(ie.getUTCHours()>=12)]}function Qs(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ge=$(ie+="",b);return ge.toString=function(){return ie},ge},parse:function(ie){var ge=E(ie+="",!1);return ge.toString=function(){return ie},ge},utcFormat:function(ie){var ge=$(ie+="",x);return ge.toString=function(){return ie},ge},utcParse:function(ie){var ge=E(ie+="",!0);return ge.toString=function(){return ie},ge}}}var UA={"-":"",_:" ",0:"0"},Zt=/^\s*\d+/,mje=/^%/,gje=/[\\^$*+?|[\]().{}]/g;function Re(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function yje(t){return t.replace(gje,"\\$&")}function bf(t){return new RegExp("^(?:"+t.map(yje).join("|")+")","i")}function xf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function vje(t,e,n){var r=Zt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function bje(t,e,n){var r=Zt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xje(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function wje(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Sje(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function zA(t,e,n){var r=Zt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function VA(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $je(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Eje(t,e,n){var r=Zt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Tje(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function WA(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function _je(t,e,n){var r=Zt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function GA(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Cje(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ije(t,e,n){var r=Zt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nje(t,e,n){var r=Zt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function kje(t,e,n){var r=Zt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Aje(t,e,n){var r=mje.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Oje(t,e,n){var r=Zt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Rje(t,e,n){var r=Zt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function HA(t,e){return Re(t.getDate(),e,2)}function Pje(t,e){return Re(t.getHours(),e,2)}function Dje(t,e){return Re(t.getHours()%12||12,e,2)}function Fje(t,e){return Re(1+hp.count(ki(t),t),e,3)}function F5(t,e){return Re(t.getMilliseconds(),e,3)}function Lje(t,e){return F5(t,e)+"000"}function Mje(t,e){return Re(t.getMonth()+1,e,2)}function Bje(t,e){return Re(t.getMinutes(),e,2)}function jje(t,e){return Re(t.getSeconds(),e,2)}function Uje(t){var e=t.getDay();return e===0?7:e}function zje(t,e){return Re(iv.count(ki(t)-1,t),e,2)}function L5(t){var e=t.getDay();return e>=4||e===0?oc(t):oc.ceil(t)}function Vje(t,e){return t=L5(t),Re(oc.count(ki(t),t)+(ki(t).getDay()===4),e,2)}function Wje(t){return t.getDay()}function Gje(t,e){return Re(hy.count(ki(t)-1,t),e,2)}function Hje(t,e){return Re(t.getFullYear()%100,e,2)}function qje(t,e){return t=L5(t),Re(t.getFullYear()%100,e,2)}function Kje(t,e){return Re(t.getFullYear()%1e4,e,4)}function Xje(t,e){var n=t.getDay();return t=n>=4||n===0?oc(t):oc.ceil(t),Re(t.getFullYear()%1e4,e,4)}function Yje(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Re(e/60|0,"0",2)+Re(e%60,"0",2)}function qA(t,e){return Re(t.getUTCDate(),e,2)}function Jje(t,e){return Re(t.getUTCHours(),e,2)}function Qje(t,e){return Re(t.getUTCHours()%12||12,e,2)}function Zje(t,e){return Re(1+sv.count(Ai(t),t),e,3)}function M5(t,e){return Re(t.getUTCMilliseconds(),e,3)}function eUe(t,e){return M5(t,e)+"000"}function tUe(t,e){return Re(t.getUTCMonth()+1,e,2)}function nUe(t,e){return Re(t.getUTCMinutes(),e,2)}function rUe(t,e){return Re(t.getUTCSeconds(),e,2)}function sUe(t){var e=t.getUTCDay();return e===0?7:e}function iUe(t,e){return Re(ov.count(Ai(t)-1,t),e,2)}function B5(t){var e=t.getUTCDay();return e>=4||e===0?ac(t):ac.ceil(t)}function oUe(t,e){return t=B5(t),Re(ac.count(Ai(t),t)+(Ai(t).getUTCDay()===4),e,2)}function aUe(t){return t.getUTCDay()}function lUe(t,e){return Re(py.count(Ai(t)-1,t),e,2)}function uUe(t,e){return Re(t.getUTCFullYear()%100,e,2)}function cUe(t,e){return t=B5(t),Re(t.getUTCFullYear()%100,e,2)}function fUe(t,e){return Re(t.getUTCFullYear()%1e4,e,4)}function dUe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ac(t):ac.ceil(t),Re(t.getUTCFullYear()%1e4,e,4)}function hUe(){return"+0000"}function KA(){return"%"}function XA(t){return+t}function YA(t){return Math.floor(+t/1e3)}var Dl,j5,U5;pUe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pUe(t){return Dl=pje(t),j5=Dl.format,Dl.parse,U5=Dl.utcFormat,Dl.utcParse,Dl}function mUe(t){return new Date(t)}function gUe(t){return t instanceof Date?+t:+new Date(+t)}function GT(t,e,n,r,s,i,o,a,l,u){var c=AT(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w($){return(l($)<$?h:a($)<$?p:o($)<$?m:i($)<$?g:r($)<$?s($)<$?y:v:n($)<$?b:x)($)}return c.invert=function($){return new Date(f($))},c.domain=function($){return arguments.length?d(Array.from($,gUe)):d().map(mUe)},c.ticks=function($){var E=d();return t(E[0],E[E.length-1],$??10)},c.tickFormat=function($,E){return E==null?w:u(E)},c.nice=function($){var E=d();return(!$||typeof $.range!="function")&&($=e(E[0],E[E.length-1],$??10)),$?d(C5(E,$)):c},c.copy=function(){return dp(c,GT(t,e,n,r,s,i,o,a,l,u))},c}function yUe(){return Xr.apply(GT(dje,hje,ki,VT,iv,hp,UT,BT,Ra,j5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vUe(){return Xr.apply(GT(cje,fje,Ai,WT,ov,sv,zT,jT,Ra,U5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function av(){var t=0,e=1,n,r,s,i,o=Tn,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(s===0?.5:(f=(i(f)-n)*s,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),u):[o(0),o(1)]}}return u.range=c(Jc),u.rangeRound=c(kT),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return i=f,n=f(t),r=f(e),s=n===r?0:1/(r-n),u}}function ea(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function z5(){var t=Zo(av()(Tn));return t.copy=function(){return ea(t,z5())},zi.apply(t,arguments)}function V5(){var t=PT(av()).domain([1,10]);return t.copy=function(){return ea(t,V5()).base(t.base())},zi.apply(t,arguments)}function W5(){var t=DT(av());return t.copy=function(){return ea(t,W5()).constant(t.constant())},zi.apply(t,arguments)}function HT(){var t=FT(av());return t.copy=function(){return ea(t,HT()).exponent(t.exponent())},zi.apply(t,arguments)}function bUe(){return HT.apply(null,arguments).exponent(.5)}function G5(){var t=[],e=Tn;function n(r){if(r!=null&&!isNaN(r=+r))return e((cp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Io),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>i4e(t,i/r))},n.copy=function(){return G5(e).domain(t)},zi.apply(n,arguments)}function lv(){var t=0,e=.5,n=1,r=1,s,i,o,a,l,u=Tn,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-i)*(r*m<r*i?a:l),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,s=c(t=+t),i=c(e=+e),o=c(n=+n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,u=A4e(m,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Jc),h.rangeRound=p(kT),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,s=m(t),i=m(e),o=m(n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,h}}function H5(){var t=Zo(lv()(Tn));return t.copy=function(){return ea(t,H5())},zi.apply(t,arguments)}function q5(){var t=PT(lv()).domain([.1,1,10]);return t.copy=function(){return ea(t,q5()).base(t.base())},zi.apply(t,arguments)}function K5(){var t=DT(lv());return t.copy=function(){return ea(t,K5()).constant(t.constant())},zi.apply(t,arguments)}function qT(){var t=FT(lv());return t.copy=function(){return ea(t,qT()).exponent(t.exponent())},zi.apply(t,arguments)}function xUe(){return qT.apply(null,arguments).exponent(.5)}const JA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yd,scaleDiverging:H5,scaleDivergingLog:q5,scaleDivergingPow:qT,scaleDivergingSqrt:xUe,scaleDivergingSymlog:K5,scaleIdentity:_5,scaleImplicit:Kw,scaleLinear:fy,scaleLog:I5,scaleOrdinal:CT,scalePoint:Kf,scalePow:LT,scaleQuantile:A5,scaleQuantize:O5,scaleRadial:k5,scaleSequential:z5,scaleSequentialLog:V5,scaleSequentialPow:HT,scaleSequentialQuantile:G5,scaleSequentialSqrt:bUe,scaleSequentialSymlog:W5,scaleSqrt:eje,scaleSymlog:N5,scaleThreshold:R5,scaleTime:yUe,scaleUtc:vUe,tickFormat:T5},Symbol.toStringTag,{value:"Module"}));var wUe=Vc;function SUe(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(a===void 0?o===o&&!wUe(o):n(o,a)))var a=o,l=i}return l}var uv=SUe;function $Ue(t,e){return t>e}var X5=$Ue,EUe=uv,TUe=X5,_Ue=Yc;function CUe(t){return t&&t.length?EUe(t,_Ue,TUe):void 0}var IUe=CUe;const cv=Le(IUe);function NUe(t,e){return t<e}var Y5=NUe,kUe=uv,AUe=Y5,OUe=Yc;function RUe(t){return t&&t.length?kUe(t,OUe,AUe):void 0}var PUe=RUe;const fv=Le(PUe);var DUe=iT,FUe=Qo,LUe=i5,MUe=er;function BUe(t,e){var n=MUe(t)?DUe:LUe;return n(t,FUe(e))}var jUe=BUe,UUe=r5,zUe=jUe;function VUe(t,e){return UUe(zUe(t,e),1)}var WUe=VUe;const GUe=Le(WUe);var HUe=ST;function qUe(t,e){return HUe(t,e)}var KUe=qUe;const KT=Le(KUe);var Qc=1e9,XUe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},YT,ft=!0,Wr="[DecimalError] ",Ga=Wr+"Invalid argument: ",XT=Wr+"Exponent out of range: ",Zc=Math.floor,ga=Math.pow,YUe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sr,zt=1e7,at=7,J5=9007199254740991,my=Zc(J5/at),ae={};ae.absoluteValue=ae.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ae.comparedTo=ae.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};ae.decimalPlaces=ae.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*at;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ae.dividedBy=ae.div=function(t){return Si(this,new this.constructor(t))};ae.dividedToIntegerBy=ae.idiv=function(t){var e=this,n=e.constructor;return Ye(Si(e,new n(t),0,1),n.precision)};ae.equals=ae.eq=function(t){return!this.cmp(t)};ae.exponent=function(){return It(this)};ae.greaterThan=ae.gt=function(t){return this.cmp(t)>0};ae.greaterThanOrEqualTo=ae.gte=function(t){return this.cmp(t)>=0};ae.isInteger=ae.isint=function(){return this.e>this.d.length-2};ae.isNegative=ae.isneg=function(){return this.s<0};ae.isPositive=ae.ispos=function(){return this.s>0};ae.isZero=function(){return this.s===0};ae.lessThan=ae.lt=function(t){return this.cmp(t)<0};ae.lessThanOrEqualTo=ae.lte=function(t){return this.cmp(t)<1};ae.logarithm=ae.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(sr))throw Error(Wr+"NaN");if(n.s<1)throw Error(Wr+(n.s?"NaN":"-Infinity"));return n.eq(sr)?new r(0):(ft=!1,e=Si(th(n,i),th(t,i),i),ft=!0,Ye(e,s))};ae.minus=ae.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?eG(e,t):Q5(e,(t.s=-t.s,t))};ae.modulo=ae.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Wr+"NaN");return n.s?(ft=!1,e=Si(n,t,0,1).times(t),ft=!0,n.minus(e)):Ye(new r(n),s)};ae.naturalExponential=ae.exp=function(){return Z5(this)};ae.naturalLogarithm=ae.ln=function(){return th(this)};ae.negated=ae.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ae.plus=ae.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Q5(e,t):eG(e,(t.s=-t.s,t))};ae.precision=ae.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ga+t);if(e=It(s)+1,r=s.d.length-1,n=r*at+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ae.squareRoot=ae.sqrt=function(){var t,e,n,r,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Wr+"NaN")}for(t=It(a),ft=!1,s=Math.sqrt(+a),s==0||s==1/0?(e=Rs(a.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Zc((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=o=n+3;;)if(i=r,r=i.plus(Si(a,i,o+2)).times(.5),Rs(i.d).slice(0,o)===(e=Rs(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Ye(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;o+=4}return ft=!0,Ye(r,n)};ae.times=ae.mul=function(t){var e,n,r,s,i,o,a,l,u,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,l=d.length,u=h.length,l<u&&(i=d,d=h,h=i,o=l,l=u,u=o),i=[],o=l+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(e=0,s=l+r;s>r;)a=i[s]+h[r]*d[s-r-1]+e,i[s--]=a%zt|0,e=a/zt|0;i[s]=(i[s]+e)%zt|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,ft?Ye(t,f.precision):t};ae.toDecimalPlaces=ae.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Xs(t,0,Qc),e===void 0?e=r.rounding:Xs(e,0,8),Ye(n,t+It(n)+1,e))};ae.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=pl(r,!0):(Xs(t,0,Qc),e===void 0?e=s.rounding:Xs(e,0,8),r=Ye(new s(r),t+1,e),n=pl(r,!0,t+1)),n};ae.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?pl(s):(Xs(t,0,Qc),e===void 0?e=i.rounding:Xs(e,0,8),r=Ye(new i(s),t+It(s)+1,e),n=pl(r.abs(),!1,t+It(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};ae.toInteger=ae.toint=function(){var t=this,e=t.constructor;return Ye(new e(t),It(t)+1,e.rounding)};ae.toNumber=function(){return+this};ae.toPower=ae.pow=function(t){var e,n,r,s,i,o,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(sr);if(a=new l(a),!a.s){if(t.s<1)throw Error(Wr+"Infinity");return a}if(a.eq(sr))return a;if(r=l.precision,t.eq(sr))return Ye(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=a.s,o){if((n=c<0?-c:c)<=J5){for(s=new l(sr),e=Math.ceil(r/at+4),ft=!1;n%2&&(s=s.times(a),ZA(s.d,e)),n=Zc(n/2),n!==0;)a=a.times(a),ZA(a.d,e);return ft=!0,t.s<0?new l(sr).div(s):Ye(s,r)}}else if(i<0)throw Error(Wr+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,ft=!1,s=t.times(th(a,r+u)),ft=!0,s=Z5(s),s.s=i,s};ae.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=It(s),r=pl(s,n<=i.toExpNeg||n>=i.toExpPos)):(Xs(t,1,Qc),e===void 0?e=i.rounding:Xs(e,0,8),s=Ye(new i(s),t,e),n=It(s),r=pl(s,t<=n||n<=i.toExpNeg,t)),r};ae.toSignificantDigits=ae.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Xs(t,1,Qc),e===void 0?e=r.rounding:Xs(e,0,8)),Ye(new r(n),t,e)};ae.toString=ae.valueOf=ae.val=ae.toJSON=ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=It(t),n=t.constructor;return pl(t,e<=n.toExpNeg||e>=n.toExpPos)};function Q5(t,e){var n,r,s,i,o,a,l,u,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),ft?Ye(e,f):e;if(l=t.d,u=e.d,o=t.e,s=e.e,l=l.slice(),i=o-s,i){for(i<0?(r=l,i=-i,a=u.length):(r=u,s=o,a=l.length),o=Math.ceil(f/at),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=u.length,a-i<0&&(i=a,r=u,u=l,l=r),n=0;i;)n=(l[--i]=l[i]+u[i]+n)/zt|0,l[i]%=zt;for(n&&(l.unshift(n),++s),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=s,ft?Ye(e,f):e}function Xs(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ga+t)}function Rs(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=at-r.length,n&&(i+=Ji(n)),i+=r;o=t[e],r=o+"",n=at-r.length,n&&(i+=Ji(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Si=function(){function t(r,s){var i,o=0,a=r.length;for(r=r.slice();a--;)i=r[a]*s+o,r[a]=i%zt|0,o=i/zt|0;return o&&r.unshift(o),r}function e(r,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=s[a]){l=r[a]>s[a]?1:-1;break}return l}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*zt+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var a,l,u,c,f,d,h,p,m,g,y,v,b,x,w,$,E,T,N=r.constructor,I=r.s==s.s?1:-1,R=r.d,P=s.d;if(!r.s)return new N(r);if(!s.s)throw Error(Wr+"Division by zero");for(l=r.e-s.e,E=P.length,w=R.length,h=new N(I),p=h.d=[],u=0;P[u]==(R[u]||0);)++u;if(P[u]>(R[u]||0)&&--l,i==null?v=i=N.precision:o?v=i+(It(r)-It(s))+1:v=i,v<0)return new N(0);if(v=v/at+2|0,u=0,E==1)for(c=0,P=P[0],v++;(u<w||c)&&v--;u++)b=c*zt+(R[u]||0),p[u]=b/P|0,c=b%P|0;else{for(c=zt/(P[0]+1)|0,c>1&&(P=t(P,c),R=t(R,c),E=P.length,w=R.length),x=E,m=R.slice(0,E),g=m.length;g<E;)m[g++]=0;T=P.slice(),T.unshift(0),$=P[0],P[1]>=zt/2&&++$;do c=0,a=e(P,m,E,g),a<0?(y=m[0],E!=g&&(y=y*zt+(m[1]||0)),c=y/$|0,c>1?(c>=zt&&(c=zt-1),f=t(P,c),d=f.length,g=m.length,a=e(f,m,d,g),a==1&&(c--,n(f,E<d?T:P,d))):(c==0&&(a=c=1),f=P.slice()),d=f.length,d<g&&f.unshift(0),n(m,f,g),a==-1&&(g=m.length,a=e(P,m,E,g),a<1&&(c++,n(m,E<g?T:P,g))),g=m.length):a===0&&(c++,m=[0]),p[u++]=c,a&&m[0]?m[g++]=R[x]||0:(m=[R[x]],g=1);while((x++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),h.e=l,Ye(h,o?i+It(h)+1:i)}}();function Z5(t,e){var n,r,s,i,o,a,l=0,u=0,c=t.constructor,f=c.precision;if(It(t)>16)throw Error(XT+It(t));if(!t.s)return new c(sr);for(e==null?(ft=!1,a=f):a=e,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(ga(2,u))/Math.LN10*2+5|0,a+=r,n=s=i=new c(sr),c.precision=a;;){if(s=Ye(s.times(t),a),n=n.times(++l),o=i.plus(Si(s,n,a)),Rs(o.d).slice(0,a)===Rs(i.d).slice(0,a)){for(;u--;)i=Ye(i.times(i),a);return c.precision=f,e==null?(ft=!0,Ye(i,f)):i}i=o}}function It(t){for(var e=t.e*at,n=t.d[0];n>=10;n/=10)e++;return e}function W1(t,e,n){if(e>t.LN10.sd())throw ft=!0,n&&(t.precision=n),Error(Wr+"LN10 precision limit exceeded");return Ye(new t(t.LN10),e)}function Ji(t){for(var e="";t--;)e+="0";return e}function th(t,e){var n,r,s,i,o,a,l,u,c,f=1,d=10,h=t,p=h.d,m=h.constructor,g=m.precision;if(h.s<1)throw Error(Wr+(h.s?"NaN":"-Infinity"));if(h.eq(sr))return new m(0);if(e==null?(ft=!1,u=g):u=e,h.eq(10))return e==null&&(ft=!0),W1(m,u);if(u+=d,m.precision=u,n=Rs(p),r=n.charAt(0),i=It(h),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Rs(h.d),r=n.charAt(0),f++;i=It(h),r>1?(h=new m("0."+n),i++):h=new m(r+"."+n.slice(1))}else return l=W1(m,u+2,g).times(i+""),h=th(new m(r+"."+n.slice(1)),u-d).plus(l),m.precision=g,e==null?(ft=!0,Ye(h,g)):h;for(a=o=h=Si(h.minus(sr),h.plus(sr),u),c=Ye(h.times(h),u),s=3;;){if(o=Ye(o.times(c),u),l=a.plus(Si(o,new m(s),u)),Rs(l.d).slice(0,u)===Rs(a.d).slice(0,u))return a=a.times(2),i!==0&&(a=a.plus(W1(m,u+2,g).times(i+""))),a=Si(a,new m(f),u),m.precision=g,e==null?(ft=!0,Ye(a,g)):a;a=l,s+=2}}function QA(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Zc(n/at),t.d=[],r=(n+1)%at,n<0&&(r+=at),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=at;r<s;)t.d.push(+e.slice(r,r+=at));e=e.slice(r),r=at-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),ft&&(t.e>my||t.e<-my))throw Error(XT+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ye(t,e,n){var r,s,i,o,a,l,u,c,f=t.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=at,s=e,u=f[c=0];else{if(c=Math.ceil((r+1)/at),i=f.length,c>=i)return t;for(u=i=f[c],o=1;i>=10;i/=10)o++;r%=at,s=r-at+o}if(n!==void 0&&(i=ga(10,o-s-1),a=u/i%10|0,l=e<0||f[c+1]!==void 0||u%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?s>0?u/ga(10,o-s):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(i=It(t),f.length=1,e=e-i-1,f[0]=ga(10,(at-e%at)%at),t.e=Zc(-e/at)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,i=1,c--):(f.length=c+1,i=ga(10,at-r),f[c]=s>0?(u/ga(10,o-s)%ga(10,s)|0)*i:0),l)for(;;)if(c==0){(f[0]+=i)==zt&&(f[0]=1,++t.e);break}else{if(f[c]+=i,f[c]!=zt)break;f[c--]=0,i=1}for(r=f.length;f[--r]===0;)f.pop();if(ft&&(t.e>my||t.e<-my))throw Error(XT+It(t));return t}function eG(t,e){var n,r,s,i,o,a,l,u,c,f,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),ft?Ye(e,h):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,a=f.length):(n=f,r=u,a=l.length),s=Math.max(Math.ceil(h/at),a)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=l.length,a=f.length,c=s<a,c&&(a=s),s=0;s<a;s++)if(l[s]!=f[s]){c=l[s]<f[s];break}o=0}for(c&&(n=l,l=f,f=n,e.s=-e.s),a=l.length,s=f.length-a;s>0;--s)l[a++]=0;for(s=f.length;s>o;){if(l[--s]<f[s]){for(i=s;i&&l[--i]===0;)l[i]=zt-1;--l[i],l[s]+=zt}l[s]-=f[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,ft?Ye(e,h):e):new d(0)}function pl(t,e,n){var r,s=It(t),i=Rs(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ji(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Ji(-s-1)+i,n&&(r=n-o)>0&&(i+=Ji(r))):s>=o?(i+=Ji(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+Ji(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=Ji(r))),t.s<0?"-"+i:i}function ZA(t,e){if(t.length>e)return t.length=e,!0}function tG(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ga+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return QA(o,i.toString())}else if(typeof i!="string")throw Error(Ga+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,YUe.test(i))QA(o,i);else throw Error(Ga+i)}if(s.prototype=ae,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=tG,s.config=s.set=JUe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function JUe(t){if(!t||typeof t!="object")throw Error(Wr+"Object expected");var e,n,r,s=["precision",1,Qc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Zc(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Ga+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ga+n+": "+r);return this}var YT=tG(XUe);sr=new YT(1);const Ve=YT;function QUe(t){return nze(t)||tze(t)||eze(t)||ZUe()}function ZUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eze(t,e){if(t){if(typeof t=="string")return Qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(t,e)}}function tze(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nze(t){if(Array.isArray(t))return Qw(t)}function Qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rze=function(e){return e},nG={"@@functional/placeholder":!0},rG=function(e){return e===nG},eO=function(e){return function n(){return arguments.length===0||arguments.length===1&&rG(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},sze=function t(e,n){return e===1?n:eO(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(a){return a!==nG}).length;return o>=e?n.apply(void 0,s):t(e-o,eO(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=s.map(function(f){return rG(f)?l.shift():f});return n.apply(void 0,QUe(c).concat(l))}))})},dv=function(e){return sze(e.length,e)},Zw=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},ize=dv(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),oze=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return rze;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},eS=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},sG=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function aze(t){var e;return t===0?e=1:e=Math.floor(new Ve(t).abs().log(10).toNumber())+1,e}function lze(t,e,n){for(var r=new Ve(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var uze=dv(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),cze=dv(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),fze=dv(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const hv={rangeStep:lze,getDigitCount:aze,interpolateNumber:uze,uninterpolateNumber:cze,uninterpolateTruncation:fze};function tS(t){return pze(t)||hze(t)||iG(t)||dze()}function dze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hze(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pze(t){if(Array.isArray(t))return nS(t)}function nh(t,e){return yze(t)||gze(t,e)||iG(t,e)||mze()}function mze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iG(t,e){if(t){if(typeof t=="string")return nS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(t,e)}}function nS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gze(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function yze(t){if(Array.isArray(t))return t}function oG(t){var e=nh(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function aG(t,e,n){if(t.lte(0))return new Ve(0);var r=hv.getDigitCount(t.toNumber()),s=new Ve(10).pow(r),i=t.div(s),o=r!==1?.05:.1,a=new Ve(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=a.mul(s);return e?l:new Ve(Math.ceil(l))}function vze(t,e,n){var r=1,s=new Ve(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new Ve(10).pow(hv.getDigitCount(t)-1),s=new Ve(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new Ve(Math.floor(t)))}else t===0?s=new Ve(Math.floor((e-1)/2)):n||(s=new Ve(Math.floor(t)));var o=Math.floor((e-1)/2),a=oze(ize(function(l){return s.add(new Ve(l-o).mul(r)).toNumber()}),Zw);return a(0,e)}function lG(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ve(0),tickMin:new Ve(0),tickMax:new Ve(0)};var i=aG(new Ve(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new Ve(0):(o=new Ve(t).add(e).div(2),o=o.sub(new Ve(o).mod(i)));var a=Math.ceil(o.sub(t).div(i).toNumber()),l=Math.ceil(new Ve(e).sub(o).div(i).toNumber()),u=a+l+1;return u>n?lG(t,e,n,r,s+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:i,tickMin:o.sub(new Ve(a).mul(i)),tickMax:o.add(new Ve(l).mul(i))})}function bze(t){var e=nh(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),a=oG([n,r]),l=nh(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var f=c===1/0?[u].concat(tS(Zw(0,s-1).map(function(){return 1/0}))):[].concat(tS(Zw(0,s-1).map(function(){return-1/0})),[c]);return n>r?eS(f):f}if(u===c)return vze(u,s,i);var d=lG(u,c,o,i),h=d.step,p=d.tickMin,m=d.tickMax,g=hv.rangeStep(p,m.add(new Ve(.1).mul(h)),h);return n>r?eS(g):g}function xze(t,e){var n=nh(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=oG([r,s]),a=nh(o,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,s];if(l===u)return[l];var c=Math.max(e,2),f=aG(new Ve(u).sub(l).div(c-1),i,0),d=[].concat(tS(hv.rangeStep(new Ve(l),new Ve(u).sub(new Ve(.99).mul(f)),f)),[u]);return r>s?eS(d):d}var wze=sG(bze),Sze=sG(xze),$ze="Invariant failed";function lc(t,e){throw new Error($ze)}var Eze=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gy.apply(this,arguments)}function Tze(t,e){return Nze(t)||Ize(t,e)||Cze(t,e)||_ze()}function _ze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cze(t,e){if(t){if(typeof t=="string")return tO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,e)}}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ize(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function Nze(t){if(Array.isArray(t))return t}function kze(t,e){if(t==null)return{};var n=Aze(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Aze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JT(t){var e=t.offset,n=t.layout,r=t.width,s=t.dataKey,i=t.data,o=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,u=kze(t,Eze),c=xe(u,!1);t.direction==="x"&&a.type!=="number"&&lc();var f=i.map(function(d){var h=o(d,s),p=h.x,m=h.y,g=h.value,y=h.errorVal;if(!y)return null;var v=[],b,x;if(Array.isArray(y)){var w=Tze(y,2);b=w[0],x=w[1]}else b=x=y;if(n==="vertical"){var $=a.scale,E=m+e,T=E+r,N=E-r,I=$(g-b),R=$(g+x);v.push({x1:R,y1:T,x2:R,y2:N}),v.push({x1:I,y1:E,x2:R,y2:E}),v.push({x1:I,y1:T,x2:I,y2:N})}else if(n==="horizontal"){var P=l.scale,M=p+e,j=M-r,W=M+r,G=P(g-b),K=P(g+x);v.push({x1:j,y1:K,x2:W,y2:K}),v.push({x1:M,y1:G,x2:M,y2:K}),v.push({x1:j,y1:G,x2:W,y2:G})}return F.createElement(xt,gy({className:"recharts-errorBar",key:"bar-".concat(v.map(function(L){return"".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))},c),v.map(function(L){return F.createElement("line",gy({},L,{key:"line-".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))}))});return F.createElement(xt,{className:"recharts-errorBars"},f)}JT.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};JT.displayName="ErrorBar";function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function nO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function G1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nO(Object(n),!0).forEach(function(r){Oze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oze(t,e,n){return e=Rze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rze(t){var e=Pze(t,"string");return rh(e)=="symbol"?e:String(e)}function Pze(t,e){if(rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uG=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=wr(n,Gd);if(!o)return null;var a;return o.props&&o.props.payload?a=o.props&&o.props.payload:i==="children"?a=(r||[]).reduce(function(l,u){var c=u.item,f=u.props,d=f.sectors||f.data||[];return l.concat(d.map(function(h){return{type:o.props.iconType||c.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):a=(r||[]).map(function(l){var u=l.item,c=u.props,f=c.dataKey,d=c.name,h=c.legendType,p=c.hide;return{inactive:p,dataKey:f,type:o.props.iconType||h||"square",color:QT(u),value:d||f,payload:u.props}}),G1(G1(G1({},o.props),Gd.getWithHeight(o,s)),{},{payload:a,item:o})};function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}function rO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rO(Object(n),!0).forEach(function(r){Tu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tu(t,e,n){return e=Dze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dze(t){var e=Fze(t,"string");return sh(e)=="symbol"?e:String(e)}function Fze(t,e){if(sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sO(t){return jze(t)||Bze(t)||Mze(t)||Lze()}function Lze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mze(t,e){if(t){if(typeof t=="string")return rS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rS(t,e)}}function Bze(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jze(t){if(Array.isArray(t))return rS(t)}function rS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ir(t,e,n){return _e(t)||_e(e)?n:Bt(e)?ms(t,e,n):Se(e)?e(t):n}function Xf(t,e,n,r){var s=GUe(t,function(a){return ir(a,e)});if(n==="number"){var i=s.filter(function(a){return se(a)||parseFloat(a)});return i.length?[fv(i),cv(i)]:[1/0,-1/0]}var o=r?s.filter(function(a){return!_e(a)}):s;return o.map(function(a){return Bt(a)||a instanceof Date?a:""})}var Uze=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<a;u++){var c=u>0?s[u-1].coordinate:s[a-1].coordinate,f=s[u].coordinate,d=u>=a-1?s[0].coordinate:s[u+1].coordinate,h=void 0;if(Fr(f-c)!==Fr(d-f)){var p=[];if(Fr(d-f)===Fr(l[1]-l[0])){h=d;var m=f+l[1]-l[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var g=d+l[1]-l[0];p[0]=Math.min(f,(g+f)/2),p[1]=Math.max(f,(g+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){o=s[u].index;break}}else{var v=Math.min(c,d),b=Math.max(c,d);if(e>(v+f)/2&&e<=(b+f)/2){o=s[u].index;break}}}else for(var x=0;x<a;x++)if(x===0&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x>0&&x<a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x===a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2){o=r[x].index;break}return o},QT=function(e){var n=e,r=n.type.displayName,s=e.props,i=s.stroke,o=s.fill,a;switch(r){case"Line":a=i;break;case"Area":case"Radar":a=i&&i!=="none"?i:o;break;default:a=o;break}return a},zze=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},a=Object.keys(i),l=0,u=a.length;l<u;l++)for(var c=i[a[l]].stackGroups,f=Object.keys(c),d=0,h=f.length;d<h;d++){var p=c[f[d]],m=p.items,g=p.cateAxisId,y=m.filter(function(w){return _o(w.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].props.barSize,b=y[0].props[g];o[b]||(o[b]=[]);var x=_e(v)?n:v;o[b].push({item:y[0],stackList:y.slice(1),barSize:_e(x)?void 0:zn(x,r,0)})}}return o},Vze=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,a=e.maxBarSize,l=o.length;if(l<1)return null;var u=zn(n,s,0,!0),c,f=[];if(o[0].barSize===+o[0].barSize){var d=!1,h=s/l,p=o.reduce(function(x,w){return x+w.barSize||0},0);p+=(l-1)*u,p>=s&&(p-=(l-1)*u,u=0),p>=s&&h>0&&(d=!0,h*=.9,p=l*h);var m=(s-p)/2>>0,g={offset:m-u,size:0};c=o.reduce(function(x,w){var $={item:w.item,position:{offset:g.offset+g.size+u,size:d?h:w.barSize}},E=[].concat(sO(x),[$]);return g=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(T){E.push({item:T,position:g})}),E},f)}else{var y=zn(r,s,0,!0);s-2*y-(l-1)*u<=0&&(u=0);var v=(s-2*y-(l-1)*u)/l;v>1&&(v>>=0);var b=a===+a?Math.min(v,a):v;c=o.reduce(function(x,w,$){var E=[].concat(sO(x),[{item:w.item,position:{offset:y+(v+u)*$+(v-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(T){E.push({item:T,position:E[E.length-1].position})}),E},f)}return c},Wze=function(e,n,r,s){var i=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),u=uG({children:i,legendWidth:l});if(u){var c=s||{},f=c.width,d=c.height,h=u.align,p=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&h!=="center"&&se(e[h]))return Tr(Tr({},e),{},Tu({},h,e[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&p!=="middle"&&se(e[p]))return Tr(Tr({},e),{},Tu({},p,e[p]+(d||0)))}return e},Gze=function(e,n,r){return _e(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},cG=function(e,n,r,s,i){var o=n.props.children,a=Bs(o,JT).filter(function(u){return Gze(s,i,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var f=ir(c,r);if(_e(f))return u;var d=Array.isArray(f)?[fv(f),cv(f)]:[f,f],h=l.reduce(function(p,m){var g=ir(c,m,0),y=d[0]-Math.abs(Array.isArray(g)?g[0]:g),v=d[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},Hze=function(e,n,r,s,i){var o=n.map(function(a){return cG(e,a,r,i,s)}).filter(function(a){return!_e(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},fG=function(e,n,r,s,i){var o=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&cG(e,l,u,s)||Xf(e,u,r,i)});if(r==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,u){for(var c=0,f=u.length;c<f;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},dG=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Pf=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Fr(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var d=i?i.indexOf(f):f;return{coordinate:s(d)+u,value:f,offset:u}});return c.filter(function(f){return!up(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,d){return{coordinate:s(f)+u,value:f,index:d,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,d){return{coordinate:s(f)+u,value:i?i[f]:f,index:d,offset:u}})},H1=new WeakMap,em=function(e,n){if(typeof n!="function")return e;H1.has(e)||H1.set(e,new WeakMap);var r=H1.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},qze=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,a=e.axisType;if(s==="auto")return o==="radial"&&a==="radiusAxis"?{scale:Yd(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:fy(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Kf(),realScaleType:"point"}:i==="category"?{scale:Yd(),realScaleType:"band"}:{scale:fy(),realScaleType:"linear"};if(lp(s)){var l="scale".concat(Y0(s));return{scale:(JA[l]||Kf)(),realScaleType:JA[l]?l:"point"}}return Se(s)?{scale:s}:{scale:Kf(),realScaleType:"point"}},iO=1e-4,Kze=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-iO,o=Math.max(s[0],s[1])+iO,a=e(n[0]),l=e(n[r-1]);(a<i||a>o||l<i||l>o)&&e.domain([n[0],n[r-1]])}},Xze=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,a=0;a<n;++a){var l=up(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},Yze=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var a=up(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},Jze={sign:Xze,expand:OAe,none:Zu,silhouette:RAe,wiggle:PAe,positive:Yze},Qze=function(e,n,r){var s=n.map(function(a){return a.props.dataKey}),i=Jze[r],o=AAe().keys(s).value(function(a,l){return+ir(a,l,0)}).order(Iw).offset(i);return o(e)},Zze=function(e,n,r,s,i,o){if(!e)return null;var a=o?n.reverse():n,l={},u=a.reduce(function(f,d){var h=d.props,p=h.stackId,m=h.hide;if(m)return f;var g=d.props[r],y=f[g]||{hasStack:!1,stackGroups:{}};if(Bt(p)){var v=y.stackGroups[p]||{numericAxisId:r,cateAxisId:s,items:[]};v.items.push(d),y.hasStack=!0,y.stackGroups[p]=v}else y.stackGroups[K0("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[d]};return Tr(Tr({},f),{},Tu({},g,y))},l),c={};return Object.keys(u).reduce(function(f,d){var h=u[d];if(h.hasStack){var p={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,g){var y=h.stackGroups[g];return Tr(Tr({},m),{},Tu({},g,{numericAxisId:r,cateAxisId:s,items:y.items,stackedData:Qze(e,y.items,i)}))},p)}return Tr(Tr({},f),{},Tu({},d,h))},c)},eVe=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=wze(u,i,a);return e.domain([fv(c),cv(c)]),{niceTicks:c}}if(i&&s==="number"){var f=e.domain(),d=Sze(f,i,a);return{niceTicks:d}}return null},tVe=function(e,n){var r=e.props.stackId;if(Bt(r)){var s=n[r];if(s){var i=s.items.indexOf(e);return i>=0?s.stackedData[i]:null}}return null},nVe=function(e){return e.reduce(function(n,r){return[fv(r.concat([n[0]]).filter(se)),cv(r.concat([n[1]]).filter(se))]},[1/0,-1/0])},hG=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],a=o.stackedData,l=a.reduce(function(u,c){var f=nVe(c.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},oO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sS=function(e,n,r){if(Se(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(se(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(oO.test(e[0])){var i=+oO.exec(e[0])[1];s[0]=n[0]-i}else Se(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(se(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(aO.test(e[1])){var o=+aO.exec(e[1])[1];s[1]=n[1]+o}else Se(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},iS=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=ET(n,function(f){return f.coordinate}),o=1/0,a=1,l=i.length;a<l;a++){var u=i[a],c=i[a-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},lO=function(e,n,r){return!e||!e.length||KT(e,ms(r,"type.defaultProps.domain"))?n:e},rVe=function(e,n){var r=e.props,s=r.dataKey,i=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Tr(Tr({},xe(e,!1)),{},{dataKey:s,unit:o,formatter:a,name:i||s,color:QT(e),value:ir(n,s),type:l,payload:n,chartType:u,hide:c})};function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function uO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uO(Object(n),!0).forEach(function(r){pG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pG(t,e,n){return e=sVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sVe(t){var e=iVe(t,"string");return ih(e)=="symbol"?e:String(e)}function iVe(t,e){if(ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oVe(t,e){return cVe(t)||uVe(t,e)||lVe(t,e)||aVe()}function aVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lVe(t,e){if(t){if(typeof t=="string")return cO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cO(t,e)}}function cO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uVe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function cVe(t){if(Array.isArray(t))return t}var yy=Math.PI/180,fVe=function(e){return e*180/Math.PI},et=function(e,n,r,s){return{x:e+Math.cos(-yy*s)*r,y:n+Math.sin(-yy*s)*r}},mG=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},dVe=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.startAngle,u=e.endAngle,c=zn(e.cx,o,o/2),f=zn(e.cy,a,a/2),d=mG(o,a,r),h=zn(e.innerRadius,d,0),p=zn(e.outerRadius,d,d*.8),m=Object.keys(n);return m.reduce(function(g,y){var v=n[y],b=v.domain,x=v.reversed,w;if(_e(v.range))s==="angleAxis"?w=[l,u]:s==="radiusAxis"&&(w=[h,p]),x&&(w=[w[1],w[0]]);else{w=v.range;var $=w,E=oVe($,2);l=E[0],u=E[1]}var T=qze(v,i),N=T.realScaleType,I=T.scale;I.domain(b).range(w),Kze(I);var R=eVe(I,ri(ri({},v),{},{realScaleType:N})),P=ri(ri(ri({},v),R),{},{range:w,radius:p,realScaleType:N,scale:I,cx:c,cy:f,innerRadius:h,outerRadius:p,startAngle:l,endAngle:u});return ri(ri({},g),{},pG({},y,P))},{})},hVe=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},pVe=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,a=hVe({x:r,y:s},{x:i,y:o});if(a<=0)return{radius:a};var l=(r-i)/a,u=Math.acos(l);return s>o&&(u=2*Math.PI-u),{radius:a,angle:fVe(u),angleInRadian:u}},mVe=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},gVe=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),a=Math.min(i,o);return e+a*360},fO=function(e,n){var r=e.x,s=e.y,i=pVe({x:r,y:s},n),o=i.radius,a=i.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=mVe(n),f=c.startAngle,d=c.endAngle,h=a,p;if(f<=d){for(;h>d;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=d}else{for(;h>f;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=f}return p?ri(ri({},n),{},{radius:o,angle:gVe(h,n)}):null},gG=function(e){return!D.isValidElement(e)&&!Se(e)&&typeof e!="boolean"?e.className:""};function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}var yVe=["offset"];function vVe(t){return SVe(t)||wVe(t)||xVe(t)||bVe()}function bVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xVe(t,e){if(t){if(typeof t=="string")return oS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oS(t,e)}}function wVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SVe(t){if(Array.isArray(t))return oS(t)}function oS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Ve(t,e){if(t==null)return{};var n=EVe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function dO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(n),!0).forEach(function(r){TVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TVe(t,e,n){return e=_Ve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ve(t){var e=CVe(t,"string");return oh(e)=="symbol"?e:String(e)}function CVe(t,e){if(oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ah(){return ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ah.apply(this,arguments)}var IVe=function(e){var n=e.value,r=e.formatter,s=_e(e.children)?n:e.children;return Se(r)?r(s):s},NVe=function(e,n){var r=Fr(n-e),s=Math.min(Math.abs(n-e),360);return r*s},kVe=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,a=e.className,l=i,u=l.cx,c=l.cy,f=l.innerRadius,d=l.outerRadius,h=l.startAngle,p=l.endAngle,m=l.clockWise,g=(f+d)/2,y=NVe(h,p),v=y>=0?1:-1,b,x;s==="insideStart"?(b=h+v*o,x=m):s==="insideEnd"?(b=p-v*o,x=!m):s==="end"&&(b=p+v*o,x=m),x=y<=0?x:!x;var w=et(u,c,g,b),$=et(u,c,g,b+(x?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(x?0:1,`,
    `).concat($.x,",").concat($.y),T=_e(e.id)?K0("recharts-radial-line-"):e.id;return F.createElement("text",ah({},r,{dominantBaseline:"central",className:Fe("recharts-radial-bar-label",a)}),F.createElement("defs",null,F.createElement("path",{id:T,d:E})),F.createElement("textPath",{xlinkHref:"#".concat(T)},n))},AVe=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,a=i.cy,l=i.innerRadius,u=i.outerRadius,c=i.startAngle,f=i.endAngle,d=(c+f)/2;if(s==="outside"){var h=et(o,a,u+r,d),p=h.x,m=h.y;return{x:p,y:m,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,y=et(o,a,g,d),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},OVe=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,a=o.x,l=o.y,u=o.width,c=o.height,f=c>=0?1:-1,d=f*s,h=f>0?"end":"start",p=f>0?"start":"end",m=u>=0?1:-1,g=m*s,y=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var b={x:a+u/2,y:l-f*s,textAnchor:"middle",verticalAnchor:h};return Ot(Ot({},b),r?{height:Math.max(l-r.y,0),width:u}:{})}if(i==="bottom"){var x={x:a+u/2,y:l+c+d,textAnchor:"middle",verticalAnchor:p};return Ot(Ot({},x),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(i==="left"){var w={x:a-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return Ot(Ot({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(i==="right"){var $={x:a+u+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"};return Ot(Ot({},$),r?{width:Math.max(r.x+r.width-$.x,0),height:c}:{})}var E=r?{width:u,height:c}:{};return i==="insideLeft"?Ot({x:a+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"},E):i==="insideRight"?Ot({x:a+u-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},E):i==="insideTop"?Ot({x:a+u/2,y:l+d,textAnchor:"middle",verticalAnchor:p},E):i==="insideBottom"?Ot({x:a+u/2,y:l+c-d,textAnchor:"middle",verticalAnchor:h},E):i==="insideTopLeft"?Ot({x:a+g,y:l+d,textAnchor:v,verticalAnchor:p},E):i==="insideTopRight"?Ot({x:a+u-g,y:l+d,textAnchor:y,verticalAnchor:p},E):i==="insideBottomLeft"?Ot({x:a+g,y:l+c-d,textAnchor:v,verticalAnchor:h},E):i==="insideBottomRight"?Ot({x:a+u-g,y:l+c-d,textAnchor:y,verticalAnchor:h},E):Wc(i)&&(se(i.x)||mw(i.x))&&(se(i.y)||mw(i.y))?Ot({x:a+zn(i.x,u),y:l+zn(i.y,c),textAnchor:"end",verticalAnchor:"end"},E):Ot({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},E)},RVe=function(e){return"cx"in e&&se(e.cx)};function rn(t){var e=t.offset,n=e===void 0?5:e,r=$Ve(t,yVe),s=Ot({offset:n},r),i=s.viewBox,o=s.position,a=s.value,l=s.children,u=s.content,c=s.className,f=c===void 0?"":c,d=s.textBreakAll;if(!i||_e(a)&&_e(l)&&!D.isValidElement(u)&&!Se(u))return null;if(D.isValidElement(u))return D.cloneElement(u,s);var h;if(Se(u)){if(h=D.createElement(u,s),D.isValidElement(h))return h}else h=IVe(s);var p=RVe(i),m=xe(s,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return kVe(s,h,m);var g=p?AVe(s):OVe(s);return F.createElement(sc,ah({className:Fe("recharts-label",f)},m,g,{breakAll:d}),h)}rn.displayName="Label";var yG=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,f=e.x,d=e.y,h=e.top,p=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(se(m)&&se(g)){if(se(f)&&se(d))return{x:f,y:d,width:m,height:g};if(se(h)&&se(p))return{x:h,y:p,width:m,height:g}}return se(f)&&se(d)?{x:f,y:d,width:0,height:0}:se(n)&&se(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},PVe=function(e,n){return e?e===!0?F.createElement(rn,{key:"label-implicit",viewBox:n}):Bt(e)?F.createElement(rn,{key:"label-implicit",viewBox:n,value:e}):D.isValidElement(e)?e.type===rn?D.cloneElement(e,{key:"label-implicit",viewBox:n}):F.createElement(rn,{key:"label-implicit",content:e,viewBox:n}):Se(e)?F.createElement(rn,{key:"label-implicit",content:e,viewBox:n}):Wc(e)?F.createElement(rn,ah({viewBox:n},e,{key:"label-implicit"})):null:null},DVe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=yG(e),o=Bs(s,rn).map(function(l,u){return D.cloneElement(l,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var a=PVe(e.label,n||i);return[a].concat(vVe(o))};rn.parseViewBox=yG;rn.renderCallByParent=DVe;function FVe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var LVe=FVe;const MVe=Le(LVe);function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}var BVe=["valueAccessor"],jVe=["data","dataKey","clockWise","id","textBreakAll"];function UVe(t){return GVe(t)||WVe(t)||VVe(t)||zVe()}function zVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VVe(t,e){if(t){if(typeof t=="string")return aS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aS(t,e)}}function WVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GVe(t){if(Array.isArray(t))return aS(t)}function aS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vy.apply(this,arguments)}function hO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hO(Object(n),!0).forEach(function(r){HVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HVe(t,e,n){return e=qVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qVe(t){var e=KVe(t,"string");return lh(e)=="symbol"?e:String(e)}function KVe(t,e){if(lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mO(t,e){if(t==null)return{};var n=XVe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var YVe=function(e){return Array.isArray(e.value)?MVe(e.value):e.value};function Ha(t){var e=t.valueAccessor,n=e===void 0?YVe:e,r=mO(t,BVe),s=r.data,i=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,u=mO(r,jVe);return!s||!s.length?null:F.createElement(xt,{className:"recharts-label-list"},s.map(function(c,f){var d=_e(i)?n(c,f):ir(c&&c.payload,i),h=_e(a)?{}:{id:"".concat(a,"-").concat(f)};return F.createElement(rn,vy({},xe(c,!0),u,h,{parentViewBox:c.parentViewBox,value:d,textBreakAll:l,viewBox:rn.parseViewBox(_e(o)?c:pO(pO({},c),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Ha.displayName="LabelList";function JVe(t,e){return t?t===!0?F.createElement(Ha,{key:"labelList-implicit",data:e}):F.isValidElement(t)||Se(t)?F.createElement(Ha,{key:"labelList-implicit",data:e,content:t}):Wc(t)?F.createElement(Ha,vy({data:e},t,{key:"labelList-implicit"})):null:null}function QVe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=Bs(r,Ha).map(function(o,a){return D.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return s;var i=JVe(t.label,e);return[i].concat(UVe(s))}Ha.renderCallByParent=QVe;function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function lS(){return lS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lS.apply(this,arguments)}function gO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gO(Object(n),!0).forEach(function(r){ZVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZVe(t,e,n){return e=eWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eWe(t){var e=tWe(t,"string");return uh(e)=="symbol"?e:String(e)}function tWe(t,e){if(uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nWe=function(e,n){var r=Fr(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},tm=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+s,f=Math.asin(l/c)/yy,d=u?i:i+o*f,h=et(n,r,c,d),p=et(n,r,s,d),m=u?i-o*f:i,g=et(n,r,c*Math.cos(f*yy),m);return{center:h,circleTangency:p,lineTangency:g,theta:f}},vG=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=e.endAngle,l=nWe(o,a),u=o+l,c=et(n,r,i,o),f=et(n,r,i,u),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var h=et(n,r,s,o),p=et(n,r,s,u);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},rWe=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,f=Fr(c-u),d=tm({cx:n,cy:r,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:l}),h=d.circleTangency,p=d.lineTangency,m=d.theta,g=tm({cx:n,cy:r,radius:i,angle:c,sign:-f,cornerRadius:o,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,b=g.theta,x=l?Math.abs(u-c):Math.abs(u-c)-m-b;if(x<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):vG({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:u,endAngle:c});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(s>0){var $=tm({cx:n,cy:r,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=$.circleTangency,T=$.lineTangency,N=$.theta,I=tm({cx:n,cy:r,radius:s,angle:c,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),R=I.circleTangency,P=I.lineTangency,M=I.theta,j=l?Math.abs(u-c):Math.abs(u-c)-N-M;if(j<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},sWe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bG=function(e){var n=yO(yO({},sWe),e),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,f=n.endAngle,d=n.className;if(o<i||c===f)return null;var h=Fe("recharts-sector",d),p=o-i,m=zn(a,p,0,!0),g;return m>0&&Math.abs(c-f)<360?g=rWe({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:f}):g=vG({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:c,endAngle:f}),F.createElement("path",lS({},xe(n,!0),{className:h,d:g,role:"img"}))};function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}function uS(){return uS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uS.apply(this,arguments)}function vO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vO(Object(n),!0).forEach(function(r){iWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iWe(t,e,n){return e=oWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oWe(t){var e=aWe(t,"string");return ch(e)=="symbol"?e:String(e)}function aWe(t,e){if(ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xO={curveBasisClosed:xAe,curveBasisOpen:wAe,curveBasis:bAe,curveBumpX:iAe,curveBumpY:oAe,curveLinearClosed:SAe,curveLinear:Q0,curveMonotoneX:$Ae,curveMonotoneY:EAe,curveNatural:TAe,curveStep:_Ae,curveStepAfter:IAe,curveStepBefore:CAe},nm=function(e){return e.x===+e.x&&e.y===+e.y},wf=function(e){return e.x},Sf=function(e){return e.y},lWe=function(e,n){if(Se(e))return e;var r="curve".concat(Y0(e));return(r==="curveMonotone"||r==="curveBump")&&n?xO["".concat(r).concat(n==="vertical"?"Y":"X")]:xO[r]||Q0},uWe=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,i=s===void 0?[]:s,o=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=lWe(r,a),f=u?i.filter(function(m){return nm(m)}):i,d;if(Array.isArray(o)){var h=u?o.filter(function(m){return nm(m)}):o,p=f.map(function(m,g){return bO(bO({},m),{},{base:h[g]})});return a==="vertical"?d=qp().y(Sf).x1(wf).x0(function(m){return m.base.x}):d=qp().x(wf).y1(Sf).y0(function(m){return m.base.y}),d.defined(nm).curve(c),d(p)}return a==="vertical"&&se(o)?d=qp().y(Sf).x1(wf).x0(o):se(o)?d=qp().x(wf).y1(Sf).y0(o):d=S6().x(wf).y(Sf),d.defined(nm).curve(c),d(f)},cS=function(e){var n=e.className,r=e.points,s=e.path,i=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?uWe(e):s;return F.createElement("path",uS({},xe(e,!1),Gg(e),{className:Fe("recharts-curve",n),d:o,ref:i}))},cWe=Object.getOwnPropertyNames,fWe=Object.getOwnPropertySymbols,dWe=Object.prototype.hasOwnProperty;function wO(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function rm(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,s);return i.delete(n),i.delete(r),l}}function SO(t){return cWe(t).concat(fWe(t))}var xG=Object.hasOwn||function(t,e){return dWe.call(t,e)};function ef(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var wG="_owner",$O=Object.getOwnPropertyDescriptor,EO=Object.keys;function hWe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function pWe(t,e){return ef(t.getTime(),e.getTime())}function TO(t,e,n){if(t.size!==e.size)return!1;for(var r={},s=t.entries(),i=0,o,a;(o=s.next())&&!o.done;){for(var l=e.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var f=o.value,d=f[0],h=f[1],p=a.value,m=p[0],g=p[1];!u&&!r[c]&&(u=n.equals(d,m,i,c,t,e,n)&&n.equals(h,g,d,m,t,e,n))&&(r[c]=!0),c++}if(!u)return!1;i++}return!0}function mWe(t,e,n){var r=EO(t),s=r.length;if(EO(e).length!==s)return!1;for(var i;s-- >0;)if(i=r[s],i===wG&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!xG(e,i)||!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function $f(t,e,n){var r=SO(t),s=r.length;if(SO(e).length!==s)return!1;for(var i,o,a;s-- >0;)if(i=r[s],i===wG&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!xG(e,i)||!n.equals(t[i],e[i],i,i,t,e,n)||(o=$O(t,i),a=$O(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function gWe(t,e){return ef(t.valueOf(),e.valueOf())}function yWe(t,e){return t.source===e.source&&t.flags===e.flags}function _O(t,e,n){if(t.size!==e.size)return!1;for(var r={},s=t.values(),i,o;(i=s.next())&&!i.done;){for(var a=e.values(),l=!1,u=0;(o=a.next())&&!o.done;)!l&&!r[u]&&(l=n.equals(i.value,o.value,i.value,o.value,t,e,n))&&(r[u]=!0),u++;if(!l)return!1}return!0}function vWe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var bWe="[object Arguments]",xWe="[object Boolean]",wWe="[object Date]",SWe="[object Map]",$We="[object Number]",EWe="[object Object]",TWe="[object RegExp]",_We="[object Set]",CWe="[object String]",IWe=Array.isArray,CO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,IO=Object.assign,NWe=Object.prototype.toString.call.bind(Object.prototype.toString);function kWe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,s=t.areObjectsEqual,i=t.arePrimitiveWrappersEqual,o=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(c,f,d){if(c===f)return!0;if(c==null||f==null||typeof c!="object"||typeof f!="object")return c!==c&&f!==f;var h=c.constructor;if(h!==f.constructor)return!1;if(h===Object)return s(c,f,d);if(IWe(c))return e(c,f,d);if(CO!=null&&CO(c))return l(c,f,d);if(h===Date)return n(c,f,d);if(h===RegExp)return o(c,f,d);if(h===Map)return r(c,f,d);if(h===Set)return a(c,f,d);var p=NWe(c);return p===wWe?n(c,f,d):p===TWe?o(c,f,d):p===SWe?r(c,f,d):p===_We?a(c,f,d):p===EWe?typeof c.then!="function"&&typeof f.then!="function"&&s(c,f,d):p===bWe?s(c,f,d):p===xWe||p===$We||p===CWe?i(c,f,d):!1}}function AWe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?$f:hWe,areDatesEqual:pWe,areMapsEqual:r?wO(TO,$f):TO,areObjectsEqual:r?$f:mWe,arePrimitiveWrappersEqual:gWe,areRegExpsEqual:yWe,areSetsEqual:r?wO(_O,$f):_O,areTypedArraysEqual:r?$f:vWe};if(n&&(s=IO({},s,n(s))),e){var i=rm(s.areArraysEqual),o=rm(s.areMapsEqual),a=rm(s.areObjectsEqual),l=rm(s.areSetsEqual);s=IO({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function OWe(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function RWe(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(l,u){var c=r(),f=c.cache,d=f===void 0?e?new WeakMap:void 0:f,h=c.meta;return n(l,u,{cache:d,equals:s,meta:h,strict:i})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(l,u){return n(l,u,o)}}var PWe=ta();ta({strict:!0});ta({circular:!0});ta({circular:!0,strict:!0});ta({createInternalComparator:function(){return ef}});ta({strict:!0,createInternalComparator:function(){return ef}});ta({circular:!0,createInternalComparator:function(){return ef}});ta({circular:!0,createInternalComparator:function(){return ef},strict:!0});function ta(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,a=AWe(t),l=kWe(a),u=r?r(l):OWe(l);return RWe({circular:n,comparator:l,createState:s,equals:u,strict:o})}function DWe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function NO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):DWe(s)};requestAnimationFrame(r)}function fS(t){"@babel/helpers - typeof";return fS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fS(t)}function FWe(t){return jWe(t)||BWe(t)||MWe(t)||LWe()}function LWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MWe(t,e){if(t){if(typeof t=="string")return kO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kO(t,e)}}function kO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jWe(t){if(Array.isArray(t))return t}function UWe(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,a=FWe(o),l=a[0],u=a.slice(1);if(typeof l=="number"){NO(s.bind(null,u),l);return}s(l),NO(s.bind(null,u));return}fS(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function AO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function OO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AO(Object(n),!0).forEach(function(r){SG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SG(t,e,n){return e=zWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zWe(t){var e=VWe(t,"string");return fh(e)==="symbol"?e:String(e)}function VWe(t,e){if(fh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WWe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},GWe=function(e){return e},HWe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Yf=function(e,n){return Object.keys(n).reduce(function(r,s){return OO(OO({},r),{},SG({},s,e(s,n[s])))},{})},RO=function(e,n,r){return e.map(function(s){return"".concat(HWe(s)," ").concat(n,"ms ").concat(r)}).join(",")};function qWe(t,e){return YWe(t)||XWe(t,e)||$G(t,e)||KWe()}function KWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function YWe(t){if(Array.isArray(t))return t}function JWe(t){return e6e(t)||ZWe(t)||$G(t)||QWe()}function QWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $G(t,e){if(t){if(typeof t=="string")return dS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dS(t,e)}}function ZWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e6e(t){if(Array.isArray(t))return dS(t)}function dS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var by=1e-4,EG=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},TG=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},PO=function(e,n){return function(r){var s=EG(e,n);return TG(s,r)}},t6e=function(e,n){return function(r){var s=EG(e,n),i=[].concat(JWe(s.map(function(o,a){return o*a}).slice(1)),[0]);return TG(i,r)}},DO=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,a=1;break;case"ease":s=.25,i=.1,o=.25,a=1;break;case"ease-in":s=.42,i=0,o=1,a=1;break;case"ease-out":s=.42,i=0,o=.58,a=1;break;case"ease-in-out":s=0,i=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),c=qWe(u,4);s=c[0],i=c[1],o=c[2],a=c[3]}}}var f=PO(s,o),d=PO(i,a),h=t6e(s,o),p=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,b=v,x=0;x<8;++x){var w=f(b)-v,$=h(b);if(Math.abs(w-v)<by||$<by)return d(b);b=p(b-w/$)}return d(b)};return m.isStepper=!1,m},n6e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,a=o===void 0?17:o,l=function(c,f,d){var h=-(c-f)*r,p=d*i,m=d+(h-p)*a/1e3,g=d*a/1e3+c;return Math.abs(g-f)<by&&Math.abs(m)<by?[f,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},r6e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DO(s);case"spring":return n6e();default:if(s.split("(")[0]==="cubic-bezier")return DO(s)}return typeof s=="function"?s:null};function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function FO(t){return o6e(t)||i6e(t)||_G(t)||s6e()}function s6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function o6e(t){if(Array.isArray(t))return pS(t)}function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(r){hS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hS(t,e,n){return e=a6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a6e(t){var e=l6e(t,"string");return dh(e)==="symbol"?e:String(e)}function l6e(t,e){if(dh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u6e(t,e){return d6e(t)||f6e(t,e)||_G(t,e)||c6e()}function c6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _G(t,e){if(t){if(typeof t=="string")return pS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pS(t,e)}}function pS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function d6e(t){if(Array.isArray(t))return t}var xy=function(e,n,r){return e+(n-e)*r},mS=function(e){var n=e.from,r=e.to;return n!==r},h6e=function t(e,n,r){var s=Yf(function(i,o){if(mS(o)){var a=e(o.from,o.to,o.velocity),l=u6e(a,2),u=l[0],c=l[1];return tn(tn({},o),{},{from:u,velocity:c})}return o},n);return r<1?Yf(function(i,o){return mS(o)?tn(tn({},o),{},{velocity:xy(o.velocity,s[i].velocity,r),from:xy(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const p6e=function(t,e,n,r,s){var i=WWe(t,e),o=i.reduce(function(g,y){return tn(tn({},g),{},hS({},y,[t[y],e[y]]))},{}),a=i.reduce(function(g,y){return tn(tn({},g),{},hS({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,c,f=function(){return null},d=function(){return Yf(function(y,v){return v.from},a)},h=function(){return!Object.values(a).filter(mS).length},p=function(y){u||(u=y);var v=y-u,b=v/n.dt;a=h6e(n,a,b),s(tn(tn(tn({},t),e),d())),u=y,h()||(l=requestAnimationFrame(f))},m=function(y){c||(c=y);var v=(y-c)/r,b=Yf(function(w,$){return xy.apply(void 0,FO($).concat([n(v)]))},o);if(s(tn(tn(tn({},t),e),b)),v<1)l=requestAnimationFrame(f);else{var x=Yf(function(w,$){return xy.apply(void 0,FO($).concat([n(1)]))},o);s(tn(tn(tn({},t),e),x))}};return f=n.isStepper?p:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(t)}var m6e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function g6e(t,e){if(t==null)return{};var n=y6e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function y6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function q1(t){return w6e(t)||x6e(t)||b6e(t)||v6e()}function v6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b6e(t,e){if(t){if(typeof t=="string")return gS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gS(t,e)}}function x6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function w6e(t){if(Array.isArray(t))return gS(t)}function gS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(n),!0).forEach(function(r){Df(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Df(t,e,n){return e=CG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CG(r.key),r)}}function E6e(t,e,n){return e&&$6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CG(t){var e=T6e(t,"string");return uc(e)==="symbol"?e:String(e)}function T6e(t,e){if(uc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yS(t,e)}function yS(t,e){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},yS(t,e)}function C6e(t){var e=I6e();return function(){var r=wy(t),s;if(e){var i=wy(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return vS(this,s)}}function vS(t,e){if(e&&(uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bS(t)}function bS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wy(t){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wy(t)}var jo=function(t){_6e(n,t);var e=C6e(n);function n(r,s){var i;S6e(this,n),i=e.call(this,r,s);var o=i.props,a=o.isActive,l=o.attributeName,u=o.from,c=o.to,f=o.steps,d=o.children,h=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(bS(i)),i.changeStyle=i.changeStyle.bind(bS(i)),!a||h<=0)return i.state={style:{}},typeof d=="function"&&(i.state={style:c}),vS(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof d=="function")return i.state={style:u},vS(i);i.state={style:l?Df({},l,u):u}}else i.state={style:{}};return i}return E6e(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,a=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,c=i.to,f=i.from,d=this.state.style;if(a){if(!o){var h={style:l?Df({},l,c):c};this.state&&d&&(l&&d[l]!==c||!l&&d!==c)&&this.setState(h);return}if(!(PWe(s.to,c)&&s.canBegin&&s.isActive)){var p=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||u?f:s.to;if(this.state&&d){var g={style:l?Df({},l,m):m};(l&&d[l]!==m||!l&&d!==m)&&this.setState(g)}this.runAnimation(Jr(Jr({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,a=s.to,l=s.duration,u=s.easing,c=s.begin,f=s.onAnimationEnd,d=s.onAnimationStart,h=p6e(o,a,r6e(u),l,this.changeStyle),p=function(){i.stopJSAnimation=h()};this.manager.start([d,c,p,l,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,a=s.begin,l=s.onAnimationStart,u=o[0],c=u.style,f=u.duration,d=f===void 0?0:f,h=function(m,g,y){if(y===0)return m;var v=g.duration,b=g.easing,x=b===void 0?"ease":b,w=g.style,$=g.properties,E=g.onAnimationEnd,T=y>0?o[y-1]:g,N=$||Object.keys(w);if(typeof x=="function"||x==="spring")return[].concat(q1(m),[i.runJSAnimation.bind(i,{from:T.style,to:w,duration:v,easing:x}),v]);var I=RO(N,v,x),R=Jr(Jr(Jr({},T.style),w),{},{transition:I});return[].concat(q1(m),[R,v,E]).filter(GWe)};return this.manager.start([l].concat(q1(o.reduce(h,[c,Math.max(d,a)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=UWe());var i=s.begin,o=s.duration,a=s.attributeName,l=s.to,u=s.easing,c=s.onAnimationStart,f=s.onAnimationEnd,d=s.steps,h=s.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(s);return}if(d.length>1){this.runStepAnimation(s);return}var m=a?Df({},a,l):l,g=RO(Object.keys(m),o,u);p.start([c,i,Jr(Jr({},m),{},{transition:g}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var a=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=g6e(s,m6e),u=D.Children.count(i),c=this.state.style;if(typeof i=="function")return i(c);if(!a||u===0||o<=0)return i;var f=function(h){var p=h.props,m=p.style,g=m===void 0?{}:m,y=p.className,v=D.cloneElement(h,Jr(Jr({},l),{},{style:Jr(Jr({},g),c),className:y}));return v};return u===1?f(D.Children.only(i)):F.createElement("div",null,D.Children.map(i,function(d){return f(d)}))}}]),n}(D.PureComponent);jo.displayName="Animate";jo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};jo.propTypes={from:ye.oneOfType([ye.object,ye.string]),to:ye.oneOfType([ye.object,ye.string]),attributeName:ye.string,duration:ye.number,begin:ye.number,easing:ye.oneOfType([ye.string,ye.func]),steps:ye.arrayOf(ye.shape({duration:ye.number.isRequired,style:ye.object.isRequired,easing:ye.oneOfType([ye.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ye.func]),properties:ye.arrayOf("string"),onAnimationEnd:ye.func})),children:ye.oneOfType([ye.node,ye.func]),isActive:ye.bool,canBegin:ye.bool,onAnimationEnd:ye.func,shouldReAnimate:ye.bool,onAnimationStart:ye.func,onAnimationReStart:ye.func};ye.object,ye.object,ye.object,ye.element;ye.object,ye.object,ye.object,ye.oneOfType([ye.array,ye.element]),ye.any;function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sy.apply(this,arguments)}function N6e(t,e){return R6e(t)||O6e(t,e)||A6e(t,e)||k6e()}function k6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A6e(t,e){if(t){if(typeof t=="string")return BO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BO(t,e)}}function BO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function R6e(t){if(Array.isArray(t))return t}function jO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function UO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jO(Object(n),!0).forEach(function(r){P6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P6e(t,e,n){return e=D6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D6e(t){var e=F6e(t,"string");return hh(e)=="symbol"?e:String(e)}function F6e(t,e){if(hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zO=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),a=s>=0?1:-1,l=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,c;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],d=0,h=4;d<h;d++)f[d]=i[d]>o?o:i[d];c="M".concat(e,",").concat(n+a*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(n)),c+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*f[1])),c+="L ".concat(e+r,",").concat(n+s-a*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(n+s)),c+="L ".concat(e+l*f[3],",").concat(n+s),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-a*f[3])),c+="Z"}else if(o>0&&i===+i&&i>0){var p=Math.min(o,i);c="M ".concat(e,",").concat(n+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*p,`
            L `).concat(e+r,",").concat(n+s-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r-l*p,",").concat(n+s,`
            L `).concat(e+l*p,",").concat(n+s,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(n+s-a*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return c},L6e=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(i,i+a),c=Math.max(i,i+a),f=Math.min(o,o+l),d=Math.max(o,o+l);return r>=u&&r<=c&&s>=f&&s<=d}return!1},M6e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZT=function(e){var n=UO(UO({},M6e),e),r=D.useRef(),s=D.useState(-1),i=N6e(s,2),o=i[0],a=i[1];D.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,u=n.y,c=n.width,f=n.height,d=n.radius,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||c===0||f===0)return null;var b=Fe("recharts-rectangle",h);return v?F.createElement(jo,{canBegin:o>0,from:{width:c,height:f,x:l,y:u},to:{width:c,height:f,x:l,y:u},duration:m,animationEasing:p,isActive:v},function(x){var w=x.width,$=x.height,E=x.x,T=x.y;return F.createElement(jo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:p},F.createElement("path",Sy({},xe(n,!0),{className:b,d:zO(E,T,w,$,d),ref:r})))}):F.createElement("path",Sy({},xe(n,!0),{className:b,d:zO(l,u,c,f,d)}))},B6e=["points","className","baseLinePoints","connectNulls"];function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iu.apply(this,arguments)}function j6e(t,e){if(t==null)return{};var n=U6e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function U6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function VO(t){return G6e(t)||W6e(t)||V6e(t)||z6e()}function z6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V6e(t,e){if(t){if(typeof t=="string")return xS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xS(t,e)}}function W6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G6e(t){if(Array.isArray(t))return xS(t)}function xS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var WO=function(e){return e&&e.x===+e.x&&e.y===+e.y},H6e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){WO(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),WO(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Jf=function(e,n){var r=H6e(e);n&&(r=[r.reduce(function(i,o){return[].concat(VO(i),VO(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},q6e=function(e,n,r){var s=Jf(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Jf(n.reverse(),r).slice(1))},K6e=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,i=e.connectNulls,o=j6e(e,B6e);if(!n||!n.length)return null;var a=Fe("recharts-polygon",r);if(s&&s.length){var l=o.stroke&&o.stroke!=="none",u=q6e(n,s,i);return F.createElement("g",{className:a},F.createElement("path",iu({},xe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),l?F.createElement("path",iu({},xe(o,!0),{fill:"none",d:Jf(n,i)})):null,l?F.createElement("path",iu({},xe(o,!0),{fill:"none",d:Jf(s,i)})):null)}var c=Jf(n,i);return F.createElement("path",iu({},xe(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",className:a,d:c}))};function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(this,arguments)}var e_=function(e){var n=e.cx,r=e.cy,s=e.r,i=e.className,o=Fe("recharts-dot",i);return n===+n&&r===+r&&s===+s?F.createElement("circle",wS({},xe(e,!1),Gg(e),{className:o,cx:n,cy:r,r:s})):null};function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}var X6e=["x","y","top","left","width","height","className"];function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(this,arguments)}function GO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Y6e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GO(Object(n),!0).forEach(function(r){J6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J6e(t,e,n){return e=Q6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q6e(t){var e=Z6e(t,"string");return ph(e)=="symbol"?e:String(e)}function Z6e(t,e){if(ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e5e(t,e){if(t==null)return{};var n=t5e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function t5e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var n5e=function(e,n,r,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},r5e=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.top,a=o===void 0?0:o,l=e.left,u=l===void 0?0:l,c=e.width,f=c===void 0?0:c,d=e.height,h=d===void 0?0:d,p=e.className,m=e5e(e,X6e),g=Y6e({x:r,y:i,top:a,left:u,width:f,height:h},m);return!se(r)||!se(i)||!se(f)||!se(h)||!se(a)||!se(u)?null:F.createElement("path",SS({},xe(g,!0),{className:Fe("recharts-cross",p),d:n5e(r,i,f,h,a,u)}))},s5e=uv,i5e=X5,o5e=Qo;function a5e(t,e){return t&&t.length?s5e(t,o5e(e),i5e):void 0}var l5e=a5e;const u5e=Le(l5e);var c5e=uv,f5e=Qo,d5e=Y5;function h5e(t,e){return t&&t.length?c5e(t,f5e(e),d5e):void 0}var p5e=h5e;const m5e=Le(p5e);var g5e=["cx","cy","angle","ticks","axisLine"],y5e=["ticks","tick","angle","tickFormatter","stroke"];function cc(t){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(t)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){pv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qO(t,e){if(t==null)return{};var n=v5e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function v5e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function b5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NG(r.key),r)}}function x5e(t,e,n){return e&&KO(t.prototype,e),n&&KO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w5e(t,e,n){return e=$y(e),S5e(t,IG()?Reflect.construct(e,n||[],$y(t).constructor):e.apply(t,n))}function S5e(t,e){if(e&&(cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $5e(t)}function $5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IG=function(){return!!t})()}function $y(t){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$y(t)}function E5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$S(t,e)}function $S(t,e){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$S(t,e)}function pv(t,e,n){return e=NG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NG(t){var e=T5e(t,"string");return cc(e)=="symbol"?e:String(e)}function T5e(t,e){if(cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mv=function(t){E5e(e,t);function e(){return b5e(this,e),w5e(this,e,arguments)}return x5e(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,a=i.cx,l=i.cy;return et(a,l,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=u5e(a,function(c){return c.coordinate||0}),u=m5e(a,function(c){return c.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=r.axisLine,u=qO(r,g5e),c=a.reduce(function(p,m){return[Math.min(p[0],m.coordinate),Math.max(p[1],m.coordinate)]},[1/0,-1/0]),f=et(s,i,c[0],o),d=et(s,i,c[1],o),h=aa(aa(aa({},xe(u,!1)),{},{fill:"none"},xe(l,!1)),{},{x1:f.x,y1:f.y,x2:d.x,y2:d.y});return F.createElement("line",Qf({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.angle,l=s.tickFormatter,u=s.stroke,c=qO(s,y5e),f=this.getTickTextAnchor(),d=xe(c,!1),h=xe(o,!1),p=i.map(function(m,g){var y=r.getTickValueCoord(m),v=aa(aa(aa(aa({textAnchor:f,transform:"rotate(".concat(90-a,", ").concat(y.x,", ").concat(y.y,")")},d),{},{stroke:"none",fill:u},h),{},{index:g},y),{},{payload:m});return F.createElement(xt,Qf({className:Fe("recharts-polar-radius-axis-tick",gG(o)),key:"tick-".concat(m.coordinate)},X0(r.props,m,g)),e.renderTickItem(o,v,l?l(m.value,g):m.value))});return F.createElement(xt,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:F.createElement(xt,{className:Fe("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),rn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):Se(r)?o=r(s):o=F.createElement(sc,Qf({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}]),e}(D.PureComponent);pv(mv,"displayName","PolarRadiusAxis");pv(mv,"axisType","radiusAxis");pv(mv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(t)}function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$a.apply(this,arguments)}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function la(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){gv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AG(r.key),r)}}function C5e(t,e,n){return e&&YO(t.prototype,e),n&&YO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function I5e(t,e,n){return e=Ey(e),N5e(t,kG()?Reflect.construct(e,n||[],Ey(t).constructor):e.apply(t,n))}function N5e(t,e){if(e&&(fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k5e(t)}function k5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kG=function(){return!!t})()}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ey(t)}function A5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ES(t,e)}function ES(t,e){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ES(t,e)}function gv(t,e,n){return e=AG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AG(t){var e=O5e(t,"string");return fc(e)=="symbol"?e:String(e)}function O5e(t,e){if(fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R5e=Math.PI/180,JO=1e-5,yv=function(t){A5e(e,t);function e(){return _5e(this,e),I5e(this,e,arguments)}return C5e(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,a=s.radius,l=s.orientation,u=s.tickSize,c=u||8,f=et(i,o,a,r.coordinate),d=et(i,o,a+(l==="inner"?-1:1)*c,r.coordinate);return{x1:f.x,y1:f.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*R5e),o;return i>JO?o=s==="outer"?"start":"end":i<-JO?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,a=r.axisLine,l=r.axisLineType,u=la(la({},xe(this.props,!1)),{},{fill:"none"},xe(a,!1));if(l==="circle")return F.createElement(e_,$a({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var c=this.props.ticks,f=c.map(function(d){return et(s,i,o,d.coordinate)});return F.createElement(K6e,$a({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.tickLine,l=s.tickFormatter,u=s.stroke,c=xe(this.props,!1),f=xe(o,!1),d=la(la({},c),{},{fill:"none"},xe(a,!1)),h=i.map(function(p,m){var g=r.getTickLineCoord(p),y=r.getTickTextAnchor(p),v=la(la(la({textAnchor:y},c),{},{stroke:"none",fill:u},f),{},{index:m,payload:p,x:g.x2,y:g.y2});return F.createElement(xt,$a({className:Fe("recharts-polar-angle-axis-tick",gG(o)),key:"tick-".concat(p.coordinate)},X0(r.props,p,m)),a&&F.createElement("line",$a({className:"recharts-polar-angle-axis-tick-line"},d,g)),o&&e.renderTickItem(o,v,l?l(p.value,m):p.value))});return F.createElement(xt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:F.createElement(xt,{className:Fe("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):Se(r)?o=r(s):o=F.createElement(sc,$a({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}]),e}(D.PureComponent);gv(yv,"displayName","PolarAngleAxis");gv(yv,"axisType","angleAxis");gv(yv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var P5e=H6,D5e=P5e(Object.getPrototypeOf,Object),F5e=D5e,L5e=ji,M5e=F5e,B5e=Ui,j5e="[object Object]",U5e=Function.prototype,z5e=Object.prototype,OG=U5e.toString,V5e=z5e.hasOwnProperty,W5e=OG.call(Object);function G5e(t){if(!B5e(t)||L5e(t)!=j5e)return!1;var e=M5e(t);if(e===null)return!0;var n=V5e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&OG.call(n)==W5e}var H5e=G5e;const q5e=Le(H5e);var K5e=ji,X5e=Ui,Y5e="[object Boolean]";function J5e(t){return t===!0||t===!1||X5e(t)&&K5e(t)==Y5e}var Q5e=J5e;const Z5e=Le(Q5e);function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function eGe(t,e){return sGe(t)||rGe(t,e)||nGe(t,e)||tGe()}function tGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nGe(t,e){if(t){if(typeof t=="string")return QO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QO(t,e)}}function QO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function sGe(t){if(Array.isArray(t))return t}function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function eR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(r){iGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iGe(t,e,n){return e=oGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oGe(t){var e=aGe(t,"string");return mh(e)=="symbol"?e:String(e)}function aGe(t,e){if(mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tR=function(e,n,r,s,i){var o=r-s,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+i),a+="L ".concat(e+r-o/2-s,",").concat(n+i),a+="L ".concat(e,",").concat(n," Z"),a},lGe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uGe=function(e){var n=eR(eR({},lGe),e),r=D.useRef(),s=D.useState(-1),i=eGe(s,2),o=i[0],a=i[1];D.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,f=n.lowerWidth,d=n.height,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||d!==+d||c===0&&f===0||d===0)return null;var v=Fe("recharts-trapezoid",h);return y?F.createElement(jo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:u},to:{upperWidth:c,lowerWidth:f,height:d,x:l,y:u},duration:m,animationEasing:p,isActive:y},function(b){var x=b.upperWidth,w=b.lowerWidth,$=b.height,E=b.x,T=b.y;return F.createElement(jo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:p},F.createElement("path",Ty({},xe(n,!0),{className:v,d:tR(E,T,x,w,$),ref:r})))}):F.createElement("g",null,F.createElement("path",Ty({},xe(n,!0),{className:v,d:tR(l,u,c,f,d)})))},cGe=["option","shapeType","propTransformer","activeClassName","isActive"];function gh(t){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(t)}function fGe(t,e){if(t==null)return{};var n=dGe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dGe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(r){hGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hGe(t,e,n){return e=pGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pGe(t){var e=mGe(t,"string");return gh(e)=="symbol"?e:String(e)}function mGe(t,e){if(gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gGe(t,e){return _y(_y({},e),t)}function yGe(t,e){return t==="symbols"}function rR(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return F.createElement(ZT,n);case"trapezoid":return F.createElement(uGe,n);case"sector":return F.createElement(bG,n);case"symbols":if(yGe(e))return F.createElement(mT,n);break;default:return null}}function vGe(t){return D.isValidElement(t)?t.props:t}function bGe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?gGe:r,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,a=t.isActive,l=fGe(t,cGe),u;if(D.isValidElement(e))u=D.cloneElement(e,_y(_y({},l),vGe(e)));else if(Se(e))u=e(l);else if(q5e(e)&&!Z5e(e)){var c=s(e,l);u=F.createElement(rR,{shapeType:n,elementProps:c})}else{var f=l;u=F.createElement(rR,{shapeType:n,elementProps:f})}return a?F.createElement(xt,{className:o},u):u}function vv(t,e){return e!=null&&"trapezoids"in t.props}function bv(t,e){return e!=null&&"sectors"in t.props}function yh(t,e){return e!=null&&"points"in t.props}function xGe(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&i}function wGe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function SGe(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function $Ge(t,e){var n;return vv(t,e)?n=xGe:bv(t,e)?n=wGe:yh(t,e)&&(n=SGe),n}function EGe(t,e){var n;return vv(t,e)?n="trapezoids":bv(t,e)?n="sectors":yh(t,e)&&(n="points"),n}function TGe(t,e){if(vv(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(bv(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return yh(t,e)?e.payload:{}}function _Ge(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=EGe(n,e),i=TGe(n,e),o=r.filter(function(l,u){var c=KT(i,l),f=n.props[s].filter(function(p){var m=$Ge(n,e);return m(p,e)}),d=n.props[s].indexOf(f[f.length-1]),h=u===d;return c&&h}),a=r.indexOf(o[o.length-1]);return a}var Am;function dc(t){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(t)}function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ou.apply(this,arguments)}function sR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sR(Object(n),!0).forEach(function(r){_r(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PG(r.key),r)}}function IGe(t,e,n){return e&&iR(t.prototype,e),n&&iR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NGe(t,e,n){return e=Cy(e),kGe(t,RG()?Reflect.construct(e,n||[],Cy(t).constructor):e.apply(t,n))}function kGe(t,e){if(e&&(dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zl(t)}function RG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RG=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cy(t)}function zl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TS(t,e)}function TS(t,e){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TS(t,e)}function _r(t,e,n){return e=PG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PG(t){var e=OGe(t,"string");return dc(e)=="symbol"?e:String(e)}function OGe(t,e){if(dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xn=function(t){AGe(e,t);function e(n){var r;return CGe(this,e),r=NGe(this,e,[n]),_r(zl(r),"pieRef",null),_r(zl(r),"sectorRefs",[]),_r(zl(r),"id",K0("recharts-pie-")),_r(zl(r),"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Se(s)&&s()}),_r(zl(r),"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Se(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return IGe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,a=i.labelLine,l=i.dataKey,u=i.valueKey,c=xe(this.props,!1),f=xe(o,!1),d=xe(a,!1),h=o&&o.offsetRadius||20,p=r.map(function(m,g){var y=(m.startAngle+m.endAngle)/2,v=et(m.cx,m.cy,m.outerRadius+h,y),b=ut(ut(ut(ut({},c),m),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(v.x,m.cx)},v),x=ut(ut(ut(ut({},c),m),{},{fill:"none",stroke:m.fill},d),{},{index:g,points:[et(m.cx,m.cy,m.outerRadius,y),v],key:"line"}),w=l;return _e(l)&&_e(u)?w="value":_e(l)&&(w=u),F.createElement(xt,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},a&&e.renderLabelLineItem(a,x),e.renderLabelItem(o,b,ir(m,w)))});return F.createElement(xt,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var s=this,i=this.props,o=i.activeShape,a=i.blendStroke,l=i.inactiveShape;return r.map(function(u,c){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=s.isActiveIndex(c),d=l&&s.hasActiveIndex()?l:null,h=f?o:d,p=ut(ut({},u),{},{stroke:a?u.fill:u.stroke,tabIndex:-1});return F.createElement(xt,ou({ref:function(g){g&&!s.sectorRefs.includes(g)&&s.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},X0(s.props,u,c),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(c)}),F.createElement(bGe,ou({option:h,isActive:f,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,i=s.sectors,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,u=s.animationEasing,c=s.animationId,f=this.state,d=f.prevSectors,h=f.prevIsAnimationActive;return F.createElement(jo,{begin:a,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var m=p.t,g=[],y=i&&i[0],v=y.startAngle;return i.forEach(function(b,x){var w=d&&d[x],$=x>0?ms(b,"paddingAngle",0):0;if(w){var E=ZN(w.endAngle-w.startAngle,b.endAngle-b.startAngle),T=ut(ut({},b),{},{startAngle:v+$,endAngle:v+E(m)+$});g.push(T),v=T.endAngle}else{var N=b.endAngle,I=b.startAngle,R=ZN(0,N-I),P=R(m),M=ut(ut({},b),{},{startAngle:v+$,endAngle:v+P+$});g.push(M),v=M.endAngle}}),F.createElement(xt,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[a].focus(),s.setState({sectorToFocus:a});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!KT(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,i=s.hide,o=s.sectors,a=s.className,l=s.label,u=s.cx,c=s.cy,f=s.innerRadius,d=s.outerRadius,h=s.isAnimationActive,p=this.state.isAnimationFinished;if(i||!o||!o.length||!se(u)||!se(c)||!se(f)||!se(d))return null;var m=Fe("recharts-pie",a);return F.createElement(xt,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){r.pieRef=y}},this.renderSectors(),l&&this.renderLabels(o),rn.renderCallByParent(this.props,null,!1),(!h||p)&&Ha.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s){if(F.isValidElement(r))return F.cloneElement(r,s);if(Se(r))return r(s);var i=Fe("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return F.createElement(cS,ou({},s,{type:"linear",className:i}))}},{key:"renderLabelItem",value:function(r,s,i){if(F.isValidElement(r))return F.cloneElement(r,s);var o=i;if(Se(r)&&(o=r(s),F.isValidElement(o)))return o;var a=Fe("recharts-pie-label-text",typeof r!="boolean"&&!Se(r)?r.className:"");return F.createElement(sc,ou({},s,{alignmentBaseline:"middle",className:a}),o)}}]),e}(D.PureComponent);Am=Xn;_r(Xn,"displayName","Pie");_r(Xn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Va.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_r(Xn,"parseDeltaAngle",function(t,e){var n=Fr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});_r(Xn,"getRealPieData",function(t){var e=t.props,n=e.data,r=e.children,s=xe(t.props,!1),i=Bs(r,Co);return n&&n.length?n.map(function(o,a){return ut(ut(ut({payload:o},s),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return ut(ut({},s),o.props)}):[]});_r(Xn,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,i=e.height,o=mG(s,i),a=r+zn(t.props.cx,s,s/2),l=n+zn(t.props.cy,i,i/2),u=zn(t.props.innerRadius,o,0),c=zn(t.props.outerRadius,o,o*.8),f=t.props.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:a,cy:l,innerRadius:u,outerRadius:c,maxRadius:f}});_r(Xn,"getComposedData",function(t){var e=t.item,n=t.offset,r=Am.getRealPieData(e);if(!r||!r.length)return null;var s=e.props,i=s.cornerRadius,o=s.startAngle,a=s.endAngle,l=s.paddingAngle,u=s.dataKey,c=s.nameKey,f=s.valueKey,d=s.tooltipType,h=Math.abs(e.props.minAngle),p=Am.parseCoordinateOfPie(e,n),m=Am.parseDeltaAngle(o,a),g=Math.abs(m),y=u;_e(u)&&_e(f)?(Qu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):_e(u)&&(Qu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var v=r.filter(function(T){return ir(T,y,0)!==0}).length,b=(g>=360?v:v-1)*l,x=g-v*h-b,w=r.reduce(function(T,N){var I=ir(N,y,0);return T+(se(I)?I:0)},0),$;if(w>0){var E;$=r.map(function(T,N){var I=ir(T,y,0),R=ir(T,c,N),P=(se(I)?I:0)/w,M;N?M=E.endAngle+Fr(m)*l*(I!==0?1:0):M=o;var j=M+Fr(m)*((I!==0?h:0)+P*x),W=(M+j)/2,G=(p.innerRadius+p.outerRadius)/2,K=[{name:R,value:I,payload:T,dataKey:y,type:d}],L=et(p.cx,p.cy,G,W);return E=ut(ut(ut({percent:P,cornerRadius:i,name:R,tooltipPayload:K,midAngle:W,middleRadius:G,tooltipPosition:L},T),p),{},{value:ir(T,y),startAngle:M,endAngle:j,payload:T,paddingAngle:Fr(m)*l}),E})}return ut(ut({},p),{},{sectors:$,data:r})});var RGe=Math.ceil,PGe=Math.max;function DGe(t,e,n,r){for(var s=-1,i=PGe(RGe((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var FGe=DGe,LGe=f5,oR=1/0,MGe=17976931348623157e292;function BGe(t){if(!t)return t===0?t:0;if(t=LGe(t),t===oR||t===-oR){var e=t<0?-1:1;return e*MGe}return t===t?t:0}var jGe=BGe,UGe=FGe,zGe=nv,K1=jGe;function VGe(t){return function(e,n,r){return r&&typeof r!="number"&&zGe(e,n,r)&&(n=r=void 0),e=K1(e),n===void 0?(n=e,e=0):n=K1(n),r=r===void 0?e<n?1:-1:K1(r),UGe(e,n,r,t)}}var WGe=VGe,GGe=WGe,HGe=GGe(),qGe=HGe;const Iy=Le(qGe);function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function aR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aR(Object(n),!0).forEach(function(r){DG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DG(t,e,n){return e=KGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KGe(t){var e=XGe(t,"string");return vh(e)=="symbol"?e:String(e)}function XGe(t,e){if(vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YGe=["Webkit","Moz","O","ms"],JGe=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=YGe.reduce(function(i,o){return lR(lR({},i),{},DG({},o+r,n))},{});return s[e]=n,s};function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function Ny(){return Ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ny.apply(this,arguments)}function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function X1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(r){nr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LG(r.key),r)}}function ZGe(t,e,n){return e&&cR(t.prototype,e),n&&cR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function e8e(t,e,n){return e=ky(e),t8e(t,FG()?Reflect.construct(e,n||[],ky(t).constructor):e.apply(t,n))}function t8e(t,e){if(e&&(hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cs(t)}function FG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FG=function(){return!!t})()}function ky(t){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ky(t)}function Cs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_S(t,e)}function nr(t,e,n){return e=LG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LG(t){var e=r8e(t,"string");return hc(e)=="symbol"?e:String(e)}function r8e(t,e){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s8e=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Kf().domain(Iy(0,l)).range([i,i+o-a]),c=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:c}},fR=function(e){return e.changedTouches&&!!e.changedTouches.length},pc=function(t){n8e(e,t);function e(n){var r;return QGe(this,e),r=e8e(this,e,[n]),nr(Cs(r),"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),nr(Cs(r),"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),nr(Cs(r),"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,a=s.startIndex;o==null||o({endIndex:i,startIndex:a})}),r.detachDragEndListener()}),nr(Cs(r),"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),nr(Cs(r),"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),nr(Cs(r),"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),nr(Cs(r),"handleSlideDragStart",function(s){var i=fR(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(Cs(r),"startX"),endX:r.handleTravellerDragStart.bind(Cs(r),"endX")},r.state={},r}return ZGe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,f=Math.min(s,i),d=Math.max(s,i),h=e.getIndexInRange(o,f),p=e.getIndexInRange(o,d);return{startIndex:h-h%l,endIndex:p===c?c:p-p%l}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,a=s.dataKey,l=ir(i[r],a,r);return Se(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,a=s.endX,l=this.props,u=l.x,c=l.width,f=l.travellerWidth,d=l.startIndex,h=l.endIndex,p=l.onChange,m=r.pageX-i;m>0?m=Math.min(m,u+c-f-a,u+c-f-o):m<0&&(m=Math.max(m,u-o,u-a));var g=this.getIndex({startX:o+m,endX:a+m});(g.startIndex!==d||g.endIndex!==h)&&p&&p(g),this.setState({startX:o+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=fR(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,a=s.endX,l=s.startX,u=this.state[o],c=this.props,f=c.x,d=c.width,h=c.travellerWidth,p=c.onChange,m=c.gap,g=c.data,y={startX:this.state.startX,endX:this.state.endX},v=r.pageX-i;v>0?v=Math.min(v,f+d-h-u):v<0&&(v=Math.max(v,f-u)),y[o]=u+v;var b=this.getIndex(y),x=b.startIndex,w=b.endIndex,$=function(){var T=g.length-1;return o==="startX"&&(a>l?x%m===0:w%m===0)||a<l&&w===T||o==="endX"&&(a>l?w%m===0:x%m===0)||a>l&&w===T};this.setState(nr(nr({},o,u+v),"brushMoveStartX",r.pageX),function(){p&&$()&&p(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,a=o.scaleValues,l=o.startX,u=o.endX,c=this.state[s],f=a.indexOf(c);if(f!==-1){var d=f+r;if(!(d===-1||d>=a.length)){var h=a[d];s==="startX"&&h>=u||s==="endX"&&h<=l||this.setState(nr({},s,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.fill,u=r.stroke;return F.createElement("rect",{stroke:u,fill:l,x:s,y:i,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,f=D.Children.only(u);return f?F.cloneElement(f,{x:s,y:i,width:o,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,a=this,l=this.props,u=l.y,c=l.travellerWidth,f=l.height,d=l.traveller,h=l.ariaLabel,p=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),v=X1(X1({},xe(this.props,!1)),{},{x:y,y:u,width:c,height:f}),b=h||"Min value: ".concat((i=p[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=p[g])===null||o===void 0?void 0:o.name);return F.createElement(xt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,v))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,a=i.height,l=i.stroke,u=i.travellerWidth,c=Math.min(r,s)+u,f=Math.max(Math.abs(s-r)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:f,height:a})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,f=c.startX,d=c.endX,h=5,p={pointerEvents:"none",fill:u};return F.createElement(xt,{className:"recharts-brush-texts"},F.createElement(sc,Ny({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,d)-h,y:o+a/2},p),this.getTextOfTick(s)),F.createElement(sc,Ny({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,d)+l+h,y:o+a/2},p),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,a=r.x,l=r.y,u=r.width,c=r.height,f=r.alwaysShowText,d=this.state,h=d.startX,p=d.endX,m=d.isTextActive,g=d.isSlideMoving,y=d.isTravellerMoving,v=d.isTravellerFocused;if(!s||!s.length||!se(a)||!se(l)||!se(u)||!se(c)||u<=0||c<=0)return null;var b=Fe("recharts-brush",i),x=F.Children.count(o)===1,w=JGe("userSelect","none");return F.createElement(xt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(h,p),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(p,"endX"),(m||g||y||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,a=r.height,l=r.stroke,u=Math.floor(i+a/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:s,y:i,width:o,height:a,fill:l,stroke:"none"}),F.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return F.isValidElement(r)?i=F.cloneElement(r,s):Se(r)?i=r(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,f=r.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return X1({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o},i&&i.length?s8e({data:i,width:o,x:a,travellerWidth:l,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||a!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([a,a+o-l]);var d=s.scale.domain().map(function(h){return s.scale(h)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,a=i-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>s?a=l:o=l}return s>=r[a]?a:o}}]),e}(D.PureComponent);nr(pc,"displayName","Brush");nr(pc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var i8e=$T;function o8e(t,e){var n;return i8e(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var a8e=o8e,l8e=M6,u8e=Qo,c8e=a8e,f8e=er,d8e=nv;function h8e(t,e,n){var r=f8e(t)?l8e:c8e;return n&&d8e(t,e,n)&&(e=void 0),r(t,u8e(e))}var p8e=h8e;const m8e=Le(p8e);var Us=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},dR=o5;function g8e(t,e,n){e=="__proto__"&&dR?dR(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var y8e=g8e,v8e=y8e,b8e=s5,x8e=Qo;function w8e(t,e){var n={};return e=x8e(e),b8e(t,function(r,s,i){v8e(n,s,e(r,s,i))}),n}var S8e=w8e;const $8e=Le(S8e);function E8e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var T8e=E8e,_8e=$T;function C8e(t,e){var n=!0;return _8e(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var I8e=C8e,N8e=T8e,k8e=I8e,A8e=Qo,O8e=er,R8e=nv;function P8e(t,e,n){var r=O8e(t)?N8e:k8e;return n&&R8e(t,e,n)&&(e=void 0),r(t,A8e(e))}var D8e=P8e;const F8e=Le(D8e);function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function L8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MG(r.key),r)}}function M8e(t,e,n){return e&&hR(t.prototype,e),n&&hR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pR(Object(n),!0).forEach(function(r){t_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t_(t,e,n){return e=MG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MG(t){var e=B8e(t,"string");return bh(e)=="symbol"?e:String(e)}function B8e(t,e){if(bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BG=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},j8e=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return BG({x:n,y:r},{x:s,y:i})},jG=function(){function t(e){L8e(this,t),this.scale=e}return M8e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}]),t}();t_(jG,"EPS",1e-4);var n_=function(e){var n=Object.keys(e).reduce(function(r,s){return sm(sm({},r),{},t_({},s,jG.create(e[s])))},{});return sm(sm({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,a=i.position;return $8e(s,function(l,u){return n[u].apply(l,{bandAware:o,position:a})})},isInRange:function(s){return F8e(s,function(i,o){return n[o].isInRange(i)})}})},U8e=KIe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),UG=D.createContext(void 0),zG=D.createContext(void 0),VG=D.createContext(void 0),z8e=D.createContext({}),WG=D.createContext(void 0),V8e=D.createContext(0),W8e=D.createContext(0),mR=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=e.clipPathId,a=e.children,l=e.width,u=e.height,c=U8e(i);return F.createElement(UG.Provider,{value:r},F.createElement(zG.Provider,{value:s},F.createElement(z8e.Provider,{value:i},F.createElement(VG.Provider,{value:c},F.createElement(WG.Provider,{value:o},F.createElement(V8e.Provider,{value:u},F.createElement(W8e.Provider,{value:l},a)))))))},G8e=function(){return D.useContext(WG)},H8e=function(e){var n=D.useContext(UG);n==null&&lc();var r=n[e];return r==null&&lc(),r},q8e=function(e){var n=D.useContext(zG);n==null&&lc();var r=n[e];return r==null&&lc(),r},K8e=function(){var e=D.useContext(VG);return e};function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function gR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(n),!0).forEach(function(r){X8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X8e(t,e,n){return e=Y8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y8e(t){var e=J8e(t,"string");return xh(e)=="symbol"?e:String(e)}function J8e(t,e){if(xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q8e(t,e){return nHe(t)||tHe(t,e)||eHe(t,e)||Z8e()}function Z8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eHe(t,e){if(t){if(typeof t=="string")return vR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vR(t,e)}}function vR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function nHe(t){if(Array.isArray(t))return t}function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(this,arguments)}var rHe=function(e,n){var r;return F.isValidElement(e)?r=F.cloneElement(e,n):Se(e)?r=e(n):r=F.createElement("line",CS({},n,{className:"recharts-reference-line-line"})),r},sHe=function(e,n,r,s,i,o,a,l,u){var c=i.x,f=i.y,d=i.width,h=i.height;if(r){var p=u.y,m=e.y.apply(p,{position:o});if(Us(u,"discard")&&!e.y.isInRange(m))return null;var g=[{x:c+d,y:m},{x:c,y:m}];return l==="left"?g.reverse():g}if(n){var y=u.x,v=e.x.apply(y,{position:o});if(Us(u,"discard")&&!e.x.isInRange(v))return null;var b=[{x:v,y:f+h},{x:v,y:f}];return a==="top"?b.reverse():b}if(s){var x=u.segment,w=x.map(function($){return e.apply($,{position:o})});return Us(u,"discard")&&m8e(w,function($){return!e.isInRange($)})?null:w}return null};function r_(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,u=G8e(),c=H8e(s),f=q8e(i),d=K8e();if(!u||!d)return null;Qu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=n_({x:c.scale,y:f.scale}),p=Bt(e),m=Bt(n),g=r&&r.length===2,y=sHe(h,p,m,g,d,t.position,c.orientation,f.orientation,t);if(!y)return null;var v=Q8e(y,2),b=v[0],x=b.x,w=b.y,$=v[1],E=$.x,T=$.y,N=Us(t,"hidden")?"url(#".concat(u,")"):void 0,I=yR(yR({clipPath:N},xe(t,!0)),{},{x1:x,y1:w,x2:E,y2:T});return F.createElement(xt,{className:Fe("recharts-reference-line",a)},rHe(o,I),rn.renderCallByParent(t,j8e({x1:x,y1:w,x2:E,y2:T})))}r_.displayName="ReferenceLine";r_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IS.apply(this,arguments)}function bR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bR(Object(n),!0).forEach(function(r){iHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iHe(t,e,n){return e=oHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oHe(t){var e=aHe(t,"string");return wh(e)=="symbol"?e:String(e)}function aHe(t,e){if(wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lHe=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=n_({x:s.scale,y:i.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return Us(e,"discard")&&!o.isInRange(a)?null:a};function pp(t){var e=t.x,n=t.y,r=t.r,s=t.alwaysShow,i=t.clipPathId,o=Bt(e),a=Bt(n);if(Qu(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!a)return null;var l=lHe(t);if(!l)return null;var u=l.x,c=l.y,f=t.shape,d=t.className,h=Us(t,"hidden")?"url(#".concat(i,")"):void 0,p=xR(xR({clipPath:h},xe(t,!0)),{},{cx:u,cy:c});return F.createElement(xt,{className:Fe("recharts-reference-dot",d)},pp.renderDot(f,p),rn.renderCallByParent(t,{x:u-r,y:c-r,width:2*r,height:2*r}))}pp.displayName="ReferenceDot";pp.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};pp.renderDot=function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):Se(t)?n=t(e):n=F.createElement(e_,IS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n};function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NS.apply(this,arguments)}function wR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function SR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wR(Object(n),!0).forEach(function(r){uHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uHe(t,e,n){return e=cHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cHe(t){var e=fHe(t,"string");return Sh(e)=="symbol"?e:String(e)}function fHe(t,e){if(Sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dHe=function(e,n,r,s,i){var o=i.x1,a=i.x2,l=i.y1,u=i.y2,c=i.xAxis,f=i.yAxis;if(!c||!f)return null;var d=n_({x:c.scale,y:f.scale}),h={x:e?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(l,{position:"start"}):d.y.rangeMin},p={x:n?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:s?d.y.apply(u,{position:"end"}):d.y.rangeMax};return Us(i,"discard")&&(!d.isInRange(h)||!d.isInRange(p))?null:BG(h,p)};function mp(t){var e=t.x1,n=t.x2,r=t.y1,s=t.y2,i=t.className,o=t.alwaysShow,a=t.clipPathId;Qu(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=Bt(e),u=Bt(n),c=Bt(r),f=Bt(s),d=t.shape;if(!l&&!u&&!c&&!f&&!d)return null;var h=dHe(l,u,c,f,t);if(!h&&!d)return null;var p=Us(t,"hidden")?"url(#".concat(a,")"):void 0;return F.createElement(xt,{className:Fe("recharts-reference-area",i)},mp.renderRect(d,SR(SR({clipPath:p},xe(t,!0)),h)),rn.renderCallByParent(t,h))}mp.displayName="ReferenceArea";mp.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};mp.renderRect=function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):Se(t)?n=t(e):n=F.createElement(ZT,NS({},e,{className:"recharts-reference-area-rect"})),n};function $R(t){return gHe(t)||mHe(t)||pHe(t)||hHe()}function hHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pHe(t,e){if(t){if(typeof t=="string")return kS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kS(t,e)}}function mHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gHe(t){if(Array.isArray(t))return kS(t)}function kS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var AS=function(e,n,r,s,i){var o=Bs(e,r_),a=Bs(e,pp),l=[].concat($R(o),$R(a)),u=Bs(e,mp),c="".concat(s,"Id"),f=s[0],d=n;if(l.length&&(d=l.reduce(function(m,g){if(g.props[c]===r&&Us(g.props,"extendDomain")&&se(g.props[f])){var y=g.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},d)),u.length){var h="".concat(f,"1"),p="".concat(f,"2");d=u.reduce(function(m,g){if(g.props[c]===r&&Us(g.props,"extendDomain")&&se(g.props[h])&&se(g.props[p])){var y=g.props[h],v=g.props[p];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},d)}return i&&i.length&&(d=i.reduce(function(m,g){return se(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},d)),d},GG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new s(c,f||l,d),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,p=new Array(h);d<h;d++)p[d]=f[d].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,d,h,p){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,d),!0;case 5:return g.fn.call(g.context,c,f,d,h),!0;case 6:return g.fn.call(g.context,c,f,d,h,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var x=g.length,w;for(b=0;b<x;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,f);break;case 4:g[b].fn.call(g[b].context,c,f,d);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[b].fn.apply(g[b].context,v)}}return!0},a.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,d){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||d&&!p[m].once||f&&p[m].context!==f)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(GG);var yHe=GG.exports;const vHe=Le(yHe);var Y1=new vHe,J1="recharts.syncMouseEvents";function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function bHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xHe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HG(r.key),r)}}function wHe(t,e,n){return e&&xHe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q1(t,e,n){return e=HG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HG(t){var e=SHe(t,"string");return $h(e)=="symbol"?e:String(e)}function SHe(t,e){if($h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $He=function(){function t(){bHe(this,t),Q1(this,"activeIndex",0),Q1(this,"coordinateList",[]),Q1(this,"layout","horizontal")}return wHe(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,a=o===void 0?null:o,l=n.layout,u=l===void 0?null:l,c=n.offset,f=c===void 0?null:c,d=n.mouseHandlerCallback,h=d===void 0?null:d;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,a=s.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=i+l+u,d=o+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:f,pageY:d})}}}]),t}();function EHe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&se(r)&&se(s))return!0}return!1}function THe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function qG(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,i=t.endAngle,o=et(e,n,r,s),a=et(e,n,r,i);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function _He(t,e,n){var r,s,i,o;if(t==="horizontal")r=e.x,i=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,f=e.angle,d=et(a,l,u,f),h=et(a,l,c,f);r=d.x,s=d.y,i=h.x,o=h.y}else return qG(e);return[{x:r,y:s},{x:i,y:o}]}function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function ER(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function im(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ER(Object(n),!0).forEach(function(r){CHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CHe(t,e,n){return e=IHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IHe(t){var e=NHe(t,"string");return Eh(e)=="symbol"?e:String(e)}function NHe(t,e){if(Eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kHe(t){var e=t.element,n=t.tooltipEventType,r=t.isActive,s=t.activeCoordinate,i=t.activePayload,o=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,u=t.layout,c=t.chartName;if(!e||!e.props.cursor||!r||!s||c!=="ScatterChart"&&n!=="axis")return null;var f,d=cS;if(c==="ScatterChart")f=s,d=r5e;else if(c==="BarChart")f=THe(u,s,o,l),d=ZT;else if(u==="radial"){var h=qG(s),p=h.cx,m=h.cy,g=h.radius,y=h.startAngle,v=h.endAngle;f={cx:p,cy:m,startAngle:y,endAngle:v,innerRadius:g,outerRadius:g},d=bG}else f={points:_He(u,s,o)},d=cS;var b=im(im(im(im({stroke:"#ccc",pointerEvents:"none"},o),f),xe(e.props.cursor,!1)),{},{payload:i,payloadIndex:a,className:Fe("recharts-tooltip-cursor",e.props.cursor.className)});return D.isValidElement(e.props.cursor)?D.cloneElement(e.props.cursor,b):D.createElement(d,b)}var AHe=["item"],OHe=["children","className","width","height","style","compact","title","desc"];function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(this,arguments)}function TR(t,e){return DHe(t)||PHe(t,e)||XG(t,e)||RHe()}function RHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function DHe(t){if(Array.isArray(t))return t}function _R(t,e){if(t==null)return{};var n=FHe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FHe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function LHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MHe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YG(r.key),r)}}function BHe(t,e,n){return e&&MHe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jHe(t,e,n){return e=Ay(e),UHe(t,KG()?Reflect.construct(e,n||[],Ay(t).constructor):e.apply(t,n))}function UHe(t,e){if(e&&(mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(t)}function KG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KG=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ay(t)}function Ie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OS(t,e)}function OS(t,e){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OS(t,e)}function gc(t){return GHe(t)||WHe(t)||XG(t)||VHe()}function VHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XG(t,e){if(t){if(typeof t=="string")return RS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RS(t,e)}}function WHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GHe(t){if(Array.isArray(t))return RS(t)}function RS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pe(t,e,n){return e=YG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YG(t){var e=HHe(t,"string");return mc(e)=="symbol"?e:String(e)}function HHe(t,e){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qHe={xAxis:["bottom","top"],yAxis:["left","right"]},KHe={width:"100%",height:"100%"},JG={x:0,y:0};function om(t){return t}var XHe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},YHe=function(e,n,r,s){var i=n.find(function(c){return c&&c.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,a=s.radius;return V(V(V({},s),et(s.cx,s.cy,a,o)),{},{angle:o,radius:a})}var l=i.coordinate,u=s.angle;return V(V(V({},s),et(s.cx,s.cy,l,u)),{},{angle:u,radius:l})}return JG},xv=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(gc(a),gc(u)):a},[]);return o.length>0?o:e&&e.length&&se(s)&&se(i)?e.slice(s,i+1):[]};function QG(t){return t==="number"?[0,"auto"]:void 0}var PS=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,a=xv(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,u){var c,f=(c=u.props.data)!==null&&c!==void 0?c:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(o.dataKey&&!o.allowDuplicatedCategory){var h=f===void 0?a:f;d=gw(h,o.dataKey,s)}else d=f&&f[r]||a[r];return d?[].concat(gc(l),[rVe(u,d)]):l},[])},IR=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=XHe(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Uze(o,a,u,l);if(c>=0&&u){var f=u[c]&&u[c].value,d=PS(e,n,c,f),h=YHe(r,a,c,i);return{activeTooltipIndex:c,activeLabel:f,activePayload:d,activeCoordinate:h}}return null},JHe=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,f=e.children,d=e.stackOffset,h=dG(c,i);return r.reduce(function(p,m){var g,y=m.props,v=y.type,b=y.dataKey,x=y.allowDataOverflow,w=y.allowDuplicatedCategory,$=y.scale,E=y.ticks,T=y.includeHidden,N=m.props[o];if(p[N])return p;var I=xv(e.data,{graphicalItems:s.filter(function(le){return le.props[o]===N}),dataStartIndex:l,dataEndIndex:u}),R=I.length,P,M,j;EHe(m.props.domain,x,v)&&(P=sS(m.props.domain,null,x),h&&(v==="number"||$!=="auto")&&(j=Xf(I,b,"category")));var W=QG(v);if(!P||P.length===0){var G,K=(G=m.props.domain)!==null&&G!==void 0?G:W;if(b){if(P=Xf(I,b,v),v==="category"&&h){var L=KNe(P);w&&L?(M=P,P=Iy(0,R)):w||(P=lO(K,P,m).reduce(function(le,Ae){return le.indexOf(Ae)>=0?le:[].concat(gc(le),[Ae])},[]))}else if(v==="category")w?P=P.filter(function(le){return le!==""&&!_e(le)}):P=lO(K,P,m).reduce(function(le,Ae){return le.indexOf(Ae)>=0||Ae===""||_e(Ae)?le:[].concat(gc(le),[Ae])},[]);else if(v==="number"){var H=Hze(I,s.filter(function(le){return le.props[o]===N&&(T||!le.props.hide)}),b,i,c);H&&(P=H)}h&&(v==="number"||$!=="auto")&&(j=Xf(I,b,"category"))}else h?P=Iy(0,R):a&&a[N]&&a[N].hasStack&&v==="number"?P=d==="expand"?[0,1]:hG(a[N].stackGroups,l,u):P=fG(I,s.filter(function(le){return le.props[o]===N&&(T||!le.props.hide)}),v,c,!0);if(v==="number")P=AS(f,P,N,i,E),K&&(P=sS(K,P,x));else if(v==="category"&&K){var te=K,ce=P.every(function(le){return te.indexOf(le)>=0});ce&&(P=te)}}return V(V({},p),{},pe({},N,V(V({},m.props),{},{axisType:i,domain:P,categoricalDomain:j,duplicateDomain:M,originalDomain:(g=m.props.domain)!==null&&g!==void 0?g:W,isCategorical:h,layout:c})))},{})},QHe=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,f=e.children,d=xv(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=d.length,p=dG(c,i),m=-1;return r.reduce(function(g,y){var v=y.props[o],b=QG("number");if(!g[v]){m++;var x;return p?x=Iy(0,h):a&&a[v]&&a[v].hasStack?(x=hG(a[v].stackGroups,l,u),x=AS(f,x,v,i)):(x=sS(b,fG(d,r.filter(function(w){return w.props[o]===v&&!w.props.hide}),"number",c),s.defaultProps.allowDataOverflow),x=AS(f,x,v,i)),V(V({},g),{},pe({},v,V(V({axisType:i},s.defaultProps),{},{hide:!0,orientation:ms(qHe,"".concat(i,".").concat(m%2),null),domain:x,originalDomain:b,isCategorical:p,layout:c})))}return g},{})},ZHe=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,f="".concat(s,"Id"),d=Bs(c,i),h={};return d&&d.length?h=JHe(e,{axes:d,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(h=QHe(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),h},eqe=function(e){var n=Ul(e),r=Pf(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:ET(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:iS(n,r)}},NR=function(e){var n=e.children,r=e.defaultShowTooltip,s=wr(n,pc),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},tqe=function(e){return!e||!e.length?!1:e.some(function(n){var r=_o(n&&n.type);return r&&r.indexOf("Bar")>=0})},kR=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},nqe=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,f=r.children,d=r.margin||{},h=wr(f,pc),p=wr(f,Gd),m=Object.keys(l).reduce(function(w,$){var E=l[$],T=E.orientation;return!E.mirror&&!E.hide?V(V({},w),{},pe({},T,w[T]+E.width)):w},{left:d.left||0,right:d.right||0}),g=Object.keys(o).reduce(function(w,$){var E=o[$],T=E.orientation;return!E.mirror&&!E.hide?V(V({},w),{},pe({},T,ms(w,"".concat(T))+E.height)):w},{top:d.top||0,bottom:d.bottom||0}),y=V(V({},g),m),v=y.bottom;h&&(y.bottom+=h.props.height||pc.defaultProps.height),p&&n&&(y=Wze(y,s,r,n));var b=u-y.left-y.right,x=c-y.top-y.bottom;return V(V({brushBottom:v},y),{},{width:Math.max(b,0),height:Math.max(x,0)})},rqe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},sqe=function(e){var n,r=e.chartName,s=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,u=e.axisComponents,c=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,h=function(g,y){var v=y.graphicalItems,b=y.stackGroups,x=y.offset,w=y.updateId,$=y.dataStartIndex,E=y.dataEndIndex,T=g.barSize,N=g.layout,I=g.barGap,R=g.barCategoryGap,P=g.maxBarSize,M=kR(N),j=M.numericAxisName,W=M.cateAxisName,G=tqe(v),K=[];return v.forEach(function(L,H){var te=xv(g.data,{graphicalItems:[L],dataStartIndex:$,dataEndIndex:E}),ce=L.props,le=ce.dataKey,Ae=ce.maxBarSize,vt=L.props["".concat(j,"Id")],en=L.props["".concat(W,"Id")],un={},kt=u.reduce(function(na,ra){var wv=y["".concat(ra.axisType,"Map")],s_=L.props["".concat(ra.axisType,"Id")];wv&&wv[s_]||ra.axisType==="zAxis"||lc();var i_=wv[s_];return V(V({},na),{},pe(pe({},ra.axisType,i_),"".concat(ra.axisType,"Ticks"),Pf(i_)))},un),Qs=kt[W],ie=kt["".concat(W,"Ticks")],ge=b&&b[vt]&&b[vt].hasStack&&tVe(L,b[vt].stackGroups),we=_o(L.type).indexOf("Bar")>=0,q=iS(Qs,ie),wt=[],Oe=G&&zze({barSize:T,stackGroups:b,totalSize:rqe(kt,W)});if(we){var At,_t,tr=_e(Ae)?P:Ae,Zs=(At=(_t=iS(Qs,ie,!0))!==null&&_t!==void 0?_t:tr)!==null&&At!==void 0?At:0;wt=Vze({barGap:I,barCategoryGap:R,bandSize:Zs!==q?Zs:q,sizeList:Oe[en],maxBarSize:tr}),Zs!==q&&(wt=wt.map(function(na){return V(V({},na),{},{position:V(V({},na.position),{},{offset:na.position.offset-Zs/2})})}))}var gp=L&&L.type&&L.type.getComposedData;gp&&K.push({props:V(V({},gp(V(V({},kt),{},{displayedData:te,props:g,dataKey:le,item:L,bandSize:q,barPosition:wt,offset:x,stackedData:ge,layout:N,dataStartIndex:$,dataEndIndex:E}))),{},pe(pe(pe({key:L.key||"item-".concat(H)},j,kt[j]),W,kt[W]),"animationId",w)),childIndex:ike(L,g.children),item:L})}),K},p=function(g,y){var v=g.props,b=g.dataStartIndex,x=g.dataEndIndex,w=g.updateId;if(!sk({props:v}))return null;var $=v.children,E=v.layout,T=v.stackOffset,N=v.data,I=v.reverseStackOrder,R=kR(E),P=R.numericAxisName,M=R.cateAxisName,j=Bs($,s),W=Zze(N,j,"".concat(P,"Id"),"".concat(M,"Id"),T,I),G=u.reduce(function(ce,le){var Ae="".concat(le.axisType,"Map");return V(V({},ce),{},pe({},Ae,ZHe(v,V(V({},le),{},{graphicalItems:j,stackGroups:le.axisType===P&&W,dataStartIndex:b,dataEndIndex:x}))))},{}),K=nqe(V(V({},G),{},{props:v,graphicalItems:j}),y==null?void 0:y.legendBBox);Object.keys(G).forEach(function(ce){G[ce]=f(v,G[ce],K,ce.replace("Map",""),r)});var L=G["".concat(M,"Map")],H=eqe(L),te=h(v,V(V({},G),{},{dataStartIndex:b,dataEndIndex:x,updateId:w,graphicalItems:j,stackGroups:W,offset:K}));return V(V({formattedGraphicalItems:te,graphicalItems:j,offset:K,stackGroups:W},H),G)};return n=function(m){zHe(g,m);function g(y){var v,b,x;return LHe(this,g),x=jHe(this,g,[y]),pe(Ie(x),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),pe(Ie(x),"accessibilityManager",new $He),pe(Ie(x),"handleLegendBBoxUpdate",function(w){if(w){var $=x.state,E=$.dataStartIndex,T=$.dataEndIndex,N=$.updateId;x.setState(V({legendBBox:w},p({props:x.props,dataStartIndex:E,dataEndIndex:T,updateId:N},V(V({},x.state),{},{legendBBox:w}))))}}),pe(Ie(x),"handleReceiveSyncEvent",function(w,$,E){if(x.props.syncId===w){if(E===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent($)}}),pe(Ie(x),"handleBrushChange",function(w){var $=w.startIndex,E=w.endIndex;if($!==x.state.dataStartIndex||E!==x.state.dataEndIndex){var T=x.state.updateId;x.setState(function(){return V({dataStartIndex:$,dataEndIndex:E},p({props:x.props,dataStartIndex:$,dataEndIndex:E,updateId:T},x.state))}),x.triggerSyncEvent({dataStartIndex:$,dataEndIndex:E})}}),pe(Ie(x),"handleMouseEnter",function(w){var $=x.getMouseInfo(w);if($){var E=V(V({},$),{},{isTooltipActive:!0});x.setState(E),x.triggerSyncEvent(E);var T=x.props.onMouseEnter;Se(T)&&T(E,w)}}),pe(Ie(x),"triggeredAfterMouseMove",function(w){var $=x.getMouseInfo(w),E=$?V(V({},$),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(E),x.triggerSyncEvent(E);var T=x.props.onMouseMove;Se(T)&&T(E,w)}),pe(Ie(x),"handleItemMouseEnter",function(w){x.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),pe(Ie(x),"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),pe(Ie(x),"handleMouseMove",function(w){w.persist(),x.throttleTriggeredAfterMouseMove(w)}),pe(Ie(x),"handleMouseLeave",function(w){x.throttleTriggeredAfterMouseMove.cancel();var $={isTooltipActive:!1};x.setState($),x.triggerSyncEvent($);var E=x.props.onMouseLeave;Se(E)&&E($,w)}),pe(Ie(x),"handleOuterEvent",function(w){var $=ske(w),E=ms(x.props,"".concat($));if($&&Se(E)){var T,N;/.*touch.*/i.test($)?N=x.getMouseInfo(w.changedTouches[0]):N=x.getMouseInfo(w),E((T=N)!==null&&T!==void 0?T:{},w)}}),pe(Ie(x),"handleClick",function(w){var $=x.getMouseInfo(w);if($){var E=V(V({},$),{},{isTooltipActive:!0});x.setState(E),x.triggerSyncEvent(E);var T=x.props.onClick;Se(T)&&T(E,w)}}),pe(Ie(x),"handleMouseDown",function(w){var $=x.props.onMouseDown;if(Se($)){var E=x.getMouseInfo(w);$(E,w)}}),pe(Ie(x),"handleMouseUp",function(w){var $=x.props.onMouseUp;if(Se($)){var E=x.getMouseInfo(w);$(E,w)}}),pe(Ie(x),"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),pe(Ie(x),"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseDown(w.changedTouches[0])}),pe(Ie(x),"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseUp(w.changedTouches[0])}),pe(Ie(x),"triggerSyncEvent",function(w){x.props.syncId!==void 0&&Y1.emit(J1,x.props.syncId,w,x.eventEmitterSymbol)}),pe(Ie(x),"applySyncEvent",function(w){var $=x.props,E=$.layout,T=$.syncMethod,N=x.state.updateId,I=w.dataStartIndex,R=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)x.setState(V({dataStartIndex:I,dataEndIndex:R},p({props:x.props,dataStartIndex:I,dataEndIndex:R,updateId:N},x.state)));else if(w.activeTooltipIndex!==void 0){var P=w.chartX,M=w.chartY,j=w.activeTooltipIndex,W=x.state,G=W.offset,K=W.tooltipTicks;if(!G)return;if(typeof T=="function")j=T(K,w);else if(T==="value"){j=-1;for(var L=0;L<K.length;L++)if(K[L].value===w.activeLabel){j=L;break}}var H=V(V({},G),{},{x:G.left,y:G.top}),te=Math.min(P,H.x+H.width),ce=Math.min(M,H.y+H.height),le=K[j]&&K[j].value,Ae=PS(x.state,x.props.data,j),vt=K[j]?{x:E==="horizontal"?K[j].coordinate:te,y:E==="horizontal"?ce:K[j].coordinate}:JG;x.setState(V(V({},w),{},{activeLabel:le,activeCoordinate:vt,activePayload:Ae,activeTooltipIndex:j}))}else x.setState(w)}),pe(Ie(x),"renderCursor",function(w){var $,E=x.state,T=E.isTooltipActive,N=E.activeCoordinate,I=E.activePayload,R=E.offset,P=E.activeTooltipIndex,M=E.tooltipAxisBandSize,j=x.getTooltipEventType(),W=($=w.props.active)!==null&&$!==void 0?$:T,G=x.props.layout,K=w.key||"_recharts-cursor";return F.createElement(kHe,{key:K,activeCoordinate:N,activePayload:I,activeTooltipIndex:P,chartName:r,element:w,isActive:W,layout:G,offset:R,tooltipAxisBandSize:M,tooltipEventType:j})}),pe(Ie(x),"renderPolarAxis",function(w,$,E){var T=ms(w,"type.axisType"),N=ms(x.state,"".concat(T,"Map")),I=N&&N[w.props["".concat(T,"Id")]];return D.cloneElement(w,V(V({},I),{},{className:Fe(T,I.className),key:w.key||"".concat($,"-").concat(E),ticks:Pf(I,!0)}))}),pe(Ie(x),"renderPolarGrid",function(w){var $=w.props,E=$.radialLines,T=$.polarAngles,N=$.polarRadius,I=x.state,R=I.radiusAxisMap,P=I.angleAxisMap,M=Ul(R),j=Ul(P),W=j.cx,G=j.cy,K=j.innerRadius,L=j.outerRadius;return D.cloneElement(w,{polarAngles:Array.isArray(T)?T:Pf(j,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(N)?N:Pf(M,!0).map(function(H){return H.coordinate}),cx:W,cy:G,innerRadius:K,outerRadius:L,key:w.key||"polar-grid",radialLines:E})}),pe(Ie(x),"renderLegend",function(){var w=x.state.formattedGraphicalItems,$=x.props,E=$.children,T=$.width,N=$.height,I=x.props.margin||{},R=T-(I.left||0)-(I.right||0),P=uG({children:E,formattedGraphicalItems:w,legendWidth:R,legendContent:c});if(!P)return null;var M=P.item,j=_R(P,AHe);return D.cloneElement(M,V(V({},j),{},{chartWidth:T,chartHeight:N,margin:I,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),pe(Ie(x),"renderTooltip",function(){var w,$=x.props,E=$.children,T=$.accessibilityLayer,N=wr(E,ni);if(!N)return null;var I=x.state,R=I.isTooltipActive,P=I.activeCoordinate,M=I.activePayload,j=I.activeLabel,W=I.offset,G=(w=N.props.active)!==null&&w!==void 0?w:R;return D.cloneElement(N,{viewBox:V(V({},W),{},{x:W.left,y:W.top}),active:G,label:j,payload:G?M:[],coordinate:P,accessibilityLayer:T})}),pe(Ie(x),"renderBrush",function(w){var $=x.props,E=$.margin,T=$.data,N=x.state,I=N.offset,R=N.dataStartIndex,P=N.dataEndIndex,M=N.updateId;return D.cloneElement(w,{key:w.key||"_recharts-brush",onChange:em(x.handleBrushChange,w.props.onChange),data:T,x:se(w.props.x)?w.props.x:I.left,y:se(w.props.y)?w.props.y:I.top+I.height+I.brushBottom-(E.bottom||0),width:se(w.props.width)?w.props.width:I.width,startIndex:R,endIndex:P,updateId:"brush-".concat(M)})}),pe(Ie(x),"renderReferenceElement",function(w,$,E){if(!w)return null;var T=Ie(x),N=T.clipPathId,I=x.state,R=I.xAxisMap,P=I.yAxisMap,M=I.offset,j=w.props,W=j.xAxisId,G=j.yAxisId;return D.cloneElement(w,{key:w.key||"".concat($,"-").concat(E),xAxis:R[W],yAxis:P[G],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:N})}),pe(Ie(x),"renderActivePoints",function(w){var $=w.item,E=w.activePoint,T=w.basePoint,N=w.childIndex,I=w.isRange,R=[],P=$.props.key,M=$.item.props,j=M.activeDot,W=M.dataKey,G=V(V({index:N,dataKey:W,cx:E.x,cy:E.y,r:4,fill:QT($.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value,key:"".concat(P,"-activePoint-").concat(N)},xe(j,!1)),Gg(j));return R.push(g.renderActiveDot(j,G)),T?R.push(g.renderActiveDot(j,V(V({},G),{},{cx:T.x,cy:T.y,key:"".concat(P,"-basePoint-").concat(N)}))):I&&R.push(null),R}),pe(Ie(x),"renderGraphicChild",function(w,$,E){var T=x.filterFormatItem(w,$,E);if(!T)return null;var N=x.getTooltipEventType(),I=x.state,R=I.isTooltipActive,P=I.tooltipAxis,M=I.activeTooltipIndex,j=I.activeLabel,W=x.props.children,G=wr(W,ni),K=T.props,L=K.points,H=K.isRange,te=K.baseLine,ce=T.item.props,le=ce.activeDot,Ae=ce.hide,vt=ce.activeBar,en=ce.activeShape,un=!!(!Ae&&R&&G&&(le||vt||en)),kt={};N!=="axis"&&G&&G.props.trigger==="click"?kt={onClick:em(x.handleItemMouseEnter,w.props.onClick)}:N!=="axis"&&(kt={onMouseLeave:em(x.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:em(x.handleItemMouseEnter,w.props.onMouseEnter)});var Qs=D.cloneElement(w,V(V({},T.props),kt));function ie(ra){return typeof P.dataKey=="function"?P.dataKey(ra.payload):null}if(un)if(M>=0){var ge,we;if(P.dataKey&&!P.allowDuplicatedCategory){var q=typeof P.dataKey=="function"?ie:"payload.".concat(P.dataKey.toString());ge=gw(L,q,j),we=H&&te&&gw(te,q,j)}else ge=L==null?void 0:L[M],we=H&&te&&te[M];if(en||vt){var wt=w.props.activeIndex!==void 0?w.props.activeIndex:M;return[D.cloneElement(w,V(V(V({},T.props),kt),{},{activeIndex:wt})),null,null]}if(!_e(ge))return[Qs].concat(gc(x.renderActivePoints({item:T,activePoint:ge,basePoint:we,childIndex:M,isRange:H})))}else{var Oe,At=(Oe=x.getItemByXY(x.state.activeCoordinate))!==null&&Oe!==void 0?Oe:{graphicalItem:Qs},_t=At.graphicalItem,tr=_t.item,Zs=tr===void 0?w:tr,gp=_t.childIndex,na=V(V(V({},T.props),kt),{},{activeIndex:gp});return[D.cloneElement(Zs,na),null,null]}return H?[Qs,null,null]:[Qs,null]}),pe(Ie(x),"renderCustomized",function(w,$,E){return D.cloneElement(w,V(V({key:"recharts-customized-".concat(E)},x.props),x.state))}),pe(Ie(x),"renderMap",{CartesianGrid:{handler:om,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:om},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:om},YAxis:{handler:om},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((v=y.id)!==null&&v!==void 0?v:K0("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=gBe(x.triggeredAfterMouseMove,(b=y.throttleDelay)!==null&&b!==void 0?b:1e3/60),x.state={},x}return BHe(g,[{key:"componentDidMount",value:function(){var v,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,b=v.children,x=v.data,w=v.height,$=v.layout,E=wr(b,ni);if(E){var T=E.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length)){var N=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,I=PS(this.state,x,T,N),R=this.state.tooltipTicks[T].coordinate,P=(this.state.offset.top+w)/2,M=$==="horizontal",j=M?{x:R,y:P}:{y:R,x:P},W=this.state.formattedGraphicalItems.find(function(K){var L=K.item;return L.type.name==="Scatter"});W&&(j=V(V({},j),W.props.points[T].tooltipPosition),I=W.props.points[T].tooltipPayload);var G={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:N,activePayload:I,activeCoordinate:j};this.setState(G),this.renderCursor(E),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var x,w;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(v){bw([wr(v.children,ni)],[wr(this.props.children,ni)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=wr(this.props.children,ni);if(v&&typeof v.props.shared=="boolean"){var b=v.props.shared?"axis":"item";return l.indexOf(b)>=0?b:o}return o}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var b=this.container,x=b.getBoundingClientRect(),w=$Be(x),$={chartX:Math.round(v.pageX-w.left),chartY:Math.round(v.pageY-w.top)},E=x.width/b.offsetWidth||1,T=this.inRange($.chartX,$.chartY,E);if(!T)return null;var N=this.state,I=N.xAxisMap,R=N.yAxisMap,P=this.getTooltipEventType();if(P!=="axis"&&I&&R){var M=Ul(I).scale,j=Ul(R).scale,W=M&&M.invert?M.invert($.chartX):null,G=j&&j.invert?j.invert($.chartY):null;return V(V({},$),{},{xValue:W,yValue:G})}var K=IR(this.state,this.props.data,this.props.layout,T);return K?V(V({},$),K):null}},{key:"inRange",value:function(v,b){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,$=v/x,E=b/x;if(w==="horizontal"||w==="vertical"){var T=this.state.offset,N=$>=T.left&&$<=T.left+T.width&&E>=T.top&&E<=T.top+T.height;return N?{x:$,y:E}:null}var I=this.state,R=I.angleAxisMap,P=I.radiusAxisMap;if(R&&P){var M=Ul(R);return fO({x:$,y:E},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,b=this.getTooltipEventType(),x=wr(v,ni),w={};x&&b==="axis"&&(x.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var $=Gg(this.props,this.handleOuterEvent);return V(V({},$),w)}},{key:"addListener",value:function(){Y1.on(J1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Y1.removeListener(J1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,b,x){for(var w=this.state.formattedGraphicalItems,$=0,E=w.length;$<E;$++){var T=w[$];if(T.item===v||T.props.key===v.key||b===_o(T.item.type)&&x===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,b=this.state.offset,x=b.left,w=b.top,$=b.height,E=b.width;return F.createElement("defs",null,F.createElement("clipPath",{id:v},F.createElement("rect",{x,y:w,height:$,width:E})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(b,x){var w=TR(x,2),$=w[0],E=w[1];return V(V({},b),{},pe({},$,E.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(b,x){var w=TR(x,2),$=w[0],E=w[1];return V(V({},b),{},pe({},$,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(v){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(v){var b=this.state,x=b.formattedGraphicalItems,w=b.activeItem;if(x&&x.length)for(var $=0,E=x.length;$<E;$++){var T=x[$],N=T.props,I=T.item,R=_o(I.type);if(R==="Bar"){var P=(N.data||[]).find(function(G){return L6e(v,G)});if(P)return{graphicalItem:T,payload:P}}else if(R==="RadialBar"){var M=(N.data||[]).find(function(G){return fO(v,G)});if(M)return{graphicalItem:T,payload:M}}else if(vv(T,w)||bv(T,w)||yh(T,w)){var j=_Ge({graphicalItem:T,activeTooltipItem:w,itemData:I.props.data}),W=I.props.activeIndex===void 0?j:I.props.activeIndex;return{graphicalItem:V(V({},T),{},{childIndex:W}),payload:yh(T,w)?I.props.data[j]:T.props.data[j]}}}return null}},{key:"render",value:function(){var v=this;if(!sk(this))return null;var b=this.props,x=b.children,w=b.className,$=b.width,E=b.height,T=b.style,N=b.compact,I=b.title,R=b.desc,P=_R(b,OHe),M=xe(P,!1);if(N)return F.createElement(mR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(ww,Zf({},M,{width:$,height:E,title:I,desc:R}),this.renderClipPath(),ok(x,this.renderMap)));if(this.props.accessibilityLayer){var j,W;M.tabIndex=(j=this.props.tabIndex)!==null&&j!==void 0?j:0,M.role=(W=this.props.role)!==null&&W!==void 0?W:"application",M.onKeyDown=function(K){v.accessibilityManager.keyboardEvent(K)},M.onFocus=function(){v.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return F.createElement(mR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",Zf({className:Fe("recharts-wrapper",w),style:V({position:"relative",cursor:"default",width:$,height:E},T)},G,{ref:function(L){v.container=L}}),F.createElement(ww,Zf({},M,{width:$,height:E,title:I,desc:R,style:KHe}),this.renderClipPath(),ok(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),g}(D.Component),pe(n,"displayName",r),pe(n,"defaultProps",V({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),pe(n,"getDerivedStateFromProps",function(m,g){var y=m.dataKey,v=m.data,b=m.children,x=m.width,w=m.height,$=m.layout,E=m.stackOffset,T=m.margin,N=g.dataStartIndex,I=g.dataEndIndex;if(g.updateId===void 0){var R=NR(m);return V(V(V({},R),{},{updateId:0},p(V(V({props:m},R),{},{updateId:0}),g)),{},{prevDataKey:y,prevData:v,prevWidth:x,prevHeight:w,prevLayout:$,prevStackOffset:E,prevMargin:T,prevChildren:b})}if(y!==g.prevDataKey||v!==g.prevData||x!==g.prevWidth||w!==g.prevHeight||$!==g.prevLayout||E!==g.prevStackOffset||!yw(T,g.prevMargin)){var P=NR(m),M={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},j=V(V({},IR(g,v,$)),{},{updateId:g.updateId+1}),W=V(V(V({},P),M),j);return V(V(V({},W),p(V({props:m},W),g)),{},{prevDataKey:y,prevData:v,prevWidth:x,prevHeight:w,prevLayout:$,prevStackOffset:E,prevMargin:T,prevChildren:b})}if(!bw(b,g.prevChildren)){var G,K,L,H,te=wr(b,pc),ce=te&&(G=(K=te.props)===null||K===void 0?void 0:K.startIndex)!==null&&G!==void 0?G:N,le=te&&(L=(H=te.props)===null||H===void 0?void 0:H.endIndex)!==null&&L!==void 0?L:I,Ae=ce!==N||le!==I,vt=!_e(v),en=vt&&!Ae?g.updateId:g.updateId+1;return V(V({updateId:en},p(V(V({props:m},g),{},{updateId:en,dataStartIndex:ce,dataEndIndex:le}),g)),{},{prevChildren:b,dataStartIndex:ce,dataEndIndex:le})}return null}),pe(n,"renderActiveDot",function(m,g){var y;return D.isValidElement(m)?y=D.cloneElement(m,g):Se(m)?y=m(g):y=F.createElement(e_,g),F.createElement(xt,{className:"recharts-active-dot",key:g.key},y)}),n},_u=sqe({chartName:"PieChart",GraphicalChild:Xn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:yv},{axisType:"radiusAxis",AxisComp:mv}],formatAxisMap:dVe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const iqe=()=>{const t=[{value:80},{value:20}],e=[{value:50},{value:50}],n=[{value:40},{value:60}],r=["#ff9800","#e0e0e0"],s=["#03a9f4","#e0e0e0"],i=["#4caf50","#e0e0e0"],o=[{name:"Curso 1",period:"24-1"},{name:"Curso 2",period:"24-1"},{name:"Curso 3",period:"24-1"}];return k.jsxs("div",{className:"courses-container",children:[k.jsxs("div",{className:"courses-main",children:[k.jsx("h2",{className:"courses-title",children:"Mis Cursos"}),k.jsxs("div",{className:"performance-metrics",children:[k.jsxs("div",{className:"metric-card",children:[k.jsx(_u,{width:100,height:100,children:k.jsx(Xn,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:40,innerRadius:20,dataKey:"value",children:t.map((a,l)=>k.jsx(Co,{fill:r[l%r.length]},`cell-${l}`))})}),k.jsxs("div",{className:"metric-info",children:[k.jsx("h3",{className:"metric-title",children:"Rendimiento General"}),k.jsx("p",{children:"80%"})," "]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx(_u,{width:100,height:100,children:k.jsx(Xn,{data:e,cx:"50%",cy:"50%",labelLine:!1,outerRadius:40,innerRadius:20,dataKey:"value",children:e.map((a,l)=>k.jsx(Co,{fill:s[l%s.length]},`cell-${l}`))})}),k.jsxs("div",{className:"metric-info",children:[k.jsx("h3",{className:"metric-title",children:"Rendimiento PC1"}),k.jsx("p",{children:"50%"})," "]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx(_u,{width:100,height:100,children:k.jsx(Xn,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:40,innerRadius:20,dataKey:"value",children:n.map((a,l)=>k.jsx(Co,{fill:i[l%i.length]},`cell-${l}`))})}),k.jsxs("div",{className:"metric-info",children:[k.jsx("h3",{className:"metric-title",children:"Rendimiento PC2"}),k.jsx("p",{children:"40%"})," "]})]})]}),k.jsx("h3",{className:"courses-subtitle",children:"Cursos"}),k.jsx("div",{className:"courses-list",children:o.map((a,l)=>k.jsxs("div",{className:"course-card",children:[k.jsx("span",{className:"course-name",children:a.name}),k.jsx("span",{className:"course-period",children:a.period}),k.jsx("span",{className:"course-toggle",children:"▼"})]},l))})]}),k.jsxs("div",{className:"tasks-section",children:[k.jsx("h3",{className:"tasks-title",children:"Mis Tareas"}),k.jsxs("div",{className:"tasks-list",children:[k.jsx("div",{className:"task-item",children:"Tarea 1 ------- Fecha"}),k.jsx("div",{className:"task-item",children:"Tarea 2 ------- Fecha"})]}),k.jsx("button",{className:"add-task-btn",children:"Añadir Tarea"})]})]})},oqe=()=>{const t=[{value:80},{value:20}],e=[{value:50},{value:50}],n=[{value:40},{value:60}],r=["#ff9800","#e0e0e0"],s=["#03a9f4","#e0e0e0"],i=["#4caf50","#e0e0e0"];return k.jsxs("div",{className:"dashboard",children:[k.jsx("h2",{className:"dashboard-title",children:"Mi progreso"}),k.jsxs("div",{className:"dashboard-stats",children:[k.jsxs("div",{className:"stat-card",children:[k.jsx(_u,{width:100,height:100,children:k.jsx(Xn,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:40,innerRadius:20,dataKey:"value",children:t.map((o,a)=>k.jsx(Co,{fill:r[a%r.length]},`cell-${a}`))})}),k.jsxs("div",{className:"stat-info",children:[k.jsx("h3",{className:"stat-title",children:"Cursos aprobados"}),k.jsx("p",{className:"stat-value",children:"80%"})]})]}),k.jsxs("div",{className:"stat-card",children:[k.jsx(_u,{width:100,height:100,children:k.jsx(Xn,{data:e,cx:"50%",cy:"50%",labelLine:!1,outerRadius:40,innerRadius:20,dataKey:"value",children:e.map((o,a)=>k.jsx(Co,{fill:s[a%s.length]},`cell-${a}`))})}),k.jsxs("div",{className:"stat-info",children:[k.jsx("h3",{className:"stat-title",children:"Avance total de la carrera"}),k.jsx("p",{className:"stat-value",children:"50%"})]})]}),k.jsxs("div",{className:"stat-card",children:[k.jsx(_u,{width:100,height:100,children:k.jsx(Xn,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:40,innerRadius:20,dataKey:"value",children:n.map((o,a)=>k.jsx(Co,{fill:i[a%i.length]},`cell-${a}`))})}),k.jsxs("div",{className:"stat-info",children:[k.jsx("h3",{className:"stat-title",children:"Reseñas brindadas"}),k.jsx("p",{className:"stat-value",children:"40%"})]})]})]}),k.jsx("h3",{className:"dashboard-subtitle",children:"Periodos"}),k.jsxs("div",{className:"dashboard-periods",children:[k.jsxs("div",{className:"period-card",children:[k.jsx("span",{className:"period-name",children:"1° Ciclo"}),k.jsx("span",{className:"period-value",children:"22-2"}),k.jsx("span",{className:"period-edit",children:k.jsx(n1,{size:18})})]}),k.jsxs("div",{className:"period-card",children:[k.jsx("span",{className:"period-name",children:"2° Ciclo"}),k.jsx("span",{className:"period-value",children:"23-1"}),k.jsx("span",{className:"period-edit",children:k.jsx(n1,{size:18})})]}),k.jsxs("div",{className:"period-card",children:[k.jsx("span",{className:"period-name",children:"3° Ciclo"}),k.jsx("span",{className:"period-value",children:"23-2"}),k.jsx("span",{className:"period-edit",children:k.jsx(n1,{size:18})})]})]})]})},aqe=()=>k.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"30px"},children:[k.jsx("pre",{children:"<-----------------"}),"Hola!!! Presione Menu para comensar :D"]}),lqe="/Project_S11_Domingo/assets/google-icon-hlK2hna-.svg",uqe="/Project_S11_Domingo/assets/logo-CKQ2yMoI.svg",cqe=()=>{const[t,e]=D.useState(null);$c();const n=async()=>{e(null);try{const r=await fX(Fu,mY)}catch(r){console.error("Error al iniciar sesión con Google",r),e("Error al iniciar sesión con Google")}};return k.jsxs("div",{className:"login-container",children:[k.jsx("div",{className:"login-logo",children:k.jsx("img",{src:uqe,alt:"Unipath Logo"})}),k.jsx("h2",{className:"login-title",children:"Log in"}),k.jsxs("button",{onClick:n,className:"google-login-btn",children:[k.jsx("img",{src:lqe,alt:"Google Icon",className:"icon"}),"Continue with Google"]}),t&&k.jsx("p",{className:"error-message",children:t}),k.jsx("p",{className:"login-footer",children:'"Mejora tu desempeño académico con esta plataforma"'})]})},fqe=()=>{const t=D.useRef(null),e=D.useRef(null);return D.useEffect(()=>{const n=async()=>{const i=await OU.load();t.current&&(t.current.srcObject=await navigator.mediaDevices.getUserMedia({video:!0}),t.current.onloadedmetadata=()=>{t.current.play(),r(t.current,i)})},r=(i,o)=>{o.detect(i).then(a=>{s(a),requestAnimationFrame(()=>{r(i,o)})})},s=i=>{const o=e.current.getContext("2d");o.clearRect(0,0,e.current.width,e.current.height),e.current.width=t.current.videoWidth,e.current.height=t.current.videoHeight,i.forEach(a=>{const[l,u,c,f]=a.bbox;o.strokeStyle="#00FF00",o.lineWidth=4,o.strokeRect(l,u,c,f),o.fillStyle="#00FF00",o.fillText(`${a.class} (${Math.round(a.score*100)}%)`,l,u>10?u-5:10)})};n()},[]),k.jsxs("div",{children:[k.jsx("h2",{children:"Detección de Objetos en Tiempo Real"}),k.jsx("video",{ref:t,style:{width:"100%"}}),k.jsx("canvas",{ref:e,style:{position:"absolute",top:0,left:0}})]})},dqe=()=>k.jsxs("div",{className:"tasks-section",children:[k.jsx("h3",{className:"tasks-title",children:"Mis Tareas"}),k.jsxs("div",{className:"tasks-list",children:[k.jsx("div",{className:"task-item",children:"Tarea 1 ------- Fecha"}),k.jsx("div",{className:"task-item",children:"Tarea 2 ------- Fecha"})]}),k.jsx("button",{className:"add-task-btn",children:"Añadir Tarea"})]}),hqe=()=>{const t=[{name:"Centros de Estudiantes"},{name:"Programa de Ayudantía"},{name:"Alumnos voluntarios"},{name:"Videos Recomendados por Alumnos Anteriores"}];return k.jsxs("div",{className:"tutoring-container",children:[k.jsxs("div",{className:"tutoring-main",children:[k.jsx("h2",{className:"tutoring-title",children:"Tutoría"}),k.jsx("div",{className:"tutoring-list",children:t.map((e,n)=>k.jsxs("div",{className:"tutoring-item",children:[k.jsx("span",{children:e.name}),k.jsx("span",{children:"▼"})]},n))})]}),k.jsx(dqe,{})]})};function pqe(){const{theme:t,toggleTheme:e}=D.useContext(q3),[n,r,s]=lY(Fu),i=$c(),o=Sc();return D.useEffect(()=>{t===z3?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[t]),D.useEffect(()=>{r||n||o.pathname!=="/login"&&i("/login")},[n,r,i,o.pathname]),r?k.jsx("div",{children:"Loading..."}):s?k.jsxs("div",{children:["Error: ",s.message]}):k.jsxs(k.Fragment,{children:[k.jsx(y7,{children:n?k.jsxs(_s,{element:k.jsx(OY,{}),children:[k.jsx(_s,{path:"/",element:k.jsx(p7,{to:"/dashboard"})}),k.jsx(_s,{path:"/dashboard",element:k.jsx(oqe,{})}),k.jsx(_s,{path:"/courses",element:k.jsx(iqe,{})}),k.jsx(_s,{path:"/chatbot",element:k.jsx(f_e,{})}),k.jsx(_s,{path:"/deteccion",element:k.jsx(fqe,{})}),k.jsx(_s,{path:"/tutoring",element:k.jsx(hqe,{})})," ",k.jsx(_s,{path:"*",element:k.jsx(aqe,{})})]}):k.jsx(_s,{path:"/login",element:k.jsx(cqe,{})})}),k.jsx("button",{type:"button",className:"theme-toggle-btn",onClick:e,children:k.jsx("img",{className:"theme-icon",src:t===rx?cY:uY})})]})}Z1.createRoot(document.getElementById("root")).render(k.jsx(K3,{children:k.jsx(Q3,{children:k.jsx(E7,{basename:"/Project_S11_Domingo",children:k.jsx(pqe,{})})})}));
